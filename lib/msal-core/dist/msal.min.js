/*! msal v0.2.4 2019-02-13 */

'use strict';
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Msal",[],t):"object"==typeof exports?exports.Msal=t():e.Msal=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){}return e.compareObjects=function(e,t){return!(!e||!t)&&!(!e.userIdentifier||!t.userIdentifier||e.userIdentifier!==t.userIdentifier)},e.expiresIn=function(e){return e||(e="3599"),this.now()+parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,r=this.base64DecodeStringUrlSafe(n);return r?JSON.parse(r):null}catch(e){}return null},e.base64EncodeStringUrlSafe=function(e){return window.btoa?window.btoa(e):this.encode(e)},e.base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(encodeURIComponent(window.atob(e))):decodeURIComponent(encodeURIComponent(this.decode(e)))},e.encode=function(e){var t,n,r,o,i,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=this.utf8Encode(e);l<e.length;)o=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(r=e.charCodeAt(l++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),u=u+c.charAt(o)+c.charAt(i)+c.charAt(s)+c.charAt(a);return u.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},e.decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var r,o,i,s,a,c,u,l,d="",h=0;h<n;h+=4){if(r=t.indexOf(e.charAt(h)),o=t.indexOf(e.charAt(h+1)),i=t.indexOf(e.charAt(h+2)),s=t.indexOf(e.charAt(h+3)),h+2===n-1){c=(a=r<<18|o<<12|i<<6)>>16&255,u=a>>8&255,d+=String.fromCharCode(c,u);break}if(h+1===n-1){c=(a=r<<18|o<<12)>>16&255,d+=String.fromCharCode(c);break}c=(a=r<<18|o<<12|i<<6|s)>>16&255,u=a>>8&255,l=255&a,d+=String.fromCharCode(c,u,l)}return d},e.decodeJwt=function(e){if(this.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.deserialize=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},i={};for(t=r.exec(e);t;)i[o(t[1])]=o(t[2]),t=r.exec(e);return i},e.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every(function(t){return e.indexOf(t.toString().toLowerCase())>=0})},e.convertToLowerCase=function(e){return e.map(function(e){return e.toLowerCase()})},e.removeElement=function(e,t){return e.filter(function(e){return e!==t})},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.getLibraryVersion=function(){return"0.2.4"},e.replaceFirstPath=function(e,t){if(!t)return e;var n=this.GetUrlComponents(e),o=n.PathSegments;return 0===o.length||o[0]!==r.Constants.common&&o[0]!==r.Constants.organizations||(o[0]=t,e=n.Protocol+"//"+n.HostNameAndPort+"/"+o.join("/")),e},e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);return t.getRandomValues(n),n[6]|=64,n[6]&=79,n[8]|=128,n[8]&=191,e.decimalToHex(n[0])+e.decimalToHex(n[1])+e.decimalToHex(n[2])+e.decimalToHex(n[3])+"-"+e.decimalToHex(n[4])+e.decimalToHex(n[5])+"-"+e.decimalToHex(n[6])+e.decimalToHex(n[7])+"-"+e.decimalToHex(n[8])+e.decimalToHex(n[9])+"-"+e.decimalToHex(n[10])+e.decimalToHex(n[11])+e.decimalToHex(n[12])+e.decimalToHex(n[13])+e.decimalToHex(n[14])+e.decimalToHex(n[15])}for(var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",i=0,s="",a=0;a<36;a++)"-"!==r[a]&&"4"!==r[a]&&(i=16*Math.random()|0),"x"===r[a]?s+=o[i]:"y"===r[a]?(i&=3,s+=o[i|=8]):s+=r[a];return s},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5]},o=r.AbsolutePath.split("/");return o=o.filter(function(e){return e&&e.length>0}),r.PathSegments=o,r},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.checkSSO=function(e){return!(e&&(-1!==e.indexOf(r.Constants.login_hint)||-1!==e.indexOf(r.Constants.sid)))},e.constructUnifiedCacheExtraQueryParameter=function(e,t){return e?e.hasOwnProperty(r.Constants.upn)?(t=this.urlRemoveQueryStringParameter(t,r.Constants.login_hint),(t=this.urlRemoveQueryStringParameter(t,r.Constants.domain_hint))?t+"&"+r.Constants.login_hint+"="+e.upn+"&"+r.Constants.domain_hint+"="+r.Constants.organizations:"&"+r.Constants.login_hint+"="+e.upn+"&"+r.Constants.domain_hint+"="+r.Constants.organizations):(t=this.urlRemoveQueryStringParameter(t,r.Constants.domain_hint))?t+"&"+r.Constants.domain_hint+"="+r.Constants.organizations:"&"+r.Constants.domain_hint+"="+r.Constants.organizations:t},e.urlRemoveQueryStringParameter=function(e,t){if(this.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},e}();t.Utils=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"errorDescription",{get:function(){return"error_description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"error",{get:function(){return"error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scope",{get:function(){return"scope"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenUser",{get:function(){return"msal.acquireTokenUser"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientInfo",{get:function(){return"client_info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authority",{get:function(){return"msal.authority"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idToken",{get:function(){return"id_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessToken",{get:function(){return"access_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expiresIn",{get:function(){return"expires_in"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sessionState",{get:function(){return"session_state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalClientInfo",{get:function(){return"msal.client.info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalError",{get:function(){return"msal.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalErrorDescription",{get:function(){return"msal.error.description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalSessionState",{get:function(){return"msal.session.state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenKeys",{get:function(){return"msal.token.keys"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessTokenKey",{get:function(){return"msal.access.token.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expirationKey",{get:function(){return"msal.expiration.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateLogin",{get:function(){return"msal.state.login"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateAcquireToken",{get:function(){return"msal.state.acquireToken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateRenew",{get:function(){return"msal.state.renew"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nonceIdToken",{get:function(){return"msal.nonce.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userName",{get:function(){return"msal.username"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idTokenKey",{get:function(){return"msal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginRequest",{get:function(){return"msal.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginError",{get:function(){return"msal.login.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewStatus",{get:function(){return"msal.token.renew.status"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msal",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_user",{get:function(){return"NO_USER"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login_hint",{get:function(){return"login_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"domain_hint",{get:function(){return"domain_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"organizations",{get:function(){return"organizations"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumers",{get:function(){return"consumers"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumersUtid",{get:function(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sid",{get:function(){return"sid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimeter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCancelled",{get:function(){return"Canceled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCompleted",{get:function(){return"Completed"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusInProgress",{get:function(){return"In Progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"urlHash",{get:function(){return"msal.urlHash"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"angularLoginRequest",{get:function(){return"msal.angular.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userIdentifier",{get:function(){return"userIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}();t.Constants=r;var o=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"login_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"acquiretoken_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"input_scopes_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"endpoints_resolution_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"popup_window_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"user_login_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"user_cancelled"},enumerable:!0,configurable:!0}),e}();t.ErrorCodes=o;var i=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"Login is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"Acquire token is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"Invalid value of input scopes provided"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"Endpoints cannot be resolved"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"User login is required"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"User closed the popup window and cancelled the flow"},enumerable:!0,configurable:!0}),e}();t.ErrorDescription=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),i=n(10);!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}(t.AuthorityType||(t.AuthorityType={}));var s=function(){function e(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=r.Utils.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=r.Utils.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw o.ErrorMessage.invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw o.ErrorMessage.authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw o.ErrorMessage.authorityUriInvalidPath},e.prototype.DiscoverEndpoints=function(e){return(new i.XhrClient).sendRequestAsync(e,"GET",!0).then(function(e){return{AuthorizationEndpoint:e.authorization_endpoint,EndSessionEndpoint:e.end_session_endpoint,Issuer:e.issuer}})},e.prototype.ResolveEndpointsAsync=function(){var e=this,t="";return this.GetOpenIdConfigurationEndpointAsync().then(function(n){return t=n,e.DiscoverEndpoints(t)}).then(function(t){return e.tenantDiscoveryResponse=t,e})},e}();t.Authority=s},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */Object.defineProperty(t,"__esModule",{value:!0});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function s(e){return this instanceof s?(this.v=e,this):new s(e)}t.__extends=function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t.__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},t.__decorate=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},t.__param=function(e,t){return function(n,r){t(n,r,e)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},t.__generator=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=o,t.__read=i,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},t.__await=s,t.__asyncGenerator=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||c(e,t)})})}function c(e,t){try{(n=o[e](t)).value instanceof s?Promise.resolve(n.value.v).then(u,l):d(i[0][2],n)}catch(e){d(i[0][3],e)}var n}function u(e){c("next",e)}function l(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},t.__asyncDelegator=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){e[r]&&(t[r]=function(t){return(n=!n)?{value:s(e[r](t)),done:"return"===r}:o?o(t):t})}},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):o(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0);!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(r=t.LogLevel||(t.LogLevel={}));var i=function(){function e(e,t){void 0===t&&(t={}),this._level=r.Info;var n=t.correlationId,o=void 0===n?"":n,i=t.level,s=void 0===i?r.Info:i,a=t.piiLoggingEnabled,c=void 0!==a&&a;this._localCallback=e,this._correlationId=o,this._level=s,this._piiLoggingEnabled=c}return e.prototype.logMessage=function(e,t,n){if(!(e>this._level||!this._piiLoggingEnabled&&n)){var i,s=(new Date).toUTCString();i=o.Utils.isEmpty(this._correlationId)?s+":"+o.Utils.getLibraryVersion()+"-"+r[e]+" "+t:s+":"+this._correlationId+"-"+o.Utils.getLibraryVersion()+"-"+r[e]+" "+t,this.executeCallback(e,i,n)}},e.prototype.executeCallback=function(e,t,n){this._localCallback&&this._localCallback(e,t,n)},e.prototype.error=function(e){this.logMessage(r.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(r.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(r.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(r.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(r.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(r.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(r.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(r.Verbose,e,!0)},e}();t.Logger=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"authorityUriInvalidPath",{get:function(){return"AuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authorityUriInsecure",{get:function(){return"AuthorityUriInsecure"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"invalidAuthorityType",{get:function(){return"InvalidAuthorityType"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unsupportedAuthorityValidation",{get:function(){return"UnsupportedAuthorityValidation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"b2cAuthorityUriInvalidPath",{get:function(){return"B2cAuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),e}();t.ErrorMessage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(13),i=n(14),s=n(15),a=n(16),c=n(1),u=n(17),l=n(4),d=n(18),h=n(7),p=n(8),f=n(0),g=n(20),m="id_token",y="token",C="id_token token",w=function(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.isInIframe()?new Promise(function(){}):r.apply(this,e)},n},_=function(){function e(e,t,n,r){void 0===r&&(r={}),this._cacheLocations={localStorage:"localStorage",sessionStorage:"sessionStorage"},this._clockSkew=300,this._tokenReceivedCallback=null,this._isAngular=!1;var o=r.validateAuthority,i=void 0===o||o,s=r.cacheLocation,a=void 0===s?"sessionStorage":s,u=r.redirectUri,h=void 0===u?function(){return window.location.href.split("?")[0].split("#")[0]}:u,p=r.postLogoutRedirectUri,f=void 0===p?function(){return window.location.href.split("?")[0].split("#")[0]}:p,g=r.logger,m=void 0===g?new l.Logger(null):g,y=r.loadFrameTimeout,C=void 0===y?6e3:y,w=r.navigateToLoginRequestUrl,_=void 0===w||w,v=r.state,b=void 0===v?"":v,I=r.isAngular,k=void 0!==I&&I,S=r.unprotectedResources,T=void 0===S?new Array:S,P=r.protectedResourceMap,U=void 0===P?new Map:P,A=r.storeAuthStateInCookie,E=void 0!==A&&A;if(this.loadFrameTimeout=C,this.clientId=e,this.validateAuthority=i,this.authority=t||"https://login.microsoftonline.com/common",this._tokenReceivedCallback=n,this._redirectUri=h,this._postLogoutredirectUri=f,this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._cacheLocation=a,this._navigateToLoginRequestUrl=_,this._state=b,this._isAngular=k,this._unprotectedResources=T,this._protectedResourceMap=U,!this._cacheLocations[a])throw new Error("Cache Location is not valid. Provided value:"+this._cacheLocation+".Possible values are: "+this._cacheLocations.localStorage+", "+this._cacheLocations.sessionStorage);this._cacheStorage=new d.Storage(this._cacheLocation),this._logger=m,this.storeAuthStateInCookie=E,window.openedWindows=[],window.activeRenewals={},window.renewStates=[],window.callBackMappedToRenewStates={},window.callBacksMappedToRenewStates={},window.msal=this;var O=window.location.hash,R=this.isCallback(O);if(!this._isAngular)if(R)this.handleAuthenticationResponse.call(this,O);else{var x=this._cacheStorage.getItem(c.Constants.urlHash);x&&this.processCallBack(x)}}return Object.defineProperty(e.prototype,"cacheLocation",{get:function(){return this._cacheLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=g.AuthorityFactory.CreateInstance(e,this.validateAuthority)},enumerable:!0,configurable:!0}),e.prototype.processCallBack=function(e){this._logger.info("Processing the callback from redirect response");var t=this.getRequestInfo(e);this.saveTokenFromHash(t);var n,r=t.parameters[c.Constants.accessToken]||t.parameters[c.Constants.idToken],o=t.parameters[c.Constants.errorDescription],i=t.parameters[c.Constants.error];n=t.parameters[c.Constants.accessToken]?c.Constants.accessToken:c.Constants.idToken,this._cacheStorage.removeItem(c.Constants.urlHash);try{this._tokenReceivedCallback&&(this._cacheStorage.clearCookie(),this._tokenReceivedCallback.call(this,o,r,i,n,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie))))}catch(e){this._logger.error("Error occurred in token received callback function: "+e)}},e.prototype.getRedirectUri=function(){return"function"==typeof this._redirectUri?this._redirectUri():this._redirectUri},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this._postLogoutredirectUri?this._postLogoutredirectUri():this._postLogoutredirectUri},e.prototype.loginRedirect=function(e,t){var n=this;if(this._loginInProgress&&this._tokenReceivedCallback)this._tokenReceivedCallback(c.ErrorDescription.loginProgressError,null,c.ErrorCodes.loginProgressError,c.Constants.idToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));else{if(e){var r=this.validateInputScope(e);if(r&&!f.Utils.isEmpty(r)&&this._tokenReceivedCallback)return void this._tokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.idToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));e=this.filterScopes(e)}var o;(o=this.extractADALIdToken())&&!e?(this._logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=f.Utils.constructUnifiedCacheExtraQueryParameter(o,t),this._silentLogin=!0,this.acquireTokenSilent([this.clientId],this.authority,this.getUser(),t).then(function(e){n._silentLogin=!1,n._logger.info("Unified cache call is successful"),n._tokenReceivedCallback&&n._tokenReceivedCallback.call(n,null,e,null,c.Constants.idToken,n.getUserState(n._silentAuthenticationState))},function(r){n._silentLogin=!1,n._logger.error("Error occurred during unified cache ATS"),n.loginRedirectHelper(e,t)})):this.loginRedirectHelper(e,t)}},e.prototype.loginRedirectHelper=function(e,t){var n=this;this._loginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var r=new s.AuthenticationRequestParameters(n.authorityInstance,n.clientId,e,m,n.getRedirectUri(),n._state);t&&(r.extraQueryParameters=t);var o=n._cacheStorage.getItem(c.Constants.angularLoginRequest);o&&""!==o?n._cacheStorage.setItem(c.Constants.angularLoginRequest,""):o=window.location.href,n._cacheStorage.setItem(c.Constants.loginRequest,o,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.loginError,""),n._cacheStorage.setItem(c.Constants.stateLogin,r.state,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.nonceIdToken,r.nonce,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.msalError,""),n._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var i=c.Constants.authority+c.Constants.resourceDelimeter+r.state;n._cacheStorage.setItem(i,n.authority,n.storeAuthStateInCookie);var a=r.createNavigateUrl(e)+c.Constants.response_mode_fragment;n.promptUser(a)})},e.prototype.loginPopup=function(e,t){var n=this;return new Promise(function(r,o){if(n._loginInProgress)o(c.ErrorCodes.loginProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.loginProgressError);else{if(e){var i=n.validateInputScope(e);if(i&&!f.Utils.isEmpty(i))return void o(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+c.ErrorDescription.inputScopesError);e=n.filterScopes(e)}var s;(s=n.extractADALIdToken())&&!e?(n._logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=f.Utils.constructUnifiedCacheExtraQueryParameter(s,t),n._silentLogin=!0,n.acquireTokenSilent([n.clientId],n.authority,n.getUser(),t).then(function(e){n._silentLogin=!1,n._logger.info("Unified cache call is successful"),r(e)},function(i){n._silentLogin=!1,n._logger.error("Error occurred during unified cache ATS"),n.loginPopupHelper(r,o,e,t)})):n.loginPopupHelper(r,o,e,t)}})},e.prototype.loginPopupHelper=function(e,t,n,r){var o=this;n||(n=[this.clientId]);var i=n.join(" ").toLowerCase(),a=this.openWindow("about:blank","_blank",1,this,e,t);a&&(this._loginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var u=new s.AuthenticationRequestParameters(o.authorityInstance,o.clientId,n,m,o.getRedirectUri(),o._state);r&&(u.extraQueryParameters=r),o._cacheStorage.setItem(c.Constants.loginRequest,window.location.href,o.storeAuthStateInCookie),o._cacheStorage.setItem(c.Constants.loginError,""),o._cacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,o.storeAuthStateInCookie),o._cacheStorage.setItem(c.Constants.msalError,""),o._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var l=c.Constants.authority+c.Constants.resourceDelimeter+u.state;o._cacheStorage.setItem(l,o.authority,o.storeAuthStateInCookie);var d=u.createNavigateUrl(n)+c.Constants.response_mode_fragment;window.renewStates.push(u.state),window.requestType=c.Constants.login,o.registerCallback(u.state,i,e,t),a&&(o._logger.infoPii("Navigated Popup window to:"+d),a.location.href=d)},function(){o._logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),t&&t(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),a&&a.close()}).catch(function(e){o._logger.warning("could not resolve endpoints"),t(e)}))},e.prototype.promptUser=function(e){e&&!f.Utils.isEmpty(e)?(this._logger.infoPii("Navigate to:"+e),window.location.replace(e)):this._logger.info("Navigate url is empty")},e.prototype.openWindow=function(e,t,n,r,o,i){var s=this,a=this.openPopup(e,t,c.Constants.popUpWidth,c.Constants.popUpHeight);if(null==a)return r._loginInProgress=!1,r._acquireTokenInProgress=!1,this._logger.info(c.ErrorCodes.popUpWindowError+":"+c.ErrorDescription.popUpWindowError),this._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.popUpWindowError),this._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.popUpWindowError),i&&i(c.ErrorCodes.popUpWindowError+c.Constants.resourceDelimeter+c.ErrorDescription.popUpWindowError),null;window.openedWindows.push(a);var u=window.setInterval(function(){if(a&&a.closed&&r._loginInProgress){if(i&&i(c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError),window.clearInterval(u),s._isAngular)return void s.broadcast("msal:popUpClosed",c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError);r._loginInProgress=!1,r._acquireTokenInProgress=!1}try{var e=a.location;if(-1!==e.href.indexOf(s.getRedirectUri())&&(window.clearInterval(u),r._loginInProgress=!1,r._acquireTokenInProgress=!1,s._logger.info("Closing popup window"),s._isAngular)){s.broadcast("msal:popUpHashChanged",e.hash);for(var t=0;t<window.openedWindows.length;t++)window.openedWindows[t].close()}}catch(e){}},n);return a},e.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},e.prototype.logout=function(){this.clearCache(),this._user=null;var e="";this.getPostLogoutRedirectUri()&&(e="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()));var t=this.authority+"/oauth2/v2.0/logout?"+e;this.promptUser(t)},e.prototype.clearCache=function(){window.renewStates=[];for(var e=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),t=0;t<e.length;t++)this._cacheStorage.removeItem(JSON.stringify(e[t].key));this._cacheStorage.resetCacheItems(),this._cacheStorage.clearCookie()},e.prototype.clearCacheForScope=function(e){for(var t=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var r=t[n];r.value.accessToken===e&&this._cacheStorage.removeItem(JSON.stringify(r.key))}},e.prototype.openPopup=function(e,t,n,r){try{var o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=s/2-n/2+o,u=a/2-r/2+i,l=window.open(e,t,"width="+n+", height="+r+", top="+u+", left="+c);return l.focus&&l.focus(),l}catch(e){return this._logger.error("error opening popup "+e.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},e.prototype.validateInputScope=function(e){if(!e||e.length<1)return"Scopes cannot be passed as an empty array";if(!Array.isArray(e))throw new Error("API does not accept non-array scopes");return e.indexOf(this.clientId)>-1&&e.length>1?"ClientId can only be provided as a single scope":""},e.prototype.filterScopes=function(e){return e=(e=e.filter(function(e){return"openid"!==e})).filter(function(e){return"profile"!==e})},e.prototype.registerCallback=function(e,t,n,r){var o=this;window.activeRenewals[t]=e,window.callBacksMappedToRenewStates[e]||(window.callBacksMappedToRenewStates[e]=[]),window.callBacksMappedToRenewStates[e].push({resolve:n,reject:r}),window.callBackMappedToRenewStates[e]||(window.callBackMappedToRenewStates[e]=function(n,r,i,s){window.activeRenewals[t]=null;for(var a=0;a<window.callBacksMappedToRenewStates[e].length;++a)try{n||i?window.callBacksMappedToRenewStates[e][a].reject(n+c.Constants.resourceDelimeter+i):r&&window.callBacksMappedToRenewStates[e][a].resolve(r)}catch(e){o._logger.warning(e)}window.callBacksMappedToRenewStates[e]=null,window.callBackMappedToRenewStates[e]=null})},e.prototype.getCachedTokenInternal=function(e,t){var n,r=t||this.getUser();if(!r)return null;var o=this.authorityInstance?this.authorityInstance:g.AuthorityFactory.CreateInstance(this.authority,this.validateAuthority);return n=f.Utils.compareObjects(r,this.getUser())?e.indexOf(this.clientId)>-1?new s.AuthenticationRequestParameters(o,this.clientId,e,m,this.getRedirectUri(),this._state):new s.AuthenticationRequestParameters(o,this.clientId,e,y,this.getRedirectUri(),this._state):new s.AuthenticationRequestParameters(o,this.clientId,e,C,this.getRedirectUri(),this._state),this.getCachedToken(n,t)},e.prototype.getCachedToken=function(e,t){var n=null,r=e.scopes,o=this._cacheStorage.getAllAccessTokens(this.clientId,t?t.userIdentifier:null);if(0===o.length)return null;var i=[];if(e.authority){for(s=0;s<o.length;s++){c=(a=o[s]).key.scopes.split(" ");f.Utils.containsScope(c,r)&&a.key.authority===e.authority&&i.push(a)}if(0===i.length)return null;if(1!==i.length)return{errorDesc:"The cache contains multiple tokens satisfying the requirements.Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};n=i[0]}else{for(var s=0;s<o.length;s++){var a,c=(a=o[s]).key.scopes.split(" ");f.Utils.containsScope(c,r)&&i.push(a)}if(1===i.length)n=i[0],e.authorityInstance=g.AuthorityFactory.CreateInstance(n.key.authority,this.validateAuthority);else{if(i.length>1)return{errorDesc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};var u=this.getUniqueAuthority(o,"authority");if(u.length>1)return{errorDesc:"Multiple authorities found in the cache. Pass authority in the API overload.",token:null,error:"multiple_matching_tokens_detected"};e.authorityInstance=g.AuthorityFactory.CreateInstance(u[0],this.validateAuthority)}}if(null!=n){var l=Number(n.value.expiresIn),d=this._clockSkew||300;return l&&l>f.Utils.now()+d?{errorDesc:null,token:n.value.accessToken,error:null}:(this._cacheStorage.removeItem(JSON.stringify(i[0].key)),null)}return null},e.prototype.getAllUsers=function(){for(var e=[],t=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var r=new u.IdToken(t[n].value.idToken),o=new a.ClientInfo(t[n].value.clientInfo),i=p.User.createUser(r,o);e.push(i)}return this.getUniqueUsers(e)},e.prototype.getUniqueUsers=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],r=0;r<e.length;++r)e[r].userIdentifier&&-1===t.indexOf(e[r].userIdentifier)&&(t.push(e[r].userIdentifier),n.push(e[r]));return n},e.prototype.getUniqueAuthority=function(e,t){var n=[],r=[];return e.forEach(function(e){e.key.hasOwnProperty(t)&&-1===r.indexOf(e.key[t])&&(r.push(e.key[t]),n.push(e.key[t]))}),n},e.prototype.addHintParameters=function(e,t){var n=t||this.getUser();if(n){var r=n.userIdentifier.split("."),o=f.Utils.base64DecodeStringUrlSafe(r[0]),i=f.Utils.base64DecodeStringUrlSafe(r[1]);n.sid&&-1!==e.indexOf(c.Constants.prompt_none)?this.urlContainsQueryStringParameter(c.Constants.sid,e)||this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||(e+="&"+c.Constants.sid+"="+encodeURIComponent(n.sid)):this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||!n.displayableId||f.Utils.isEmpty(n.displayableId)||(e+="&"+c.Constants.login_hint+"="+encodeURIComponent(n.displayableId)),f.Utils.isEmpty(o)||f.Utils.isEmpty(i)||(this.urlContainsQueryStringParameter("domain_req",e)||f.Utils.isEmpty(i)||(e+="&domain_req="+encodeURIComponent(i)),this.urlContainsQueryStringParameter("login_req",e)||f.Utils.isEmpty(o)||(e+="&login_req="+encodeURIComponent(o))),this.urlContainsQueryStringParameter(c.Constants.domain_hint,e)||f.Utils.isEmpty(i)||(i===c.Constants.consumersUtid?e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.consumers):e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.organizations))}return e},e.prototype.urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},e.prototype.acquireTokenRedirect=function(e,t,n,r){var o=this,i=this.validateInputScope(e);if(i&&!f.Utils.isEmpty(i)&&this._tokenReceivedCallback)this._tokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.accessToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));else{e&&(e=this.filterScopes(e));var a=n||this.getUser();if(!this._acquireTokenInProgress){var u;e.join(" ").toLowerCase();if(!(a||r&&-1!==r.indexOf(c.Constants.login_hint))&&this._tokenReceivedCallback)return this._logger.info("User login is required"),void this._tokenReceivedCallback(c.ErrorDescription.userLoginError,null,c.ErrorCodes.userLoginError,c.Constants.accessToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));this._acquireTokenInProgress=!0;var l=t?g.AuthorityFactory.CreateInstance(t,this.validateAuthority):this.authorityInstance;l.ResolveEndpointsAsync().then(function(){var t;u=f.Utils.compareObjects(a,o.getUser())?e.indexOf(o.clientId)>-1?new s.AuthenticationRequestParameters(l,o.clientId,e,m,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(l,o.clientId,e,y,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(l,o.clientId,e,C,o.getRedirectUri(),o._state),o._cacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,o.storeAuthStateInCookie),t=a?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+a.userIdentifier+c.Constants.resourceDelimeter+u.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+u.state,o._cacheStorage.setItem(t,JSON.stringify(a));var n=c.Constants.authority+c.Constants.resourceDelimeter+u.state;o._cacheStorage.setItem(n,l.CanonicalAuthority,o.storeAuthStateInCookie),r&&(u.extraQueryParameters=r);var i=u.createNavigateUrl(e)+c.Constants.response_mode_fragment;(i=o.addHintParameters(i,a))&&(o._cacheStorage.setItem(c.Constants.stateAcquireToken,u.state,o.storeAuthStateInCookie),window.location.replace(i))})}}},e.prototype.acquireTokenPopup=function(e,t,n,r){var o=this;return new Promise(function(i,a){var u=o.validateInputScope(e);u&&!f.Utils.isEmpty(u)&&a(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+u),e&&(e=o.filterScopes(e));var l=n||o.getUser();if(o._acquireTokenInProgress)a(c.ErrorCodes.acquireTokenProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.acquireTokenProgressError);else{var d,h=e.join(" ").toLowerCase();if(!(l||r&&-1!==r.indexOf(c.Constants.login_hint)))return o._logger.info("User login is required"),void a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError);o._acquireTokenInProgress=!0;var p=t?g.AuthorityFactory.CreateInstance(t,o.validateAuthority):o.authorityInstance,w=o.openWindow("about:blank","_blank",1,o,i,a);w&&p.ResolveEndpointsAsync().then(function(){var t;d=f.Utils.compareObjects(l,o.getUser())?e.indexOf(o.clientId)>-1?new s.AuthenticationRequestParameters(p,o.clientId,e,m,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(p,o.clientId,e,y,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(p,o.clientId,e,C,o.getRedirectUri(),o._state),o._cacheStorage.setItem(c.Constants.nonceIdToken,d.nonce),d.state=d.state,t=l?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+l.userIdentifier+c.Constants.resourceDelimeter+d.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+d.state,o._cacheStorage.setItem(t,JSON.stringify(l));var n=c.Constants.authority+c.Constants.resourceDelimeter+d.state;o._cacheStorage.setItem(n,p.CanonicalAuthority,o.storeAuthStateInCookie),r&&(d.extraQueryParameters=r);var u=d.createNavigateUrl(e)+c.Constants.response_mode_fragment;u=o.addHintParameters(u,l),window.renewStates.push(d.state),window.requestType=c.Constants.renewToken,o.registerCallback(d.state,h,i,a),w&&(w.location.href=u)},function(){o._logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),a&&a(c.ErrorCodes.endpointResolutionError+c.Constants.resourceDelimeter+c.ErrorDescription.endpointResolutionError),w&&w.close()}).catch(function(e){o._logger.warning("could not resolve endpoints"),a(e)})}})},e.prototype.acquireTokenSilent=function(e,t,n,r){var o=this;return new Promise(function(i,a){var u=o.validateInputScope(e);if(u&&!f.Utils.isEmpty(u))return a(c.ErrorCodes.inputScopesError+"|"+u),null;e&&(e=o.filterScopes(e));var l,d=e.join(" ").toLowerCase(),h=n||o.getUser(),p=o._cacheStorage.getItem(c.Constants.adalIdToken);if(!h&&f.Utils.checkSSO(r)&&f.Utils.isEmpty(p))return o._logger.info("User login is required"),a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError),null;if(!h&&!f.Utils.isEmpty(p)){var w=f.Utils.extractIdToken(p);console.log("ADAL's idToken exists. Extracting login information from ADAL's idToken "),r=f.Utils.constructUnifiedCacheExtraQueryParameter(w,r)}l=f.Utils.compareObjects(h,o.getUser())?e.indexOf(o.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,m,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,y,o.getRedirectUri(),o._state):e.indexOf(o.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,m,o.getRedirectUri(),o._state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,C,o.getRedirectUri(),o._state);var _=o.getCachedToken(l,h);if(_){if(_.token)return o._logger.info("Token is already in cache for scope:"+d),i(_.token),null;if(_.errorDesc||_.error)return o._logger.infoPii(_.errorDesc+":"+_.error),a(_.errorDesc+c.Constants.resourceDelimeter+_.error),null}else o._logger.verbose("Token is not in cache for scope:"+d);return l.authorityInstance||(l.authorityInstance=t?g.AuthorityFactory.CreateInstance(t,o.validateAuthority):o.authorityInstance),l.authorityInstance.ResolveEndpointsAsync().then(function(){window.activeRenewals[d]?(o._logger.verbose("Renew token for scope: "+d+" is in progress. Registering callback"),o.registerCallback(window.activeRenewals[d],d,i,a)):e&&e.indexOf(o.clientId)>-1&&1===e.length?(o._logger.verbose("renewing idToken"),o.renewIdToken(e,i,a,h,l,r)):(o._logger.verbose("renewing accesstoken"),o.renewToken(e,i,a,h,l,r))}).catch(function(e){return o._logger.warning("could not resolve endpoints"),a(e),null})})},e.prototype.extractADALIdToken=function(){var e=this._cacheStorage.getItem(c.Constants.adalIdToken);return f.Utils.isEmpty(e)?null:f.Utils.extractIdToken(e)},e.prototype.loadIframeTimeout=function(e,t,n){var r=this,o=window.activeRenewals[n];this._logger.verbose("Set loading state to pending for: "+n+":"+o),this._cacheStorage.setItem(c.Constants.renewStatus+o,c.Constants.tokenRenewStatusInProgress),this.loadFrame(e,t),setTimeout(function(){r._cacheStorage.getItem(c.Constants.renewStatus+o)===c.Constants.tokenRenewStatusInProgress&&(r._logger.verbose("Loading frame has timed out after: "+r.loadFrameTimeout/1e3+" seconds for scope "+n+":"+o),o&&window.callBackMappedToRenewStates[o]&&window.callBackMappedToRenewStates[o]("Token renewal operation failed due to timeout",null,"Token Renewal Failed",c.Constants.accessToken),r._cacheStorage.setItem(c.Constants.renewStatus+o,c.Constants.tokenRenewStatusCancelled))},this.loadFrameTimeout)},e.prototype.loadFrame=function(e,t){var n=this;this._logger.info("LoadFrame: "+t);var r=t;setTimeout(function(){var o=n.addAdalFrame(r);""!==o.src&&"about:blank"!==o.src||(o.src=e,n._logger.infoPii("Frame Name : "+t+" Navigated to: "+e))},500)},e.prototype.addAdalFrame=function(e){if(void 0===e)return null;this._logger.info("Add msal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(t=window.frames[e])}return t},e.prototype.renewToken=function(e,t,n,r,o,i){var s=e.join(" ").toLowerCase();this._logger.verbose("renewToken is called for scope:"+s);var a,u=this.addAdalFrame("msalRenewFrame"+s);i&&(o.extraQueryParameters=i),a=r?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r.userIdentifier+c.Constants.resourceDelimeter+o.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+o.state,this._cacheStorage.setItem(a,JSON.stringify(r));var l=c.Constants.authority+c.Constants.resourceDelimeter+o.state;this._cacheStorage.setItem(l,o.authority),this._cacheStorage.setItem(c.Constants.nonceIdToken,o.nonce),this._logger.verbose("Renew token Expected state: "+o.state);var d=f.Utils.urlRemoveQueryStringParameter(o.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;d=this.addHintParameters(d,r),window.renewStates.push(o.state),window.requestType=c.Constants.renewToken,this.registerCallback(o.state,s,t,n),this._logger.infoPii("Navigate to:"+d),u.src="about:blank",this.loadIframeTimeout(d,"msalRenewFrame"+s,s)},e.prototype.renewIdToken=function(e,t,n,r,o,i){e.join(" ").toLowerCase();this._logger.info("renewidToken is called");var s,a=this.addAdalFrame("msalIdTokenFrame");i&&(o.extraQueryParameters=i),s=r?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r.userIdentifier+c.Constants.resourceDelimeter+o.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+o.state,this._cacheStorage.setItem(s,JSON.stringify(r));var u=c.Constants.authority+c.Constants.resourceDelimeter+o.state;this._cacheStorage.setItem(u,o.authority),this._cacheStorage.setItem(c.Constants.nonceIdToken,o.nonce),this._logger.verbose("Renew Idtoken Expected state: "+o.state);var l=f.Utils.urlRemoveQueryStringParameter(o.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;l=this.addHintParameters(l,r),this._silentLogin?(window.requestType=c.Constants.login,this._silentAuthenticationState=o.state):(window.requestType=c.Constants.renewToken,window.renewStates.push(o.state)),this.registerCallback(o.state,this.clientId,t,n),this._logger.infoPii("Navigate to:"+l),a.src="about:blank",this.loadIframeTimeout(l,"msalIdTokenFrame",this.clientId)},e.prototype.getUser=function(){if(this._user)return this._user;var e=this._cacheStorage.getItem(c.Constants.idTokenKey),t=this._cacheStorage.getItem(c.Constants.msalClientInfo);if(!f.Utils.isEmpty(e)&&!f.Utils.isEmpty(t)){var n=new u.IdToken(e),r=new a.ClientInfo(t);return this._user=p.User.createUser(n,r),this._user}return null},e.prototype.handleAuthenticationResponse=function(e){null==e&&(e=window.location.hash);var t=null,n=!1,r=!1;try{r=window.opener&&window.opener.msal&&window.opener.msal!==window.msal}catch(e){r=!1}r?(t=window.opener.msal,n=!0):window.parent&&window.parent.msal&&(t=window.parent.msal);var o,i=t.getRequestInfo(e),s=null,a=null;if(t._logger.info("Returned from redirect url"),window.parent!==window&&window.parent.msal)a=window.parent.callBackMappedToRenewStates[i.stateResponse];else if(r)a=window.opener.callBackMappedToRenewStates[i.stateResponse];else{if(t._navigateToLoginRequestUrl)return a=null,t._cacheStorage.setItem(c.Constants.urlHash,e),!1,void(window.parent!==window||n||(window.location.href=t._cacheStorage.getItem(c.Constants.loginRequest,this.storeAuthStateInCookie)));a=t._tokenReceivedCallback,window.location.hash=""}t.saveTokenFromHash(i),i.requestType===c.Constants.renewToken&&window.parent?(window.parent!==window?t._logger.verbose("Window is in iframe, acquiring token silently"):t._logger.verbose("acquiring token interactive in progress"),s=i.parameters[c.Constants.accessToken]||i.parameters[c.Constants.idToken],o=c.Constants.accessToken):i.requestType===c.Constants.login&&(s=i.parameters[c.Constants.idToken],o=c.Constants.idToken);var u=i.parameters[c.Constants.errorDescription],l=i.parameters[c.Constants.error];try{a&&(i.stateMatch?a.call(t,u,s,l,o,this.getUserState(i.stateResponse)):a.call(t,u,s,l,o,null))}catch(e){t._logger.error("Error occurred in token received callback function: "+e)}if(r)for(var d=0;d<window.opener.openedWindows.length;d++)window.opener.openedWindows[d].close()},e.prototype.saveAccessToken=function(e,t,n,r,s){var u,l=new a.ClientInfo(r);if(t.parameters.hasOwnProperty("scope")){for(var d=(u=t.parameters.scope).split(" "),h=this._cacheStorage.getAllAccessTokens(this.clientId,e),p=0;p<h.length;p++){var g=h[p];if(g.key.userIdentifier===n.userIdentifier){var m=g.key.scopes.split(" ");f.Utils.isIntersectingScopes(m,d)&&this._cacheStorage.removeItem(JSON.stringify(g.key))}}var y=new o.AccessTokenKey(e,this.clientId,u,l.uid,l.utid),C=new i.AccessTokenValue(t.parameters[c.Constants.accessToken],s.rawIdToken,f.Utils.expiresIn(t.parameters[c.Constants.expiresIn]).toString(),r);this._cacheStorage.setItem(JSON.stringify(y),JSON.stringify(C))}else{u=this.clientId;y=new o.AccessTokenKey(e,this.clientId,u,l.uid,l.utid),C=new i.AccessTokenValue(t.parameters[c.Constants.idToken],t.parameters[c.Constants.idToken],s.expiration,r);this._cacheStorage.setItem(JSON.stringify(y),JSON.stringify(C))}},e.prototype.saveTokenFromHash=function(e){this._logger.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._cacheStorage.setItem(c.Constants.msalError,""),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var t="",n="";if(e.parameters.hasOwnProperty("scope")?e.parameters.scope.toLowerCase():this.clientId,e.parameters.hasOwnProperty(c.Constants.errorDescription)||e.parameters.hasOwnProperty(c.Constants.error)){if(this._logger.infoPii("Error :"+e.parameters[c.Constants.error]+"; Error description:"+e.parameters[c.Constants.errorDescription]),this._cacheStorage.setItem(c.Constants.msalError,e.parameters.error),this._cacheStorage.setItem(c.Constants.msalErrorDescription,e.parameters[c.Constants.errorDescription]),e.requestType===c.Constants.login&&(this._loginInProgress=!1,this._cacheStorage.setItem(c.Constants.loginError,e.parameters[c.Constants.errorDescription]+":"+e.parameters[c.Constants.error]),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse),e.requestType===c.Constants.renewToken){this._acquireTokenInProgress=!1,t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var r=null!==this.getUser()?this.getUser().userIdentifier:"";n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r+c.Constants.resourceDelimeter+e.stateResponse}}else if(e.stateMatch){var o;this._logger.info("State is right"),e.parameters.hasOwnProperty(c.Constants.sessionState)&&this._cacheStorage.setItem(c.Constants.msalSessionState,e.parameters[c.Constants.sessionState]);var i="";if(e.parameters.hasOwnProperty(c.Constants.accessToken)){this._logger.info("Fragment has access token"),this._acquireTokenInProgress=!1;var s=void 0;o=e.parameters.hasOwnProperty(c.Constants.idToken)?new u.IdToken(e.parameters[c.Constants.idToken]):new u.IdToken(this._cacheStorage.getItem(c.Constants.idTokenKey)),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var l=this._cacheStorage.getItem(t,this.storeAuthStateInCookie);f.Utils.isEmpty(l)||(l=f.Utils.replaceFirstPath(l,o.tenantId)),e.parameters.hasOwnProperty(c.Constants.clientInfo)?(i=e.parameters[c.Constants.clientInfo],s=p.User.createUser(o,new a.ClientInfo(i))):(this._logger.warning("ClientInfo not received in the response from AAD"),s=p.User.createUser(o,new a.ClientInfo(i))),n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+s.userIdentifier+c.Constants.resourceDelimeter+e.stateResponse;var d=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+e.stateResponse,h=this._cacheStorage.getItem(n),g=void 0;f.Utils.isEmpty(h)?f.Utils.isEmpty(this._cacheStorage.getItem(d))||this.saveAccessToken(l,e,s,i,o):(g=JSON.parse(h),s&&g&&f.Utils.compareObjects(s,g)?(this.saveAccessToken(l,e,s,i,o),this._logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this._logger.warning("The user object created from the response is not the same as the one passed in the acquireToken request"))}if(e.parameters.hasOwnProperty(c.Constants.idToken)){this._logger.info("Fragment has id token"),this._loginInProgress=!1,o=new u.IdToken(e.parameters[c.Constants.idToken]),e.parameters.hasOwnProperty(c.Constants.clientInfo)?i=e.parameters[c.Constants.clientInfo]:this._logger.warning("ClientInfo not received in the response from AAD"),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;l=this._cacheStorage.getItem(t,this.storeAuthStateInCookie);f.Utils.isEmpty(l)||(l=f.Utils.replaceFirstPath(l,o.tenantId)),this._user=p.User.createUser(o,new a.ClientInfo(i)),o&&o.nonce?o.nonce!==this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)?(this._user=null,this._cacheStorage.setItem(c.Constants.loginError,"Nonce Mismatch. Expected Nonce: "+this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)+",Actual Nonce: "+o.nonce),this._logger.error("Nonce Mismatch.Expected Nonce: "+this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)+",Actual Nonce: "+o.nonce)):(this._cacheStorage.setItem(c.Constants.idTokenKey,e.parameters[c.Constants.idToken]),this._cacheStorage.setItem(c.Constants.msalClientInfo,i),this.saveAccessToken(l,e,this._user,i,o)):(t=e.stateResponse,n=e.stateResponse,this._logger.error("Invalid id_token received in the response"),e.parameters.error="invalid idToken",e.parameters.error_description="Invalid idToken. idToken: "+e.parameters[c.Constants.idToken],this._cacheStorage.setItem(c.Constants.msalError,"invalid idToken"),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid idToken. idToken: "+e.parameters[c.Constants.idToken]))}}else t=e.stateResponse,n=e.stateResponse,this._logger.error("State Mismatch.Expected State: "+this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)+",Actual State: "+e.stateResponse),e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._cacheStorage.setItem(c.Constants.msalError,"Invalid_state"),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid_state. state: "+e.stateResponse);this._cacheStorage.setItem(c.Constants.renewStatus+e.stateResponse,c.Constants.tokenRenewStatusCompleted),this._cacheStorage.removeAcquireTokenEntries(t,n),this.storeAuthStateInCookie&&(this._cacheStorage.setItemCookie(t,"",-1),this._cacheStorage.clearCookie())},e.prototype.isCallback=function(e){e=this.getHash(e);var t=f.Utils.deserialize(e);return t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken)},e.prototype.getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},e.prototype.getRequestInfo=function(e){e=this.getHash(e);var t=f.Utils.deserialize(e),n=new h.TokenResponse;if(t&&(n.parameters=t,t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken))){n.valid=!0;var r=void 0;if(!t.hasOwnProperty("state"))return n;if(r=t.state,n.stateResponse=r,r===this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)||r===this._silentAuthenticationState)return n.requestType=c.Constants.login,n.stateMatch=!0,n;if(r===this._cacheStorage.getItem(c.Constants.stateAcquireToken,this.storeAuthStateInCookie))return n.requestType=c.Constants.renewToken,n.stateMatch=!0,n;if(!n.stateMatch){n.requestType=window.requestType;for(var o=window.renewStates,i=0;i<o.length;i++)if(o[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},e.prototype.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.getUserState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.isInIframe=function(){return window.parent!==window},e.prototype.loginInProgress=function(){return!!this._cacheStorage.getItem(c.Constants.urlHash)||this._loginInProgress},e.prototype.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},e.prototype.getScopesForEndpoint=function(e){if(this._unprotectedResources.length>0)for(var t=0;t<this._unprotectedResources.length;t++)if(e.indexOf(this._unprotectedResources[t])>-1)return null;if(this._protectedResourceMap.size>0)for(var n=0,r=Array.from(this._protectedResourceMap.keys());n<r.length;n++){var o=r[n];if(e.indexOf(o)>-1)return this._protectedResourceMap.get(o)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this.getHostFromUri(e)===this.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},e.prototype.setloginInProgress=function(e){this._loginInProgress=e},e.prototype.getAcquireTokenInProgress=function(){return this._acquireTokenInProgress},e.prototype.setAcquireTokenInProgress=function(e){this._acquireTokenInProgress=e},e.prototype.getLogger=function(){return this._logger},r.__decorate([w],e.prototype,"acquireTokenSilent",null),e}();t.UserAgentApplication=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){this.valid=!1,this.parameters={},this.stateMatch=!1,this.stateResponse="",this.requestType="unknown"}}();t.TokenResponse=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t,n,r,o,i){this.displayableId=e,this.name=t,this.identityProvider=n,this.userIdentifier=r,this.idToken=o,this.sid=i}return e.createUser=function(t,n){var o,i;n?(o=n.uid,i=n.utid):(o="",i="");var s=r.Utils.base64EncodeStringUrlSafe(o)+"."+r.Utils.base64EncodeStringUrlSafe(i);return new e(t.preferredName,t.name,t.issuer,s,t.decodedIdToken,t.sid)},e}();t.User=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(2),i=n(10),s=function(e){function t(t,n){return e.call(this,t,n)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"AadInstanceDiscoveryEndpointUrl",{get:function(){return t.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return o.AuthorityType.Aad},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});if(!this.IsValidationEnabled)return t;var n=this.CanonicalAuthorityUrlComponents.HostNameAndPort;return this.IsInTrustedHostList(n)?t:(new i.XhrClient).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then(function(e){return e.tenant_discovery_endpoint})},t.prototype.IsInTrustedHostList=function(e){return t.TrustedHostList[e.toLowerCase()]},t.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",t.TrustedHostList={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"},t}(o.Authority);t.AadAuthority=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise(function(n,o){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(e){(i.status<200||i.status>=300)&&o(r.handleError(i.responseText));try{var t=JSON.parse(i.responseText)}catch(e){o(r.handleError(i.responseText))}n(t)},i.onerror=function(e){o(i.status)},"GET"!==t)throw"not implemented";i.send()})},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},e}();t.XhrClient=r},function(e,t,n){e.exports=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.UserAgentApplication=r.UserAgentApplication;var o=n(4);t.Logger=o.Logger;var i=n(4);t.LogLevel=i.LogLevel;var s=n(8);t.User=s.User;var a=n(1);t.Constants=a.Constants;var c=n(7);t.TokenResponse=c.TokenResponse;var u=n(2);t.Authority=u.Authority;var l=n(6);t.CacheResult=l.CacheResult},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){return function(e,t,n,o,i){this.authority=e,this.clientId=t,this.scopes=n,this.userIdentifier=r.Utils.base64EncodeStringUrlSafe(o)+"."+r.Utils.base64EncodeStringUrlSafe(i)}}();t.AccessTokenKey=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t,n,r){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.clientInfo=r}}();t.AccessTokenValue=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t,n,o,i,s){this.authorityInstance=e,this.clientId=t,this.scopes=n,this.responseType=o,this.redirectUri=i,this.correlationId=r.Utils.createNewGuid(),this.state=s&&!r.Utils.isEmpty(s)?r.Utils.createNewGuid()+"|"+s:r.Utils.createNewGuid(),this.nonce=r.Utils.createNewGuid(),this.xClientSku="MSAL.JS",this.xClientVer=r.Utils.getLibraryVersion()}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=this.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},e.prototype.createNavigationUrlString=function(e){e||(e=[this.clientId]),-1===e.indexOf(this.clientId)&&e.push(this.clientId);var t=[];return t.push("response_type="+this.responseType),this.translateclientIdUsedInScope(e),t.push("scope="+encodeURIComponent(this.parseScope(e))),t.push("client_id="+encodeURIComponent(this.clientId)),t.push("redirect_uri="+encodeURIComponent(this.redirectUri)),t.push("state="+encodeURIComponent(this.state)),t.push("nonce="+encodeURIComponent(this.nonce)),t.push("client_info=1"),t.push("x-client-SKU="+this.xClientSku),t.push("x-client-Ver="+this.xClientVer),this.extraQueryParameters&&t.push(this.extraQueryParameters),t.push("client-request-id="+encodeURIComponent(this.correlationId)),t},e.prototype.translateclientIdUsedInScope=function(e){var t=e.indexOf(this.clientId);t>=0&&(e.splice(t,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},e.prototype.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},e}();t.AuthenticationRequestParameters=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){if(!e||r.Utils.isEmpty(e))return this.uid="",void(this.utid="");try{var t=r.Utils.base64DecodeStringUrlSafe(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(e){throw new Error(e)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e}();t.ClientInfo=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){return function(e){if(r.Utils.isEmpty(e))throw new Error("null or empty raw idtoken");try{this.rawIdToken=e,this.decodedIdToken=r.Utils.extractIdToken(e),this.decodedIdToken&&(this.decodedIdToken.hasOwnProperty("iss")&&(this.issuer=this.decodedIdToken.iss),this.decodedIdToken.hasOwnProperty("oid")&&(this.objectId=this.decodedIdToken.oid),this.decodedIdToken.hasOwnProperty("sub")&&(this.subject=this.decodedIdToken.sub),this.decodedIdToken.hasOwnProperty("tid")&&(this.tenantId=this.decodedIdToken.tid),this.decodedIdToken.hasOwnProperty("ver")&&(this.version=this.decodedIdToken.ver),this.decodedIdToken.hasOwnProperty("preferred_username")&&(this.preferredName=this.decodedIdToken.preferred_username),this.decodedIdToken.hasOwnProperty("name")&&(this.name=this.decodedIdToken.name),this.decodedIdToken.hasOwnProperty("nonce")&&(this.nonce=this.decodedIdToken.nonce),this.decodedIdToken.hasOwnProperty("exp")&&(this.expiration=this.decodedIdToken.exp),this.decodedIdToken.hasOwnProperty("home_oid")&&(this.homeObjectId=this.decodedIdToken.home_oid),this.decodedIdToken.hasOwnProperty("sid")&&(this.sid=this.decodedIdToken.sid))}catch(e){throw new Error("Failed to parse the returned id token")}}}();t.IdToken=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(19),i=function(){function e(t){if(e._instance)return e._instance;if(this._cacheLocation=t,this._localStorageSupported=void 0!==window[this._cacheLocation]&&null!=window[this._cacheLocation],this._sessionStorageSupported=void 0!==window[t]&&null!=window[t],e._instance=this,!this._localStorageSupported&&!this._sessionStorageSupported)throw new Error("localStorage and sessionStorage not supported");return e._instance}return e.prototype.setItem=function(e,t,n){window[this._cacheLocation]&&window[this._cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this._cacheLocation]?window[this._cacheLocation].getItem(e):null},e.prototype.removeItem=function(e){if(window[this._cacheLocation])return window[this._cacheLocation].removeItem(e)},e.prototype.clear=function(){if(window[this._cacheLocation])return window[this._cacheLocation].clear()},e.prototype.getAllAccessTokens=function(e,t){var n,r=[],i=window[this._cacheLocation];if(i){var s=void 0;for(s in i)if(i.hasOwnProperty(s)&&s.match(e)&&s.match(t)){var a=this.getItem(s);a&&(n=new o.AccessTokenCacheItem(JSON.parse(s),JSON.parse(a)),r.push(n))}}return r},e.prototype.removeAcquireTokenEntries=function(e,t){var n=window[this._cacheLocation];if(n){var r=void 0;for(r in n)n.hasOwnProperty(r)&&(""!==e&&r.indexOf(e)>-1||""!==t&&r.indexOf(t)>-1)&&this.removeItem(r)}},e.prototype.resetCacheItems=function(){var e=window[this._cacheLocation];if(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(-1!==t.indexOf(r.Constants.msal)&&this.setItem(t,""),-1!==t.indexOf(r.Constants.renewStatus)&&this.removeItem(t))}},e.prototype.setItemCookie=function(e,t,n){var r=e+"="+t+";";n&&(r+="expires="+this.setExpirationCookie(n)+";");document.cookie=r},e.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},e.prototype.setExpirationCookie=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e.prototype.clearCookie=function(){this.setItemCookie(r.Constants.nonceIdToken,"",-1),this.setItemCookie(r.Constants.stateLogin,"",-1),this.setItemCookie(r.Constants.loginRequest,"",-1),this.setItemCookie(r.Constants.stateAcquireToken,"",-1)},e}();t.Storage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){this.key=e,this.value=t}}();t.AccessTokenCacheItem=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(9),i=n(21),s=n(2),a=n(5),c=function(){function e(){}return e.DetectAuthorityFromUrl=function(e){switch(e=r.Utils.CanonicalizeUri(e),r.Utils.GetUrlComponents(e).PathSegments[0]){case"tfp":return s.AuthorityType.B2C;case"adfs":return s.AuthorityType.Adfs;default:return s.AuthorityType.Aad}},e.CreateInstance=function(t,n){if(r.Utils.isEmpty(t))return null;switch(e.DetectAuthorityFromUrl(t)){case s.AuthorityType.B2C:return new i.B2cAuthority(t,n);case s.AuthorityType.Aad:return new o.AadAuthority(t,n);default:throw a.ErrorMessage.invalidAuthorityType}},e}();t.AuthorityFactory=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(9),i=n(2),s=n(5),a=n(0),c=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=a.Utils.GetUrlComponents(t),i=o.PathSegments;if(i.length<3)throw s.ErrorMessage.b2cAuthorityUriInvalidPath;return r.CanonicalAuthority="https://"+o.HostNameAndPort+"/"+i[0]+"/"+i[1]+"/"+i[2]+"/",r}return r.__extends(t,e),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return i.AuthorityType.B2C},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});return this.IsValidationEnabled?this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?t:new Promise(function(e,t){return t(s.ErrorMessage.unsupportedAuthorityValidation)}):t},t}(o.AadAuthority);t.B2cAuthority=c}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL01zYWwvLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BdXRob3JpdHkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Mb2dnZXIudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9FcnJvck1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Vc2VyQWdlbnRBcHBsaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1JlcXVlc3RJbmZvLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvVXNlci50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0FhZEF1dGhvcml0eS50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1hIUkNsaWVudC50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjZXNzVG9rZW5LZXkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BY2Nlc3NUb2tlblZhbHVlLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycy50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0NsaWVudEluZm8udHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9JZFRva2VuLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvU3RvcmFnZS50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0FjY2Vzc1Rva2VuQ2FjaGVJdGVtLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQXV0aG9yaXR5RmFjdG9yeS50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0IyY0F1dGhvcml0eS50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29uc3RhbnRzXzEiLCJVdGlscyIsImNvbXBhcmVPYmplY3RzIiwidTEiLCJ1MiIsInVzZXJJZGVudGlmaWVyIiwiZXhwaXJlc0luIiwiZXhwaXJlcyIsInRoaXMiLCJub3ciLCJwYXJzZUludCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiaXNFbXB0eSIsInN0ciIsImxlbmd0aCIsImV4dHJhY3RJZFRva2VuIiwiZW5jb2RlZElkVG9rZW4iLCJkZWNvZGVkVG9rZW4iLCJkZWNvZGVKd3QiLCJiYXNlNjRJZFRva2VuIiwiSldTUGF5bG9hZCIsImJhc2U2NERlY29kZWQiLCJiYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlIiwiSlNPTiIsInBhcnNlIiwiZXJyIiwiYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZSIsImlucHV0IiwiYnRvYSIsImVuY29kZSIsInJlcGxhY2UiLCJhdG9iIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlIiwiY2hyMSIsImNocjIiLCJjaHIzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsImtleVN0ciIsIm91dHB1dCIsInV0ZjhFbmNvZGUiLCJjaGFyQ29kZUF0IiwiaXNOYU4iLCJjaGFyQXQiLCJ1dGZ0ZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY29kZXMiLCJFcnJvciIsImgxIiwiaDIiLCJoMyIsImg0IiwiYml0cyIsImMxIiwiYzIiLCJjMyIsImRlY29kZWQiLCJpbmRleE9mIiwiand0VG9rZW4iLCJtYXRjaGVzIiwiZXhlYyIsImhlYWRlciIsIkpXU1NpZyIsImRlc2VyaWFsaXplIiwicXVlcnkiLCJtYXRjaCIsInBsIiwic2VhcmNoIiwib2JqIiwiaXNJbnRlcnNlY3RpbmdTY29wZXMiLCJjYWNoZWRTY29wZXMiLCJzY29wZXMiLCJjb252ZXJ0VG9Mb3dlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImNvbnRhaW5zU2NvcGUiLCJldmVyeSIsInRvU3RyaW5nIiwibWFwIiwic2NvcGUiLCJyZW1vdmVFbGVtZW50IiwiZmlsdGVyIiwiZGVjaW1hbFRvSGV4IiwibnVtIiwiaGV4IiwiZ2V0TGlicmFyeVZlcnNpb24iLCJyZXBsYWNlRmlyc3RQYXRoIiwidXJsIiwidGVuYW50SWQiLCJ1cmxPYmplY3QiLCJHZXRVcmxDb21wb25lbnRzIiwicGF0aEFycmF5IiwiUGF0aFNlZ21lbnRzIiwiQ29uc3RhbnRzIiwiY29tbW9uIiwib3JnYW5pemF0aW9ucyIsIlByb3RvY29sIiwiSG9zdE5hbWVBbmRQb3J0Iiwiam9pbiIsImNyZWF0ZU5ld0d1aWQiLCJjcnlwdG9PYmoiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJidWZmZXIiLCJVaW50OEFycmF5IiwiZ3VpZEhvbGRlciIsImd1aWRSZXNwb25zZSIsInJhbmRvbSIsInJlZ0V4IiwiUmVnRXhwIiwidXJsQ29tcG9uZW50cyIsIkFic29sdXRlUGF0aCIsInBhdGhTZWdtZW50cyIsInNwbGl0IiwidmFsIiwiQ2Fub25pY2FsaXplVXJpIiwiZW5kc1dpdGgiLCJzdWZmaXgiLCJjaGVja1NTTyIsImV4dHJhUXVlcnlQYXJhbWV0ZXJzIiwibG9naW5faGludCIsInNpZCIsImNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIiLCJpZFRva2VuT2JqZWN0IiwidXBuIiwidXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIiLCJkb21haW5faGludCIsInJlZ2V4IiwiX3BvcFVwV2lkdGgiLCJ3aWR0aCIsIl9wb3BVcEhlaWdodCIsImhlaWdodCIsIkVycm9yQ29kZXMiLCJFcnJvckRlc2NyaXB0aW9uIiwiVXRpbHNfMSIsIkVycm9yTWVzc2FnZV8xIiwiWEhSQ2xpZW50XzEiLCJBdXRob3JpdHlUeXBlIiwiQXV0aG9yaXR5IiwiYXV0aG9yaXR5IiwidmFsaWRhdGVBdXRob3JpdHkiLCJJc1ZhbGlkYXRpb25FbmFibGVkIiwiQ2Fub25pY2FsQXV0aG9yaXR5IiwidmFsaWRhdGVBc1VyaSIsIkNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMiLCJ2YWxpZGF0ZVJlc29sdmVkIiwidGVuYW50RGlzY292ZXJ5UmVzcG9uc2UiLCJBdXRob3JpemF0aW9uRW5kcG9pbnQiLCJUZW5hbnQiLCJFbmRTZXNzaW9uRW5kcG9pbnQiLCJJc3N1ZXIiLCJjYW5vbmljYWxBdXRob3JpdHkiLCJjYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzIiwiY29tcG9uZW50cyIsImUiLCJFcnJvck1lc3NhZ2UiLCJpbnZhbGlkQXV0aG9yaXR5VHlwZSIsImF1dGhvcml0eVVyaUluc2VjdXJlIiwiYXV0aG9yaXR5VXJpSW52YWxpZFBhdGgiLCJEaXNjb3ZlckVuZHBvaW50cyIsIm9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCIsIlhockNsaWVudCIsInNlbmRSZXF1ZXN0QXN5bmMiLCJ0aGVuIiwicmVzcG9uc2UiLCJhdXRob3JpemF0aW9uX2VuZHBvaW50IiwiZW5kX3Nlc3Npb25fZW5kcG9pbnQiLCJpc3N1ZXIiLCJSZXNvbHZlRW5kcG9pbnRzQXN5bmMiLCJfdGhpcyIsIkdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jIiwib3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50UmVzcG9uc2UiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImIiLCJfX3ZhbHVlcyIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJfX3JlYWQiLCJhciIsInB1c2giLCJlcnJvciIsIl9fYXdhaXQiLCJ2IiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsIl9fYXNzaWduIiwiYXNzaWduIiwiYXJndW1lbnRzIiwiX19yZXN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiX19kZWNvcmF0ZSIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiX19wYXJhbSIsInBhcmFtSW5kZXgiLCJkZWNvcmF0b3IiLCJfX21ldGFkYXRhIiwibWV0YWRhdGFLZXkiLCJtZXRhZGF0YVZhbHVlIiwibWV0YWRhdGEiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJyZWplY3RlZCIsInRocm93IiwicmVzdWx0IiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJyZXR1cm4iLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsIl9fZXhwb3J0U3RhciIsIl9fc3ByZWFkIiwiY29uY2F0IiwiX19hc3luY0dlbmVyYXRvciIsImFzeW5jSXRlcmF0b3IiLCJxIiwiYSIsInJlc3VtZSIsImZ1bGZpbGwiLCJzZXR0bGUiLCJzaGlmdCIsIl9fYXN5bmNEZWxlZ2F0b3IiLCJfX2FzeW5jVmFsdWVzIiwiTG9nTGV2ZWwiLCJMb2dnZXIiLCJsb2NhbENhbGxiYWNrIiwib3B0aW9ucyIsIl9sZXZlbCIsIkluZm8iLCJfYSIsImNvcnJlbGF0aW9uSWQiLCJfYiIsImxldmVsIiwiX2MiLCJwaWlMb2dnaW5nRW5hYmxlZCIsIl9sb2NhbENhbGxiYWNrIiwiX2NvcnJlbGF0aW9uSWQiLCJfcGlpTG9nZ2luZ0VuYWJsZWQiLCJsb2dNZXNzYWdlIiwibG9nTGV2ZWwiLCJjb250YWluc1BpaSIsImxvZyIsInRpbWVzdGFtcCIsInRvVVRDU3RyaW5nIiwiZXhlY3V0ZUNhbGxiYWNrIiwibWVzc2FnZSIsImVycm9yUGlpIiwid2FybmluZyIsIldhcm5pbmciLCJ3YXJuaW5nUGlpIiwiaW5mbyIsImluZm9QaWkiLCJ2ZXJib3NlIiwiVmVyYm9zZSIsInZlcmJvc2VQaWkiLCJBY2Nlc3NUb2tlbktleV8xIiwiQWNjZXNzVG9rZW5WYWx1ZV8xIiwiQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVyc18xIiwiQ2xpZW50SW5mb18xIiwiSWRUb2tlbl8xIiwiTG9nZ2VyXzEiLCJTdG9yYWdlXzEiLCJSZXF1ZXN0SW5mb18xIiwiVXNlcl8xIiwiQXV0aG9yaXR5RmFjdG9yeV8xIiwiUmVzcG9uc2VUeXBlcyIsInJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lIiwicHJvcGVydHlLZXkiLCJkZXNjcmlwdG9yIiwidG9rZW5BY3F1aXNpdGlvbk1ldGhvZCIsImFyZ3MiLCJfaSIsImlzSW5JZnJhbWUiLCJVc2VyQWdlbnRBcHBsaWNhdGlvbiIsImNsaWVudElkIiwidG9rZW5SZWNlaXZlZENhbGxiYWNrIiwiX2NhY2hlTG9jYXRpb25zIiwibG9jYWxTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJfY2xvY2tTa2V3IiwiX3Rva2VuUmVjZWl2ZWRDYWxsYmFjayIsIl9pc0FuZ3VsYXIiLCJjYWNoZUxvY2F0aW9uIiwicmVkaXJlY3RVcmkiLCJsb2NhdGlvbiIsImhyZWYiLCJfZCIsInBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsIl9lIiwibG9nZ2VyIiwiX2YiLCJsb2FkRnJhbWVUaW1lb3V0IiwiX2ciLCJuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsIiwiX2giLCJzdGF0ZSIsIl9qIiwiaXNBbmd1bGFyIiwiX2siLCJ1bnByb3RlY3RlZFJlc291cmNlcyIsIl9sIiwicHJvdGVjdGVkUmVzb3VyY2VNYXAiLCJNYXAiLCJfbSIsInN0b3JlQXV0aFN0YXRlSW5Db29raWUiLCJfcmVkaXJlY3RVcmkiLCJfcG9zdExvZ291dHJlZGlyZWN0VXJpIiwiX2xvZ2luSW5Qcm9ncmVzcyIsIl9hY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiX2NhY2hlTG9jYXRpb24iLCJfbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCIsIl9zdGF0ZSIsIl91bnByb3RlY3RlZFJlc291cmNlcyIsIl9wcm90ZWN0ZWRSZXNvdXJjZU1hcCIsIl9jYWNoZVN0b3JhZ2UiLCJTdG9yYWdlIiwiX2xvZ2dlciIsIm9wZW5lZFdpbmRvd3MiLCJhY3RpdmVSZW5ld2FscyIsInJlbmV3U3RhdGVzIiwiY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzIiwiY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlcyIsIm1zYWwiLCJ1cmxIYXNoIiwiaGFzaCIsImlzQ2FsbGJhY2siLCJoYW5kbGVBdXRoZW50aWNhdGlvblJlc3BvbnNlIiwicGVuZGluZ0NhbGxiYWNrIiwiZ2V0SXRlbSIsInByb2Nlc3NDYWxsQmFjayIsImF1dGhvcml0eUluc3RhbmNlIiwiQXV0aG9yaXR5RmFjdG9yeSIsIkNyZWF0ZUluc3RhbmNlIiwicmVxdWVzdEluZm8iLCJnZXRSZXF1ZXN0SW5mbyIsInNhdmVUb2tlbkZyb21IYXNoIiwidG9rZW5UeXBlIiwidG9rZW4iLCJwYXJhbWV0ZXJzIiwiYWNjZXNzVG9rZW4iLCJpZFRva2VuIiwiZXJyb3JEZXNjIiwiZXJyb3JEZXNjcmlwdGlvbiIsInJlbW92ZUl0ZW0iLCJjbGVhckNvb2tpZSIsImdldFVzZXJTdGF0ZSIsInN0YXRlTG9naW4iLCJnZXRSZWRpcmVjdFVyaSIsImdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsImxvZ2luUmVkaXJlY3QiLCJsb2dpblByb2dyZXNzRXJyb3IiLCJpc1ZhbGlkU2NvcGUiLCJ2YWxpZGF0ZUlucHV0U2NvcGUiLCJpbnB1dFNjb3Blc0Vycm9yIiwiZmlsdGVyU2NvcGVzIiwiZXh0cmFjdEFEQUxJZFRva2VuIiwiX3NpbGVudExvZ2luIiwiYWNxdWlyZVRva2VuU2lsZW50IiwiZ2V0VXNlciIsIl9zaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlIiwibG9naW5SZWRpcmVjdEhlbHBlciIsImF1dGhlbnRpY2F0aW9uUmVxdWVzdCIsIkF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMiLCJsb2dpblN0YXJ0UGFnZSIsImFuZ3VsYXJMb2dpblJlcXVlc3QiLCJzZXRJdGVtIiwibG9naW5SZXF1ZXN0IiwibG9naW5FcnJvciIsIm5vbmNlSWRUb2tlbiIsIm5vbmNlIiwibXNhbEVycm9yIiwibXNhbEVycm9yRGVzY3JpcHRpb24iLCJhdXRob3JpdHlLZXkiLCJyZXNvdXJjZURlbGltZXRlciIsInVybE5hdmlnYXRlIiwiY3JlYXRlTmF2aWdhdGVVcmwiLCJyZXNwb25zZV9tb2RlX2ZyYWdtZW50IiwicHJvbXB0VXNlciIsImxvZ2luUG9wdXAiLCJsb2dpblBvcHVwSGVscGVyIiwicG9wVXBXaW5kb3ciLCJvcGVuV2luZG93IiwicmVxdWVzdFR5cGUiLCJsb2dpbiIsInJlZ2lzdGVyQ2FsbGJhY2siLCJlbmRwb2ludFJlc29sdXRpb25FcnJvciIsImNsb3NlIiwiY2F0Y2giLCJ0aXRsZSIsImludGVydmFsIiwiaW5zdGFuY2UiLCJwb3B1cFdpbmRvdyIsIm9wZW5Qb3B1cCIsInBvcFVwV2lkdGgiLCJwb3BVcEhlaWdodCIsInBvcFVwV2luZG93RXJyb3IiLCJwb2xsVGltZXIiLCJzZXRJbnRlcnZhbCIsImNsb3NlZCIsInVzZXJDYW5jZWxsZWRFcnJvciIsImNsZWFySW50ZXJ2YWwiLCJicm9hZGNhc3QiLCJwb3BVcFdpbmRvd0xvY2F0aW9uIiwiZXZlbnROYW1lIiwiZGF0YSIsImV2dCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZGlzcGF0Y2hFdmVudCIsImxvZ291dCIsImNsZWFyQ2FjaGUiLCJfdXNlciIsImFjY2Vzc1Rva2VuSXRlbXMiLCJnZXRBbGxBY2Nlc3NUb2tlbnMiLCJzdHJpbmdpZnkiLCJyZXNldENhY2hlSXRlbXMiLCJjbGVhckNhY2hlRm9yU2NvcGUiLCJ3aW5MZWZ0Iiwic2NyZWVuTGVmdCIsInNjcmVlblgiLCJ3aW5Ub3AiLCJzY3JlZW5Ub3AiLCJzY3JlZW5ZIiwiaW5uZXJXaWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3AiLCJvcGVuIiwiZm9jdXMiLCJpc0FycmF5IiwiZWxlbWVudCIsImV4cGVjdGVkU3RhdGUiLCJnZXRDYWNoZWRUb2tlbkludGVybmFsIiwidXNlciIsInVzZXJPYmplY3QiLCJuZXdBdXRob3JpdHkiLCJnZXRDYWNoZWRUb2tlbiIsImFjY2Vzc1Rva2VuQ2FjaGVJdGVtIiwidG9rZW5DYWNoZUl0ZW1zIiwiZmlsdGVyZWRJdGVtcyIsImNhY2hlSXRlbSIsImF1dGhvcml0eUxpc3QiLCJnZXRVbmlxdWVBdXRob3JpdHkiLCJleHBpcmVkIiwiTnVtYmVyIiwib2Zmc2V0IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsImFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyIsIklkVG9rZW4iLCJjbGllbnRJbmZvIiwiQ2xpZW50SW5mbyIsIlVzZXIiLCJjcmVhdGVVc2VyIiwiZ2V0VW5pcXVlVXNlcnMiLCJmbGFncyIsInVuaXF1ZVVzZXJzIiwiaW5kZXgiLCJmb3JFYWNoIiwiYWRkSGludFBhcmFtZXRlcnMiLCJkZWNvZGVkQ2xpZW50SW5mbyIsInVpZCIsInV0aWQiLCJwcm9tcHRfbm9uZSIsInVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIiLCJkaXNwbGF5YWJsZUlkIiwiY29uc3VtZXJzVXRpZCIsImNvbnN1bWVycyIsInRlc3QiLCJhY3F1aXJlVG9rZW5SZWRpcmVjdCIsInVzZXJMb2dpbkVycm9yIiwiYWNxdWlyZVRva2VuQXV0aG9yaXR5IiwiYWNxdWlyZVRva2VuVXNlcktleSIsImFjcXVpcmVUb2tlblVzZXIiLCJub191c2VyIiwic3RhdGVBY3F1aXJlVG9rZW4iLCJhY3F1aXJlVG9rZW5Qb3B1cCIsImFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IiLCJyZW5ld1Rva2VuIiwiYXV0aGVudGljYXRpb25SZXF1ZXN0XzEiLCJzY29wZV8xIiwidXNlck9iamVjdF8xIiwiYWRhbElkVG9rZW4iLCJjb25zb2xlIiwiY2FjaGVSZXN1bHQiLCJyZW5ld0lkVG9rZW4iLCJsb2FkSWZyYW1lVGltZW91dCIsImZyYW1lTmFtZSIsInJlbmV3U3RhdHVzIiwidG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MiLCJsb2FkRnJhbWUiLCJzZXRUaW1lb3V0IiwidG9rZW5SZW5ld1N0YXR1c0NhbmNlbGxlZCIsImZyYW1lQ2hlY2siLCJmcmFtZUhhbmRsZSIsImFkZEFkYWxGcmFtZSIsInNyYyIsImlmcmFtZUlkIiwiYWRhbEZyYW1lIiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaWZyIiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwicG9zaXRpb24iLCJib3JkZXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZnJhbWVzIiwicHJvbXB0IiwicmF3SWRUb2tlbiIsImlkVG9rZW5LZXkiLCJyYXdDbGllbnRJbmZvIiwibXNhbENsaWVudEluZm8iLCJzZWxmIiwiaXNQb3B1cCIsImlzV2luZG93T3BlbmVyTXNhbCIsIm9wZW5lciIsInBhcmVudCIsInN0YXRlUmVzcG9uc2UiLCJzdGF0ZU1hdGNoIiwic2F2ZUFjY2Vzc1Rva2VuIiwidG9rZW5SZXNwb25zZSIsImNsaWVudE9iaiIsImNvbnNlbnRlZFNjb3BlcyIsImFjY2Vzc1Rva2VuS2V5IiwiQWNjZXNzVG9rZW5LZXkiLCJhY2Nlc3NUb2tlblZhbHVlIiwiQWNjZXNzVG9rZW5WYWx1ZSIsImV4cGlyYXRpb24iLCJ1c2VyS2V5Iiwic2Vzc2lvblN0YXRlIiwibXNhbFNlc3Npb25TdGF0ZSIsImFjcXVpcmVUb2tlblVzZXJLZXlfbm91c2VyIiwiY2FjaGVkVXNlciIsInRva2VuUmVuZXdTdGF0dXNDb21wbGV0ZWQiLCJyZW1vdmVBY3F1aXJlVG9rZW5FbnRyaWVzIiwic2V0SXRlbUNvb2tpZSIsImdldEhhc2giLCJzdWJzdHJpbmciLCJUb2tlblJlc3BvbnNlIiwidmFsaWQiLCJzdGF0ZXNJblBhcmVudENvbnRleHQiLCJnZXRTY29wZUZyb21TdGF0ZSIsInNwbGl0SW5kZXgiLCJsb2dpbkluUHJvZ3Jlc3MiLCJnZXRIb3N0RnJvbVVyaSIsInVyaSIsImV4dHJhY3RlZFVyaSIsImdldFNjb3Blc0ZvckVuZHBvaW50IiwiZW5kcG9pbnQiLCJzaXplIiwiZnJvbSIsImtleXMiLCJzZXRsb2dpbkluUHJvZ3Jlc3MiLCJnZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzIiwic2V0QWNxdWlyZVRva2VuSW5Qcm9ncmVzcyIsImFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MiLCJnZXRMb2dnZXIiLCJ0c2xpYl8xIiwiaWRlbnRpdHlQcm92aWRlciIsInByZWZlcnJlZE5hbWUiLCJkZWNvZGVkSWRUb2tlbiIsIkF1dGhvcml0eV8xIiwiQWFkQXV0aG9yaXR5IiwiX3N1cGVyIiwiQWFkSW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludCIsIkFhZCIsInJlc3VsdFByb21pc2UiLCJEZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50IiwiaG9zdCIsIklzSW5UcnVzdGVkSG9zdExpc3QiLCJBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50VXJsIiwidGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludCIsIlRydXN0ZWRIb3N0TGlzdCIsImxvZ2luLndpbmRvd3MubmV0IiwibG9naW4uY2hpbmFjbG91ZGFwaS5jbiIsImxvZ2luLmNsb3VkZ292YXBpLnVzIiwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSIsImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZSIsImxvZ2luLm1pY3Jvc29mdG9ubGluZS51cyIsIm1ldGhvZCIsImVuYWJsZUNhY2hpbmciLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9ubG9hZCIsImV2Iiwic3RhdHVzIiwiaGFuZGxlRXJyb3IiLCJyZXNwb25zZVRleHQiLCJqc29uUmVzcG9uc2UiLCJvbmVycm9yIiwic2VuZCIsIlVzZXJBZ2VudEFwcGxpY2F0aW9uXzEiLCJMb2dnZXJfMiIsIlVzZXJBZ2VudEFwcGxpY2F0aW9uXzIiLCJDYWNoZVJlc3VsdCIsInJlc3BvbnNlVHlwZSIsInhDbGllbnRTa3UiLCJ4Q2xpZW50VmVyIiwiY3JlYXRlTmF2aWdhdGlvblVybFN0cmluZyIsImF1dGhFbmRwb2ludCIsInRyYW5zbGF0ZWNsaWVudElkVXNlZEluU2NvcGUiLCJwYXJzZVNjb3BlIiwiY2xpZW50SWRJbmRleCIsInNwbGljZSIsInNjb3BlTGlzdCIsIl91aWQiLCJfdXRpZCIsIm9iamVjdElkIiwic3ViamVjdCIsInZlcnNpb24iLCJob21lT2JqZWN0SWQiLCJBY2Nlc3NUb2tlbkNhY2hlSXRlbV8xIiwiX2luc3RhbmNlIiwiX2xvY2FsU3RvcmFnZVN1cHBvcnRlZCIsIl9zZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCIsImVuYWJsZUNvb2tpZVN0b3JhZ2UiLCJnZXRJdGVtQ29va2llIiwiY2xlYXIiLCJyZXN1bHRzIiwic3RvcmFnZSIsIkFjY2Vzc1Rva2VuQ2FjaGVJdGVtIiwiY05hbWUiLCJjVmFsdWUiLCJjb29raWVTdHIiLCJzZXRFeHBpcmF0aW9uQ29va2llIiwiY29va2llIiwiY2EiLCJjb29raWVMaWZlIiwidG9kYXkiLCJBYWRBdXRob3JpdHlfMSIsIkIyY0F1dGhvcml0eV8xIiwiRGV0ZWN0QXV0aG9yaXR5RnJvbVVybCIsImF1dGhvcml0eVVybCIsIkIyQyIsIkFkZnMiLCJCMmNBdXRob3JpdHkiLCJiMmNBdXRo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QUFJQSxFQUFhLEdBQUUsTUF5Qi9ILE9BbkNrQ21lLEVBQUF4WixVQUFBc2UsRUFBQXhFLEdBYWhDdG5CLE9BQUFDLGVBQVc2ckIsRUFBQTVxQixVQUFBLGdCQUFhLEtBQXhCLFdBQ0UsT0FBT2ttQixFQUFBOWMsY0FBY3NoQixxQ0FNaEJFLEVBQUE1cUIsVUFBQXFMLG9DQUFQLGVBQUFELEVBQUF4SyxLQUNNMmxCLEVBQWdCLElBQUl0WSxRQUFnQixTQUFDQyxFQUFTQyxHQUNoRCxPQUFBRCxFQUFROUMsRUFBS29iLHNDQUVmLE9BQUs1bEIsS0FBSzRJLG9CQUlONUksS0FBSzhsQixvQkFBb0I5bEIsS0FBSytJLGdDQUFnQy9DLGlCQUN6RDJmLEVBR0YsSUFBSXRZLFFBQWdCLFNBQUNDLEVBQVNDLEdBQ25DLE9BQUFBLEVBQU9qRixFQUFBb0IsYUFBYXdnQixrQ0FSYnZFLEdBVWJxRSxFQW5DQSxDQUFrQ04sRUFBQW5FLGNBQXJCdm9CLEVBQUFndEIiLCJmaWxlIjoibXNhbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIk1zYWxcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiTXNhbFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJNc2FsXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IElVcmkgfSBmcm9tIFwiLi9JVXJpXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4vVXNlclwiO1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuICBzdGF0aWMgY29tcGFyZU9iamVjdHModTE6IFVzZXIsIHUyOiBVc2VyKTogYm9vbGVhbiB7XG4gICBpZiAoIXUxIHx8ICF1Mikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICBpZiAodTEudXNlcklkZW50aWZpZXIgJiYgdTIudXNlcklkZW50aWZpZXIpIHtcbiAgICAgIGlmICh1MS51c2VySWRlbnRpZmllciA9PT0gdTIudXNlcklkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyBleHBpcmVzSW4oZXhwaXJlczogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAvLyBpZiBBQUQgZGlkIG5vdCBzZW5kIFwiZXhwaXJlc19pblwiIHByb3BlcnR5LCB1c2UgZGVmYXVsdCBleHBpcmF0aW9uIG9mIDM1OTkgc2Vjb25kcywgZm9yIHNvbWUgcmVhc29uIEFBRCBzZW5kcyAzNTk5IGFzIFwiZXhwaXJlc19pblwiIHZhbHVlIGluc3RlYWQgb2YgMzYwMFxuICAgICBpZiAoIWV4cGlyZXMpIHtcbiAgICAgICAgIGV4cGlyZXMgPSBcIjM1OTlcIjtcbiAgICAgIH1cbiAgICByZXR1cm4gdGhpcy5ub3coKSArIHBhcnNlSW50KGV4cGlyZXMsIDEwKTtcbiAgfVxuXG4gIHN0YXRpYyBub3coKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAuMCk7XG4gIH1cblxuICBzdGF0aWMgaXNFbXB0eShzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodHlwZW9mIHN0ciA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhc3RyIHx8IDAgPT09IHN0ci5sZW5ndGgpO1xuICB9XG5cbiAgc3RhdGljIGV4dHJhY3RJZFRva2VuKGVuY29kZWRJZFRva2VuOiBzdHJpbmcpOiBhbnkge1xuICAgIC8vIGlkIHRva2VuIHdpbGwgYmUgZGVjb2RlZCB0byBnZXQgdGhlIHVzZXJuYW1lXG4gICAgY29uc3QgZGVjb2RlZFRva2VuID0gdGhpcy5kZWNvZGVKd3QoZW5jb2RlZElkVG9rZW4pO1xuICAgIGlmICghZGVjb2RlZFRva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhc2U2NElkVG9rZW4gPSBkZWNvZGVkVG9rZW4uSldTUGF5bG9hZDtcbiAgICAgIGNvbnN0IGJhc2U2NERlY29kZWQgPSB0aGlzLmJhc2U2NERlY29kZVN0cmluZ1VybFNhZmUoYmFzZTY0SWRUb2tlbik7XG4gICAgICBpZiAoIWJhc2U2NERlY29kZWQpIHtcbiAgICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIuaW5mbyhcIlRoZSByZXR1cm5lZCBpZF90b2tlbiBjb3VsZCBub3QgYmUgYmFzZTY0IHVybCBzYWZlIGRlY29kZWQuXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8vIEVDTUEgc2NyaXB0IGhhcyBKU09OIGJ1aWx0LWluIHN1cHBvcnRcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGJhc2U2NERlY29kZWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIuZXJyb3IoXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gY291bGQgbm90IGJlIGRlY29kZWRcIiArIGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzdGF0aWMgYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBodG1sNSBzaG91bGQgc3VwcG9ydCBhdG9iIGZ1bmN0aW9uIGZvciBkZWNvZGluZ1xuICAgIGlmICh3aW5kb3cuYnRvYSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5idG9hKGlucHV0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmNvZGUoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBiYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGJhc2U2NElkVG9rZW46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gaHRtbDUgc2hvdWxkIHN1cHBvcnQgYXRvYiBmdW5jdGlvbiBmb3IgZGVjb2RpbmdcbiAgICBiYXNlNjRJZFRva2VuID0gYmFzZTY0SWRUb2tlbi5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICBpZiAod2luZG93LmF0b2IpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVVUklDb21wb25lbnQod2luZG93LmF0b2IoYmFzZTY0SWRUb2tlbikpKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmRlY29kZShiYXNlNjRJZFRva2VuKSkpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBlbmNvZGUoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3Qga2V5U3RyOiBzdHJpbmcgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgbGV0IG91dHB1dCA9IFwiXCI7XG4gICAgbGV0IGNocjE6IG51bWJlciwgY2hyMjogbnVtYmVyLCBjaHIzOiBudW1iZXIsIGVuYzE6IG51bWJlciwgZW5jMjogbnVtYmVyLCBlbmMzOiBudW1iZXIsIGVuYzQ6IG51bWJlcjtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICBpbnB1dCA9IHRoaXMudXRmOEVuY29kZShpbnB1dCk7XG5cbiAgICB3aGlsZSAoaSA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgY2hyMSA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgIGNocjIgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICBjaHIzID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICBlbmMxID0gY2hyMSA+PiAyO1xuICAgICAgZW5jMiA9ICgoY2hyMSAmIDMpIDw8IDQpIHwgKGNocjIgPj4gNCk7XG4gICAgICBlbmMzID0gKChjaHIyICYgMTUpIDw8IDIpIHwgKGNocjMgPj4gNik7XG4gICAgICBlbmM0ID0gY2hyMyAmIDYzO1xuXG4gICAgICBpZiAoaXNOYU4oY2hyMikpIHtcbiAgICAgICAgZW5jMyA9IGVuYzQgPSA2NDtcbiAgICAgIH0gZWxzZSBpZiAoaXNOYU4oY2hyMykpIHtcbiAgICAgICAgZW5jNCA9IDY0O1xuICAgICAgfVxuXG4gICAgICBvdXRwdXQgPSBvdXRwdXQgKyBrZXlTdHIuY2hhckF0KGVuYzEpICsga2V5U3RyLmNoYXJBdChlbmMyKSArIGtleVN0ci5jaGFyQXQoZW5jMykgKyBrZXlTdHIuY2hhckF0KGVuYzQpO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpLnJlcGxhY2UoLz0rJC8sIFwiXCIpO1xuICB9XG5cbiAgc3RhdGljIHV0ZjhFbmNvZGUoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIik7XG4gICAgdmFyIHV0ZnRleHQgPSBcIlwiO1xuXG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBpbnB1dC5sZW5ndGg7IG4rKykge1xuICAgICAgdmFyIGMgPSBpbnB1dC5jaGFyQ29kZUF0KG4pO1xuXG4gICAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICgoYyA+IDEyNykgJiYgKGMgPCAyMDQ4KSkge1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gNikgfCAxOTIpO1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiAxMikgfCAyMjQpO1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjID4+IDYpICYgNjMpIHwgMTI4KTtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgNjMpIHwgMTI4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXRmdGV4dDtcbiAgfVxuXG4gIHN0YXRpYyBkZWNvZGUoYmFzZTY0SWRUb2tlbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB2YXIgY29kZXMgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgYmFzZTY0SWRUb2tlbiA9IFN0cmluZyhiYXNlNjRJZFRva2VuKS5yZXBsYWNlKC89KyQvLCBcIlwiKTtcbiAgICB2YXIgbGVuZ3RoID0gYmFzZTY0SWRUb2tlbi5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCAlIDQgPT09IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSB0b2tlbiB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC5cIik7XG4gICAgfVxuICAgIGxldCBoMTogbnVtYmVyLCBoMjogbnVtYmVyLCBoMzogbnVtYmVyLCBoNDogbnVtYmVyLCBiaXRzOiBudW1iZXIsIGMxOiBudW1iZXIsIGMyOiBudW1iZXIsIGMzOiBudW1iZXIsIGRlY29kZWQgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgIC8vRXZlcnkgNCBiYXNlNjQgZW5jb2RlZCBjaGFyYWN0ZXIgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gMyBieXRlIHN0cmluZywgd2hpY2ggaXMgMjQgYml0c1xuICAgICAgLy8gdGhlbiA2IGJpdHMgcGVyIGJhc2U2NCBlbmNvZGVkIGNoYXJhY3RlclxuICAgICAgaDEgPSBjb2Rlcy5pbmRleE9mKGJhc2U2NElkVG9rZW4uY2hhckF0KGkpKTtcbiAgICAgIGgyID0gY29kZXMuaW5kZXhPZihiYXNlNjRJZFRva2VuLmNoYXJBdChpICsgMSkpO1xuICAgICAgaDMgPSBjb2Rlcy5pbmRleE9mKGJhc2U2NElkVG9rZW4uY2hhckF0KGkgKyAyKSk7XG4gICAgICBoNCA9IGNvZGVzLmluZGV4T2YoYmFzZTY0SWRUb2tlbi5jaGFyQXQoaSArIDMpKTtcbiAgICAgIC8vIEZvciBwYWRkaW5nLCBpZiBsYXN0IHR3byBhcmUgXCI9XCJcbiAgICAgIGlmIChpICsgMiA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBiaXRzID0gaDEgPDwgMTggfCBoMiA8PCAxMiB8IGgzIDw8IDY7XG4gICAgICAgIGMxID0gYml0cyA+PiAxNiAmIDI1NTtcbiAgICAgICAgYzIgPSBiaXRzID4+IDggJiAyNTU7XG4gICAgICAgIGRlY29kZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSwgYzIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIGlmIGxhc3Qgb25lIGlzIFwiPVwiXG4gICAgICBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBiaXRzID0gaDEgPDwgMTggfCBoMiA8PCAxMjtcbiAgICAgICAgYzEgPSBiaXRzID4+IDE2ICYgMjU1O1xuICAgICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJpdHMgPSBoMSA8PCAxOCB8IGgyIDw8IDEyIHwgaDMgPDwgNiB8IGg0O1xuICAgICAgLy8gdGhlbiBjb252ZXJ0IHRvIDMgYnl0ZSBjaGFyc1xuICAgICAgYzEgPSBiaXRzID4+IDE2ICYgMjU1O1xuICAgICAgYzIgPSBiaXRzID4+IDggJiAyNTU7XG4gICAgICBjMyA9IGJpdHMgJiAyNTU7XG4gICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEsIGMyLCBjMyk7XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVkO1xuICB9XG5cbiAgc3RhdGljIGRlY29kZUp3dChqd3RUb2tlbjogc3RyaW5nKTogYW55IHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KGp3dFRva2VuKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGlkVG9rZW5QYXJ0c1JlZ2V4ID0gL14oW15cXC5cXHNdKilcXC4oW15cXC5cXHNdKylcXC4oW15cXC5cXHNdKikkLztcbiAgICBjb25zdCBtYXRjaGVzID0gaWRUb2tlblBhcnRzUmVnZXguZXhlYyhqd3RUb2tlbik7XG4gICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMubGVuZ3RoIDwgNCkge1xuICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIud2FybihcIlRoZSByZXR1cm5lZCBpZF90b2tlbiBpcyBub3QgcGFyc2VhYmxlLlwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjcmFja2VkVG9rZW4gPSB7XG4gICAgICBoZWFkZXI6IG1hdGNoZXNbMV0sXG4gICAgICBKV1NQYXlsb2FkOiBtYXRjaGVzWzJdLFxuICAgICAgSldTU2lnOiBtYXRjaGVzWzNdXG4gICAgfTtcbiAgICByZXR1cm4gY3JhY2tlZFRva2VuO1xuICB9XG5cbiAgc3RhdGljIGRlc2VyaWFsaXplKHF1ZXJ5OiBzdHJpbmcpOiBhbnkge1xuICAgIGxldCBtYXRjaDogQXJyYXk8c3RyaW5nPjsgLy8gUmVnZXggZm9yIHJlcGxhY2luZyBhZGRpdGlvbiBzeW1ib2wgd2l0aCBhIHNwYWNlXG4gICAgY29uc3QgcGwgPSAvXFwrL2c7XG4gICAgY29uc3Qgc2VhcmNoID0gLyhbXiY9XSspPShbXiZdKikvZztcbiAgICBjb25zdCBkZWNvZGUgPSAoczogc3RyaW5nKSA9PiBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsLCBcIiBcIikpO1xuICAgIGNvbnN0IG9iajoge30gPSB7fTtcbiAgICBtYXRjaCA9IHNlYXJjaC5leGVjKHF1ZXJ5KTtcbiAgICB3aGlsZSAobWF0Y2gpIHtcbiAgICAgIG9ialtkZWNvZGUobWF0Y2hbMV0pXSA9IGRlY29kZShtYXRjaFsyXSk7XG4gICAgICBtYXRjaCA9IHNlYXJjaC5leGVjKHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHN0YXRpYyBpc0ludGVyc2VjdGluZ1Njb3BlcyhjYWNoZWRTY29wZXM6IEFycmF5PHN0cmluZz4sIHNjb3BlczogQXJyYXk8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGNhY2hlZFNjb3BlcyA9IHRoaXMuY29udmVydFRvTG93ZXJDYXNlKGNhY2hlZFNjb3Blcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY29wZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNhY2hlZFNjb3Blcy5pbmRleE9mKHNjb3Blc1tpXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgY29udGFpbnNTY29wZShjYWNoZWRTY29wZXM6IEFycmF5PHN0cmluZz4sIHNjb3BlczogQXJyYXk8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGNhY2hlZFNjb3BlcyA9IHRoaXMuY29udmVydFRvTG93ZXJDYXNlKGNhY2hlZFNjb3Blcyk7XG4gICAgcmV0dXJuIHNjb3Blcy5ldmVyeSgodmFsdWU6IGFueSk6IGJvb2xlYW4gPT4gY2FjaGVkU2NvcGVzLmluZGV4T2YodmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSA+PSAwKTtcbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0VG9Mb3dlckNhc2Uoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHNjb3Blcy5tYXAoc2NvcGUgPT4gc2NvcGUudG9Mb3dlckNhc2UoKSk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlRWxlbWVudChzY29wZXM6IEFycmF5PHN0cmluZz4sIHNjb3BlOiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gc2NvcGVzLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZSAhPT0gc2NvcGUpO1xuICB9XG5cbiAgc3RhdGljIGRlY2ltYWxUb0hleChudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgdmFyIGhleDogc3RyaW5nID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICB3aGlsZSAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgIGhleCA9IFwiMFwiICsgaGV4O1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xuICB9XG5cbiAgc3RhdGljIGdldExpYnJhcnlWZXJzaW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiMC4yLjRcIjtcbiAgfVxuXG4gIC8qXG4gICAgKiBHaXZlbiBhIHVybCBsaWtlIGh0dHBzOi8vYTpiL2NvbW1vbi9kP2U9ZiNnLCBhbmQgYSB0ZW5hbnRJZCwgcmV0dXJucyBodHRwczovL2E6Yi90ZW5hbnRJZC9kXG4gICAgKiBAcGFyYW0gaHJlZiBUaGUgdXJsXG4gICAgKiBAcGFyYW0gdGVuYW50SWQgVGhlIHRlbmFudCBpZCB0byByZXBsYWNlXG4gICAgKi9cbiAgICBzdGF0aWMgcmVwbGFjZUZpcnN0UGF0aCh1cmw6IHN0cmluZywgdGVuYW50SWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGVuYW50SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVybE9iamVjdCA9IHRoaXMuR2V0VXJsQ29tcG9uZW50cyh1cmwpO1xuICAgICAgICB2YXIgcGF0aEFycmF5ID0gdXJsT2JqZWN0LlBhdGhTZWdtZW50cztcbiAgICAgICAgaWYgKHBhdGhBcnJheS5sZW5ndGggIT09IDAgJiYgKHBhdGhBcnJheVswXSA9PT0gQ29uc3RhbnRzLmNvbW1vbiB8fCBwYXRoQXJyYXlbMF0gPT09IENvbnN0YW50cy5vcmdhbml6YXRpb25zKSkge1xuICAgICAgICAgICAgcGF0aEFycmF5WzBdID0gdGVuYW50SWQ7XG4gICAgICAgICAgICB1cmwgPSB1cmxPYmplY3QuUHJvdG9jb2wgKyBcIi8vXCIgKyB1cmxPYmplY3QuSG9zdE5hbWVBbmRQb3J0ICsgXCIvXCIgKyBwYXRoQXJyYXkuam9pbihcIi9cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgc3RhdGljIGNyZWF0ZU5ld0d1aWQoKTogc3RyaW5nIHtcbiAgICAvLyBSRkM0MTIyOiBUaGUgdmVyc2lvbiA0IFVVSUQgaXMgbWVhbnQgZm9yIGdlbmVyYXRpbmcgVVVJRHMgZnJvbSB0cnVseS1yYW5kb20gb3JcbiAgICAvLyBwc2V1ZG8tcmFuZG9tIG51bWJlcnMuXG4gICAgLy8gVGhlIGFsZ29yaXRobSBpcyBhcyBmb2xsb3dzOlxuICAgIC8vICAgICBTZXQgdGhlIHR3byBtb3N0IHNpZ25pZmljYW50IGJpdHMgKGJpdHMgNiBhbmQgNykgb2YgdGhlXG4gICAgLy8gICAgICAgIGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWQgdG8gemVybyBhbmQgb25lLCByZXNwZWN0aXZlbHkuXG4gICAgLy8gICAgIFNldCB0aGUgZm91ciBtb3N0IHNpZ25pZmljYW50IGJpdHMgKGJpdHMgMTIgdGhyb3VnaCAxNSkgb2YgdGhlXG4gICAgLy8gICAgICAgIHRpbWVfaGlfYW5kX3ZlcnNpb24gZmllbGQgdG8gdGhlIDQtYml0IHZlcnNpb24gbnVtYmVyIGZyb21cbiAgICAvLyAgICAgICAgU2VjdGlvbiA0LjEuMy4gVmVyc2lvbjRcbiAgICAvLyAgICAgU2V0IGFsbCB0aGUgb3RoZXIgYml0cyB0byByYW5kb21seSAob3IgcHNldWRvLXJhbmRvbWx5KSBjaG9zZW5cbiAgICAvLyAgICAgdmFsdWVzLlxuICAgIC8vIFVVSUQgICAgICAgICAgICAgICAgICAgPSB0aW1lLWxvdyBcIi1cIiB0aW1lLW1pZCBcIi1cInRpbWUtaGlnaC1hbmQtdmVyc2lvbiBcIi1cImNsb2NrLXNlcS1yZXNlcnZlZCBhbmQgbG93KDJoZXhPY3RldClcIi1cIiBub2RlXG4gICAgLy8gdGltZS1sb3cgICAgICAgICAgICAgICA9IDRoZXhPY3RldFxuICAgIC8vIHRpbWUtbWlkICAgICAgICAgICAgICAgPSAyaGV4T2N0ZXRcbiAgICAvLyB0aW1lLWhpZ2gtYW5kLXZlcnNpb24gID0gMmhleE9jdGV0XG4gICAgLy8gY2xvY2stc2VxLWFuZC1yZXNlcnZlZCA9IGhleE9jdGV0OlxuICAgIC8vIGNsb2NrLXNlcS1sb3cgICAgICAgICAgPSBoZXhPY3RldFxuICAgIC8vIG5vZGUgICAgICAgICAgICAgICAgICAgPSA2aGV4T2N0ZXRcbiAgICAvLyBGb3JtYXQ6IHh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFxuICAgIC8vIHkgY291bGQgYmUgMTAwMCwgMTAwMSwgMTAxMCwgMTAxMSBzaW5jZSBtb3N0IHNpZ25pZmljYW50IHR3byBiaXRzIG5lZWRzIHRvIGJlIDEwXG4gICAgLy8geSB2YWx1ZXMgYXJlIDgsIDksIEEsIEJcblxuICAgIGNvbnN0IGNyeXB0b09iajogQ3J5cHRvID0gd2luZG93LmNyeXB0bzsgLy8gZm9yIElFIDExXG4gICAgaWYgKGNyeXB0b09iaiAmJiBjcnlwdG9PYmouZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICBjb25zdCBidWZmZXI6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSgxNik7XG4gICAgICBjcnlwdG9PYmouZ2V0UmFuZG9tVmFsdWVzKGJ1ZmZlcik7XG5cbiAgICAgIC8vYnVmZmVyWzZdIGFuZCBidWZmZXJbN10gcmVwcmVzZW50cyB0aGUgdGltZV9oaV9hbmRfdmVyc2lvbiBmaWVsZC4gV2Ugd2lsbCBzZXQgdGhlIGZvdXIgbW9zdCBzaWduaWZpY2FudCBiaXRzICg0IHRocm91Z2ggNykgb2YgYnVmZmVyWzZdIHRvIHJlcHJlc2VudCBkZWNpbWFsIG51bWJlciA0IChVVUlEIHZlcnNpb24gbnVtYmVyKS5cbiAgICAgIGJ1ZmZlcls2XSB8PSAweDQwOyAvL2J1ZmZlcls2XSB8IDAxMDAwMDAwIHdpbGwgc2V0IHRoZSA2IGJpdCB0byAxLlxuICAgICAgYnVmZmVyWzZdICY9IDB4NGY7IC8vYnVmZmVyWzZdICYgMDEwMDExMTEgd2lsbCBzZXQgdGhlIDQsIDUsIGFuZCA3IGJpdCB0byAwIHN1Y2ggdGhhdCBiaXRzIDQtNyA9PSAwMTAwID0gXCI0XCIuXG5cbiAgICAgIC8vYnVmZmVyWzhdIHJlcHJlc2VudHMgdGhlIGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWQgZmllbGQuIFdlIHdpbGwgc2V0IHRoZSB0d28gbW9zdCBzaWduaWZpY2FudCBiaXRzICg2IGFuZCA3KSBvZiB0aGUgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZCB0byB6ZXJvIGFuZCBvbmUsIHJlc3BlY3RpdmVseS5cbiAgICAgIGJ1ZmZlcls4XSB8PSAweDgwOyAvL2J1ZmZlcls4XSB8IDEwMDAwMDAwIHdpbGwgc2V0IHRoZSA3IGJpdCB0byAxLlxuICAgICAgYnVmZmVyWzhdICY9IDB4YmY7IC8vYnVmZmVyWzhdICYgMTAxMTExMTEgd2lsbCBzZXQgdGhlIDYgYml0IHRvIDAuXG5cbiAgICAgIHJldHVybiBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzBdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMV0pXG4gICAgICAgICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsyXSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzNdKVxuICAgICAgICArIFwiLVwiICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls0XSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzVdKVxuICAgICAgICArIFwiLVwiICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls2XSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzddKVxuICAgICAgICArIFwiLVwiICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls4XSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzldKVxuICAgICAgICArIFwiLVwiICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxMF0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxMV0pXG4gICAgICAgICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxMl0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxM10pXG4gICAgICAgICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxNF0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxNV0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGd1aWRIb2xkZXI6IHN0cmluZyA9IFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCI7XG4gICAgICBjb25zdCBoZXg6IHN0cmluZyA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO1xuICAgICAgbGV0IHI6IG51bWJlciA9IDA7XG4gICAgICBsZXQgZ3VpZFJlc3BvbnNlOiBzdHJpbmcgPSBcIlwiO1xuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDM2OyBpKyspIHtcbiAgICAgICAgaWYgKGd1aWRIb2xkZXJbaV0gIT09IFwiLVwiICYmIGd1aWRIb2xkZXJbaV0gIT09IFwiNFwiKSB7XG4gICAgICAgICAgLy8gZWFjaCB4IGFuZCB5IG5lZWRzIHRvIGJlIHJhbmRvbVxuICAgICAgICAgIHIgPSBNYXRoLnJhbmRvbSgpICAqIDE2IHwgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3VpZEhvbGRlcltpXSA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICBndWlkUmVzcG9uc2UgKz0gaGV4W3JdO1xuICAgICAgICB9IGVsc2UgaWYgKGd1aWRIb2xkZXJbaV0gPT09IFwieVwiKSB7XG4gICAgICAgICAgLy8gY2xvY2stc2VxLWFuZC1yZXNlcnZlZCBmaXJzdCBoZXggaXMgZmlsdGVyZWQgYW5kIHJlbWFpbmluZyBoZXggdmFsdWVzIGFyZSByYW5kb21cbiAgICAgICAgICByICY9IDB4MzsgLy8gYml0IGFuZCB3aXRoIDAwMTEgdG8gc2V0IHBvcyAyIHRvIHplcm8gPzA/P1xuICAgICAgICAgIHIgfD0gMHg4OyAvLyBzZXQgcG9zIDMgdG8gMSBhcyAxPz8/XG4gICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGhleFtyXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBndWlkUmVzcG9uc2UgKz0gZ3VpZEhvbGRlcltpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGd1aWRSZXNwb25zZTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBQYXJzZXMgb3V0IHRoZSBjb21wb25lbnRzIGZyb20gYSB1cmwgc3RyaW5nLlxuICAgKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgdmFyaW91cyBjb21wb25lbnRzLiBQbGVhc2UgY2FjaGUgdGhpcyB2YWx1ZSBpbnN0ZWQgb2YgY2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIHVybC5cbiAgICovXG4gIHN0YXRpYyBHZXRVcmxDb21wb25lbnRzKHVybDogc3RyaW5nKTogSVVyaSB7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIHRocm93IFwiVXJsIHJlcXVpcmVkXCI7XG4gICAgfVxuXG4gICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vY3VydGlzei8xMTEzOWIyY2ZjYWVmNGEyNjFlMFxuICAgIHZhciByZWdFeCA9IFJlZ0V4cChcIl4oKFteOi8/I10rKTopPygvLyhbXi8/I10qKSk/KFtePyNdKikoXFxcXD8oW14jXSopKT8oIyguKikpP1wiKTtcblxuICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaChyZWdFeCk7XG5cbiAgICBpZiAoIW1hdGNoIHx8IG1hdGNoLmxlbmd0aCA8IDYpIHtcbiAgICAgIHRocm93IFwiVmFsaWQgdXJsIHJlcXVpcmVkXCI7XG4gICAgfVxuXG4gICAgbGV0IHVybENvbXBvbmVudHMgPSA8SVVyaT57XG4gICAgICBQcm90b2NvbDogbWF0Y2hbMV0sXG4gICAgICBIb3N0TmFtZUFuZFBvcnQ6IG1hdGNoWzRdLFxuICAgICAgQWJzb2x1dGVQYXRoOiBtYXRjaFs1XVxuICAgIH07XG5cbiAgICBsZXQgcGF0aFNlZ21lbnRzID0gdXJsQ29tcG9uZW50cy5BYnNvbHV0ZVBhdGguc3BsaXQoXCIvXCIpO1xuICAgIHBhdGhTZWdtZW50cyA9IHBhdGhTZWdtZW50cy5maWx0ZXIoKHZhbCkgPT4gdmFsICYmIHZhbC5sZW5ndGggPiAwKTsgLy8gcmVtb3ZlIGVtcHR5IGVsZW1lbnRzXG4gICAgdXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHMgPSBwYXRoU2VnbWVudHM7XG4gICAgcmV0dXJuIHVybENvbXBvbmVudHM7XG4gIH1cblxuICAvKlxuICAgKiBHaXZlbiBhIHVybCBvciBwYXRoLCBhcHBlbmQgYSB0cmFpbGluZyBzbGFzaCBpZiBvbmUgZG9lc250IGV4aXN0XG4gICAqL1xuICBzdGF0aWMgQ2Fub25pY2FsaXplVXJpKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodXJsKSB7XG4gICAgICB1cmwgPSB1cmwudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBpZiAodXJsICYmICFVdGlscy5lbmRzV2l0aCh1cmwsIFwiL1wiKSkge1xuICAgICAgdXJsICs9IFwiL1wiO1xuICAgIH1cblxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKlxuICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgdXJsIGVuZHMgd2l0aCB0aGUgc3VmZml4XG4gICAgKiBSZXF1aXJlZCBiZWNhdXNlIHdlIGFyZSBjb21waWxpbmcgZm9yIGVzNSBpbnN0ZWFkIG9mIGVzNlxuICAgICogQHBhcmFtIHVybFxuICAgICogQHBhcmFtIHN0clxuICAgICovXG4gIHN0YXRpYyBlbmRzV2l0aCh1cmw6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXVybCB8fCAhc3VmZml4KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC5pbmRleE9mKHN1ZmZpeCwgdXJsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcbiAgfVxuXG4gICAgIHN0YXRpYyBjaGVja1NTTyhleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiAgIShleHRyYVF1ZXJ5UGFyYW1ldGVycyAmJiAgKChleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5sb2dpbl9oaW50KSAhPT0gLTEgfHwgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzLmluZGV4T2YoQ29uc3RhbnRzLnNpZCkgIT09IC0xICkpKTtcbiAgICB9XG5cbiAgICAgc3RhdGljIGNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIoaWRUb2tlbk9iamVjdDogYW55LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZykge1xuICAgICAgICAgaWYgKGlkVG9rZW5PYmplY3QpIHtcbiAgICAgICAgICAgICBpZiAoaWRUb2tlbk9iamVjdC5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMudXBuKSkge1xuICAgICAgICAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMudXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIoZXh0cmFRdWVyeVBhcmFtZXRlcnMsIENvbnN0YW50cy5sb2dpbl9oaW50KTtcbiAgICAgICAgICAgICAgICAgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKGV4dHJhUXVlcnlQYXJhbWV0ZXJzLCBDb25zdGFudHMuZG9tYWluX2hpbnQpO1xuICAgICAgICAgICAgICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyArPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBpZFRva2VuT2JqZWN0LnVwbiArIFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFwiJlwiICsgQ29uc3RhbnRzLmxvZ2luX2hpbnQgKyBcIj1cIiArIGlkVG9rZW5PYmplY3QudXBuICsgXCImXCIgKyBDb25zdGFudHMuZG9tYWluX2hpbnQgKyBcIj1cIiArIENvbnN0YW50cy5vcmdhbml6YXRpb25zO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMudXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIoZXh0cmFRdWVyeVBhcmFtZXRlcnMsIENvbnN0YW50cy5kb21haW5faGludCk7XG4gICAgICAgICAgICAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhUXVlcnlQYXJhbWV0ZXJzICs9IFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycztcbiAgICAgfVxuXG4gICAgIHN0YXRpYyB1cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcih1cmw6IHN0cmluZywgbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkodXJsKSkge1xuICAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICB9XG5cbiAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCIoXFxcXCZcIiArIG5hbWUgKyBcIj0pW15cXCZdK1wiKTtcbiAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcbiAgICAgICAgIC8vIG5hbWU9dmFsdWUmXG4gICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAoXCIoXCIgKyBuYW1lICsgXCI9KVteXFwmXSsmXCIpO1xuICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UocmVnZXgsIFwiXCIpO1xuICAgICAgICAgLy8gbmFtZT12YWx1ZVxuICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFwiICsgbmFtZSArIFwiPSlbXlxcJl0rXCIpO1xuICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UocmVnZXgsIFwiXCIpO1xuICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgfVxuXG59XG4iLCIvKlxuICAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAgKiAgTUlUIExpY2Vuc2VcbiAgKlxuICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAgKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgKiBjb25kaXRpb25zOlxuICAqXG4gICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAgKlxuICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAgKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnN0YW50cyB7XG4gIHN0YXRpYyBnZXQgZXJyb3JEZXNjcmlwdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJlcnJvcl9kZXNjcmlwdGlvblwiOyB9XG4gIHN0YXRpYyBnZXQgZXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiZXJyb3JcIjsgfVxuICBzdGF0aWMgZ2V0IHNjb3BlKCk6IHN0cmluZyB7IHJldHVybiBcInNjb3BlXCI7IH1cbiAgc3RhdGljIGdldCBhY3F1aXJlVG9rZW5Vc2VyKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYWNxdWlyZVRva2VuVXNlclwiOyB9XG4gIHN0YXRpYyBnZXQgY2xpZW50SW5mbygpOiBzdHJpbmcgeyByZXR1cm4gXCJjbGllbnRfaW5mb1wiOyB9XG4gIHN0YXRpYyBnZXQgY2xpZW50SWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiY2xpZW50SWRcIjsgfVxuICBzdGF0aWMgZ2V0IGF1dGhvcml0eSgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmF1dGhvcml0eVwiOyB9XG4gIHN0YXRpYyBnZXQgaWRUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJpZF90b2tlblwiOyB9XG4gIHN0YXRpYyBnZXQgYWNjZXNzVG9rZW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiYWNjZXNzX3Rva2VuXCI7IH1cbiAgc3RhdGljIGdldCBleHBpcmVzSW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiZXhwaXJlc19pblwiOyB9XG4gIHN0YXRpYyBnZXQgc2Vzc2lvblN0YXRlKCk6IHN0cmluZyB7IHJldHVybiBcInNlc3Npb25fc3RhdGVcIjsgfVxuICBzdGF0aWMgZ2V0IG1zYWxDbGllbnRJbmZvKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuY2xpZW50LmluZm9cIjsgfVxuICBzdGF0aWMgZ2V0IG1zYWxFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmVycm9yXCI7IH1cbiAgc3RhdGljIGdldCBtc2FsRXJyb3JEZXNjcmlwdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmVycm9yLmRlc2NyaXB0aW9uXCI7IH1cbiAgc3RhdGljIGdldCBtc2FsU2Vzc2lvblN0YXRlKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuc2Vzc2lvbi5zdGF0ZVwiOyB9XG4gIHN0YXRpYyBnZXQgdG9rZW5LZXlzKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwudG9rZW4ua2V5c1wiOyB9XG4gIHN0YXRpYyBnZXQgYWNjZXNzVG9rZW5LZXkoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5hY2Nlc3MudG9rZW4ua2V5XCI7IH1cbiAgc3RhdGljIGdldCBleHBpcmF0aW9uS2V5KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuZXhwaXJhdGlvbi5rZXlcIjsgfVxuICBzdGF0aWMgZ2V0IHN0YXRlTG9naW4oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5sb2dpblwiOyB9XG4gIHN0YXRpYyBnZXQgc3RhdGVBY3F1aXJlVG9rZW4oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5hY3F1aXJlVG9rZW5cIjsgfVxuICBzdGF0aWMgZ2V0IHN0YXRlUmVuZXcoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5yZW5ld1wiOyB9XG4gIHN0YXRpYyBnZXQgbm9uY2VJZFRva2VuKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwubm9uY2UuaWR0b2tlblwiOyB9XG4gIHN0YXRpYyBnZXQgdXNlck5hbWUoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC51c2VybmFtZVwiOyB9XG4gIHN0YXRpYyBnZXQgaWRUb2tlbktleSgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmlkdG9rZW5cIjsgfVxuICBzdGF0aWMgZ2V0IGxvZ2luUmVxdWVzdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmxvZ2luLnJlcXVlc3RcIjsgfVxuICBzdGF0aWMgZ2V0IGxvZ2luRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5sb2dpbi5lcnJvclwiOyB9XG4gIHN0YXRpYyBnZXQgcmVuZXdTdGF0dXMoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC50b2tlbi5yZW5ldy5zdGF0dXNcIjsgfVxuICBzdGF0aWMgZ2V0IG1zYWwoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbFwiOyB9XG4gIHN0YXRpYyBnZXQgbm9fdXNlcigpOiBzdHJpbmcgeyByZXR1cm4gXCJOT19VU0VSXCI7IH1cbiAgc3RhdGljIGdldCBsb2dpbl9oaW50KCk6IHN0cmluZyB7IHJldHVybiBcImxvZ2luX2hpbnRcIjsgfVxuICBzdGF0aWMgZ2V0IGRvbWFpbl9oaW50KCk6IHN0cmluZyB7IHJldHVybiBcImRvbWFpbl9oaW50XCI7IH1cbiAgc3RhdGljIGdldCBvcmdhbml6YXRpb25zKCk6IHN0cmluZyB7IHJldHVybiBcIm9yZ2FuaXphdGlvbnNcIjsgfVxuICBzdGF0aWMgZ2V0IGNvbnN1bWVycygpOiBzdHJpbmcgeyByZXR1cm4gXCJjb25zdW1lcnNcIjsgfVxuICBzdGF0aWMgZ2V0IGNvbnN1bWVyc1V0aWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiOTE4ODA0MGQtNmM2Ny00YzViLWIxMTItMzZhMzA0YjY2ZGFkXCI7IH1cbiAgc3RhdGljIGdldCBzaWQoKTogc3RyaW5nIHsgcmV0dXJuIFwic2lkXCI7IH1cbiAgc3RhdGljIGdldCB1cG4oKTogc3RyaW5nIHsgcmV0dXJuIFwidXBuXCI7IH1cbiAgc3RhdGljIGdldCBhZGFsSWRUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJhZGFsLmlkdG9rZW5cIjsgfVxuICBzdGF0aWMgZ2V0IHByb21wdF9zZWxlY3RfYWNjb3VudCgpOiBzdHJpbmcgeyByZXR1cm4gXCImcHJvbXB0PXNlbGVjdF9hY2NvdW50XCI7IH1cbiAgc3RhdGljIGdldCBwcm9tcHRfbm9uZSgpOiBzdHJpbmcgeyByZXR1cm4gXCImcHJvbXB0PW5vbmVcIjsgfVxuICBzdGF0aWMgZ2V0IHByb21wdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJwcm9tcHRcIjsgfVxuICBzdGF0aWMgZ2V0IHJlc3BvbnNlX21vZGVfZnJhZ21lbnQoKTogc3RyaW5nIHsgcmV0dXJuIFwiJnJlc3BvbnNlX21vZGU9ZnJhZ21lbnRcIjsgfVxuICBzdGF0aWMgZ2V0IHJlc291cmNlRGVsaW1ldGVyKCk6IHN0cmluZyB7IHJldHVybiBcInxcIjsgfVxuICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNDYW5jZWxsZWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiQ2FuY2VsZWRcIjsgfVxuICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNDb21wbGV0ZWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiQ29tcGxldGVkXCI7IH1cbiAgc3RhdGljIGdldCB0b2tlblJlbmV3U3RhdHVzSW5Qcm9ncmVzcygpOiBzdHJpbmcgeyByZXR1cm4gXCJJbiBQcm9ncmVzc1wiOyB9XG4gIHByaXZhdGUgc3RhdGljIF9wb3BVcFdpZHRoOiBudW1iZXIgPSA0ODM7XG4gIHN0YXRpYyBnZXQgcG9wVXBXaWR0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcG9wVXBXaWR0aDsgfVxuICBzdGF0aWMgc2V0IHBvcFVwV2lkdGgod2lkdGg6IG51bWJlcikge1xuICAgIHRoaXMuX3BvcFVwV2lkdGggPSB3aWR0aDtcbiAgfVxuICBwcml2YXRlIHN0YXRpYyBfcG9wVXBIZWlnaHQ6IG51bWJlciA9IDYwMDtcbiAgc3RhdGljIGdldCBwb3BVcEhlaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcG9wVXBIZWlnaHQ7IH1cbiAgc3RhdGljIHNldCBwb3BVcEhlaWdodChoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3BvcFVwSGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG4gIHN0YXRpYyBnZXQgbG9naW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiTE9HSU5cIjsgfVxuICBzdGF0aWMgZ2V0IHJlbmV3VG9rZW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiUkVORVdfVE9LRU5cIjsgfVxuICBzdGF0aWMgZ2V0IHVua25vd24oKTogc3RyaW5nIHsgcmV0dXJuIFwiVU5LTk9XTlwiOyB9XG4gIHN0YXRpYyBnZXQgdXJsSGFzaCgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLnVybEhhc2hcIjsgfVxuICAgIHN0YXRpYyBnZXQgYW5ndWxhckxvZ2luUmVxdWVzdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmFuZ3VsYXIubG9naW4ucmVxdWVzdFwiOyB9XG4gICAgc3RhdGljIGdldCB1c2VySWRlbnRpZmllcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VySWRlbnRpZmllclwiOyB9XG4gICAgc3RhdGljIGdldCBjb21tb24oKTogc3RyaW5nIHsgcmV0dXJuIFwiY29tbW9uXCI7IH1cbn1cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEVycm9yQ29kZXMge1xuICBzdGF0aWMgZ2V0IGxvZ2luUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJsb2dpbl9wcm9ncmVzc19lcnJvclwiOyB9XG4gIHN0YXRpYyBnZXQgYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJhY3F1aXJldG9rZW5fcHJvZ3Jlc3NfZXJyb3JcIjsgfVxuICBzdGF0aWMgZ2V0IGlucHV0U2NvcGVzRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiaW5wdXRfc2NvcGVzX2Vycm9yXCI7IH1cbiAgc3RhdGljIGdldCBlbmRwb2ludFJlc29sdXRpb25FcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJlbmRwb2ludHNfcmVzb2x1dGlvbl9lcnJvclwiOyB9XG4gIHN0YXRpYyBnZXQgcG9wVXBXaW5kb3dFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJwb3B1cF93aW5kb3dfZXJyb3JcIjsgfVxuICBzdGF0aWMgZ2V0IHVzZXJMb2dpbkVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcInVzZXJfbG9naW5fZXJyb3JcIjsgfVxuICBzdGF0aWMgZ2V0IHVzZXJDYW5jZWxsZWRFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VyX2NhbmNlbGxlZFwiOyB9XG59XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvckRlc2NyaXB0aW9uIHtcbiAgc3RhdGljIGdldCBsb2dpblByb2dyZXNzRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiTG9naW4gaXMgaW4gcHJvZ3Jlc3NcIjsgfVxuICBzdGF0aWMgZ2V0IGFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiQWNxdWlyZSB0b2tlbiBpcyBpbiBwcm9ncmVzc1wiOyB9XG4gIHN0YXRpYyBnZXQgaW5wdXRTY29wZXNFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJJbnZhbGlkIHZhbHVlIG9mIGlucHV0IHNjb3BlcyBwcm92aWRlZFwiOyB9XG4gIHN0YXRpYyBnZXQgZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiRW5kcG9pbnRzIGNhbm5vdCBiZSByZXNvbHZlZFwiOyB9XG4gIHN0YXRpYyBnZXQgcG9wVXBXaW5kb3dFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJFcnJvciBvcGVuaW5nIHBvcHVwIHdpbmRvdy4gVGhpcyBjYW4gaGFwcGVuIGlmIHlvdSBhcmUgdXNpbmcgSUUgb3IgaWYgcG9wdXBzIGFyZSBibG9ja2VkIGluIHRoZSBicm93c2VyLlwiOyB9XG4gIHN0YXRpYyBnZXQgdXNlckxvZ2luRXJyb3IoKTogc3RyaW5nIHsgcmV0dXJuIFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiOyB9XG4gIHN0YXRpYyBnZXQgdXNlckNhbmNlbGxlZEVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcIlVzZXIgY2xvc2VkIHRoZSBwb3B1cCB3aW5kb3cgYW5kIGNhbmNlbGxlZCB0aGUgZmxvd1wiOyB9XG5cbn1cbiIsImltcG9ydCB7IElVcmkgfSBmcm9tIFwiLi9JVXJpXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5pbXBvcnQgeyBJVGVuYW50RGlzY292ZXJ5UmVzcG9uc2UgfSBmcm9tIFwiLi9JVGVuYW50RGlzY292ZXJ5UmVzcG9uc2VcIjtcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gXCIuL0Vycm9yTWVzc2FnZVwiO1xuaW1wb3J0IHsgWGhyQ2xpZW50IH0gZnJvbSBcIi4vWEhSQ2xpZW50XCI7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBlbnVtIEF1dGhvcml0eVR5cGUge1xuICBBYWQsXG4gIEFkZnMsXG4gIEIyQ1xufVxuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQXV0aG9yaXR5IHtcbiAgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBzdHJpbmcsIHZhbGlkYXRlQXV0aG9yaXR5OiBib29sZWFuKSB7XG4gICAgdGhpcy5Jc1ZhbGlkYXRpb25FbmFibGVkID0gdmFsaWRhdGVBdXRob3JpdHk7XG4gICAgdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgPSBhdXRob3JpdHk7XG5cbiAgICB0aGlzLnZhbGlkYXRlQXNVcmkoKTtcbiAgfVxuXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXQgQXV0aG9yaXR5VHlwZSgpOiBBdXRob3JpdHlUeXBlO1xuXG4gIHB1YmxpYyBJc1ZhbGlkYXRpb25FbmFibGVkOiBib29sZWFuO1xuXG4gIHB1YmxpYyBnZXQgVGVuYW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHNbMF07XG4gIH1cblxuICBwcml2YXRlIHRlbmFudERpc2NvdmVyeVJlc3BvbnNlOiBJVGVuYW50RGlzY292ZXJ5UmVzcG9uc2U7XG5cbiAgcHVibGljIGdldCBBdXRob3JpemF0aW9uRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICB0aGlzLnZhbGlkYXRlUmVzb2x2ZWQoKTtcbiAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5BdXRob3JpemF0aW9uRW5kcG9pbnQucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgRW5kU2Vzc2lvbkVuZHBvaW50KCk6IHN0cmluZyB7XG4gICAgdGhpcy52YWxpZGF0ZVJlc29sdmVkKCk7XG4gICAgcmV0dXJuIHRoaXMudGVuYW50RGlzY292ZXJ5UmVzcG9uc2UuRW5kU2Vzc2lvbkVuZHBvaW50LnJlcGxhY2UoXCJ7dGVuYW50fVwiLCB0aGlzLlRlbmFudCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IFNlbGZTaWduZWRKd3RBdWRpZW5jZSgpOiBzdHJpbmcge1xuICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xuICAgIHJldHVybiB0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlLklzc3Vlci5yZXBsYWNlKFwie3RlbmFudH1cIiwgdGhpcy5UZW5hbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVJlc29sdmVkKCkge1xuICAgIGlmICghdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZSkge1xuICAgICAgdGhyb3cgXCJQbGVhc2UgY2FsbCBSZXNvbHZlRW5kcG9pbnRzQXN5bmMgZmlyc3RcIjtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBBIFVSTCB0aGF0IGlzIHRoZSBhdXRob3JpdHkgc2V0IGJ5IHRoZSBkZXZlbG9wZXJcbiAgICovXG4gIHB1YmxpYyBnZXQgQ2Fub25pY2FsQXV0aG9yaXR5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5O1xuICB9XG5cbiAgcHVibGljIHNldCBDYW5vbmljYWxBdXRob3JpdHkodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eSA9IFV0aWxzLkNhbm9uaWNhbGl6ZVVyaSh1cmwpO1xuICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGNhbm9uaWNhbEF1dGhvcml0eTogc3RyaW5nO1xuICBwcml2YXRlIGNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM6IElVcmk7XG5cbiAgcHVibGljIGdldCBDYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzKCk6IElVcmkge1xuICAgIGlmICghdGhpcy5jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzKSB7XG4gICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMgPSBVdGlscy5HZXRVcmxDb21wb25lbnRzKHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzO1xuICB9XG5cbiAgLypcbiAgICogLy8gaHR0cDovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtZGlzY292ZXJ5LTFfMC5odG1sI1Byb3ZpZGVyTWV0YWRhdGFcbiAgICovXG4gIHByb3RlY3RlZCBnZXQgRGVmYXVsdE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLkNhbm9uaWNhbEF1dGhvcml0eX12Mi4wLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uYDtcbiAgfVxuXG4gIC8qXG4gICAqIEdpdmVuIGEgc3RyaW5nLCB2YWxpZGF0ZSB0aGF0IGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vZG9tYWluL3BhdGhcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVBc1VyaSgpIHtcbiAgICBsZXQgY29tcG9uZW50cztcbiAgICB0cnkge1xuICAgICAgY29tcG9uZW50cyA9IHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuaW52YWxpZEF1dGhvcml0eVR5cGU7XG4gICAgfVxuXG4gICAgaWYgKCFjb21wb25lbnRzLlByb3RvY29sIHx8IGNvbXBvbmVudHMuUHJvdG9jb2wudG9Mb3dlckNhc2UoKSAhPT0gXCJodHRwczpcIikge1xuICAgICAgdGhyb3cgRXJyb3JNZXNzYWdlLmF1dGhvcml0eVVyaUluc2VjdXJlO1xuICAgIH1cblxuICAgIGlmICghY29tcG9uZW50cy5QYXRoU2VnbWVudHMgfHwgY29tcG9uZW50cy5QYXRoU2VnbWVudHMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3cgRXJyb3JNZXNzYWdlLmF1dGhvcml0eVVyaUludmFsaWRQYXRoO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIENhbGxzIHRoZSBPSURDIGVuZHBvaW50IGFuZCByZXR1cm5zIHRoZSByZXNwb25zZVxuICAgKi9cbiAgcHJpdmF0ZSBEaXNjb3ZlckVuZHBvaW50cyhvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQ6IHN0cmluZyk6IFByb21pc2U8SVRlbmFudERpc2NvdmVyeVJlc3BvbnNlPiB7XG4gICAgbGV0IGNsaWVudCA9IG5ldyBYaHJDbGllbnQoKTtcbiAgICByZXR1cm4gY2xpZW50LnNlbmRSZXF1ZXN0QXN5bmMob3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50LCBcIkdFVFwiLCAvKmVuYWJsZUNhY2hpbmc6ICovIHRydWUpXG4gICAgICAgIC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gPElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZT57XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbkVuZHBvaW50OiByZXNwb25zZS5hdXRob3JpemF0aW9uX2VuZHBvaW50LFxuICAgICAgICAgICAgICAgIEVuZFNlc3Npb25FbmRwb2ludDogcmVzcG9uc2UuZW5kX3Nlc3Npb25fZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgSXNzdWVyOiByZXNwb25zZS5pc3N1ZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLypcbiAgICogUmV0dXJucyBhIHByb21pc2UuXG4gICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGF1dGhvcml0eSBpcyBpbiB0aGUgY2FjaGVcbiAgICogRGlzY292ZXIgZW5kcG9pbnRzIHZpYSBvcGVuaWQtY29uZmlndXJhdGlvblxuICAgKiBJZiBzdWNjZXNzZnVsLCBjYWNoZXMgdGhlIGVuZHBvaW50IGZvciBsYXRlciB1c2UgaW4gT0lEQ1xuICAgKi9cbiAgcHVibGljIFJlc29sdmVFbmRwb2ludHNBc3luYygpOiBQcm9taXNlPEF1dGhvcml0eT4ge1xuICAgIGxldCBvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQgPSBcIlwiO1xuICAgIHJldHVybiB0aGlzLkdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jKCkudGhlbihvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRSZXNwb25zZSA9PiB7XG4gICAgICBvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQgPSBvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRSZXNwb25zZTtcbiAgICAgIHJldHVybiB0aGlzLkRpc2NvdmVyRW5kcG9pbnRzKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCk7XG4gICAgfSkudGhlbigodGVuYW50RGlzY292ZXJ5UmVzcG9uc2U6IElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZSkgPT4ge1xuICAgICAgdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZSA9IHRlbmFudERpc2NvdmVyeVJlc3BvbnNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSk7XG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIHRoZSBUZW5hbnREaXNjb3ZlcnlFbmRwb2ludFxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IEdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jKCk6IFByb21pc2U8c3RyaW5nPjtcbn1cbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IHlbb3BbMF0gJiAyID8gXCJyZXR1cm5cIiA6IG9wWzBdID8gXCJ0aHJvd1wiIDogXCJuZXh0XCJdKSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFswLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyAgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKG9bbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH07IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl07XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKTtcclxufSIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlckNhbGxiYWNrIHtcbiAgKGxldmVsOiBMb2dMZXZlbCwgbWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbik6IHZvaWQ7XG59XG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgRXJyb3IsXG4gIFdhcm5pbmcsXG4gIEluZm8sXG4gIFZlcmJvc2Vcbn1cblxuZXhwb3J0IGNsYXNzIExvZ2dlciB7Ly8gU2luZ2xldG9uIENsYXNzXG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBMb2dnZXI7XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2xldmVsOiBMb2dMZXZlbCA9IExvZ0xldmVsLkluZm87XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfcGlpTG9nZ2luZ0VuYWJsZWQ6IGJvb2xlYW47XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfbG9jYWxDYWxsYmFjazogSUxvZ2dlckNhbGxiYWNrO1xuXG4gIGNvbnN0cnVjdG9yKGxvY2FsQ2FsbGJhY2s6IElMb2dnZXJDYWxsYmFjayxcbiAgICAgIG9wdGlvbnM6XG4gICAgICB7XG4gICAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgICBsZXZlbD86IExvZ0xldmVsLFxuICAgICAgICAgIHBpaUxvZ2dpbmdFbmFibGVkPzogYm9vbGVhbixcbiAgICAgIH0gPSB7fSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICAgIGNvcnJlbGF0aW9uSWQgPSBcIlwiLFxuICAgICAgICAgIGxldmVsID0gTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZCA9IGZhbHNlXG4gICAgICB9ID0gb3B0aW9ucztcblxuICAgICAgdGhpcy5fbG9jYWxDYWxsYmFjayA9IGxvY2FsQ2FsbGJhY2s7XG4gICAgICB0aGlzLl9jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZDtcbiAgICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7XG4gICAgICB0aGlzLl9waWlMb2dnaW5nRW5hYmxlZCA9IHBpaUxvZ2dpbmdFbmFibGVkO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBsb2dNZXNzYWdlKGxvZ0xldmVsOiBMb2dMZXZlbCwgbG9nTWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICgobG9nTGV2ZWwgPiB0aGlzLl9sZXZlbCkgfHwgKCF0aGlzLl9waWlMb2dnaW5nRW5hYmxlZCAmJiBjb250YWluc1BpaSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKTtcbiAgICB2YXIgbG9nOiBzdHJpbmc7XG4gICAgaWYgKCFVdGlscy5pc0VtcHR5KHRoaXMuX2NvcnJlbGF0aW9uSWQpKSB7XG4gICAgICBsb2cgPSB0aW1lc3RhbXAgKyBcIjpcIiArIHRoaXMuX2NvcnJlbGF0aW9uSWQgKyBcIi1cIiArIFV0aWxzLmdldExpYnJhcnlWZXJzaW9uKCkgKyBcIi1cIiArIExvZ0xldmVsW2xvZ0xldmVsXSArIFwiIFwiICsgbG9nTWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb2cgPSB0aW1lc3RhbXAgKyBcIjpcIiArIFV0aWxzLmdldExpYnJhcnlWZXJzaW9uKCkgKyBcIi1cIiArIExvZ0xldmVsW2xvZ0xldmVsXSArIFwiIFwiICsgbG9nTWVzc2FnZTtcbiAgICB9XG4gICAgdGhpcy5leGVjdXRlQ2FsbGJhY2sobG9nTGV2ZWwsIGxvZywgY29udGFpbnNQaWkpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgZXhlY3V0ZUNhbGxiYWNrKGxldmVsOiBMb2dMZXZlbCwgbWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLl9sb2NhbENhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9sb2NhbENhbGxiYWNrKGxldmVsLCBtZXNzYWdlLCBjb250YWluc1BpaSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLkVycm9yLCBtZXNzYWdlLCBmYWxzZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBlcnJvclBpaShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuRXJyb3IsIG1lc3NhZ2UsIHRydWUpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgd2FybmluZyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuV2FybmluZywgbWVzc2FnZSwgZmFsc2UpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgd2FybmluZ1BpaShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuV2FybmluZywgbWVzc2FnZSwgdHJ1ZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBpbmZvKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5JbmZvLCBtZXNzYWdlLCBmYWxzZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBpbmZvUGlpKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5JbmZvLCBtZXNzYWdlLCB0cnVlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHZlcmJvc2UobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLlZlcmJvc2UsIG1lc3NhZ2UsIGZhbHNlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHZlcmJvc2VQaWkobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLlZlcmJvc2UsIG1lc3NhZ2UsIHRydWUpO1xuICB9XG59XG4iLCIvKlxuICAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAgKiAgTUlUIExpY2Vuc2VcbiAgKlxuICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAgKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgKiBjb25kaXRpb25zOlxuICAqXG4gICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAgKlxuICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAgKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEVycm9yTWVzc2FnZSB7XG4gIHN0YXRpYyBnZXQgYXV0aG9yaXR5VXJpSW52YWxpZFBhdGgoKTogc3RyaW5nIHsgcmV0dXJuIFwiQXV0aG9yaXR5VXJpSW52YWxpZFBhdGhcIjsgfVxuICBzdGF0aWMgZ2V0IGF1dGhvcml0eVVyaUluc2VjdXJlKCk6IHN0cmluZyB7IHJldHVybiBcIkF1dGhvcml0eVVyaUluc2VjdXJlXCI7IH1cbiAgc3RhdGljIGdldCBpbnZhbGlkQXV0aG9yaXR5VHlwZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJJbnZhbGlkQXV0aG9yaXR5VHlwZVwiOyB9XG4gIHN0YXRpYyBnZXQgdW5zdXBwb3J0ZWRBdXRob3JpdHlWYWxpZGF0aW9uKCk6IHN0cmluZyB7IHJldHVybiBcIlVuc3VwcG9ydGVkQXV0aG9yaXR5VmFsaWRhdGlvblwiOyB9XG4gIHN0YXRpYyBnZXQgYjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGgoKTogc3RyaW5nIHsgcmV0dXJuIFwiQjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGhcIjsgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IEFjY2Vzc1Rva2VuQ2FjaGVJdGVtIH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5DYWNoZUl0ZW1cIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuS2V5IH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5LZXlcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuVmFsdWUgfSBmcm9tIFwiLi9BY2Nlc3NUb2tlblZhbHVlXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzIH0gZnJvbSBcIi4vQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVyc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5IH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBDbGllbnRJbmZvIH0gZnJvbSBcIi4vQ2xpZW50SW5mb1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzLCBFcnJvckNvZGVzLCBFcnJvckRlc2NyaXB0aW9uIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBJZFRva2VuIH0gZnJvbSBcIi4vSWRUb2tlblwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vTG9nZ2VyXCI7XG5pbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSBcIi4vU3RvcmFnZVwiO1xuaW1wb3J0IHsgVG9rZW5SZXNwb25zZSB9IGZyb20gXCIuL1JlcXVlc3RJbmZvXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4vVXNlclwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5RmFjdG9yeSB9IGZyb20gXCIuL0F1dGhvcml0eUZhY3RvcnlcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIGludGVyZmFjZSBXaW5kb3cge1xuICAgICAgICBtc2FsOiBPYmplY3Q7XG4gICAgICAgIEN1c3RvbUV2ZW50OiBDdXN0b21FdmVudDtcbiAgICAgICAgRXZlbnQ6IEV2ZW50O1xuICAgICAgICBhY3RpdmVSZW5ld2Fsczoge307XG4gICAgICAgIHJlbmV3U3RhdGVzOiBBcnJheTxzdHJpbmc+O1xuICAgICAgICBjYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXMgOiB7fTtcbiAgICAgICAgY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlczoge307XG4gICAgICAgIG9wZW5lZFdpbmRvd3M6IEFycmF5PFdpbmRvdz47XG4gICAgICAgIHJlcXVlc3RUeXBlOiBzdHJpbmc7XG4gICAgfVxufVxuXG4vKlxuICogQGhpZGRlblxuICovXG5sZXQgUmVzcG9uc2VUeXBlcyA9IHtcbiAgaWRfdG9rZW46IFwiaWRfdG9rZW5cIixcbiAgdG9rZW46IFwidG9rZW5cIixcbiAgaWRfdG9rZW5fdG9rZW46IFwiaWRfdG9rZW4gdG9rZW5cIlxufTtcblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWNoZVJlc3VsdCB7XG4gIGVycm9yRGVzYzogc3RyaW5nO1xuICB0b2tlbjogc3RyaW5nO1xuICBlcnJvcjogc3RyaW5nO1xufVxuXG4vKlxuICogQSB0eXBlIGFsaWFzIG9mIGZvciBhIHRva2VuUmVjZWl2ZWRDYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2suZXJyb3JEZXNjIGVycm9yIGRlc2NyaXB0aW9uIHJldHVybmVkIGZyb20gdGhlIFNUUyBpZiBBUEkgY2FsbCBmYWlscy5cbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sudG9rZW4gdG9rZW4gcmV0dXJuZWQgZnJvbSBTVFMgaWYgdG9rZW4gcmVxdWVzdCBpcyBzdWNjZXNzZnVsLlxuICogQHBhcmFtIHRva2VuUmVjZWl2ZWRDYWxsYmFjay5lcnJvciBlcnJvciBjb2RlIHJldHVybmVkIGZyb20gdGhlIFNUUyBpZiBBUEkgY2FsbCBmYWlscy5cbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sudG9rZW5UeXBlIHRva2VuVHlwZSByZXR1cm5lZCBmcm9tIHRoZSBTVFMgaWYgQVBJIGNhbGwgaXMgc3VjY2Vzc2Z1bC4gUG9zc2libGUgdmFsdWVzIGFyZTogaWRfdG9rZW4gT1IgYWNjZXNzX3Rva2VuLlxuICovXG5leHBvcnQgdHlwZSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSAoZXJyb3JEZXNjOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsIGVycm9yOiBzdHJpbmcsIHRva2VuVHlwZTogc3RyaW5nLCB1c2VyU3RhdGU6IHN0cmluZyApID0+IHZvaWQ7XG5jb25zdCByZXNvbHZlVG9rZW5Pbmx5SWZPdXRPZklmcmFtZSA9ICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSA9PiB7XG4gIGNvbnN0IHRva2VuQWNxdWlzaXRpb25NZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0luSWZyYW1lKClcbiAgICAgICAgICA/IG5ldyBQcm9taXNlKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogdG9rZW5BY3F1aXNpdGlvbk1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XG59O1xuZXhwb3J0IGNsYXNzIFVzZXJBZ2VudEFwcGxpY2F0aW9uIHtcblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIF9jYWNoZUxvY2F0aW9ucyA9IHtcbiAgICBsb2NhbFN0b3JhZ2U6IFwibG9jYWxTdG9yYWdlXCIsXG4gICAgc2Vzc2lvblN0b3JhZ2U6IFwic2Vzc2lvblN0b3JhZ2VcIlxuICB9O1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2NhY2hlTG9jYXRpb246IHN0cmluZztcblxuICAvKlxuICAgKiBVc2VkIHRvIGdldCB0aGUgY2FjaGUgbG9jYXRpb25cbiAgICovXG4gIGdldCBjYWNoZUxvY2F0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlTG9jYXRpb247XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2xvZ2dlcjogTG9nZ2VyO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2xvZ2luSW5Qcm9ncmVzczogYm9vbGVhbjtcblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIF9hY3F1aXJlVG9rZW5JblByb2dyZXNzOiBib29sZWFuO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2Nsb2NrU2tldyA9IDMwMDtcblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2NhY2hlU3RvcmFnZTogU3RvcmFnZTtcblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIF90b2tlblJlY2VpdmVkQ2FsbGJhY2s6IHRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IG51bGw7XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfdXNlcjogVXNlcjtcblxuICAvKlxuICAgKiBDbGllbnQgSUQgYXNzaWduZWQgdG8geW91ciBhcHAgYnkgQXp1cmUgQWN0aXZlIERpcmVjdG9yeS5cbiAgICovXG4gIGNsaWVudElkOiBzdHJpbmc7XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJvdGVjdGVkIGF1dGhvcml0eUluc3RhbmNlOiBBdXRob3JpdHk7XG5cbiAgLypcbiAgICogVXNlZCB0byBzZXQgdGhlIGF1dGhvcml0eS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7dGVuYW50Jmd0Oy8mbHQ7dGVuYW50Jmd0Oywgd2hlcmUgJmx0O3RlbmFudCZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXG4gICAqIC0gSW4gQXp1cmUgQjJDLCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDtpbnN0YW5jZSZndDsvdGZwLyZsdDt0ZW5hbnQmZ3Q7Lzxwb2xpY3lOYW1lPi9cbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxuICAgKi9cbiAgcHVibGljIHNldCBhdXRob3JpdHkodmFsKSB7XG4gICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA9IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UodmFsLCB0aGlzLnZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgfVxuXG4gIC8qXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBhdXRob3JpdHkuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGF1dGhvcml0eSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmF1dGhvcml0eUluc3RhbmNlLkNhbm9uaWNhbEF1dGhvcml0eTtcbiAgfVxuXG4gIC8qXG4gICAqIFVzZWQgdG8gdHVybiBhdXRob3JpdHkgdmFsaWRhdGlvbiBvbi9vZmYuXG4gICAqIFdoZW4gc2V0IHRvIHRydWUgKGRlZmF1bHQpLCBNU0FMIHdpbGwgY29tcGFyZSB0aGUgYXBwbGljYXRpb25cInMgYXV0aG9yaXR5IGFnYWluc3Qgd2VsbC1rbm93biBVUkxzIHRlbXBsYXRlcyByZXByZXNlbnRpbmcgd2VsbC1mb3JtZWQgYXV0aG9yaXRpZXMuIEl0IGlzIHVzZWZ1bCB3aGVuIHRoZSBhdXRob3JpdHkgaXMgb2J0YWluZWQgYXQgcnVuIHRpbWUgdG8gcHJldmVudCBNU0FMIGZyb20gZGlzcGxheWluZyBhdXRoZW50aWNhdGlvbiBwcm9tcHRzIGZyb20gbWFsaWNpb3VzIHBhZ2VzLlxuICAgKi9cbiAgdmFsaWRhdGVBdXRob3JpdHk6IGJvb2xlYW47XG5cbiAgLypcbiAgICogVGhlIHJlZGlyZWN0IFVSSSBvZiB0aGUgYXBwbGljYXRpb24sIHRoaXMgc2hvdWxkIGJlIHNhbWUgYXMgdGhlIHZhbHVlIGluIHRoZSBhcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsLlxuICAgKiBEZWZhdWx0cyB0byBgd2luZG93LmxvY2F0aW9uLmhyZWZgLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVkaXJlY3RVcmk6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuXG4gICAgLypcbiAgICAgKiBVc2UgdG8gc2VuZCB0aGUgc3RhdGUgcGFyYW1ldGVyIHdpdGggYXV0aGVudGljYXRpb24gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgX3N0YXRlOiBzdHJpbmc7XG4gIC8qXG4gICAqIFVzZWQgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gdGhpcyBsb2NhdGlvbiBhZnRlciBsb2dvdXQuXG4gICAqIERlZmF1bHRzIHRvIGB3aW5kb3cubG9jYXRpb24uaHJlZmAuXG4gICAqL1xuICBwcml2YXRlIF9wb3N0TG9nb3V0cmVkaXJlY3RVcmk6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuXG4gIGxvYWRGcmFtZVRpbWVvdXQ6IG51bWJlcjtcblxuICBwcm90ZWN0ZWQgX25hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmw6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfaXNBbmd1bGFyOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfcHJvdGVjdGVkUmVzb3VyY2VNYXA6IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+O1xuXG4gIHByaXZhdGUgX3VucHJvdGVjdGVkUmVzb3VyY2VzOiBBcnJheTxzdHJpbmc+O1xuXG4gIHByaXZhdGUgc3RvcmVBdXRoU3RhdGVJbkNvb2tpZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9zaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfc2lsZW50TG9naW46IGJvb2xlYW47XG4gIC8qXG4gICAqIEluaXRpYWxpemUgYSBVc2VyQWdlbnRBcHBsaWNhdGlvbiB3aXRoIGEgZ2l2ZW4gY2xpZW50SWQgYW5kIGF1dGhvcml0eS5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGllbnRJZCAtIFRoZSBjbGllbnRJRCBvZiB5b3VyIGFwcGxpY2F0aW9uLCB5b3Ugc2hvdWxkIGdldCB0aGlzIGZyb20gdGhlIGFwcGxpY2F0aW9uIHJlZ2lzdHJhdGlvbiBwb3J0YWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O2luc3RhbmNlPi8mbHQ7dGVuYW50Jmd0OyxcXCB3aGVyZSAmbHQ7aW5zdGFuY2UmZ3Q7IGlzIHRoZSBkaXJlY3RvcnkgaG9zdCAoZS5nLiBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20pIGFuZCAmbHQ7dGVuYW50Jmd0OyBpcyBhIGlkZW50aWZpZXIgd2l0aGluIHRoZSBkaXJlY3RvcnkgaXRzZWxmIChlLmcuIGEgZG9tYWluIGFzc29jaWF0ZWQgdG8gdGhlIHRlbmFudCwgc3VjaCBhcyBjb250b3NvLm9ubWljcm9zb2Z0LmNvbSwgb3IgdGhlIEdVSUQgcmVwcmVzZW50aW5nIHRoZSBUZW5hbnRJRCBwcm9wZXJ0eSBvZiB0aGUgZGlyZWN0b3J5KVxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50SWQmZ3Q7LyZsdDtwb2xpY3lOYW1lJmd0Oy9cbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxuICAgKiBAcGFyYW0gX3Rva2VuUmVjZWl2ZWRDYWxsYmFjayAtICBUaGUgZnVuY3Rpb24gdGhhdCB3aWxsIGdldCB0aGUgY2FsbCBiYWNrIG9uY2UgdGhpcyBBUEkgaXMgY29tcGxldGVkIChlaXRoZXIgc3VjY2Vzc2Z1bGx5IG9yIHdpdGggYSBmYWlsdXJlKS5cbiAgICogQHBhcmFtIHtib29sZWFufSB2YWxpZGF0ZUF1dGhvcml0eSAtICBib29sZWFuIHRvIHR1cm4gYXV0aG9yaXR5IHZhbGlkYXRpb24gb24vb2ZmLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICBhdXRob3JpdHk6IHN0cmluZyB8IG51bGwsXG4gICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrOiB0b2tlblJlY2VpdmVkQ2FsbGJhY2ssXG4gICAgb3B0aW9uczpcbiAgICAgIHtcbiAgICAgICAgdmFsaWRhdGVBdXRob3JpdHk/OiBib29sZWFuLFxuICAgICAgICBjYWNoZUxvY2F0aW9uPzogc3RyaW5nLFxuICAgICAgICByZWRpcmVjdFVyaT86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpLFxuICAgICAgICBwb3N0TG9nb3V0UmVkaXJlY3RVcmk/OiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKSxcbiAgICAgICAgbG9nZ2VyPzogTG9nZ2VyLFxuICAgICAgICBsb2FkRnJhbWVUaW1lb3V0PzogbnVtYmVyLFxuICAgICAgICBuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsPzogYm9vbGVhbixcbiAgICAgICAgc3RhdGU/OiBzdHJpbmcsXG4gICAgICAgIGlzQW5ndWxhcj86IGJvb2xlYW4sXG4gICAgICAgIHVucHJvdGVjdGVkUmVzb3VyY2VzPzogQXJyYXk8c3RyaW5nPlxuICAgICAgICBwcm90ZWN0ZWRSZXNvdXJjZU1hcD86IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+LFxuICAgICAgICBzdG9yZUF1dGhTdGF0ZUluQ29va2llPzogYm9vbGVhblxuICAgICAgfSA9IHt9KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgICAgdmFsaWRhdGVBdXRob3JpdHkgPSB0cnVlLFxuICAgICAgICAgIGNhY2hlTG9jYXRpb24gPSBcInNlc3Npb25TdG9yYWdlXCIsXG4gICAgICAgICAgcmVkaXJlY3RVcmkgPSAoKSA9PiB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdChcIj9cIilbMF0uc3BsaXQoXCIjXCIpWzBdLFxuICAgICAgICAgIHBvc3RMb2dvdXRSZWRpcmVjdFVyaSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIiNcIilbMF0sXG4gICAgICAgICAgbG9nZ2VyID0gbmV3IExvZ2dlcihudWxsKSxcbiAgICAgICAgICBsb2FkRnJhbWVUaW1lb3V0ID0gNjAwMCxcbiAgICAgICAgICBuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsID0gdHJ1ZSxcbiAgICAgICAgICBzdGF0ZSA9IFwiXCIsXG4gICAgICAgICAgaXNBbmd1bGFyID0gZmFsc2UsXG4gICAgICAgICAgdW5wcm90ZWN0ZWRSZXNvdXJjZXMgPSBuZXcgQXJyYXk8c3RyaW5nPigpLFxuICAgICAgICAgIHByb3RlY3RlZFJlc291cmNlTWFwID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+KCksXG4gICAgICAgICAgc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSA9IGZhbHNlXG4gICAgICB9ID0gb3B0aW9ucztcblxuICAgIHRoaXMubG9hZEZyYW1lVGltZW91dCA9IGxvYWRGcmFtZVRpbWVvdXQ7XG4gICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgIHRoaXMudmFsaWRhdGVBdXRob3JpdHkgPSB2YWxpZGF0ZUF1dGhvcml0eTtcbiAgICB0aGlzLmF1dGhvcml0eSA9IGF1dGhvcml0eSB8fCBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIjtcbiAgICB0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB0b2tlblJlY2VpdmVkQ2FsbGJhY2s7XG4gICAgdGhpcy5fcmVkaXJlY3RVcmkgPSByZWRpcmVjdFVyaTtcbiAgICB0aGlzLl9wb3N0TG9nb3V0cmVkaXJlY3RVcmkgPSBwb3N0TG9nb3V0UmVkaXJlY3RVcmk7XG4gICAgdGhpcy5fbG9naW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgdGhpcy5fYWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHRoaXMuX2NhY2hlTG9jYXRpb24gPSBjYWNoZUxvY2F0aW9uO1xuICAgIHRoaXMuX25hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmwgPSBuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsO1xuICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5faXNBbmd1bGFyID0gaXNBbmd1bGFyO1xuICAgIHRoaXMuX3VucHJvdGVjdGVkUmVzb3VyY2VzID0gdW5wcm90ZWN0ZWRSZXNvdXJjZXM7XG4gICAgdGhpcy5fcHJvdGVjdGVkUmVzb3VyY2VNYXAgPSBwcm90ZWN0ZWRSZXNvdXJjZU1hcDtcbiAgICBpZiAoIXRoaXMuX2NhY2hlTG9jYXRpb25zW2NhY2hlTG9jYXRpb25dKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWNoZSBMb2NhdGlvbiBpcyBub3QgdmFsaWQuIFByb3ZpZGVkIHZhbHVlOlwiICsgdGhpcy5fY2FjaGVMb2NhdGlvbiArIFwiLlBvc3NpYmxlIHZhbHVlcyBhcmU6IFwiICsgdGhpcy5fY2FjaGVMb2NhdGlvbnMubG9jYWxTdG9yYWdlICsgXCIsIFwiICsgdGhpcy5fY2FjaGVMb2NhdGlvbnMuc2Vzc2lvblN0b3JhZ2UpO1xuICAgIH1cblxuICAgIHRoaXMuX2NhY2hlU3RvcmFnZSA9IG5ldyBTdG9yYWdlKHRoaXMuX2NhY2hlTG9jYXRpb24pOyAvL2NhY2hlIGtleXMgbXNhbFxuICAgIHRoaXMuX2xvZ2dlciA9IGxvZ2dlcjtcbiAgICB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUgPSBzdG9yZUF1dGhTdGF0ZUluQ29va2llO1xuICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzID0gW107XG4gICAgd2luZG93LmFjdGl2ZVJlbmV3YWxzID0ge307XG4gICAgd2luZG93LnJlbmV3U3RhdGVzID0gW107XG4gICAgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHsgfTtcbiAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHsgfTtcbiAgICB3aW5kb3cubXNhbCA9IHRoaXM7XG4gICAgdmFyIHVybEhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgICB2YXIgaXNDYWxsYmFjayA9IHRoaXMuaXNDYWxsYmFjayh1cmxIYXNoKTtcblxuICAgIGlmICghdGhpcy5faXNBbmd1bGFyKSB7XG4gICAgICAgIGlmIChpc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UuY2FsbCh0aGlzLCB1cmxIYXNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwZW5kaW5nQ2FsbGJhY2sgPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMudXJsSGFzaCk7XG4gICAgICAgICAgICBpZiAocGVuZGluZ0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2FsbEJhY2socGVuZGluZ0NhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFVzZWQgdG8gY2FsbCB0aGUgY29uc3RydWN0b3IgY2FsbGJhY2sgd2l0aCB0aGUgdG9rZW4vZXJyb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtoYXNoPXdpbmRvdy5sb2NhdGlvbi5oYXNoXSAtIEhhc2ggZnJhZ21lbnQgb2YgVXJsLlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIHByb2Nlc3NDYWxsQmFjayhoYXNoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiUHJvY2Vzc2luZyB0aGUgY2FsbGJhY2sgZnJvbSByZWRpcmVjdCByZXNwb25zZVwiKTtcbiAgICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gdGhpcy5nZXRSZXF1ZXN0SW5mbyhoYXNoKTtcbiAgICAgIHRoaXMuc2F2ZVRva2VuRnJvbUhhc2gocmVxdWVzdEluZm8pO1xuICAgICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5hY2Nlc3NUb2tlbl0gfHwgcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl07XG4gICAgICBjb25zdCBlcnJvckRlc2MgPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXTtcbiAgICAgIGNvbnN0IGVycm9yID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JdO1xuICAgICAgdmFyIHRva2VuVHlwZTogc3RyaW5nO1xuXG4gICAgICBpZiAocmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dKSB7XG4gICAgICAgICAgdG9rZW5UeXBlID0gQ29uc3RhbnRzLmFjY2Vzc1Rva2VuO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgdG9rZW5UeXBlID0gQ29uc3RhbnRzLmlkVG9rZW47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKENvbnN0YW50cy51cmxIYXNoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodGhpcy5fdG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xuICAgICAgICAgICAgICB0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2suY2FsbCh0aGlzLCBlcnJvckRlc2MsIHRva2VuLCBlcnJvciwgdG9rZW5UeXBlLCAgdGhpcy5nZXRVc2VyU3RhdGUodGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcbiAgICAgICAgICB9XG5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkIGluIHRva2VuIHJlY2VpdmVkIGNhbGxiYWNrIGZ1bmN0aW9uOiBcIiArIGVycik7XG4gICAgICB9XG4gIH1cblxuXG4gIC8qXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSByZWRpcmVjdCB1cmkuIEV2YWx1YXRlcyByZWRpcmVjdFVyaSBpZiBpdHMgYSBmdW5jdGlvbiwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGl0cyB2YWx1ZS5cbiAgICogQGlnbm9yZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGdldFJlZGlyZWN0VXJpKCk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9yZWRpcmVjdFVyaSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVkaXJlY3RVcmkoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3JlZGlyZWN0VXJpO1xuICB9XG5cblxuICAvKlxuICAgKiBVc2VkIHRvIGdldCB0aGUgcG9zdCBsb2dvdXQgcmVkaXJlY3QgdXJpLiBFdmFsdWF0ZXMgcG9zdExvZ291dHJlZGlyZWN0VXJpIGlmIGl0cyBhIGZ1bmN0aW9uLCBvdGhlcndpc2Ugc2ltcGx5IHJldHVybnMgaXRzIHZhbHVlLlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgZ2V0UG9zdExvZ291dFJlZGlyZWN0VXJpKCk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9wb3N0TG9nb3V0cmVkaXJlY3RVcmkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Bvc3RMb2dvdXRyZWRpcmVjdFVyaSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcG9zdExvZ291dHJlZGlyZWN0VXJpO1xuICB9XG5cblxuICAvKlxuICAgKiBJbml0aWF0ZSB0aGUgbG9naW4gcHJvY2VzcyBieSByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgU1RTIGF1dGhvcml6YXRpb24gZW5kcG9pbnQuXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4gcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBhdXRoZW50aWNhdGlvbiBzZXJ2ZXIgZHVyaW5nIHRoZSBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiBmbG93LlxuICAgKi9cbiAgbG9naW5SZWRpcmVjdChzY29wZXM/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xuICAgIC8qXG4gICAgMS4gQ3JlYXRlIG5hdmlnYXRlIHVybFxuICAgIDIuIHNhdmVzIHZhbHVlIGluIGNhY2hlXG4gICAgMy4gcmVkaXJlY3QgdXNlciB0byBBQURcbiAgICAgKi9cbiAgICBpZiAodGhpcy5fbG9naW5JblByb2dyZXNzKSB7XG4gICAgICBpZiAodGhpcy5fdG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2soRXJyb3JEZXNjcmlwdGlvbi5sb2dpblByb2dyZXNzRXJyb3IsIG51bGwsIEVycm9yQ29kZXMubG9naW5Qcm9ncmVzc0Vycm9yLCBDb25zdGFudHMuaWRUb2tlbiwgdGhpcy5nZXRVc2VyU3RhdGUodGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzY29wZXMpIHtcbiAgICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKHNjb3Blcyk7XG4gICAgICBpZiAoaXNWYWxpZFNjb3BlICYmICFVdGlscy5pc0VtcHR5KGlzVmFsaWRTY29wZSkpIHtcbiAgICAgICAgICBpZiAodGhpcy5fdG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3Rva2VuUmVjZWl2ZWRDYWxsYmFjayhFcnJvckRlc2NyaXB0aW9uLmlucHV0U2NvcGVzRXJyb3IsIG51bGwsIEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciwgQ29uc3RhbnRzLmlkVG9rZW4sIHRoaXMuZ2V0VXNlclN0YXRlKHRoaXMuX2NhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xuICAgIH1cblxuICAgICAgdmFyIGlkVG9rZW5PYmplY3Q7XG4gICAgICBpZFRva2VuT2JqZWN0ID0gdGhpcy5leHRyYWN0QURBTElkVG9rZW4oKTtcbiAgICAgIGlmIChpZFRva2VuT2JqZWN0ICYmICFzY29wZXMpIHtcbiAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcbiAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFV0aWxzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIoaWRUb2tlbk9iamVjdCwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xuICAgICAgICAgIHRoaXMuX3NpbGVudExvZ2luID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlblNpbGVudChbdGhpcy5jbGllbnRJZF0sIHRoaXMuYXV0aG9yaXR5LCB0aGlzLmdldFVzZXIoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgIC50aGVuKChpZFRva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9zaWxlbnRMb2dpbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oXCJVbmlmaWVkIGNhY2hlIGNhbGwgaXMgc3VjY2Vzc2Z1bFwiKTtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2suY2FsbCh0aGlzLCBudWxsLCBpZFRva2VuLCBudWxsLCBDb25zdGFudHMuaWRUb2tlbiwgdGhpcy5nZXRVc2VyU3RhdGUodGhpcy5fc2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3NpbGVudExvZ2luID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvZ2luUmVkaXJlY3RIZWxwZXIoc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhpcy5sb2dpblJlZGlyZWN0SGVscGVyKHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xuICAgICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBsb2dpblJlZGlyZWN0SGVscGVyKHNjb3Blcz86IEFycmF5PHN0cmluZz4sIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKSB7XG4gICAgICB0aGlzLl9sb2dpbkluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnModGhpcy5hdXRob3JpdHlJbnN0YW5jZSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBsb2dpblN0YXJ0UGFnZSA9IHRoaXMuX2NhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5hbmd1bGFyTG9naW5SZXF1ZXN0KTtcbiAgICAgICAgICAgICAgaWYgKCFsb2dpblN0YXJ0UGFnZSB8fCBsb2dpblN0YXJ0UGFnZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgbG9naW5TdGFydFBhZ2UgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5hbmd1bGFyTG9naW5SZXF1ZXN0LCBcIlwiKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIGxvZ2luU3RhcnRQYWdlLCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xuICAgICAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJcIik7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcbiAgICAgICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJcIik7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgXCJcIik7XG4gICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5hdXRob3JpdHksIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG4gICAgICAgICAgICAgIGNvbnN0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgICsgQ29uc3RhbnRzLnJlc3BvbnNlX21vZGVfZnJhZ21lbnQ7XG4gICAgICAgICAgICAgIHRoaXMucHJvbXB0VXNlcih1cmxOYXZpZ2F0ZSk7XG4gICAgICAgICAgfSk7XG4gIH1cblxuICAvKlxuICAgKiBJbml0aWF0ZSB0aGUgbG9naW4gcHJvY2VzcyBieSBvcGVuaW5nIGEgcG9wdXAgd2luZG93LlxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBzY29wZXMgLSBQZXJtaXNzaW9ucyB5b3Ugd2FudCBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBOb3QgYWxsIHNjb3BlcyBhcmUgIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbiByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlIGludGVyYWN0aXZlIGF1dGhlbnRpY2F0aW9uIGZsb3cuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxzdHJpbmc+fSAtIEEgUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmV0dXJucyB0aGUgdG9rZW4gb3IgZXJyb3IuXG4gICAqL1xuICBsb2dpblBvcHVwKHNjb3BlcyA/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLypcbiAgICAxLiBDcmVhdGUgbmF2aWdhdGUgdXJsXG4gICAgMi4gc2F2ZXMgdmFsdWUgaW4gY2FjaGVcbiAgICAzLiByZWRpcmVjdCB1c2VyIHRvIEFBRFxuICAgICAqL1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh0aGlzLl9sb2dpbkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMubG9naW5Qcm9ncmVzc0Vycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi5sb2dpblByb2dyZXNzRXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzY29wZXMpIHtcbiAgICAgICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcbiAgICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoc2NvcGVzKTtcbiAgICAgIH1cblxuICAgICAgICB2YXIgaWRUb2tlbk9iamVjdDtcbiAgICAgICAgaWRUb2tlbk9iamVjdCA9IHRoaXMuZXh0cmFjdEFEQUxJZFRva2VuKCk7XG4gICAgICAgIGlmIChpZFRva2VuT2JqZWN0ICYmICFzY29wZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiQURBTCdzIGlkVG9rZW4gZXhpc3RzLiBFeHRyYWN0aW5nIGxvZ2luIGluZm9ybWF0aW9uIGZyb20gQURBTCdzIGlkVG9rZW4gXCIpO1xuICAgICAgICAgICAgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBVdGlscy5jb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyKGlkVG9rZW5PYmplY3QsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIHRoaXMuX3NpbGVudExvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KFt0aGlzLmNsaWVudElkXSwgdGhpcy5hdXRob3JpdHksIHRoaXMuZ2V0VXNlcigpLCBleHRyYVF1ZXJ5UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICAudGhlbigoaWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWxlbnRMb2dpbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcIlVuaWZpZWQgY2FjaGUgY2FsbCBpcyBzdWNjZXNzZnVsXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGlkVG9rZW4pO1xuICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWxlbnRMb2dpbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9naW5Qb3B1cEhlbHBlcihyZXNvbHZlLCByZWplY3QsIHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9naW5Qb3B1cEhlbHBlcihyZXNvbHZlLCByZWplY3QsIHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGxvZ2luUG9wdXBIZWxwZXIoIHJlc29sdmU6IGFueSAsIHJlamVjdDogYW55LCBzY29wZXM6IEFycmF5PHN0cmluZz4sIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKSB7XG4gICAgICAvL1RPRE8gd2h5IHRoaXMgaXMgbmVlZGVkIG9ubHkgZm9yIGxvZ2lucG9wdXBcbiAgICAgIGlmICghc2NvcGVzKSB7XG4gICAgICAgICAgc2NvcGVzID0gW3RoaXMuY2xpZW50SWRdO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhciBwb3BVcFdpbmRvdyA9IHRoaXMub3BlbldpbmRvdyhcImFib3V0OmJsYW5rXCIsIFwiX2JsYW5rXCIsIDEsIHRoaXMsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICBpZiAoIXBvcFVwV2luZG93KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9sb2dpbkluUHJvZ3Jlc3MgPSB0cnVlO1xuXG4gICAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UsIHRoaXMuY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLl9zdGF0ZSk7XG4gICAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIHdpbmRvdy5sb2NhdGlvbi5ocmVmLCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xuICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIlwiKTtcbiAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UsIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG4gICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJcIik7XG4gICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIlwiKTtcbiAgICAgICAgICBjb25zdCBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xuICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5hdXRob3JpdHksIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG4gICAgICAgICAgY29uc3QgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSAgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcbiAgICAgICAgICB3aW5kb3cucmVuZXdTdGF0ZXMucHVzaChhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5sb2dpbjtcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICBpZiAocG9wVXBXaW5kb3cpIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm9QaWkoXCJOYXZpZ2F0ZWQgUG9wdXAgd2luZG93IHRvOlwiICsgdXJsTmF2aWdhdGUpO1xuICAgICAgICAgICAgICBwb3BVcFdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsTmF2aWdhdGU7XG4gICAgICAgICAgfVxuXG4gICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciArIFwiOlwiICsgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XG4gICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XG4gICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcbiAgICAgICAgICBpZiAocmVqZWN0KSB7XG4gICAgICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgXCI6XCIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocG9wVXBXaW5kb3cpIHtcbiAgICAgICAgICAgICAgcG9wVXBXaW5kb3cuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICAgKiBVc2VkIHRvIHJlZGlyZWN0IHRoZSBicm93c2VyIHRvIHRoZSBTVFMgYXV0aG9yaXphdGlvbiBlbmRwb2ludFxuICAgICogQHBhcmFtIHtzdHJpbmd9IHVybE5hdmlnYXRlIC0gVVJMIG9mIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50XG4gICAgKiBAaGlkZGVuXG4gICAgKi9cbiAgcHJpdmF0ZSBwcm9tcHRVc2VyKHVybE5hdmlnYXRlOiBzdHJpbmcpIHtcbiAgICAgIGlmICh1cmxOYXZpZ2F0ZSAmJiAhVXRpbHMuaXNFbXB0eSh1cmxOYXZpZ2F0ZSkpIHtcbiAgICAgIHRoaXMuX2xvZ2dlci5pbmZvUGlpKFwiTmF2aWdhdGUgdG86XCIgKyB1cmxOYXZpZ2F0ZSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmxOYXZpZ2F0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiTmF2aWdhdGUgdXJsIGlzIGVtcHR5XCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFVzZWQgdG8gc2VuZCB0aGUgdXNlciB0byB0aGUgcmVkaXJlY3RfdXJpIGFmdGVyIGF1dGhlbnRpY2F0aW9uIGlzIGNvbXBsZXRlLiBUaGUgdXNlclwicyBiZWFyZXIgdG9rZW4gaXMgYXR0YWNoZWQgdG8gdGhlIFVSSSBmcmFnbWVudCBhcyBhbiBpZF90b2tlbi9hY2Nlc3NfdG9rZW4gZmllbGQuXG4gICAqIFRoaXMgZnVuY3Rpb24gYWxzbyBjbG9zZXMgdGhlIHBvcHVwIHdpbmRvdyBhZnRlciByZWRpcmVjdGlvbi5cbiAgICogQGhpZGRlblxuICAgKiBAaWdub3JlXG4gICAqL1xuICBwcml2YXRlIG9wZW5XaW5kb3codXJsTmF2aWdhdGU6IHN0cmluZywgdGl0bGU6IHN0cmluZywgaW50ZXJ2YWw6IG51bWJlciwgaW5zdGFuY2U6IHRoaXMsIHJlc29sdmU/OiBGdW5jdGlvbiwgcmVqZWN0PzogRnVuY3Rpb24pOiBXaW5kb3cge1xuICAgIHZhciBwb3B1cFdpbmRvdyA9IHRoaXMub3BlblBvcHVwKHVybE5hdmlnYXRlLCB0aXRsZSwgQ29uc3RhbnRzLnBvcFVwV2lkdGgsIENvbnN0YW50cy5wb3BVcEhlaWdodCk7XG4gICAgaWYgKHBvcHVwV2luZG93ID09IG51bGwpIHtcbiAgICAgIGluc3RhbmNlLl9sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgIGluc3RhbmNlLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLl9sb2dnZXIuaW5mbyhFcnJvckNvZGVzLnBvcFVwV2luZG93RXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24ucG9wVXBXaW5kb3dFcnJvcik7XG4gICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBFcnJvckNvZGVzLnBvcFVwV2luZG93RXJyb3IpO1xuICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLnBvcFVwV2luZG93RXJyb3IpO1xuICAgICAgaWYgKHJlamVjdCkge1xuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5wb3BVcFdpbmRvd0Vycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi5wb3BVcFdpbmRvd0Vycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzLnB1c2gocG9wdXBXaW5kb3cpO1xuICAgIHZhciBwb2xsVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHBvcHVwV2luZG93ICYmIHBvcHVwV2luZG93LmNsb3NlZCAmJiBpbnN0YW5jZS5fbG9naW5JblByb2dyZXNzKSB7XG4gICAgICAgIGlmIChyZWplY3QpIHtcbiAgICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy51c2VyQ2FuY2VsbGVkRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnVzZXJDYW5jZWxsZWRFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcbiAgICAgICAgaWYgKHRoaXMuX2lzQW5ndWxhcikge1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3QoXCJtc2FsOnBvcFVwQ2xvc2VkXCIsIEVycm9yQ29kZXMudXNlckNhbmNlbGxlZEVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi51c2VyQ2FuY2VsbGVkRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLl9sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgaW5zdGFuY2UuX2FjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHBvcFVwV2luZG93TG9jYXRpb24gPSBwb3B1cFdpbmRvdy5sb2NhdGlvbjtcbiAgICAgICAgaWYgKHBvcFVwV2luZG93TG9jYXRpb24uaHJlZi5pbmRleE9mKHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSkgIT09IC0xKSB7XG4gICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcbiAgICAgICAgICBpbnN0YW5jZS5fbG9naW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgaW5zdGFuY2UuX2FjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcIkNsb3NpbmcgcG9wdXAgd2luZG93XCIpO1xuICAgICAgICAgIGlmICh0aGlzLl9pc0FuZ3VsYXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3QoXCJtc2FsOnBvcFVwSGFzaENoYW5nZWRcIiwgcG9wVXBXaW5kb3dMb2NhdGlvbi5oYXNoKTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5kb3cub3BlbmVkV2luZG93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW5lZFdpbmRvd3NbaV0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvL0Nyb3NzIERvbWFpbiB1cmwgY2hlY2sgZXJyb3IuIFdpbGwgYmUgdGhyb3duIHVudGlsIEFBRCByZWRpcmVjdHMgdGhlIHVzZXIgYmFjayB0byB0aGUgYXBwXCJzIHJvb3QgcGFnZSB3aXRoIHRoZSB0b2tlbi4gTm8gbmVlZCB0byBsb2cgb3IgdGhyb3cgdGhpcyBlcnJvciBhcyBpdCB3aWxsIGNyZWF0ZSB1bm5lY2Vzc2FyeSB0cmFmZmljLlxuICAgICAgfVxuICAgIH0sXG4gICAgICBpbnRlcnZhbCk7XG5cbiAgICByZXR1cm4gcG9wdXBXaW5kb3c7XG4gIH1cblxuICBwcml2YXRlIGJyb2FkY2FzdChldmVudE5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nKSB7XG4gICAgICB2YXIgZXZ0ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgeyBkZXRhaWw6IGRhdGEgfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldnQpO1xuICB9XG5cbiAgLypcbiAgICogVXNlZCB0byBsb2cgb3V0IHRoZSBjdXJyZW50IHVzZXIsIGFuZCByZWRpcmVjdCB0aGUgdXNlciB0byB0aGUgcG9zdExvZ291dFJlZGlyZWN0VXJpLlxuICAgKiBEZWZhdWx0cyBiZWhhdmlvdXIgaXMgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cbiAgICovXG4gIGxvZ291dCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcbiAgICB0aGlzLl91c2VyID0gbnVsbDtcbiAgICBsZXQgbG9nb3V0ID0gXCJcIjtcbiAgICBpZiAodGhpcy5nZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkoKSkge1xuICAgICAgbG9nb3V0ID0gXCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5nZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsTmF2aWdhdGUgPSB0aGlzLmF1dGhvcml0eSArIFwiL29hdXRoMi92Mi4wL2xvZ291dD9cIiArIGxvZ291dDtcbiAgICB0aGlzLnByb21wdFVzZXIodXJsTmF2aWdhdGUpO1xuICB9XG5cbiAgLypcbiAgICogVXNlZCB0byBjb25maWd1cmUgdGhlIHBvcHVwIHdpbmRvdyBmb3IgbG9naW4uXG4gICAqIEBpZ25vcmVcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJvdGVjdGVkIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgICB3aW5kb3cucmVuZXdTdGF0ZXMgPSBbXTtcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuSXRlbXMgPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKENvbnN0YW50cy5jbGllbnRJZCwgQ29uc3RhbnRzLnVzZXJJZGVudGlmaWVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuSXRlbXNbaV0ua2V5KSk7XG4gICAgfVxuICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5yZXNldENhY2hlSXRlbXMoKTtcbiAgICB0aGlzLl9jYWNoZVN0b3JhZ2UuY2xlYXJDb29raWUoKTtcbiAgfVxuXG4gICBwcm90ZWN0ZWQgY2xlYXJDYWNoZUZvclNjb3BlKGFjY2Vzc1Rva2VuOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuSXRlbXMgPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKENvbnN0YW50cy5jbGllbnRJZCwgQ29uc3RhbnRzLnVzZXJJZGVudGlmaWVyKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjZXNzVG9rZW5JdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0b2tlbiA9IGFjY2Vzc1Rva2VuSXRlbXNbaV07XG4gICAgICAgICAgaWYgKHRva2VuLnZhbHVlLmFjY2Vzc1Rva2VuID09PSBhY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeSh0b2tlbi5rZXkpKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gIH1cbiAgLypcbiAgICogQ29uZmlndXJlcyBwb3B1cCB3aW5kb3cgZm9yIGxvZ2luLlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgb3BlblBvcHVwKHVybE5hdmlnYXRlOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIHBvcFVwV2lkdGg6IG51bWJlciwgcG9wVXBIZWlnaHQ6IG51bWJlcikge1xuICAgIHRyeSB7XG4gICAgICAvKlxuICAgICAgICogYWRkaW5nIHdpbkxlZnQgYW5kIHdpblRvcCB0byBhY2NvdW50IGZvciBkdWFsIG1vbml0b3JcbiAgICAgICAqIHVzaW5nIHNjcmVlbkxlZnQgYW5kIHNjcmVlblRvcCBmb3IgSUU4IGFuZCBlYXJsaWVyXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHdpbkxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCA/IHdpbmRvdy5zY3JlZW5MZWZ0IDogd2luZG93LnNjcmVlblg7XG4gICAgICBjb25zdCB3aW5Ub3AgPSB3aW5kb3cuc2NyZWVuVG9wID8gd2luZG93LnNjcmVlblRvcCA6IHdpbmRvdy5zY3JlZW5ZO1xuICAgICAgLypcbiAgICAgICAqIHdpbmRvdy5pbm5lcldpZHRoIGRpc3BsYXlzIGJyb3dzZXIgd2luZG93XCJzIGhlaWdodCBhbmQgd2lkdGggZXhjbHVkaW5nIHRvb2xiYXJzXG4gICAgICAgKiB1c2luZyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggZm9yIElFOCBhbmQgZWFybGllclxuICAgICAgICovXG4gICAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICBjb25zdCBsZWZ0ID0gKCh3aWR0aCAvIDIpIC0gKHBvcFVwV2lkdGggLyAyKSkgKyB3aW5MZWZ0O1xuICAgICAgY29uc3QgdG9wID0gKChoZWlnaHQgLyAyKSAtIChwb3BVcEhlaWdodCAvIDIpKSArIHdpblRvcDtcblxuICAgICAgY29uc3QgcG9wdXBXaW5kb3cgPSB3aW5kb3cub3Blbih1cmxOYXZpZ2F0ZSwgdGl0bGUsIFwid2lkdGg9XCIgKyBwb3BVcFdpZHRoICsgXCIsIGhlaWdodD1cIiArIHBvcFVwSGVpZ2h0ICsgXCIsIHRvcD1cIiArIHRvcCArIFwiLCBsZWZ0PVwiICsgbGVmdCk7XG4gICAgICBpZiAocG9wdXBXaW5kb3cuZm9jdXMpIHtcbiAgICAgICAgcG9wdXBXaW5kb3cuZm9jdXMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBvcHVwV2luZG93O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihcImVycm9yIG9wZW5pbmcgcG9wdXAgXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgdGhpcy5fbG9naW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBVc2VkIHRvIHZhbGlkYXRlIHRoZSBzY29wZXMgaW5wdXQgcGFyYW1ldGVyIHJlcXVlc3RlZCAgYnkgdGhlIGRldmVsb3Blci5cbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBzY29wZXMgLSBEZXZlbG9wZXIgcmVxdWVzdGVkIHBlcm1pc3Npb25zLiBOb3QgYWxsIHNjb3BlcyBhcmUgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVJbnB1dFNjb3BlKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgaWYgKCFzY29wZXMgfHwgc2NvcGVzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHJldHVybiBcIlNjb3BlcyBjYW5ub3QgYmUgcGFzc2VkIGFzIGFuIGVtcHR5IGFycmF5XCI7XG4gICAgfVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjb3BlcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBkb2VzIG5vdCBhY2NlcHQgbm9uLWFycmF5IHNjb3Blc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5jbGllbnRJZCkgPiAtMSkge1xuICAgICAgaWYgKHNjb3Blcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiBcIkNsaWVudElkIGNhbiBvbmx5IGJlIHByb3ZpZGVkIGFzIGEgc2luZ2xlIHNjb3BlXCI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgLypcbiAgICAqIFVzZWQgdG8gcmVtb3ZlIG9wZW5pZCBhbmQgcHJvZmlsZSBmcm9tIHRoZSBsaXN0IG9mIHNjb3BlcyBwYXNzZWQgYnkgdGhlIGRldmVsb3Blci5UaGVzZSBzY29wZXMgYXJlIGFkZGVkIGJ5IGRlZmF1bHRcbiAgICAqIEBoaWRkZW5cbiAgICAqL1xuICBwcml2YXRlIGZpbHRlclNjb3BlcyhzY29wZXM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICBzY29wZXMgPSBzY29wZXMuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICByZXR1cm4gZWxlbWVudCAhPT0gXCJvcGVuaWRcIjtcbiAgICB9KTtcblxuICAgIHNjb3BlcyA9IHNjb3Blcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50ICE9PSBcInByb2ZpbGVcIjtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29wZXM7XG4gIH1cbiAgLypcbiAgICogVXNlZCB0byBhZGQgdGhlIGRldmVsb3BlciByZXF1ZXN0ZWQgY2FsbGJhY2sgdG8gdGhlIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCBzY29wZXMuIFRoZSB1cGRhdGVkIGFycmF5IGlzIHN0b3JlZCBvbiB0aGUgd2luZG93IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2NvcGUgLSBEZXZlbG9wZXIgcmVxdWVzdGVkIHBlcm1pc3Npb25zLiBOb3QgYWxsIHNjb3BlcyBhcmUgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwZWN0ZWRTdGF0ZSAtIFVuaXF1ZSBzdGF0ZSBpZGVudGlmaWVyIChndWlkKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSAtIFRoZSByZXNvbHZlIGZ1bmN0aW9uIG9mIHRoZSBwcm9taXNlIG9iamVjdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IC0gVGhlIHJlamVjdCBmdW5jdGlvbiBvZiB0aGUgcHJvbWlzZSBvYmplY3QuXG4gICAqIEBpZ25vcmVcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSByZWdpc3RlckNhbGxiYWNrKGV4cGVjdGVkU3RhdGU6IHN0cmluZywgc2NvcGU6IHN0cmluZywgcmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdID0gZXhwZWN0ZWRTdGF0ZTtcbiAgICBpZiAoIXdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKSB7XG4gICAgICAgIHdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdID0gW107XG4gICAgfVxuICAgIHdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdLnB1c2goeyByZXNvbHZlOiByZXNvbHZlLCByZWplY3Q6IHJlamVjdCB9KTtcbiAgICBpZiAoIXdpbmRvdy5jYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0pIHtcbiAgICAgICAgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9XG4gICAgICAgIChlcnJvckRlc2M6IHN0cmluZywgdG9rZW46IHN0cmluZywgZXJyb3I6IHN0cmluZywgdG9rZW5UeXBlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoZXJyb3JEZXNjIHx8IGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXVtpXS5yZWplY3QoZXJyb3JEZXNjICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgZXJyb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXVtpXS5yZXNvbHZlKHRva2VuKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIud2FybmluZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0gPSBudWxsO1xuICAgICAgICAgIHdpbmRvdy5jYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0gPSBudWxsO1xuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG5cbnByb3RlY3RlZCBnZXRDYWNoZWRUb2tlbkludGVybmFsKHNjb3BlcyA6IEFycmF5PHN0cmluZz4gLCB1c2VyOiBVc2VyKTogQ2FjaGVSZXN1bHQge1xuICAgIGNvbnN0IHVzZXJPYmplY3QgPSB1c2VyID8gdXNlciA6IHRoaXMuZ2V0VXNlcigpO1xuICAgIGlmICghdXNlck9iamVjdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycztcbiAgICBsZXQgbmV3QXV0aG9yaXR5ID0gdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA/IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgOiBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHRoaXMuYXV0aG9yaXR5LCB0aGlzLnZhbGlkYXRlQXV0aG9yaXR5KTtcblxuICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyh1c2VyT2JqZWN0LCB0aGlzLmdldFVzZXIoKSkpIHtcbiAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpID4gLTEpIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGVkVG9rZW4oYXV0aGVudGljYXRpb25SZXF1ZXN0LCB1c2VyKTtcbn1cblxuICAvKlxuICAgKiBVc2VkIHRvIGdldCB0b2tlbiBmb3IgdGhlIHNwZWNpZmllZCBzZXQgb2Ygc2NvcGVzIGZyb20gdGhlIGNhY2hlXG4gICAqIEBwYXJhbSB7QXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVyc30gYXV0aGVudGljYXRpb25SZXF1ZXN0IC0gUmVxdWVzdCBzZW50IHRvIHRoZSBTVFMgdG8gb2J0YWluIGFuIGlkX3Rva2VuL2FjY2Vzc190b2tlblxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgLSBVc2VyIGZvciB3aGljaCB0aGUgc2NvcGVzIHdlcmUgcmVxdWVzdGVkXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgZ2V0Q2FjaGVkVG9rZW4oYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzLCB1c2VyOiBVc2VyKTogQ2FjaGVSZXN1bHQge1xuICAgIGxldCBhY2Nlc3NUb2tlbkNhY2hlSXRlbTogQWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBudWxsO1xuICAgIGNvbnN0IHNjb3BlcyA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zY29wZXM7XG4gICAgY29uc3QgdG9rZW5DYWNoZUl0ZW1zID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2Vucyh0aGlzLmNsaWVudElkLCB1c2VyID8gdXNlci51c2VySWRlbnRpZmllciA6IG51bGwpOyAvL2ZpbHRlciBieSBjbGllbnRJZCBhbmQgdXNlclxuICAgIGlmICh0b2tlbkNhY2hlSXRlbXMubGVuZ3RoID09PSAwKSB7IC8vIE5vIG1hdGNoIGZvdW5kIGFmdGVyIGluaXRpYWwgZmlsdGVyaW5nXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zOiBBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT4gPSBbXTtcbiAgICAvL2lmIG5vIGF1dGhvcml0eSBwYXNzZWRcbiAgICBpZiAoIWF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpIHtcbiAgICAgIC8vZmlsdGVyIGJ5IHNjb3BlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0b2tlbkNhY2hlSXRlbXNbaV07XG4gICAgICAgIGNvbnN0IGNhY2hlZFNjb3BlcyA9IGNhY2hlSXRlbS5rZXkuc2NvcGVzLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgaWYgKFV0aWxzLmNvbnRhaW5zU2NvcGUoY2FjaGVkU2NvcGVzLCBzY29wZXMpKSB7XG4gICAgICAgICAgZmlsdGVyZWRJdGVtcy5wdXNoKGNhY2hlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9pZiBvbmx5IG9uZSBjYWNoZWQgdG9rZW4gZm91bmRcbiAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGZpbHRlcmVkSXRlbXNbMF07XG5cbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkuYXV0aG9yaXR5LCB0aGlzLnZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVycm9yRGVzYzogXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zIHNhdGlzZnlpbmcgdGhlIHJlcXVpcmVtZW50cy4gQ2FsbCBBY3F1aXJlVG9rZW4gYWdhaW4gcHJvdmlkaW5nIG1vcmUgcmVxdWlyZW1lbnRzIGxpa2UgYXV0aG9yaXR5XCIsXG4gICAgICAgICAgdG9rZW46IG51bGwsXG4gICAgICAgICAgZXJyb3I6IFwibXVsdGlwbGVfbWF0Y2hpbmdfdG9rZW5zX2RldGVjdGVkXCJcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvL25vIG1hdGNoIGZvdW5kLiBjaGVjayBpZiB0aGVyZSB3YXMgYSBzaW5nbGUgYXV0aG9yaXR5IHVzZWRcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5TGlzdCA9IHRoaXMuZ2V0VW5pcXVlQXV0aG9yaXR5KHRva2VuQ2FjaGVJdGVtcywgXCJhdXRob3JpdHlcIik7XG4gICAgICAgIGlmIChhdXRob3JpdHlMaXN0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXJyb3JEZXNjOiBcIk11bHRpcGxlIGF1dGhvcml0aWVzIGZvdW5kIGluIHRoZSBjYWNoZS4gUGFzcyBhdXRob3JpdHkgaW4gdGhlIEFQSSBvdmVybG9hZC5cIixcbiAgICAgICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICAgICAgZXJyb3I6IFwibXVsdGlwbGVfbWF0Y2hpbmdfdG9rZW5zX2RldGVjdGVkXCJcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHlMaXN0WzBdLCB0aGlzLnZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL2F1dGhvcml0eSB3YXMgcGFzc2VkIGluIHRoZSBBUEksIGZpbHRlciBieSBhdXRob3JpdHkgYW5kIHNjb3BlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0b2tlbkNhY2hlSXRlbXNbaV07XG4gICAgICAgIGNvbnN0IGNhY2hlZFNjb3BlcyA9IGNhY2hlSXRlbS5rZXkuc2NvcGVzLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgaWYgKFV0aWxzLmNvbnRhaW5zU2NvcGUoY2FjaGVkU2NvcGVzLCBzY29wZXMpICYmIGNhY2hlSXRlbS5rZXkuYXV0aG9yaXR5ID09PSBhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5KSB7XG4gICAgICAgICAgZmlsdGVyZWRJdGVtcy5wdXNoKGNhY2hlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9ubyBtYXRjaFxuICAgICAgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgLy9vbmx5IG9uZSBjYWNoZWRUb2tlbiBGb3VuZFxuICAgICAgZWxzZSBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBmaWx0ZXJlZEl0ZW1zWzBdO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vbW9yZSB0aGFuIG9uZSBtYXRjaCBmb3VuZC5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcnJvckRlc2M6IFwiVGhlIGNhY2hlIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucyBzYXRpc2Z5aW5nIHRoZSByZXF1aXJlbWVudHMuQ2FsbCBBY3F1aXJlVG9rZW4gYWdhaW4gcHJvdmlkaW5nIG1vcmUgcmVxdWlyZW1lbnRzIGxpa2UgYXV0aG9yaXR5XCIsXG4gICAgICAgICAgdG9rZW46IG51bGwsXG4gICAgICAgICAgZXJyb3I6IFwibXVsdGlwbGVfbWF0Y2hpbmdfdG9rZW5zX2RldGVjdGVkXCJcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWNjZXNzVG9rZW5DYWNoZUl0ZW0gIT0gbnVsbCkge1xuICAgICAgY29uc3QgZXhwaXJlZCA9IE51bWJlcihhY2Nlc3NUb2tlbkNhY2hlSXRlbS52YWx1ZS5leHBpcmVzSW4pO1xuICAgICAgLy8gSWYgZXhwaXJhdGlvbiBpcyB3aXRoaW4gb2Zmc2V0LCBpdCB3aWxsIGZvcmNlIHJlbmV3XG4gICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLl9jbG9ja1NrZXcgfHwgMzAwO1xuICAgICAgaWYgKGV4cGlyZWQgJiYgKGV4cGlyZWQgPiBVdGlscy5ub3coKSArIG9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcnJvckRlc2M6IG51bGwsXG4gICAgICAgICAgdG9rZW46IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLnZhbHVlLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeShmaWx0ZXJlZEl0ZW1zWzBdLmtleSkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogVXNlZCB0byBmaWx0ZXIgYWxsIGNhY2hlZCBpdGVtcyBhbmQgcmV0dXJuIGEgbGlzdCBvZiB1bmlxdWUgdXNlcnMgYmFzZWQgb24gdXNlcklkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7QXJyYXk8VXNlcj59IFVzZXJzIC0gdXNlcnMgc2F2ZWQgaW4gdGhlIGNhY2hlLlxuICAgKi9cbiAgZ2V0QWxsVXNlcnMoKTogQXJyYXk8VXNlcj4ge1xuICAgICAgY29uc3QgdXNlcnM6IEFycmF5PFVzZXI+ID0gW107XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKENvbnN0YW50cy5jbGllbnRJZCwgQ29uc3RhbnRzLnVzZXJJZGVudGlmaWVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaWRUb2tlbiA9IG5ldyBJZFRva2VuKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXS52YWx1ZS5pZFRva2VuKTtcbiAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBuZXcgQ2xpZW50SW5mbyhhY2Nlc3NUb2tlbkNhY2hlSXRlbXNbaV0udmFsdWUuY2xpZW50SW5mbyk7XG4gICAgICBjb25zdCB1c2VyID0gVXNlci5jcmVhdGVVc2VyKGlkVG9rZW4sIGNsaWVudEluZm8pO1xuICAgICAgdXNlcnMucHVzaCh1c2VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXRVbmlxdWVVc2Vycyh1c2Vycyk7XG4gIH1cblxuICAvKlxuICAgKiBVc2VkIHRvIGZpbHRlciB1c2VycyBiYXNlZCBvbiB1c2VySWRlbnRpZmllclxuICAgKiBAcGFyYW0ge0FycmF5PFVzZXI+fSAgVXNlcnMgLSB1c2VycyBzYXZlZCBpbiB0aGUgY2FjaGVcbiAgICogQGlnbm9yZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGdldFVuaXF1ZVVzZXJzKHVzZXJzOiBBcnJheTxVc2VyPik6IEFycmF5PFVzZXI+IHtcbiAgICBpZiAoIXVzZXJzIHx8IHVzZXJzLmxlbmd0aCA8PSAxKSB7XG4gICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgY29uc3QgZmxhZ3M6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICBjb25zdCB1bmlxdWVVc2VyczogQXJyYXk8VXNlcj4gPSBbXTtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdXNlcnMubGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICBpZiAodXNlcnNbaW5kZXhdLnVzZXJJZGVudGlmaWVyICYmIGZsYWdzLmluZGV4T2YodXNlcnNbaW5kZXhdLnVzZXJJZGVudGlmaWVyKSA9PT0gLTEpIHtcbiAgICAgICAgZmxhZ3MucHVzaCh1c2Vyc1tpbmRleF0udXNlcklkZW50aWZpZXIpO1xuICAgICAgICB1bmlxdWVVc2Vycy5wdXNoKHVzZXJzW2luZGV4XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXF1ZVVzZXJzO1xuICB9XG5cbiAgLypcbiAgKiBVc2VkIHRvIGdldCBhIHVuaXF1ZSBsaXN0IG9mIGF1dGhvcml0dWVzIGZyb20gdGhlIGNhY2hlXG4gICogQHBhcmFtIHtBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT59ICBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgLSBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgc2F2ZWQgaW4gdGhlIGNhY2hlXG4gICogQGlnbm9yZVxuICAqIEBoaWRkZW5cbiAgKi9cbiAgcHJpdmF0ZSBnZXRVbmlxdWVBdXRob3JpdHkoYWNjZXNzVG9rZW5DYWNoZUl0ZW1zOiBBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT4sIHByb3BlcnR5OiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcbiAgICBjb25zdCBhdXRob3JpdHlMaXN0OiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgY29uc3QgZmxhZ3M6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50LmtleS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgJiYgKGZsYWdzLmluZGV4T2YoZWxlbWVudC5rZXlbcHJvcGVydHldKSA9PT0gLTEpKSB7XG4gICAgICAgIGZsYWdzLnB1c2goZWxlbWVudC5rZXlbcHJvcGVydHldKTtcbiAgICAgICAgYXV0aG9yaXR5TGlzdC5wdXNoKGVsZW1lbnQua2V5W3Byb3BlcnR5XSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGF1dGhvcml0eUxpc3Q7XG4gIH1cblxuICAvKlxuICAgKiBBZGRzIGxvZ2luX2hpbnQgdG8gYXV0aG9yaXphdGlvbiBVUkwgd2hpY2ggaXMgdXNlZCB0byBwcmUtZmlsbCB0aGUgdXNlcm5hbWUgZmllbGQgb2Ygc2lnbiBpbiBwYWdlIGZvciB0aGUgdXNlciBpZiBrbm93biBhaGVhZCBvZiB0aW1lXG4gICAqIGRvbWFpbl9oaW50IGNhbiBiZSBvbmUgb2YgdXNlcnMvb3JnYW5pc2F0aW9ucyB3aGljaCB3aGVuIGFkZGVkIHNraXBzIHRoZSBlbWFpbCBiYXNlZCBkaXNjb3ZlcnkgcHJvY2VzcyBvZiB0aGUgdXNlclxuICAgKiBkb21haW5fcmVxIHV0aWQgcmVjZWl2ZWQgYXMgcGFydCBvZiB0aGUgY2xpZW50SW5mb1xuICAgKiBsb2dpbl9yZXEgdWlkIHJlY2VpdmVkIGFzIHBhcnQgb2YgY2xpZW50SW5mb1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsTmF2aWdhdGUgLSBBdXRoZW50aWNhdGlvbiByZXF1ZXN0IHVybFxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgLSBVc2VyIGZvciB3aGljaCB0aGUgdG9rZW4gaXMgcmVxdWVzdGVkXG4gICAqIEBpZ25vcmVcbiAgICogQGhpZGRlblxuICAgKi9cbiAgICBwcml2YXRlIGFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlOiBzdHJpbmcsIHVzZXI6IFVzZXIpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB1c2VyT2JqZWN0ID0gdXNlciA/IHVzZXIgOiB0aGlzLmdldFVzZXIoKTtcbiAgICAgICAgaWYgKHVzZXJPYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZWRDbGllbnRJbmZvID0gdXNlck9iamVjdC51c2VySWRlbnRpZmllci5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICBjb25zdCB1aWQgPSBVdGlscy5iYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGRlY29kZWRDbGllbnRJbmZvWzBdKTtcbiAgICAgICAgICAgIGNvbnN0IHV0aWQgPSBVdGlscy5iYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGRlY29kZWRDbGllbnRJbmZvWzFdKTtcblxuICAgICAgICAgICAgaWYgKHVzZXJPYmplY3Quc2lkICAmJiB1cmxOYXZpZ2F0ZS5pbmRleE9mKENvbnN0YW50cy5wcm9tcHRfbm9uZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoQ29uc3RhbnRzLnNpZCwgdXJsTmF2aWdhdGUpICYmICF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoQ29uc3RhbnRzLmxvZ2luX2hpbnQsIHVybE5hdmlnYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5zaWQgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyT2JqZWN0LnNpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoQ29uc3RhbnRzLmxvZ2luX2hpbnQsIHVybE5hdmlnYXRlKSAmJiB1c2VyT2JqZWN0LmRpc3BsYXlhYmxlSWQgJiYgIVV0aWxzLmlzRW1wdHkodXNlck9iamVjdC5kaXNwbGF5YWJsZUlkKSkge1xuICAgICAgICAgICAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodXNlck9iamVjdC5kaXNwbGF5YWJsZUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eSh1aWQpICYmICFVdGlscy5pc0VtcHR5KHV0aWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoXCJkb21haW5fcmVxXCIsIHVybE5hdmlnYXRlKSAmJiAhVXRpbHMuaXNFbXB0eSh1dGlkKSkge1xuICAgICAgICAgICAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZkb21haW5fcmVxPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHV0aWQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKFwibG9naW5fcmVxXCIsIHVybE5hdmlnYXRlKSAmJiAhVXRpbHMuaXNFbXB0eSh1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJmxvZ2luX3JlcT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh1aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKENvbnN0YW50cy5kb21haW5faGludCwgdXJsTmF2aWdhdGUpICYmICFVdGlscy5pc0VtcHR5KHV0aWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWQgPT09IENvbnN0YW50cy5jb25zdW1lcnNVdGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJlwiICsgIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KENvbnN0YW50cy5jb25zdW1lcnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybE5hdmlnYXRlO1xuICAgIH1cblxuICAvKlxuICAgKiBDaGVja3MgaWYgdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgVVJMIGNvbnRhaW5zIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzXG4gICAqIEBpZ25vcmVcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSB1cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyByZWdleCB0byBkZXRlY3QgcGF0dGVybiBvZiBhID8gb3IgJiBmb2xsb3dlZCBieSB0aGUgbmFtZSBwYXJhbWV0ZXIgYW5kIGFuIGVxdWFscyBjaGFyYWN0ZXJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPVwiKTtcbiAgICByZXR1cm4gcmVnZXgudGVzdCh1cmwpO1xuICB9XG5cbiAgLypcbiAgICogVXNlZCB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIGJ5IHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50LlxuICAgKiBUbyByZW5ldyBpZFRva2VuLCBjbGllbnRJZCBzaG91bGQgYmUgcGFzc2VkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBzY29wZXMgYXJyYXkuXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly97aW5zdGFuY2V9LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8ve2luc3RhbmNlfS90ZnAvJmx0O3RlbmFudCZndDsvPHBvbGljeU5hbWU+XG4gICAqIC0gRGVmYXVsdCB2YWx1ZSBpczogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgYXJlIHJlcXVlc3RlZC5UaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxuICAgKi9cbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogdm9pZDtcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZyk6IHZvaWQ7XG4gIGFjcXVpcmVUb2tlblJlZGlyZWN0KHNjb3BlczogQXJyYXk8c3RyaW5nPiwgYXV0aG9yaXR5OiBzdHJpbmcsIHVzZXI6IFVzZXIpOiB2b2lkO1xuICBhY3F1aXJlVG9rZW5SZWRpcmVjdChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nLCB1c2VyOiBVc2VyLCBleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nKTogdm9pZDtcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk/OiBzdHJpbmcsIHVzZXI/OiBVc2VyLCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKHNjb3Blcyk7XG4gICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XG4gICAgICAgIGlmICh0aGlzLl90b2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuUmVjZWl2ZWRDYWxsYmFjayhFcnJvckRlc2NyaXB0aW9uLmlucHV0U2NvcGVzRXJyb3IsIG51bGwsIEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciwgQ29uc3RhbnRzLmFjY2Vzc1Rva2VuLCB0aGlzLmdldFVzZXJTdGF0ZSh0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNjb3Blcykge1xuICAgICAgc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoc2NvcGVzKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyT2JqZWN0ID0gdXNlciA/IHVzZXIgOiB0aGlzLmdldFVzZXIoKTtcbiAgICBpZiAodGhpcy5fYWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3BlID0gc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXVzZXJPYmplY3QgJiYgIShleHRyYVF1ZXJ5UGFyYW1ldGVycyAmJiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMuaW5kZXhPZihDb25zdGFudHMubG9naW5faGludCkgIT09IC0xICkpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3Rva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xuICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgIHRoaXMuX3Rva2VuUmVjZWl2ZWRDYWxsYmFjayhFcnJvckRlc2NyaXB0aW9uLnVzZXJMb2dpbkVycm9yLCBudWxsLCBFcnJvckNvZGVzLnVzZXJMb2dpbkVycm9yLCBDb25zdGFudHMuYWNjZXNzVG9rZW4sIHRoaXMuZ2V0VXNlclN0YXRlKHRoaXMuX2NhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICB0aGlzLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gdHJ1ZTtcbiAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xuICAgIGxldCBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSBhdXRob3JpdHkgPyBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy52YWxpZGF0ZUF1dGhvcml0eSkgOiB0aGlzLmF1dGhvcml0eUluc3RhbmNlO1xuXG4gICAgYWNxdWlyZVRva2VuQXV0aG9yaXR5LlJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKFV0aWxzLmNvbXBhcmVPYmplY3RzKHVzZXJPYmplY3QsIHRoaXMuZ2V0VXNlcigpKSkge1xuICAgICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLmNsaWVudElkKSA+IC0xKSB7XG4gICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMuY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLl9zdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcbiAgICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xuICAgICAgaWYgKHVzZXJPYmplY3QpIHtcbiAgICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdXNlck9iamVjdC51c2VySWRlbnRpZmllciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciAgKyBDb25zdGFudHMubm9fdXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcbiAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShhY3F1aXJlVG9rZW5Vc2VyS2V5LCBKU09OLnN0cmluZ2lmeSh1c2VyT2JqZWN0KSk7XG4gICAgICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgYWNxdWlyZVRva2VuQXV0aG9yaXR5LkNhbm9uaWNhbEF1dGhvcml0eSwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcbiAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcbiAgICAgIH1cblxuICAgICAgbGV0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgICArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xuICAgICAgdXJsTmF2aWdhdGUgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlLCB1c2VyT2JqZWN0KTtcbiAgICAgIGlmICh1cmxOYXZpZ2F0ZSkge1xuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuc3RhdGVBY3F1aXJlVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsTmF2aWdhdGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgICogVXNlZCB0byBhY3F1aXJlIGFuIGFjY2VzcyB0b2tlbiBmb3IgYSBuZXcgdXNlciB1c2luZyBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiB2aWEgYSBwb3B1cCBXaW5kb3cuXG4gICAqIFRvIHJlcXVlc3QgYW4gaWRfdG9rZW4sIHBhc3MgdGhlIGNsaWVudElkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBzY29wZXMgYXJyYXkuXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7dGVuYW50Jmd0Oy8mbHQ7dGVuYW50Jmd0Oywgd2hlcmUgJmx0O3RlbmFudCZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXG4gICAqIC0gSW4gQXp1cmUgQjJDLCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDtpbnN0YW5jZSZndDsvdGZwLyZsdDt0ZW5hbnQmZ3Q7Lzxwb2xpY3lOYW1lPi9cbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIi5cbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgYXJlIHJlcXVlc3RlZC5UaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHRva2VuIG9yIGVycm9yLlxuICAgKi9cbiAgYWNxdWlyZVRva2VuUG9wdXAoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+O1xuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nLCB1c2VyOiBVc2VyKTogUHJvbWlzZTxzdHJpbmc+O1xuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nLCB1c2VyOiBVc2VyLCBleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eT86IHN0cmluZywgdXNlcj86IFVzZXIsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShzY29wZXMpO1xuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmlucHV0U2NvcGVzRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBpc1ZhbGlkU2NvcGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2NvcGVzKSB7XG4gICAgICAgIHNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKHNjb3Blcyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJPYmplY3QgPSB1c2VyID8gdXNlciA6IHRoaXMuZ2V0VXNlcigpO1xuICAgICAgaWYgKHRoaXMuX2FjcXVpcmVUb2tlbkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24uYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy9pZiB1c2VyIGlzIG5vdCBjdXJyZW50bHkgbG9nZ2VkIGluIGFuZCBubyBsb2dpbl9oaW50IGlzIHBhc3NlZFxuICAgICAgICBpZiAoIXVzZXJPYmplY3QgJiYgIShleHRyYVF1ZXJ5UGFyYW1ldGVycyAmJiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMuaW5kZXhPZihDb25zdGFudHMubG9naW5faGludCkgIT09IC0xKSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLnVzZXJMb2dpbkVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi51c2VyTG9naW5FcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgdGhpcy5fYWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xuICAgICAgbGV0IGFjcXVpcmVUb2tlbkF1dGhvcml0eSA9IGF1dGhvcml0eSA/IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aG9yaXR5LCB0aGlzLnZhbGlkYXRlQXV0aG9yaXR5KSA6IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XG4gICAgICB2YXIgcG9wVXBXaW5kb3cgPSB0aGlzLm9wZW5XaW5kb3coXCJhYm91dDpibGFua1wiLCBcIl9ibGFua1wiLCAxLCB0aGlzLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgaWYgKCFwb3BVcFdpbmRvdykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHModXNlck9iamVjdCwgdGhpcy5nZXRVc2VyKCkpKSB7XG4gICAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpID4gLTEpIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMuY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy50b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLl9zdGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMuX3N0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSk7XG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcbiAgICAgICAgdmFyIGFjcXVpcmVUb2tlblVzZXJLZXk7XG4gICAgICAgIGlmICh1c2VyT2JqZWN0KSB7XG4gICAgICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB1c2VyT2JqZWN0LnVzZXJJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICArIENvbnN0YW50cy5ub191c2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkodXNlck9iamVjdCkpO1xuICAgICAgICBjb25zdCBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5DYW5vbmljYWxBdXRob3JpdHksIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG5cbiAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xuICAgICAgICB1cmxOYXZpZ2F0ZSA9IHRoaXMuYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGUsIHVzZXJPYmplY3QpO1xuICAgICAgICB3aW5kb3cucmVuZXdTdGF0ZXMucHVzaChhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xuICAgICAgICB3aW5kb3cucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcbiAgICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGlmIChwb3BVcFdpbmRvdykge1xuICAgICAgICAgIHBvcFVwV2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxOYXZpZ2F0ZTtcbiAgICAgICAgfVxuXG4gICAgICB9LCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcbiAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcbiAgICAgICAgaWYgKHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcFVwV2luZG93KSB7XG4gICAgICAgICAgICBwb3BVcFdpbmRvdy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSB0b2tlbiBmcm9tIGNhY2hlLlxuICAgKiBNU0FMIHdpbGwgcmV0dXJuIHRoZSBjYWNoZWQgdG9rZW4gaWYgaXQgaXMgbm90IGV4cGlyZWQuXG4gICAqIE9yIGl0IHdpbGwgc2VuZCBhIHJlcXVlc3QgdG8gdGhlIFNUUyB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIHVzaW5nIGEgaGlkZGVuIGlmcmFtZS4gVG8gcmVuZXcgaWRUb2tlbiwgY2xpZW50SWQgc2hvdWxkIGJlIHBhc3NlZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBTY29wZXMgbGlrZSBcIm9wZW5pZFwiIGFuZCBcInByb2ZpbGVcIiBhcmUgc2VudCB3aXRoIGV2ZXJ5IHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O3RlbmFudCZndDsvJmx0O3RlbmFudCZndDssIHdoZXJlICZsdDt0ZW5hbnQmZ3Q7IGlzIHRoZSBkaXJlY3RvcnkgaG9zdCAoZS5nLiBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20pIGFuZCAmbHQ7dGVuYW50Jmd0OyBpcyBhIGlkZW50aWZpZXIgd2l0aGluIHRoZSBkaXJlY3RvcnkgaXRzZWxmIChlLmcuIGEgZG9tYWluIGFzc29jaWF0ZWQgdG8gdGhlIHRlbmFudCwgc3VjaCBhcyBjb250b3NvLm9ubWljcm9zb2Z0LmNvbSwgb3IgdGhlIEdVSUQgcmVwcmVzZW50aW5nIHRoZSBUZW5hbnRJRCBwcm9wZXJ0eSBvZiB0aGUgZGlyZWN0b3J5KVxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXG4gICAqIC0gRGVmYXVsdCB2YWx1ZSBpczogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgYXJlIHJlcXVlc3RlZC5UaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJlc29sdmVkIHdpdGggdG9rZW4gb3IgcmVqZWN0ZWQgd2l0aCBlcnJvci5cbiAgICovXG4gIEByZXNvbHZlVG9rZW5Pbmx5SWZPdXRPZklmcmFtZVxuICBhY3F1aXJlVG9rZW5TaWxlbnQoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk/OiBzdHJpbmcsIHVzZXI/OiBVc2VyLCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcbiAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yICsgXCJ8XCIgKyBpc1ZhbGlkU2NvcGUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzY29wZXMpIHtcbiAgICAgICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgdXNlck9iamVjdCA9IHVzZXIgPyB1c2VyIDogdGhpcy5nZXRVc2VyKCk7XG4gICAgICAgIGNvbnN0IGFkYWxJZFRva2VuID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmFkYWxJZFRva2VuKTtcbiAgICAgICAgLy9pZiB1c2VyIGlzIG5vdCBjdXJyZW50bHkgbG9nZ2VkIGluIGFuZCBubyBsb2dpbl9oaW50L3NpZCBpcyBwYXNzZWQgYXMgYW4gZXh0cmFRdWVyeVBhcmFtYXRlclxuICAgICAgICAgIGlmICghdXNlck9iamVjdCAmJiBVdGlscy5jaGVja1NTTyhleHRyYVF1ZXJ5UGFyYW1ldGVycykgJiYgVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikgKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnVzZXJMb2dpbkVycm9yKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaWYgdXNlciBkaWRuJ3QgcGFzc2VzIHRoZSBsb2dpbl9oaW50IGFuZCBhZGFsJ3MgaWR0b2tlbiBpcyBwcmVzZW50IGFuZCBubyB1c2Vyb2JqZWN0LCB1c2UgdGhlIGxvZ2luX2hpbnQgZnJvbSBhZGFsJ3MgaWRUb2tlblxuICAgICAgICAgIGVsc2UgaWYgKCF1c2VyT2JqZWN0ICYmICFVdGlscy5pc0VtcHR5KGFkYWxJZFRva2VuKSkge1xuICAgICAgICAgICAgICBjb25zdCBpZFRva2VuT2JqZWN0ID0gVXRpbHMuZXh0cmFjdElkVG9rZW4oYWRhbElkVG9rZW4pO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcbiAgICAgICAgICAgICAgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBVdGlscy5jb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyKGlkVG9rZW5PYmplY3QsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xuICAgICAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHModXNlck9iamVjdCwgdGhpcy5nZXRVc2VyKCkpKSB7XG4gICAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpID4gLTEpIHtcbiAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5fc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMudG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5fc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLmNsaWVudElkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5fc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW5fdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5fc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FjaGVSZXN1bHQgPSB0aGlzLmdldENhY2hlZFRva2VuKGF1dGhlbnRpY2F0aW9uUmVxdWVzdCwgdXNlck9iamVjdCk7XG4gICAgICAgIGlmIChjYWNoZVJlc3VsdCkge1xuICAgICAgICAgIGlmIChjYWNoZVJlc3VsdC50b2tlbikge1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oXCJUb2tlbiBpcyBhbHJlYWR5IGluIGNhY2hlIGZvciBzY29wZTpcIiArIHNjb3BlKTtcbiAgICAgICAgICAgIHJlc29sdmUoY2FjaGVSZXN1bHQudG9rZW4pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGNhY2hlUmVzdWx0LmVycm9yRGVzYyB8fCBjYWNoZVJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm9QaWkoY2FjaGVSZXN1bHQuZXJyb3JEZXNjICsgXCI6XCIgKyBjYWNoZVJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICByZWplY3QoY2FjaGVSZXN1bHQuZXJyb3JEZXNjICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgY2FjaGVSZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLnZlcmJvc2UoXCJUb2tlbiBpcyBub3QgaW4gY2FjaGUgZm9yIHNjb3BlOlwiICsgc2NvcGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHlJbnN0YW5jZSkgey8vQ2FjaGUgcmVzdWx0IGNhbiByZXR1cm4gbnVsbCBpZiBjYWNoZSBpcyBlbXB0eS4gSW4gdGhhdCBjYXNlLCBzZXQgYXV0aG9yaXR5IHRvIGRlZmF1bHQgdmFsdWUgaWYgbm8gYXV0aG9yaXR5IGlzIHBhc3NlZCB0byB0aGUgYXBpLlxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gYXV0aG9yaXR5ID8gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMudmFsaWRhdGVBdXRob3JpdHkpIDogdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICAgIC8vIGNhY2hlIG1pc3NcbiAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gcmVmcmVzaCBhdHRlcHQgd2l0aCBpZnJhbWVcbiAgICAgICAgICAgIC8vQWxyZWFkeSByZW5ld2luZyBmb3IgdGhpcyBzY29wZSwgY2FsbGJhY2sgd2hlbiB3ZSBnZXQgdGhlIHRva2VuLlxuICAgICAgICAgICAgICBpZiAod2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXSkge1xuICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcIlJlbmV3IHRva2VuIGZvciBzY29wZTogXCIgKyBzY29wZSArIFwiIGlzIGluIHByb2dyZXNzLiBSZWdpc3RlcmluZyBjYWxsYmFja1wiKTtcbiAgICAgICAgICAgICAgLy9BY3RpdmUgcmVuZXdhbHMgY29udGFpbnMgdGhlIHN0YXRlIGZvciBlYWNoIHJlbmV3YWwuXG4gICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayh3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoc2NvcGVzICYmIHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpID4gLTEgJiYgc2NvcGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIC8vIEFwcCB1c2VzIGlkVG9rZW4gdG8gc2VuZCB0byBhcGkgZW5kcG9pbnRzXG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBzY29wZSBpcyB0cmFja2VkIGFzIGNsaWVudElkIHRvIHN0b3JlIHRoaXMgdG9rZW5cbiAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcInJlbmV3aW5nIGlkVG9rZW5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5ld0lkVG9rZW4oc2NvcGVzLCByZXNvbHZlLCByZWplY3QsIHVzZXJPYmplY3QsIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci52ZXJib3NlKFwicmVuZXdpbmcgYWNjZXNzdG9rZW5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5ld1Rva2VuKHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0LCB1c2VyT2JqZWN0LCBhdXRoZW50aWNhdGlvblJlcXVlc3QsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci53YXJuaW5nKFwiY291bGQgbm90IHJlc29sdmUgZW5kcG9pbnRzXCIpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gICAgcHJpdmF0ZSBleHRyYWN0QURBTElkVG9rZW4oKTogYW55IHtcbiAgICAgICAgY29uc3QgYWRhbElkVG9rZW4gPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuYWRhbElkVG9rZW4pO1xuICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHkoYWRhbElkVG9rZW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gVXRpbHMuZXh0cmFjdElkVG9rZW4oYWRhbElkVG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAvKlxuICAgKiBDYWxsaW5nIF9sb2FkRnJhbWUgYnV0IHdpdGggYSB0aW1lb3V0IHRvIHNpZ25hbCBmYWlsdXJlIGluIGxvYWRmcmFtZVN0YXR1cy4gQ2FsbGJhY2tzIGFyZSBsZWZ0LlxuICAgKiByZWdpc3RlcmVkIHdoZW4gbmV0d29yayBlcnJvcnMgb2NjdXIgYW5kIHN1YnNlcXVlbnQgdG9rZW4gcmVxdWVzdHMgZm9yIHNhbWUgcmVzb3VyY2UgYXJlIHJlZ2lzdGVyZWQgdG8gdGhlIHBlbmRpbmcgcmVxdWVzdC5cbiAgICogQGlnbm9yZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlOiBzdHJpbmcsIGZyYW1lTmFtZTogc3RyaW5nLCBzY29wZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy9zZXQgaWZyYW1lIHNlc3Npb24gdG8gcGVuZGluZ1xuICAgICAgY29uc3QgZXhwZWN0ZWRTdGF0ZSA9IHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV07XG4gICAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcIlNldCBsb2FkaW5nIHN0YXRlIHRvIHBlbmRpbmcgZm9yOiBcIiArIHNjb3BlICsgXCI6XCIgKyBleHBlY3RlZFN0YXRlKTtcbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIGV4cGVjdGVkU3RhdGUsIENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzSW5Qcm9ncmVzcyk7XG4gICAgdGhpcy5sb2FkRnJhbWUodXJsTmF2aWdhdGUsIGZyYW1lTmFtZSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgZXhwZWN0ZWRTdGF0ZSkgPT09IENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzSW5Qcm9ncmVzcykge1xuICAgICAgICAgIC8vIGZhaWwgdGhlIGlmcmFtZSBzZXNzaW9uIGlmIGl0XCJzIGluIHBlbmRpbmcgc3RhdGVcbiAgICAgICAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcIkxvYWRpbmcgZnJhbWUgaGFzIHRpbWVkIG91dCBhZnRlcjogXCIgKyAodGhpcy5sb2FkRnJhbWVUaW1lb3V0IC8gMTAwMCkgKyBcIiBzZWNvbmRzIGZvciBzY29wZSBcIiArIHNjb3BlICsgXCI6XCIgKyBleHBlY3RlZFN0YXRlKTtcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRTdGF0ZSAmJiB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5jYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0oXCJUb2tlbiByZW5ld2FsIG9wZXJhdGlvbiBmYWlsZWQgZHVlIHRvIHRpbWVvdXRcIiwgbnVsbCwgXCJUb2tlbiBSZW5ld2FsIEZhaWxlZFwiLCBDb25zdGFudHMuYWNjZXNzVG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMucmVuZXdTdGF0dXMgKyBleHBlY3RlZFN0YXRlLCBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0NhbmNlbGxlZCk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5sb2FkRnJhbWVUaW1lb3V0KTtcbiAgfVxuXG4gIC8qXG4gICAqIExvYWRzIGlmcmFtZSB3aXRoIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgVVJMXG4gICAqIEBpZ25vcmVcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBsb2FkRnJhbWUodXJsTmF2aWdhdGU6IHN0cmluZywgZnJhbWVOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBUaGlzIHRyaWNrIG92ZXJjb21lcyBpZnJhbWUgbmF2aWdhdGlvbiBpbiBJRVxuICAgIC8vIElFIGRvZXMgbm90IGxvYWQgdGhlIHBhZ2UgY29uc2lzdGVudGx5IGluIGlmcmFtZVxuICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiTG9hZEZyYW1lOiBcIiArIGZyYW1lTmFtZSk7XG4gICAgdmFyIGZyYW1lQ2hlY2sgPSBmcmFtZU5hbWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB2YXIgZnJhbWVIYW5kbGUgPSB0aGlzLmFkZEFkYWxGcmFtZShmcmFtZUNoZWNrKTtcbiAgICAgIGlmIChmcmFtZUhhbmRsZS5zcmMgPT09IFwiXCIgfHwgZnJhbWVIYW5kbGUuc3JjID09PSBcImFib3V0OmJsYW5rXCIpIHtcbiAgICAgICAgICBmcmFtZUhhbmRsZS5zcmMgPSB1cmxOYXZpZ2F0ZTtcbiAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mb1BpaShcIkZyYW1lIE5hbWUgOiBcIiArIGZyYW1lTmFtZSArIFwiIE5hdmlnYXRlZCB0bzogXCIgKyB1cmxOYXZpZ2F0ZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAgIDUwMCk7XG4gIH1cblxuICAvKlxuICAgKiBBZGRzIHRoZSBoaWRkZW4gaWZyYW1lIGZvciBzaWxlbnQgdG9rZW4gcmVuZXdhbC5cbiAgICogQGlnbm9yZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGFkZEFkYWxGcmFtZShpZnJhbWVJZDogc3RyaW5nKTogSFRNTElGcmFtZUVsZW1lbnQge1xuICAgIGlmICh0eXBlb2YgaWZyYW1lSWQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiQWRkIG1zYWwgZnJhbWUgdG8gZG9jdW1lbnQ6XCIgKyBpZnJhbWVJZCk7XG4gICAgbGV0IGFkYWxGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKSBhcyBIVE1MSUZyYW1lRWxlbWVudDtcbiAgICBpZiAoIWFkYWxGcmFtZSkge1xuICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJiZcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmXG4gICAgICAgICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSA1LjBcIikgPT09IC0xKSkge1xuICAgICAgICBjb25zdCBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgICAgICBpZnIuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWZyYW1lSWQpO1xuICAgICAgICBpZnIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGlmci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgaWZyLnN0eWxlLndpZHRoID0gaWZyLnN0eWxlLmhlaWdodCA9IFwiMFwiO1xuICAgICAgICBpZnIuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgICAgIGFkYWxGcmFtZSA9IChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoaWZyKSBhcyBIVE1MSUZyYW1lRWxlbWVudCk7XG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBcIjxpZnJhbWUgbmFtZT0nXCIgKyBpZnJhbWVJZCArIFwiJyBpZD0nXCIgKyBpZnJhbWVJZCArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJz48L2lmcmFtZT5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3cuZnJhbWVzICYmIHdpbmRvdy5mcmFtZXNbaWZyYW1lSWRdKSB7XG4gICAgICAgIGFkYWxGcmFtZSA9IHdpbmRvdy5mcmFtZXNbaWZyYW1lSWRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhZGFsRnJhbWU7XG4gIH1cblxuICAvKlxuICAgKiBBY3F1aXJlcyBhY2Nlc3MgdG9rZW4gdXNpbmcgYSBoaWRkZW4gaWZyYW1lLlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgcmVuZXdUb2tlbihzY29wZXM6IEFycmF5PHN0cmluZz4sIHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uLCB1c2VyOiBVc2VyLCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcInJlbmV3VG9rZW4gaXMgY2FsbGVkIGZvciBzY29wZTpcIiArIHNjb3BlKTtcbiAgICBjb25zdCBmcmFtZUhhbmRsZSA9IHRoaXMuYWRkQWRhbEZyYW1lKFwibXNhbFJlbmV3RnJhbWVcIiArIHNjb3BlKTtcbiAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xuICAgIH1cblxuICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xuICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHVzZXIudXNlcklkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgICsgQ29uc3RhbnRzLm5vX3VzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oYXV0aG9yaXR5S2V5LCBhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5KTtcbiAgICAvLyByZW5ldyBoYXBwZW5zIGluIGlmcmFtZSwgc28gaXQga2VlcHMgamF2YXNjcmlwdCBjb250ZXh0XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlKTtcbiAgICB0aGlzLl9sb2dnZXIudmVyYm9zZShcIlJlbmV3IHRva2VuIEV4cGVjdGVkIHN0YXRlOiBcIiArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XG4gICAgbGV0IHVybE5hdmlnYXRlID0gVXRpbHMudXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIoYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcyksIENvbnN0YW50cy5wcm9tcHQpICsgQ29uc3RhbnRzLnByb21wdF9ub25lO1xuICAgIHVybE5hdmlnYXRlID0gdGhpcy5hZGRIaW50UGFyYW1ldGVycyh1cmxOYXZpZ2F0ZSwgdXNlcik7XG4gICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcbiAgICB3aW5kb3cucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcbiAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB0aGlzLl9sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xuICAgIGZyYW1lSGFuZGxlLnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcbiAgICB0aGlzLmxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlLCBcIm1zYWxSZW5ld0ZyYW1lXCIgKyBzY29wZSwgc2NvcGUpO1xuICB9XG5cbiAgLypcbiAgICogUmVuZXdzIGlkdG9rZW4gZm9yIGFwcFwicyBvd24gYmFja2VuZCB3aGVuIGNsaWVudElkIGlzIHBhc3NlZCBhcyBhIHNpbmdsZSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgcmVuZXdJZFRva2VuKHNjb3BlczogQXJyYXk8c3RyaW5nPiwgcmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24sIHVzZXI6IFVzZXIsIGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycywgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzY29wZSA9IHNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwicmVuZXdpZFRva2VuIGlzIGNhbGxlZFwiKTtcbiAgICBjb25zdCBmcmFtZUhhbmRsZSA9IHRoaXMuYWRkQWRhbEZyYW1lKFwibXNhbElkVG9rZW5GcmFtZVwiKTtcbiAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xuICAgIH1cblxuICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xuICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHVzZXIudXNlcklkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBDb25zdGFudHMubm9fdXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcbiAgICB9XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oYXV0aG9yaXR5S2V5LCBhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5KTtcbiAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UpO1xuICAgIHRoaXMuX2xvZ2dlci52ZXJib3NlKFwiUmVuZXcgSWR0b2tlbiBFeHBlY3RlZCBzdGF0ZTogXCIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xuICAgIGxldCB1cmxOYXZpZ2F0ZSA9IFV0aWxzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChzY29wZXMpLCBDb25zdGFudHMucHJvbXB0KSArIENvbnN0YW50cy5wcm9tcHRfbm9uZTtcbiAgICB1cmxOYXZpZ2F0ZSA9IHRoaXMuYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGUsIHVzZXIpO1xuICAgIGlmICh0aGlzLl9zaWxlbnRMb2dpbikge1xuICAgICAgICB3aW5kb3cucmVxdWVzdFR5cGUgPSBDb25zdGFudHMubG9naW47XG4gICAgICAgIHRoaXMuX3NpbGVudEF1dGhlbnRpY2F0aW9uU3RhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XG4gICAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgdGhpcy5jbGllbnRJZCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB0aGlzLl9sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xuICAgIGZyYW1lSGFuZGxlLnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcbiAgICB0aGlzLmxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlLCBcIm1zYWxJZFRva2VuRnJhbWVcIiwgdGhpcy5jbGllbnRJZCk7XG4gIH1cblxuICAvKlxuICAgICogUmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgKHJlY2VpdmVkIGZyb20gYSB1c2VyIG9iamVjdCBjcmVhdGVkIGF0IHRoZSB0aW1lIG9mIGxvZ2luKSBvciBudWxsLlxuICAgICovXG4gIGdldFVzZXIoKTogVXNlciB7XG4gICAgLy8gaWRUb2tlbiBpcyBmaXJzdCBjYWxsXG4gICAgaWYgKHRoaXMuX3VzZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VyO1xuICAgIH1cblxuICAgIC8vIGZyYW1lIGlzIHVzZWQgdG8gZ2V0IGlkVG9rZW5cbiAgICBjb25zdCByYXdJZFRva2VuID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmlkVG9rZW5LZXkpO1xuICAgIGNvbnN0IHJhd0NsaWVudEluZm8gPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubXNhbENsaWVudEluZm8pO1xuICAgIGlmICghVXRpbHMuaXNFbXB0eShyYXdJZFRva2VuKSAmJiAhVXRpbHMuaXNFbXB0eShyYXdDbGllbnRJbmZvKSkge1xuICAgICAgY29uc3QgaWRUb2tlbiA9IG5ldyBJZFRva2VuKHJhd0lkVG9rZW4pO1xuICAgICAgY29uc3QgY2xpZW50SW5mbyA9IG5ldyBDbGllbnRJbmZvKHJhd0NsaWVudEluZm8pO1xuICAgICAgdGhpcy5fdXNlciA9IFVzZXIuY3JlYXRlVXNlcihpZFRva2VuLCBjbGllbnRJbmZvKTtcbiAgICAgIHJldHVybiB0aGlzLl91c2VyO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLypcbiAgICogVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgZm9yIHByb2Nlc3NpbmcgdGhlIHJlc3BvbnNlIHJlY2VpdmVkIGZyb20gdGhlIFNUUy4gSXQgZXh0cmFjdHMgdGhlIGhhc2gsIHByb2Nlc3NlcyB0aGUgdG9rZW4gb3IgZXJyb3IgaW5mb3JtYXRpb24gYW5kIHNhdmVzIGl0IGluIHRoZSBjYWNoZS4gSXQgdGhlblxuICAgKiBjYWxscyB0aGUgcmVnaXN0ZXJlZCBjYWxsYmFja3MgaW4gY2FzZSBvZiByZWRpcmVjdCBvciByZXNvbHZlcyB0aGUgcHJvbWlzZXMgd2l0aCB0aGUgcmVzdWx0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2hhc2g9d2luZG93LmxvY2F0aW9uLmhhc2hdIC0gSGFzaCBmcmFnbWVudCBvZiBVcmwuXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZShoYXNoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaGFzaCA9PSBudWxsKSB7XG4gICAgICBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSBudWxsO1xuICAgIHZhciBpc1BvcHVwOiBib29sZWFuID0gZmFsc2U7XG4gICAgdmFyIGlzV2luZG93T3BlbmVyTXNhbCA9IGZhbHNlO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgaXNXaW5kb3dPcGVuZXJNc2FsID0gd2luZG93Lm9wZW5lciAmJiB3aW5kb3cub3BlbmVyLm1zYWwgJiYgd2luZG93Lm9wZW5lci5tc2FsICE9PSB3aW5kb3cubXNhbDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gZXJyID0gU2VjdXJpdHlFcnJvcjogQmxvY2tlZCBhIGZyYW1lIHdpdGggb3JpZ2luIFwiW3VybF1cIiBmcm9tIGFjY2Vzc2luZyBhIGNyb3NzLW9yaWdpbiBmcmFtZS5cbiAgICAgICAgaXNXaW5kb3dPcGVuZXJNc2FsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGlzV2luZG93T3BlbmVyTXNhbCkge1xuICAgICAgICBzZWxmID0gd2luZG93Lm9wZW5lci5tc2FsO1xuICAgICAgICBpc1BvcHVwID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93LnBhcmVudCAmJiB3aW5kb3cucGFyZW50Lm1zYWwpIHtcbiAgICAgIHNlbGYgPSB3aW5kb3cucGFyZW50Lm1zYWw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBzZWxmLmdldFJlcXVlc3RJbmZvKGhhc2gpOyAvL2lmKHdpbmRvdy5wYXJlbnQhPT13aW5kb3cpLCBieSB1c2luZyBzZWxmLCB3aW5kb3cucGFyZW50IGJlY29tZXMgZXF1YWwgdG8gd2luZG93IGluIGdldFJlcXVlc3RJbmZvIG1ldGhvZCBzcGVjaWZpY2FsbHlcbiAgICBsZXQgdG9rZW46IHN0cmluZyA9IG51bGwsIHRva2VuUmVjZWl2ZWRDYWxsYmFjazogKGVycm9yRGVzYzogc3RyaW5nLCB0b2tlbjogc3RyaW5nLCBlcnJvcjogc3RyaW5nLCB0b2tlblR5cGU6IHN0cmluZykgPT4gdm9pZCA9IG51bGwsIHRva2VuVHlwZTogc3RyaW5nLCBzYXZlVG9rZW46IGJvb2xlYW4gPSB0cnVlO1xuICAgIHNlbGYuX2xvZ2dlci5pbmZvKFwiUmV0dXJuZWQgZnJvbSByZWRpcmVjdCB1cmxcIik7XG4gICAgaWYgKHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdyAmJiB3aW5kb3cucGFyZW50Lm1zYWwpIHtcbiAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrID0gd2luZG93LnBhcmVudC5jYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbcmVxdWVzdEluZm8uc3RhdGVSZXNwb25zZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzV2luZG93T3BlbmVyTXNhbCkge1xuICAgICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB3aW5kb3cub3BlbmVyLmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tyZXF1ZXN0SW5mby5zdGF0ZVJlc3BvbnNlXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChzZWxmLl9uYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsKSB7XG4gICAgICAgICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgc2VsZi5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnVybEhhc2gsIGhhc2gpO1xuICAgICAgICAgICAgc2F2ZVRva2VuID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAod2luZG93LnBhcmVudCA9PT0gd2luZG93ICYmICFpc1BvcHVwKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzZWxmLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubG9naW5SZXF1ZXN0LCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrID0gc2VsZi5fdG9rZW5SZWNlaXZlZENhbGxiYWNrO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBcIlwiO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBzZWxmLnNhdmVUb2tlbkZyb21IYXNoKHJlcXVlc3RJbmZvKTtcblxuICAgIGlmICgocmVxdWVzdEluZm8ucmVxdWVzdFR5cGUgPT09IENvbnN0YW50cy5yZW5ld1Rva2VuKSAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIHNlbGYuX2xvZ2dlci52ZXJib3NlKFwiV2luZG93IGlzIGluIGlmcmFtZSwgYWNxdWlyaW5nIHRva2VuIHNpbGVudGx5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5fbG9nZ2VyLnZlcmJvc2UoXCJhY3F1aXJpbmcgdG9rZW4gaW50ZXJhY3RpdmUgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIH1cblxuICAgIHRva2VuID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dIHx8IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xuICAgIHRva2VuVHlwZSA9IENvbnN0YW50cy5hY2Nlc3NUb2tlbjtcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3RJbmZvLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMubG9naW4pIHtcbiAgICB0b2tlbiA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xuICAgIHRva2VuVHlwZSA9IENvbnN0YW50cy5pZFRva2VuO1xuICAgIH1cblxuICAgIHZhciBlcnJvckRlc2MgPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXTtcbiAgICB2YXIgZXJyb3IgPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl07XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xuICAgICAgICAgICAgLy9XZSBzaG91bGQgb25seSBzZW5kIHRoZSBzdGFlIGJhY2sgdG8gdGhlIGRldmVsb3BlciBpZiBpdCBtYXRjaGVzIHdpdGggd2hhdCB3ZSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0SW5mby5zdGF0ZU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrLmNhbGwoc2VsZiwgZXJyb3JEZXNjLCB0b2tlbiwgZXJyb3IsIHRva2VuVHlwZSwgdGhpcy5nZXRVc2VyU3RhdGUocmVxdWVzdEluZm8uc3RhdGVSZXNwb25zZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrLmNhbGwoc2VsZiwgZXJyb3JEZXNjLCB0b2tlbiwgZXJyb3IsIHRva2VuVHlwZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBzZWxmLl9sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBpbiB0b2tlbiByZWNlaXZlZCBjYWxsYmFjayBmdW5jdGlvbjogXCIgKyBlcnIpO1xuICAgIH1cbiAgICBpZiAoaXNXaW5kb3dPcGVuZXJNc2FsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2luZG93Lm9wZW5lci5vcGVuZWRXaW5kb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbmVyLm9wZW5lZFdpbmRvd3NbaV0uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGZvciBwcm9jZXNzaW5nIHRoZSByZXNwb25zZSByZWNlaXZlZCBmcm9tIEFBRC4gSXQgZXh0cmFjdHMgdGhlIGhhc2gsIHByb2Nlc3NlcyB0aGUgdG9rZW4gb3IgZXJyb3IsIHNhdmVzIGl0IGluIHRoZSBjYWNoZSBhbmQgY2FsbHMgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIHdpdGggdGhlIHJlc3VsdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSBhdXRob3JpdHkgcmVjZWl2ZWQgaW4gdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGZyb20gQUFELlxuICAgKiBAcGFyYW0ge1Rva2VuUmVzcG9uc2V9IHJlcXVlc3RJbmZvIGFuIG9iamVjdCBjcmVhdGVkIGZyb20gdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGZyb20gQUFEIGNvbXByaXNpbmcgb2YgdGhlIGtleXMgLSBwYXJhbWV0ZXJzLCByZXF1ZXN0VHlwZSwgc3RhdGVNYXRjaCwgc3RhdGVSZXNwb25zZSBhbmQgdmFsaWQuXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciB1c2VyIG9iamVjdCBmb3Igd2hpY2ggc2NvcGVzIGFyZSBjb25zZW50ZWQgZm9yLiBUaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cbiAgICogQHBhcmFtIHtDbGllbnRJbmZvfSBjbGllbnRJbmZvIGNsaWVudEluZm8gcmVjZWl2ZWQgYXMgcGFydCBvZiB0aGUgcmVzcG9uc2UgY29tcHJpc2luZyBvZiBmaWVsZHMgdWlkIGFuZCB1dGlkLlxuICAgKiBAcGFyYW0ge0lkVG9rZW59IGlkVG9rZW4gaWRUb2tlbiByZWNlaXZlZCBhcyBwYXJ0IG9mIHRoZSByZXNwb25zZS5cbiAgICogQGlnbm9yZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICAgLyogdHNsaW50OmRpc2FibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cbiAgcHJpdmF0ZSBzYXZlQWNjZXNzVG9rZW4oYXV0aG9yaXR5OiBzdHJpbmcsIHRva2VuUmVzcG9uc2U6IFRva2VuUmVzcG9uc2UsIHVzZXI6IFVzZXIsIGNsaWVudEluZm86IHN0cmluZywgaWRUb2tlbjogSWRUb2tlbik6IHZvaWQge1xuICAgIGxldCBzY29wZTogc3RyaW5nO1xuICAgIGxldCBjbGllbnRPYmo6IENsaWVudEluZm8gPSBuZXcgQ2xpZW50SW5mbyhjbGllbnRJbmZvKTtcbiAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpIHtcbiAgICAgIHNjb3BlID0gdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wic2NvcGVcIl07XG4gICAgICBjb25zdCBjb25zZW50ZWRTY29wZXMgPSBzY29wZS5zcGxpdChcIiBcIik7XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgPVxuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKHRoaXMuY2xpZW50SWQsIGF1dGhvcml0eSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXTtcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLmtleS51c2VySWRlbnRpZmllciA9PT0gdXNlci51c2VySWRlbnRpZmllcikge1xuICAgICAgICAgIGNvbnN0IGNhY2hlZFNjb3BlcyA9IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLmtleS5zY29wZXMuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChVdGlscy5pc0ludGVyc2VjdGluZ1Njb3BlcyhjYWNoZWRTY29wZXMsIGNvbnNlbnRlZFNjb3BlcykpIHtcbiAgICAgICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbktleSA9IG5ldyBBY2Nlc3NUb2tlbktleShhdXRob3JpdHksIHRoaXMuY2xpZW50SWQsIHNjb3BlLCBjbGllbnRPYmoudWlkLCBjbGllbnRPYmoudXRpZCk7XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlblZhbHVlID0gbmV3IEFjY2Vzc1Rva2VuVmFsdWUodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5hY2Nlc3NUb2tlbl0sIGlkVG9rZW4ucmF3SWRUb2tlbiwgVXRpbHMuZXhwaXJlc0luKHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXhwaXJlc0luXSkudG9TdHJpbmcoKSwgY2xpZW50SW5mbyk7XG4gICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlbktleSksIEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuVmFsdWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NvcGUgPSB0aGlzLmNsaWVudElkO1xuICAgICAgY29uc3QgYWNjZXNzVG9rZW5LZXkgPSBuZXcgQWNjZXNzVG9rZW5LZXkoYXV0aG9yaXR5LCB0aGlzLmNsaWVudElkLCBzY29wZSwgY2xpZW50T2JqLnVpZCwgY2xpZW50T2JqLnV0aWQpO1xuICAgICAgY29uc3QgYWNjZXNzVG9rZW5WYWx1ZSA9IG5ldyBBY2Nlc3NUb2tlblZhbHVlKHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0sIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0sIGlkVG9rZW4uZXhwaXJhdGlvbiwgY2xpZW50SW5mbyk7XG4gICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlbktleSksIEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuVmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBTYXZlcyB0b2tlbiBvciBlcnJvciByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQUQgaW4gdGhlIGNhY2hlLiBJbiBjYXNlIG9mIGlkX3Rva2VuLCBpdCBhbHNvIGNyZWF0ZXMgdGhlIHVzZXIgb2JqZWN0LlxuICAgKiBAaWdub3JlXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByb3RlY3RlZCBzYXZlVG9rZW5Gcm9tSGFzaCh0b2tlblJlc3BvbnNlOiBUb2tlblJlc3BvbnNlKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nZ2VyLmluZm8oXCJTdGF0ZSBzdGF0dXM6XCIgKyB0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2ggKyBcIjsgUmVxdWVzdCB0eXBlOlwiICsgdG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSk7XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJcIik7XG4gICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIlwiKTtcbiAgICAgIHZhciBzY29wZTogc3RyaW5nID0gXCJcIjtcbiAgICAgIHZhciBhdXRob3JpdHlLZXk6IHN0cmluZyA9IFwiXCI7XG4gICAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTogc3RyaW5nID0gXCJcIjtcbiAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpIHtcbiAgICAgIHNjb3BlID0gdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wic2NvcGVcIl0udG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzY29wZSA9IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuXG4gICAgLy8gUmVjb3JkIGVycm9yXG4gICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvcikpIHtcbiAgICAgIHRoaXMuX2xvZ2dlci5pbmZvUGlpKFwiRXJyb3IgOlwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl0gKyBcIjsgRXJyb3IgZGVzY3JpcHRpb246XCIgKyB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dKTtcbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yXCJdKTtcbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXSk7XG4gICAgICBpZiAodG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gQ29uc3RhbnRzLmxvZ2luKSB7XG4gICAgICAgIHRoaXMuX2xvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXSArIFwiOlwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl0pO1xuICAgICAgICBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gQ29uc3RhbnRzLnJlbmV3VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcbiAgICAgICAgICB2YXIgdXNlcktleSA9IHRoaXMuZ2V0VXNlcigpICE9PSBudWxsID8gdGhpcy5nZXRVc2VyKCkudXNlcklkZW50aWZpZXIgOiBcIlwiO1xuICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHVzZXJLZXkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSXQgbXVzdCB2ZXJpZnkgdGhlIHN0YXRlIGZyb20gcmVkaXJlY3RcbiAgICAgIGlmICh0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2gpIHtcbiAgICAgICAgLy8gcmVjb3JkIHRva2VucyB0byBzdG9yYWdlIGlmIGV4aXN0c1xuICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcIlN0YXRlIGlzIHJpZ2h0XCIpO1xuICAgICAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5zZXNzaW9uU3RhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbFNlc3Npb25TdGF0ZSwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5zZXNzaW9uU3RhdGVdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWRUb2tlbjogSWRUb2tlbjtcbiAgICAgICAgdmFyIGNsaWVudEluZm86IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKSkge1xuICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKFwiRnJhZ21lbnQgaGFzIGFjY2VzcyB0b2tlblwiKTtcbiAgICAgICAgICB0aGlzLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHVzZXI6IFVzZXI7XG4gICAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuaWRUb2tlbikpIHtcbiAgICAgICAgICAgIGlkVG9rZW4gPSBuZXcgSWRUb2tlbih0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWRUb2tlbiA9IG5ldyBJZFRva2VuKHRoaXMuX2NhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5pZFRva2VuS2V5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgICBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xuICAgICAgICAgICAgbGV0IGF1dGhvcml0eTogc3RyaW5nID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oYXV0aG9yaXR5S2V5LCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xuICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5KGF1dGhvcml0eSkpIHtcbiAgICAgICAgICAgICAgICBhdXRob3JpdHkgPSBVdGlscy5yZXBsYWNlRmlyc3RQYXRoKGF1dGhvcml0eSwgaWRUb2tlbi50ZW5hbnRJZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuY2xpZW50SW5mbykpIHtcbiAgICAgICAgICAgIGNsaWVudEluZm8gPSB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmNsaWVudEluZm9dO1xuICAgICAgICAgICAgdXNlciA9IFVzZXIuY3JlYXRlVXNlcihpZFRva2VuLCBuZXcgQ2xpZW50SW5mbyhjbGllbnRJbmZvKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci53YXJuaW5nKFwiQ2xpZW50SW5mbyBub3QgcmVjZWl2ZWQgaW4gdGhlIHJlc3BvbnNlIGZyb20gQUFEXCIpO1xuICAgICAgICAgICAgdXNlciA9IFVzZXIuY3JlYXRlVXNlcihpZFRva2VuLCBuZXcgQ2xpZW50SW5mbyhjbGllbnRJbmZvKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdXNlci51c2VySWRlbnRpZmllciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcbiAgICAgICAgICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5X25vdXNlciA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX3VzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICAgICAgICBsZXQgY2FjaGVkVXNlcjogc3RyaW5nID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSk7XG4gICAgICAgICAgICBsZXQgYWNxdWlyZVRva2VuVXNlcjogVXNlcjtcbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eShjYWNoZWRVc2VyKSkge1xuICAgICAgICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXIgPSBKU09OLnBhcnNlKGNhY2hlZFVzZXIpO1xuICAgICAgICAgICAgaWYgKHVzZXIgJiYgYWNxdWlyZVRva2VuVXNlciAmJiBVdGlscy5jb21wYXJlT2JqZWN0cyh1c2VyLCBhY3F1aXJlVG9rZW5Vc2VyKSkge1xuICAgICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihhdXRob3JpdHksIHRva2VuUmVzcG9uc2UsIHVzZXIsIGNsaWVudEluZm8sIGlkVG9rZW4pO1xuICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBcIlRoZSB1c2VyIG9iamVjdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgaXMgdGhlIHNhbWUgYXMgdGhlIG9uZSBwYXNzZWQgaW4gdGhlIGFjcXVpcmVUb2tlbiByZXF1ZXN0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLndhcm5pbmcoXG4gICAgICAgICAgICAgICAgXCJUaGUgdXNlciBvYmplY3QgY3JlYXRlZCBmcm9tIHRoZSByZXNwb25zZSBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIG9uZSBwYXNzZWQgaW4gdGhlIGFjcXVpcmVUb2tlbiByZXF1ZXN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIVV0aWxzLmlzRW1wdHkodGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleV9ub3VzZXIpKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQWNjZXNzVG9rZW4oYXV0aG9yaXR5LCB0b2tlblJlc3BvbnNlLCB1c2VyLCBjbGllbnRJbmZvLCBpZFRva2VuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oXCJGcmFnbWVudCBoYXMgaWQgdG9rZW5cIik7XG4gICAgICAgICAgICB0aGlzLl9sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGlkVG9rZW4gPSBuZXcgSWRUb2tlbih0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcbiAgICAgICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmNsaWVudEluZm8pKSB7XG4gICAgICAgICAgICAgIGNsaWVudEluZm8gPSB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmNsaWVudEluZm9dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLndhcm5pbmcoXCJDbGllbnRJbmZvIG5vdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQURcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICAgICAgICBsZXQgYXV0aG9yaXR5OiBzdHJpbmcgPSB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHkoYXV0aG9yaXR5KSkge1xuICAgICAgICAgICAgICBhdXRob3JpdHkgPSBVdGlscy5yZXBsYWNlRmlyc3RQYXRoKGF1dGhvcml0eSwgaWRUb2tlbi50ZW5hbnRJZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3VzZXIgPSBVc2VyLmNyZWF0ZVVzZXIoaWRUb2tlbiwgbmV3IENsaWVudEluZm8oY2xpZW50SW5mbykpO1xuICAgICAgICAgICAgaWYgKGlkVG9rZW4gJiYgaWRUb2tlbi5ub25jZSkge1xuICAgICAgICAgICAgICBpZiAoaWRUb2tlbi5ub25jZSAhPT0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJOb25jZSBNaXNtYXRjaC4gRXhwZWN0ZWQgTm9uY2U6IFwiICsgdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSArIFwiLFwiICsgXCJBY3R1YWwgTm9uY2U6IFwiICsgaWRUb2tlbi5ub25jZSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoXCJOb25jZSBNaXNtYXRjaC5FeHBlY3RlZCBOb25jZTogXCIgKyB0aGlzLl9jYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCB0aGlzLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpICsgXCIsXCIgKyBcIkFjdHVhbCBOb25jZTogXCIgKyBpZFRva2VuLm5vbmNlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuaWRUb2tlbktleSwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxDbGllbnRJbmZvLCBjbGllbnRJbmZvKTtcblxuICAgICAgICAgICAgICAgIC8vIFNhdmUgaWRUb2tlbiBhcyBhY2Nlc3MgdG9rZW4gZm9yIGFwcCBpdHNlbGZcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihhdXRob3JpdHksIHRva2VuUmVzcG9uc2UsIHRoaXMuX3VzZXIsIGNsaWVudEluZm8sIGlkVG9rZW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhdXRob3JpdHlLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihcIkludmFsaWQgaWRfdG9rZW4gcmVjZWl2ZWQgaW4gdGhlIHJlc3BvbnNlXCIpO1xuICAgICAgICAgICAgICB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbXCJlcnJvclwiXSA9IFwiaW52YWxpZCBpZFRva2VuXCI7XG4gICAgICAgICAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yX2Rlc2NyaXB0aW9uXCJdID0gXCJJbnZhbGlkIGlkVG9rZW4uIGlkVG9rZW46IFwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXTtcbiAgICAgICAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJpbnZhbGlkIGlkVG9rZW5cIik7XG4gICAgICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgXCJJbnZhbGlkIGlkVG9rZW4uIGlkVG9rZW46IFwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF1dGhvcml0eUtleSA9IHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcbiAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcbiAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKFwiU3RhdGUgTWlzbWF0Y2guRXhwZWN0ZWQgU3RhdGU6IFwiICsgdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkgKyBcIixcIiArIFwiQWN0dWFsIFN0YXRlOiBcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSk7XG4gICAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yXCJdID0gXCJJbnZhbGlkX3N0YXRlXCI7XG4gICAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yX2Rlc2NyaXB0aW9uXCJdID0gXCJJbnZhbGlkX3N0YXRlLiBzdGF0ZTogXCIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XG4gICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiSW52YWxpZF9zdGF0ZVwiKTtcbiAgICAgICAgdGhpcy5fY2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIkludmFsaWRfc3RhdGUuIHN0YXRlOiBcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSk7XG4gICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9jYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMucmVuZXdTdGF0dXMgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2UsIENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzQ29tcGxldGVkKTtcbiAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5yZW1vdmVBY3F1aXJlVG9rZW5FbnRyaWVzKGF1dGhvcml0eUtleSwgYWNxdWlyZVRva2VuVXNlcktleSk7XG4gICAgICAvL3RoaXMgaXMgcmVxdWlyZWQgaWYgbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybD1mYWxzZVxuICAgICAgaWYgKHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkge1xuICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5zZXRJdGVtQ29va2llKGF1dGhvcml0eUtleSwgXCJcIiwgLTEpO1xuICAgICAgICAgIHRoaXMuX2NhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xuICAgICAgfVxuICB9XG4gIC8qIHRzbGludDplbmFibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cblxuICAvKlxuICAgKiBDaGVja3MgaWYgdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGlzIHJlY2VpdmVkIGZyb20gdGhlIFNUUy4gSW4gY2FzZSBvZiByZWRpcmVjdCwgdGhlIHVybCBmcmFnbWVudCBoYXMgZWl0aGVyIGlkX3Rva2VuLCBhY2Nlc3NfdG9rZW4gb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIC0gSGFzaCBwYXNzZWQgZnJvbSByZWRpcmVjdCBwYWdlLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSB0cnVlIGlmIHJlc3BvbnNlIGNvbnRhaW5zIGlkX3Rva2VuLCBhY2Nlc3NfdG9rZW4gb3IgZXJyb3IsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQGhpZGRlblxuICAgKi9cbiAgaXNDYWxsYmFjayhoYXNoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBoYXNoID0gdGhpcy5nZXRIYXNoKGhhc2gpO1xuICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBVdGlscy5kZXNlcmlhbGl6ZShoYXNoKTtcbiAgICByZXR1cm4gKFxuICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHxcbiAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yKSB8fFxuICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuYWNjZXNzVG9rZW4pIHx8XG4gICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKVxuXG4gICAgKTtcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgdGhlIGFuY2hvciBwYXJ0KCMpIG9mIHRoZSBVUkxcbiAgICogQGlnbm9yZVxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGdldEhhc2goaGFzaDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoaGFzaC5pbmRleE9mKFwiIy9cIikgPiAtMSkge1xuICAgICAgaGFzaCA9IGhhc2guc3Vic3RyaW5nKGhhc2guaW5kZXhPZihcIiMvXCIpICsgMik7XG4gICAgfSBlbHNlIGlmIChoYXNoLmluZGV4T2YoXCIjXCIpID4gLTEpIHtcbiAgICAgIGhhc2ggPSBoYXNoLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuXG4gIC8qXG4gICAgKiBDcmVhdGVzIGEgcmVxdWVzdEluZm8gb2JqZWN0IGZyb20gdGhlIFVSTCBmcmFnbWVudCBhbmQgcmV0dXJucyBpdC5cbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoICAtICBIYXNoIHBhc3NlZCBmcm9tIHJlZGlyZWN0IHBhZ2VcbiAgICAqIEByZXR1cm5zIHtUb2tlblJlc3BvbnNlfSBhbiBvYmplY3QgY3JlYXRlZCBmcm9tIHRoZSByZWRpcmVjdCByZXNwb25zZSBmcm9tIEFBRCBjb21wcmlzaW5nIG9mIHRoZSBrZXlzIC0gcGFyYW1ldGVycywgcmVxdWVzdFR5cGUsIHN0YXRlTWF0Y2gsIHN0YXRlUmVzcG9uc2UgYW5kIHZhbGlkLlxuICAgICogQGlnbm9yZVxuICAgICogQGhpZGRlblxuICAgICovXG4gIHByb3RlY3RlZCBnZXRSZXF1ZXN0SW5mbyhoYXNoOiBzdHJpbmcpOiBUb2tlblJlc3BvbnNlIHtcbiAgICBoYXNoID0gdGhpcy5nZXRIYXNoKGhhc2gpO1xuICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBVdGlscy5kZXNlcmlhbGl6ZShoYXNoKTtcbiAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gbmV3IFRva2VuUmVzcG9uc2UoKTtcbiAgICBpZiAocGFyYW1ldGVycykge1xuICAgICAgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uKSB8fFxuICAgICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvcikgfHxcbiAgICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuYWNjZXNzVG9rZW4pIHx8XG4gICAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmlkVG9rZW4pKSB7XG4gICAgICAgIHRva2VuUmVzcG9uc2UudmFsaWQgPSB0cnVlO1xuICAgICAgICAvLyB3aGljaCBjYWxsXG4gICAgICAgIGxldCBzdGF0ZVJlc3BvbnNlOiBzdHJpbmc7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic3RhdGVcIikpIHtcbiAgICAgICAgICAgIHN0YXRlUmVzcG9uc2UgPSBwYXJhbWV0ZXJzLnN0YXRlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2UgPSBzdGF0ZVJlc3BvbnNlO1xuICAgICAgICAvLyBhc3luYyBjYWxscyBjYW4gZmlyZSBpZnJhbWUgYW5kIGxvZ2luIHJlcXVlc3QgYXQgdGhlIHNhbWUgdGltZSBpZiBkZXZlbG9wZXIgZG9lcyBub3QgdXNlIHRoZSBBUEkgYXMgZXhwZWN0ZWRcbiAgICAgICAgLy8gaW5jb21pbmcgY2FsbGJhY2sgbmVlZHMgdG8gYmUgbG9va2VkIHVwIHRvIGZpbmQgdGhlIHJlcXVlc3QgdHlwZVxuICAgICAgICBpZiAoc3RhdGVSZXNwb25zZSA9PT0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkgfHwgc3RhdGVSZXNwb25zZSA9PT0gdGhpcy5fc2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSkgeyAvLyBsb2dpblJlZGlyZWN0XG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLmxvZ2luO1xuICAgICAgICAgICAgdG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlUmVzcG9uc2UgPT09IHRoaXMuX2NhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbiwgdGhpcy5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkgeyAvL2FjcXVpcmVUb2tlblJlZGlyZWN0XG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBleHRlcm5hbCBhcGkgcmVxdWVzdHMgbWF5IGhhdmUgbWFueSByZW5ld3Rva2VuIHJlcXVlc3RzIGZvciBkaWZmZXJlbnQgcmVzb3VyY2VcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2gpIHtcbiAgICAgICAgICB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID0gd2luZG93LnJlcXVlc3RUeXBlO1xuICAgICAgICAgIGNvbnN0IHN0YXRlc0luUGFyZW50Q29udGV4dCA9IHdpbmRvdy5yZW5ld1N0YXRlcztcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlc0luUGFyZW50Q29udGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHN0YXRlc0luUGFyZW50Q29udGV4dFtpXSA9PT0gdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRva2VuUmVzcG9uc2Uuc3RhdGVNYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcbiAgfVxuXG4gIC8qXG4gICAgKiBFeHRyYWN0cyBzY29wZSB2YWx1ZSBmcm9tIHRoZSBzdGF0ZSBzZW50IHdpdGggdGhlIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3QuXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzY29wZS5cbiAgICAqIEBpZ25vcmVcbiAgICAqIEBoaWRkZW5cbiAgICAqL1xuICBwcml2YXRlIGdldFNjb3BlRnJvbVN0YXRlKHN0YXRlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChzdGF0ZSkge1xuICAgICAgY29uc3Qgc3BsaXRJbmRleCA9IHN0YXRlLmluZGV4T2YoXCJ8XCIpO1xuICAgICAgaWYgKHNwbGl0SW5kZXggPiAtMSAmJiBzcGxpdEluZGV4ICsgMSA8IHN0YXRlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc3RhdGUuc3Vic3RyaW5nKHNwbGl0SW5kZXggKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICAgIC8qXG4gICAgKiBFeHRyYWN0cyBzdGF0ZSB2YWx1ZSBmcm9tIHRoZSB1c2VyU3RhdGUgc2VudCB3aXRoIHRoZSBhdXRoZW50aWNhdGlvbiByZXF1ZXN0LlxuICAgICogQHJldHVybnMge3N0cmluZ30gc2NvcGUuXG4gICAgKiBAaWdub3JlXG4gICAgKiBAaGlkZGVuXG4gICAgKi9cbiAgICBnZXRVc2VyU3RhdGUgKHN0YXRlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICBjb25zdCBzcGxpdEluZGV4ID0gc3RhdGUuaW5kZXhPZihcInxcIik7XG4gICAgICAgICAgICBpZiAoc3BsaXRJbmRleCA+IC0xICYmIHNwbGl0SW5kZXggKyAxIDwgc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnN1YnN0cmluZyhzcGxpdEluZGV4ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG5cbiAgLypcbiAgICAqIFJldHVybnMgd2hldGhlciBjdXJyZW50IHdpbmRvdyBpcyBpbiBpZnJhbSBmb3IgdG9rZW4gcmVuZXdhbFxuICAgICogQGlnbm9yZVxuICAgICogQGhpZGRlblxuICAgICovXG4gIHByaXZhdGUgaXNJbklmcmFtZSgpIHtcbiAgICAgIHJldHVybiB3aW5kb3cucGFyZW50ICE9PSB3aW5kb3c7XG4gIH1cblxuICBsb2dpbkluUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XG4gICAgICB2YXIgcGVuZGluZ0NhbGxiYWNrID0gdGhpcy5fY2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnVybEhhc2gpO1xuICAgICAgaWYgKHBlbmRpbmdDYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2xvZ2luSW5Qcm9ncmVzcztcbiAgfVxuXG4gcHJpdmF0ZSBnZXRIb3N0RnJvbVVyaSh1cmk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAvLyByZW1vdmUgaHR0cDovLyBvciBodHRwczovLyBmcm9tIHVyaVxuICAgICAgdmFyIGV4dHJhY3RlZFVyaSA9IFN0cmluZyh1cmkpLnJlcGxhY2UoL14oaHR0cHM/OilcXC9cXC8vLCBcIlwiKTtcbiAgICAgIGV4dHJhY3RlZFVyaSA9IGV4dHJhY3RlZFVyaS5zcGxpdChcIi9cIilbMF07XG4gICAgICByZXR1cm4gZXh0cmFjdGVkVXJpO1xuIH1cblxuICBwcm90ZWN0ZWQgZ2V0U2NvcGVzRm9yRW5kcG9pbnQoZW5kcG9pbnQ6IHN0cmluZykgOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgIC8vIGlmIHVzZXIgc3BlY2lmaWVkIGxpc3Qgb2YgdW5wcm90ZWN0ZWRSZXNvdXJjZXMsIG5vIG5lZWQgdG8gc2VuZCB0b2tlbiB0byB0aGVzZSBlbmRwb2ludHMsIHJldHVybiBudWxsLlxuICAgICAgaWYgKHRoaXMuX3VucHJvdGVjdGVkUmVzb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3VucHJvdGVjdGVkUmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKHRoaXMuX3VucHJvdGVjdGVkUmVzb3VyY2VzW2ldKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3Byb3RlY3RlZFJlc291cmNlTWFwLnNpemUgPiAwKSB7XG4gICAgICAgICAgZm9yIChsZXQga2V5IG9mIEFycmF5LmZyb20odGhpcy5fcHJvdGVjdGVkUmVzb3VyY2VNYXAua2V5cygpKSkge1xuICAgICAgICAgICAgICAvLyBjb25maWdFbmRwb2ludCBpcyBsaWtlIC9hcGkvVG9kbyByZXF1ZXN0ZWQgZW5kcG9pbnQgY2FuIGJlIC9hcGkvVG9kby8xXG4gICAgICAgICAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3RlY3RlZFJlc291cmNlTWFwLmdldChrZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBkZWZhdWx0IHJlc291cmNlIHdpbGwgYmUgY2xpZW50aWQgaWYgbm90aGluZyBzcGVjaWZpZWRcbiAgICAgIC8vIEFwcCB3aWxsIHVzZSBpZHRva2VuIGZvciBjYWxscyB0byBpdHNlbGZcbiAgICAgIC8vIGNoZWNrIGlmIGl0J3Mgc3RhcmluZyBmcm9tIGh0dHAgb3IgaHR0cHMsIG5lZWRzIHRvIG1hdGNoIHdpdGggYXBwIGhvc3RcbiAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKFwiaHR0cDovL1wiKSA+IC0xIHx8IGVuZHBvaW50LmluZGV4T2YoXCJodHRwczovL1wiKSA+IC0xKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZ2V0SG9zdEZyb21VcmkoZW5kcG9pbnQpID09PSB0aGlzLmdldEhvc3RGcm9tVXJpKHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheTxzdHJpbmc+KHRoaXMuY2xpZW50SWQpO1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbiBhbmd1bGFyIGxldmVsLCB0aGUgdXJsIGZvciAkaHR0cCBpbnRlcmNlcHRvciBjYWxsIGNvdWxkIGJlIHJlbGF0aXZlIHVybCxcbiAgICAgIC8vIGlmIGl0J3MgcmVsYXRpdmUgY2FsbCwgd2UnbGwgdHJlYXQgaXQgYXMgYXBwIGJhY2tlbmQgY2FsbC5cbiAgICAgICAgICByZXR1cm4gbmV3IEFycmF5PHN0cmluZz4odGhpcy5jbGllbnRJZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIG5vdCB0aGUgYXBwJ3Mgb3duIGJhY2tlbmQgb3Igbm90IGEgZG9tYWluIGxpc3RlZCBpbiB0aGUgZW5kcG9pbnRzIHN0cnVjdHVyZVxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvL1RoZXNlIEFQSVMgYXJlIGV4cG9zZWQgZm9yIG1zYWxBbmd1bGFyIHdyYXBwZXIgb25seVxuICAgIHByb3RlY3RlZCBzZXRsb2dpbkluUHJvZ3Jlc3MobG9naW5JblByb2dyZXNzIDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9sb2dpbkluUHJvZ3Jlc3MgPSBsb2dpbkluUHJvZ3Jlc3M7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3F1aXJlVG9rZW5JblByb2dyZXNzO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzKGFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2FjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBhY3F1aXJlVG9rZW5JblByb2dyZXNzO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRMb2dnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dnZXI7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb2tlblJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIHBhcmFtZXRlcnM6IE9iamVjdDtcbiAgc3RhdGVNYXRjaDogYm9vbGVhbjtcbiAgc3RhdGVSZXNwb25zZTogc3RyaW5nO1xuICByZXF1ZXN0VHlwZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fTtcbiAgICB0aGlzLnN0YXRlTWF0Y2ggPSBmYWxzZTtcbiAgICB0aGlzLnN0YXRlUmVzcG9uc2UgPSBcIlwiO1xuICAgIHRoaXMucmVxdWVzdFR5cGUgPSBcInVua25vd25cIjtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IENsaWVudEluZm8gfSBmcm9tIFwiLi9DbGllbnRJbmZvXCI7XG5pbXBvcnQgeyBJZFRva2VuIH0gZnJvbSBcIi4vSWRUb2tlblwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgVXNlciB7XG5cbiAgICBkaXNwbGF5YWJsZUlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGlkZW50aXR5UHJvdmlkZXI6IHN0cmluZztcbiAgICB1c2VySWRlbnRpZmllcjogc3RyaW5nO1xuICAgIGlkVG9rZW46IE9iamVjdDtcbiAgICBzaWQ6IHN0cmluZztcblxuICAgIC8qXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpc3BsYXlhYmxlSWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBpZGVudGl0eVByb3ZpZGVyOiBzdHJpbmcsIHVzZXJJZGVudGlmaWVyOiBzdHJpbmcsIGlkVG9rZW46IE9iamVjdCwgc2lkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5YWJsZUlkID0gZGlzcGxheWFibGVJZDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pZGVudGl0eVByb3ZpZGVyID0gaWRlbnRpdHlQcm92aWRlcjtcbiAgICAgICAgdGhpcy51c2VySWRlbnRpZmllciA9IHVzZXJJZGVudGlmaWVyO1xuICAgICAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuO1xuICAgICAgICB0aGlzLnNpZCA9IHNpZDtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlVXNlcihpZFRva2VuOiBJZFRva2VuLCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKTogVXNlciB7XG4gICAgICAgIGxldCB1aWQ6IHN0cmluZztcbiAgICAgICAgbGV0IHV0aWQ6IHN0cmluZztcbiAgICAgICAgaWYgKCFjbGllbnRJbmZvKSB7XG4gICAgICAgICAgICB1aWQgPSBcIlwiO1xuICAgICAgICAgICAgdXRpZCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1aWQgPSBjbGllbnRJbmZvLnVpZDtcbiAgICAgICAgICAgIHV0aWQgPSBjbGllbnRJbmZvLnV0aWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VySWRlbnRpZmllciA9IFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUodWlkKSArIFwiLlwiICsgVXRpbHMuYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZSh1dGlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyKGlkVG9rZW4ucHJlZmVycmVkTmFtZSwgaWRUb2tlbi5uYW1lLCBpZFRva2VuLmlzc3VlciwgdXNlcklkZW50aWZpZXIsIGlkVG9rZW4uZGVjb2RlZElkVG9rZW4sIGlkVG9rZW4uc2lkKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQXV0aG9yaXR5LCBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBYaHJDbGllbnQgfSBmcm9tIFwiLi9YSFJDbGllbnRcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBYWRBdXRob3JpdHkgZXh0ZW5kcyBBdXRob3JpdHkge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50OiBzdHJpbmcgPSBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb24vZGlzY292ZXJ5L2luc3RhbmNlXCI7XG5cbiAgcHJpdmF0ZSBnZXQgQWFkSW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludFVybCgpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIGAke0FhZEF1dGhvcml0eS5BYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50fT9hcGktdmVyc2lvbj0xLjAmYXV0aG9yaXphdGlvbl9lbmRwb2ludD0ke3RoaXMuQ2Fub25pY2FsQXV0aG9yaXR5fW9hdXRoMi92Mi4wL2F1dGhvcml6ZWA7XG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBzdHJpbmcsIHZhbGlkYXRlQXV0aG9yaXR5OiBib29sZWFuKSB7XG4gICAgc3VwZXIoYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IEF1dGhvcml0eVR5cGUoKTogQXV0aG9yaXR5VHlwZSB7XG4gICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWFkO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVHJ1c3RlZEhvc3RMaXN0OiBhbnkgPSB7XG4gICAgXCJsb2dpbi53aW5kb3dzLm5ldFwiOiBcImxvZ2luLndpbmRvd3MubmV0XCIsXG4gICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCI6IFwibG9naW4uY2hpbmFjbG91ZGFwaS5jblwiLFxuICAgIFwibG9naW4uY2xvdWRnb3ZhcGkudXNcIjogXCJsb2dpbi5jbG91ZGdvdmFwaS51c1wiLFxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIixcbiAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCI6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCJcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIE9JREMgZW5kcG9pbnRcbiAgICogT25seSByZXNwb25kcyB3aXRoIHRoZSBlbmRwb2ludFxuICAgKi9cbiAgcHVibGljIEdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICB2YXIgcmVzdWx0UHJvbWlzZTogUHJvbWlzZTxzdHJpbmc+ID0gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgcmVzb2x2ZSh0aGlzLkRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQpKTtcblxuICAgIGlmICghdGhpcy5Jc1ZhbGlkYXRpb25FbmFibGVkKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgaG9zdDogc3RyaW5nID0gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydDtcbiAgICBpZiAodGhpcy5Jc0luVHJ1c3RlZEhvc3RMaXN0KGhvc3QpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgY2xpZW50OiBYaHJDbGllbnQgPSBuZXcgWGhyQ2xpZW50KCk7XG5cbiAgICByZXR1cm4gY2xpZW50LnNlbmRSZXF1ZXN0QXN5bmModGhpcy5BYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50VXJsLCBcIkdFVFwiLCB0cnVlKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS50ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50O1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgaG9zdCBpcyBpbiBhIGxpc3Qgb2YgdHJ1c3RlZCBob3N0c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gVGhlIGhvc3QgdG8gbG9vayB1cFxuICAgKi9cbiAgcHVibGljIElzSW5UcnVzdGVkSG9zdExpc3QoaG9zdDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEFhZEF1dGhvcml0eS5UcnVzdGVkSG9zdExpc3RbaG9zdC50b0xvd2VyQ2FzZSgpXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qXG4gKiBYSFIgY2xpZW50IGZvciBKU09OIGVuZHBvaW50c1xuICogaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYXN5bmMtcHJvbWlzZVxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgWGhyQ2xpZW50IHtcbiAgcHVibGljIHNlbmRSZXF1ZXN0QXN5bmModXJsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nLCBlbmFibGVDYWNoaW5nPzogYm9vbGVhbik6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIC8qYXN5bmM6ICovIHRydWUpO1xuICAgICAgaWYgKGVuYWJsZUNhY2hpbmcpIHtcbiAgICAgICAgLy8gVE9ETzogKHNoaXZiKSBlbnN1cmUgdGhhdCB0aGlzIGNhbiBiZSBjYWNoZWRcbiAgICAgICAgLy8geGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwiUHVibGljXCIpO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gKGV2KSA9PiB7XG4gICAgICAgICAgaWYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgcmVqZWN0KHRoaXMuaGFuZGxlRXJyb3IoeGhyLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhciBqc29uUmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KHRoaXMuaGFuZGxlRXJyb3IoeGhyLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc29sdmUoanNvblJlc3BvbnNlKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gKGV2KSA9PiB7XG4gICAgICAgIHJlamVjdCh4aHIuc3RhdHVzKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBcIm5vdCBpbXBsZW1lbnRlZFwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZUVycm9yKHJlc3BvbnNlVGV4dDogc3RyaW5nKTogYW55IHtcbiAgICB2YXIganNvblJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICBqc29uUmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCk7XG4gICAgICBpZiAoanNvblJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZS5lcnJvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgcmVzcG9uc2VUZXh0O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiByZXNwb25zZVRleHQ7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgeyBVc2VyQWdlbnRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL1VzZXJBZ2VudEFwcGxpY2F0aW9uXCI7XG5leHBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi9Mb2dnZXJcIjtcbmV4cG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vTG9nZ2VyXCI7XG5leHBvcnQgeyBVc2VyIH0gZnJvbSBcIi4vVXNlclwiO1xuZXhwb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5leHBvcnQgeyBUb2tlblJlc3BvbnNlfSBmcm9tIFwiLi9SZXF1ZXN0SW5mb1wiO1xuZXhwb3J0IHtBdXRob3JpdHl9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xuZXhwb3J0IHtDYWNoZVJlc3VsdH0gZnJvbSBcIi4vVXNlckFnZW50QXBwbGljYXRpb25cIjtcblxuIiwiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc1Rva2VuS2V5IHtcblxuICBhdXRob3JpdHk6IHN0cmluZztcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgdXNlcklkZW50aWZpZXI6IHN0cmluZztcbiAgc2NvcGVzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBzdHJpbmcsIGNsaWVudElkOiBzdHJpbmcsIHNjb3Blczogc3RyaW5nLCB1aWQ6IHN0cmluZywgdXRpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5hdXRob3JpdHkgPSBhdXRob3JpdHk7XG4gICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgIHRoaXMuc2NvcGVzID0gc2NvcGVzO1xuICAgIHRoaXMudXNlcklkZW50aWZpZXIgPSBVdGlscy5iYXNlNjRFbmNvZGVTdHJpbmdVcmxTYWZlKHVpZCkgKyBcIi5cIiArIFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUodXRpZCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVG9rZW5WYWx1ZSB7XG5cbiAgYWNjZXNzVG9rZW46IHN0cmluZztcbiAgaWRUb2tlbjogc3RyaW5nO1xuICBleHBpcmVzSW46IHN0cmluZztcbiAgY2xpZW50SW5mbzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFjY2Vzc1Rva2VuOiBzdHJpbmcsIGlkVG9rZW46IHN0cmluZywgZXhwaXJlc0luOiBzdHJpbmcsIGNsaWVudEluZm86IHN0cmluZykge1xuICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuO1xuICAgIHRoaXMuZXhwaXJlc0luID0gZXhwaXJlc0luO1xuICAgIHRoaXMuY2xpZW50SW5mbyA9IGNsaWVudEluZm87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi9BdXRob3JpdHlcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyB7XG4gIGF1dGhvcml0eUluc3RhbmNlOiBBdXRob3JpdHk7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIG5vbmNlOiBzdHJpbmc7XG4gIHN0YXRlOiBzdHJpbmc7XG4gIGNvcnJlbGF0aW9uSWQ6IHN0cmluZztcbiAgeENsaWVudFZlcjogc3RyaW5nO1xuICB4Q2xpZW50U2t1OiBzdHJpbmc7XG4gIHNjb3BlczogQXJyYXk8c3RyaW5nPjtcbiAgcmVzcG9uc2VUeXBlOiBzdHJpbmc7XG4gIHByb21wdFZhbHVlOiBzdHJpbmc7XG4gIGV4dHJhUXVlcnlQYXJhbWV0ZXJzOiBzdHJpbmc7XG4gIGxvZ2luSGludDogc3RyaW5nO1xuICBkb21haW5IaW50OiBzdHJpbmc7XG4gIHJlZGlyZWN0VXJpOiBzdHJpbmc7XG4gICAgcHVibGljIGdldCBhdXRob3JpdHkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgPyB0aGlzLmF1dGhvcml0eUluc3RhbmNlLkNhbm9uaWNhbEF1dGhvcml0eSA6IG51bGw7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihhdXRob3JpdHk6IEF1dGhvcml0eSwgY2xpZW50SWQ6IHN0cmluZywgc2NvcGU6IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZTogc3RyaW5nLCByZWRpcmVjdFVyaTogc3RyaW5nLCBzdGF0ZTogc3RyaW5nICkge1xuICAgIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgPSBhdXRob3JpdHk7XG4gICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgIHRoaXMuc2NvcGVzID0gc2NvcGU7XG4gICAgdGhpcy5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgdGhpcy5yZWRpcmVjdFVyaSA9IHJlZGlyZWN0VXJpO1xuICAgIC8vIHJhbmRvbWx5IGdlbmVyYXRlZCB2YWx1ZXNcbiAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBVdGlscy5jcmVhdGVOZXdHdWlkKCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlICYmICFVdGlscy5pc0VtcHR5KHN0YXRlKSA/ICBVdGlscy5jcmVhdGVOZXdHdWlkKCkgKyBcInxcIiArIHN0YXRlICAgOiBVdGlscy5jcmVhdGVOZXdHdWlkKCk7XG4gICAgdGhpcy5ub25jZSA9IFV0aWxzLmNyZWF0ZU5ld0d1aWQoKTtcbiAgICAvLyB0ZWxlbWV0cnkgaW5mb3JtYXRpb25cbiAgICB0aGlzLnhDbGllbnRTa3UgPSBcIk1TQUwuSlNcIjtcbiAgICB0aGlzLnhDbGllbnRWZXIgPSBVdGlscy5nZXRMaWJyYXJ5VmVyc2lvbigpO1xuICB9XG5cbiAgICBjcmVhdGVOYXZpZ2F0ZVVybChzY29wZXM6IEFycmF5PHN0cmluZz4pOiBzdHJpbmcge1xuICAgICAgICB2YXIgc3RyID0gdGhpcy5jcmVhdGVOYXZpZ2F0aW9uVXJsU3RyaW5nKHNjb3Blcyk7XG4gICAgICAgIGxldCBhdXRoRW5kcG9pbnQ6IHN0cmluZyA9IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UuQXV0aG9yaXphdGlvbkVuZHBvaW50O1xuICAgICAgICAvLyBpZiB0aGUgZW5kcG9pbnQgYWxyZWFkeSBoYXMgcXVlcnlwYXJhbXMsIGxldHMgYWRkIHRvIGl0LCBvdGhlcndpc2UgYWRkIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgaWYgKGF1dGhFbmRwb2ludC5pbmRleE9mKFwiP1wiKSA8IDApIHtcbiAgICAgICAgICAgIGF1dGhFbmRwb2ludCArPSBcIj9cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1dGhFbmRwb2ludCArPSBcIiZcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVxdWVzdFVybDogc3RyaW5nID0gYCR7YXV0aEVuZHBvaW50fSR7c3RyLmpvaW4oXCImXCIpfWA7XG4gICAgICAgIHJldHVybiByZXF1ZXN0VXJsO1xuICAgIH1cblxuICAgIGNyZWF0ZU5hdmlnYXRpb25VcmxTdHJpbmcoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIGlmICghc2NvcGVzKSB7XG4gICAgICAgICAgICBzY29wZXMgPSBbdGhpcy5jbGllbnRJZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5jbGllbnRJZCkgPT09IC0xKSB7XG4gICAgICAgICAgICBzY29wZXMucHVzaCh0aGlzLmNsaWVudElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0cjogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgICAgICBzdHIucHVzaChcInJlc3BvbnNlX3R5cGU9XCIgKyB0aGlzLnJlc3BvbnNlVHlwZSk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlY2xpZW50SWRVc2VkSW5TY29wZShzY29wZXMpO1xuICAgICAgICBzdHIucHVzaChcInNjb3BlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucGFyc2VTY29wZShzY29wZXMpKSk7XG4gICAgICAgIHN0ci5wdXNoKFwiY2xpZW50X2lkPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgc3RyLnB1c2goXCJyZWRpcmVjdF91cmk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5yZWRpcmVjdFVyaSkpO1xuICAgICAgICBzdHIucHVzaChcInN0YXRlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuc3RhdGUpKTtcbiAgICAgICAgc3RyLnB1c2goXCJub25jZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLm5vbmNlKSk7XG4gICAgICAgIHN0ci5wdXNoKFwiY2xpZW50X2luZm89MVwiKTtcbiAgICAgICAgc3RyLnB1c2goYHgtY2xpZW50LVNLVT0ke3RoaXMueENsaWVudFNrdX1gKTtcbiAgICAgICAgc3RyLnB1c2goYHgtY2xpZW50LVZlcj0ke3RoaXMueENsaWVudFZlcn1gKTtcblxuICAgICAgICBpZiAodGhpcy5leHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgc3RyLnB1c2godGhpcy5leHRyYVF1ZXJ5UGFyYW1ldGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdHIucHVzaChcImNsaWVudC1yZXF1ZXN0LWlkPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY29ycmVsYXRpb25JZCkpO1xuXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gIHRyYW5zbGF0ZWNsaWVudElkVXNlZEluU2NvcGUoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XG4gICAgY29uc3QgY2xpZW50SWRJbmRleDogbnVtYmVyID0gc2NvcGVzLmluZGV4T2YodGhpcy5jbGllbnRJZCk7XG4gICAgaWYgKGNsaWVudElkSW5kZXggPj0gMCkge1xuICAgICAgc2NvcGVzLnNwbGljZShjbGllbnRJZEluZGV4LCAxKTtcbiAgICAgIGlmIChzY29wZXMuaW5kZXhPZihcIm9wZW5pZFwiKSA9PT0gLTEpIHtcbiAgICAgICAgc2NvcGVzLnB1c2goXCJvcGVuaWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoc2NvcGVzLmluZGV4T2YoXCJwcm9maWxlXCIpID09PSAtMSkge1xuICAgICAgICBzY29wZXMucHVzaChcInByb2ZpbGVcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGFyc2VTY29wZShzY29wZXM6IEFycmF5PHN0cmluZz4pOiBzdHJpbmcge1xuICAgIGxldCBzY29wZUxpc3Q6IHN0cmluZyA9IFwiXCI7XG4gICAgaWYgKHNjb3Blcykge1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc2NvcGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHNjb3BlTGlzdCArPSAoaSAhPT0gc2NvcGVzLmxlbmd0aCAtIDEpID8gc2NvcGVzW2ldICsgXCIgXCIgOiBzY29wZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjb3BlTGlzdDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudEluZm8ge1xuXG4gIHByaXZhdGUgX3VpZDogc3RyaW5nO1xuICBnZXQgdWlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3VpZCA/IHRoaXMuX3VpZCA6IFwiXCI7XG4gIH1cblxuICBzZXQgdWlkKHVpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5fdWlkID0gdWlkO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXRpZDogc3RyaW5nO1xuICBnZXQgdXRpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl91dGlkID8gdGhpcy5fdXRpZCA6IFwiXCI7XG4gIH1cblxuICBzZXQgdXRpZCh1dGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLl91dGlkID0gdXRpZDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHJhd0NsaWVudEluZm86IHN0cmluZykge1xuICAgIGlmICghcmF3Q2xpZW50SW5mbyB8fCBVdGlscy5pc0VtcHR5KHJhd0NsaWVudEluZm8pKSB7XG4gICAgICB0aGlzLnVpZCA9IFwiXCI7XG4gICAgICB0aGlzLnV0aWQgPSBcIlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZWNvZGVkQ2xpZW50SW5mbzogc3RyaW5nID0gVXRpbHMuYmFzZTY0RGVjb2RlU3RyaW5nVXJsU2FmZShyYXdDbGllbnRJbmZvKTtcbiAgICAgIGNvbnN0IGNsaWVudEluZm86IENsaWVudEluZm8gPSA8Q2xpZW50SW5mbz5KU09OLnBhcnNlKGRlY29kZWRDbGllbnRJbmZvKTtcbiAgICAgIGlmIChjbGllbnRJbmZvKSB7XG4gICAgICAgIGlmIChjbGllbnRJbmZvLmhhc093blByb3BlcnR5KFwidWlkXCIpKSB7XG4gICAgICAgICAgdGhpcy51aWQgPSBjbGllbnRJbmZvLnVpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjbGllbnRJbmZvLmhhc093blByb3BlcnR5KFwidXRpZFwiKSkge1xuICAgICAgICAgIHRoaXMudXRpZCA9IGNsaWVudEluZm8udXRpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qXG4gICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAgKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICAqICBNSVQgTGljZW5zZVxuICAqXG4gICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAgKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICAqIGNvbmRpdGlvbnM6XG4gICpcbiAgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICAqXG4gICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAgKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICAqL1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBJZFRva2VuIHtcblxuICBpc3N1ZXI6IHN0cmluZztcbiAgb2JqZWN0SWQ6IHN0cmluZztcbiAgc3ViamVjdDogc3RyaW5nO1xuICB0ZW5hbnRJZDogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIHByZWZlcnJlZE5hbWU6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBob21lT2JqZWN0SWQ6IHN0cmluZztcbiAgbm9uY2U6IHN0cmluZztcbiAgZXhwaXJhdGlvbjogc3RyaW5nO1xuICByYXdJZFRva2VuOiBzdHJpbmc7XG4gIGRlY29kZWRJZFRva2VuOiBPYmplY3Q7XG4gIHNpZDogc3RyaW5nO1xuICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1zdHJpbmctbGl0ZXJhbCAqL1xuICBjb25zdHJ1Y3RvcihyYXdJZFRva2VuOiBzdHJpbmcpIHtcbiAgICBpZiAoVXRpbHMuaXNFbXB0eShyYXdJZFRva2VuKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibnVsbCBvciBlbXB0eSByYXcgaWR0b2tlblwiKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmF3SWRUb2tlbiA9IHJhd0lkVG9rZW47XG4gICAgICB0aGlzLmRlY29kZWRJZFRva2VuID0gVXRpbHMuZXh0cmFjdElkVG9rZW4ocmF3SWRUb2tlbik7XG4gICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbikge1xuICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcImlzc1wiKSkge1xuICAgICAgICAgIHRoaXMuaXNzdWVyID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcImlzc1wiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwib2lkXCIpKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdElkID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcIm9pZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwic3ViXCIpKSB7XG4gICAgICAgICAgdGhpcy5zdWJqZWN0ID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInN1YlwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwidGlkXCIpKSB7XG4gICAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ0aWRcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInZlclwiKSkge1xuICAgICAgICAgIHRoaXMudmVyc2lvbiA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ2ZXJcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInByZWZlcnJlZF91c2VybmFtZVwiKSkge1xuICAgICAgICAgIHRoaXMucHJlZmVycmVkTmFtZSA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJwcmVmZXJyZWRfdXNlcm5hbWVcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcbiAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wibmFtZVwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwibm9uY2VcIikpIHtcbiAgICAgICAgICB0aGlzLm5vbmNlID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcIm5vbmNlXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJleHBcIikpIHtcbiAgICAgICAgICB0aGlzLmV4cGlyYXRpb24gPSB0aGlzLmRlY29kZWRJZFRva2VuW1wiZXhwXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJob21lX29pZFwiKSkge1xuICAgICAgICAgICAgdGhpcy5ob21lT2JqZWN0SWQgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wiaG9tZV9vaWRcIl07XG4gICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwic2lkXCIpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2lkID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInNpZFwiXTtcbiAgICAgICAgICB9XG4gICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXN0cmluZy1saXRlcmFsICovXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHRoZSByZXR1cm5lZCBpZCB0b2tlblwiKTtcbiAgICB9XG4gIH1cblxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xuaW1wb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbkNhY2hlSXRlbVwiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU3RvcmFnZSB7Ly8gU2luZ2xldG9uXG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBTdG9yYWdlO1xuICBwcml2YXRlIF9sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX3Nlc3Npb25TdG9yYWdlU3VwcG9ydGVkOiBib29sZWFuO1xuICBwcml2YXRlIF9jYWNoZUxvY2F0aW9uOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY2FjaGVMb2NhdGlvbjogc3RyaW5nKSB7XG4gICAgaWYgKFN0b3JhZ2UuX2luc3RhbmNlKSB7XG4gICAgICByZXR1cm4gU3RvcmFnZS5faW5zdGFuY2U7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVMb2NhdGlvbiA9IGNhY2hlTG9jYXRpb247XG4gICAgdGhpcy5fbG9jYWxTdG9yYWdlU3VwcG9ydGVkID0gdHlwZW9mIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0gIT0gbnVsbDtcbiAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IHR5cGVvZiB3aW5kb3dbY2FjaGVMb2NhdGlvbl0gIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93W2NhY2hlTG9jYXRpb25dICE9IG51bGw7XG4gICAgU3RvcmFnZS5faW5zdGFuY2UgPSB0aGlzO1xuICAgIGlmICghdGhpcy5fbG9jYWxTdG9yYWdlU3VwcG9ydGVkICYmICF0aGlzLl9zZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibG9jYWxTdG9yYWdlIGFuZCBzZXNzaW9uU3RvcmFnZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBTdG9yYWdlLl9pbnN0YW5jZTtcbiAgfVxuXG4gICAgLy8gYWRkIHZhbHVlIHRvIHN0b3JhZ2VcbiAgICBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBlbmFibGVDb29raWVTdG9yYWdlPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAod2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dKSB7XG4gICAgICAgICAgICB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0uc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5hYmxlQ29va2llU3RvcmFnZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2V0IG9uZSBpdGVtIGJ5IGtleSBmcm9tIHN0b3JhZ2VcbiAgICBnZXRJdGVtKGtleTogc3RyaW5nLCBlbmFibGVDb29raWVTdG9yYWdlPzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGlmIChlbmFibGVDb29raWVTdG9yYWdlICYmIHRoaXMuZ2V0SXRlbUNvb2tpZShrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJdGVtQ29va2llKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5nZXRJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHZhbHVlIGZyb20gc3RvcmFnZVxuICAgIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhciBzdG9yYWdlIChyZW1vdmUgYWxsIGl0ZW1zIGZyb20gaXQpXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIGlmICh3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0pIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFsbEFjY2Vzc1Rva2VucyhjbGllbnRJZDogc3RyaW5nLCB1c2VySWRlbnRpZmllcjogc3RyaW5nKTogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+ID0gW107XG4gICAgICAgIGxldCBhY2Nlc3NUb2tlbkNhY2hlSXRlbTogQWNjZXNzVG9rZW5DYWNoZUl0ZW07XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl07XG4gICAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICAgICBsZXQga2V5OiBzdHJpbmc7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBzdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKGNsaWVudElkKSAmJiBrZXkubWF0Y2godXNlcklkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gbmV3IEFjY2Vzc1Rva2VuQ2FjaGVJdGVtKEpTT04ucGFyc2Uoa2V5KSwgSlNPTi5wYXJzZSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChhY2Nlc3NUb2tlbkNhY2hlSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICByZW1vdmVBY3F1aXJlVG9rZW5FbnRyaWVzKGF1dGhvcml0eUtleTogc3RyaW5nLCBhY3F1aXJlVG9rZW5Vc2VyS2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXTtcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGxldCBrZXk6IHN0cmluZztcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoYXV0aG9yaXR5S2V5ICE9PSBcIlwiICYmIGtleS5pbmRleE9mKGF1dGhvcml0eUtleSkgPiAtMSkgfHwgKGFjcXVpcmVUb2tlblVzZXJLZXkgIT09IFwiXCIgJiYga2V5LmluZGV4T2YoYWNxdWlyZVRva2VuVXNlcktleSkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRDYWNoZUl0ZW1zKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dO1xuICAgICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgICAgbGV0IGtleTogc3RyaW5nO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKENvbnN0YW50cy5tc2FsKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXRlbShrZXksIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihDb25zdGFudHMucmVuZXdTdGF0dXMpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJdGVtQ29va2llKGNOYW1lOiBzdHJpbmcsIGNWYWx1ZTogc3RyaW5nLCBleHBpcmVzPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHZhciBjb29raWVTdHIgPSBjTmFtZSArIFwiPVwiICsgY1ZhbHVlICsgXCI7XCI7XG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICB2YXIgZXhwaXJlVGltZSA9IHRoaXMuc2V0RXhwaXJhdGlvbkNvb2tpZShleHBpcmVzKTtcbiAgICAgICAgICAgIGNvb2tpZVN0ciArPSBcImV4cGlyZXM9XCIgKyBleHBpcmVUaW1lICsgXCI7XCI7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVTdHI7XG4gICAgfVxuXG4gICAgZ2V0SXRlbUNvb2tpZShjTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjTmFtZSArIFwiPVwiO1xuICAgICAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09PSBcIiBcIikge1xuICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBzZXRFeHBpcmF0aW9uQ29va2llKGNvb2tpZUxpZmU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBleHByID0gbmV3IERhdGUodG9kYXkuZ2V0VGltZSgpICsgY29va2llTGlmZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICByZXR1cm4gZXhwci50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIGNsZWFyQ29va2llKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgXCJcIiwgLTEpO1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLnN0YXRlTG9naW4sIFwiXCIsIC0xKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIFwiXCIsIC0xKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbiwgXCJcIiwgLTEpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBBY2Nlc3NUb2tlbktleSB9IGZyb20gXCIuL0FjY2Vzc1Rva2VuS2V5XCI7XG5pbXBvcnQgeyBBY2Nlc3NUb2tlblZhbHVlIH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5WYWx1ZVwiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVG9rZW5DYWNoZUl0ZW0ge1xuXG4gIGtleTogQWNjZXNzVG9rZW5LZXk7XG4gIHZhbHVlOiBBY2Nlc3NUb2tlblZhbHVlO1xuXG4gIGNvbnN0cnVjdG9yKGtleTogQWNjZXNzVG9rZW5LZXksIHZhbHVlOiBBY2Nlc3NUb2tlblZhbHVlKSB7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IHsgQWFkQXV0aG9yaXR5IH0gZnJvbSBcIi4vQWFkQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBCMmNBdXRob3JpdHkgfSBmcm9tIFwiLi9CMmNBdXRob3JpdHlcIjtcbmltcG9ydCB7IEF1dGhvcml0eSwgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vRXJyb3JNZXNzYWdlXCI7XG5cbmV4cG9ydCBjbGFzcyBBdXRob3JpdHlGYWN0b3J5IHtcbiAgICAvKlxuICAgICogUGFyc2UgdGhlIHVybCBhbmQgZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGF1dGhvcml0eVxuICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgRGV0ZWN0QXV0aG9yaXR5RnJvbVVybChhdXRob3JpdHlVcmw6IHN0cmluZyk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICBhdXRob3JpdHlVcmwgPSBVdGlscy5DYW5vbmljYWxpemVVcmkoYXV0aG9yaXR5VXJsKTtcbiAgICAgICAgbGV0IGNvbXBvbmVudHMgPSBVdGlscy5HZXRVcmxDb21wb25lbnRzKGF1dGhvcml0eVVybCk7XG4gICAgICAgIGxldCBwYXRoU2VnbWVudHMgPSBjb21wb25lbnRzLlBhdGhTZWdtZW50cztcbiAgICAgICAgc3dpdGNoIChwYXRoU2VnbWVudHNbMF0pIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZnBcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5CMkM7XG4gICAgICAgICAgICBjYXNlIFwiYWRmc1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkFkZnM7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkFhZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgKiBDcmVhdGUgYW4gYXV0aG9yaXR5IG9iamVjdCBvZiB0aGUgY29ycmVjdCB0eXBlIGJhc2VkIG9uIHRoZSB1cmxcbiAgICAqIFBlcmZvcm1zIGJhc2ljIGF1dGhvcml0eSB2YWxpZGF0aW9uIC0gY2hlY2tzIHRvIHNlZSBpZiB0aGUgYXV0aG9yaXR5IGlzIG9mIGEgdmFsaWQgdHlwZSAoZWcgYWFkLCBiMmMpXG4gICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIENyZWF0ZUluc3RhbmNlKGF1dGhvcml0eVVybDogc3RyaW5nLCB2YWxpZGF0ZUF1dGhvcml0eTogYm9vbGVhbik6IEF1dGhvcml0eSB7XG4gICAgICAgIGlmIChVdGlscy5pc0VtcHR5KGF1dGhvcml0eVVybCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0eXBlID0gQXV0aG9yaXR5RmFjdG9yeS5EZXRlY3RBdXRob3JpdHlGcm9tVXJsKGF1dGhvcml0eVVybCk7XG4gICAgICAgIC8vIERlcGVuZGluZyBvbiBhYm92ZSBkZXRlY3Rpb24sIGNyZWF0ZSB0aGUgcmlnaHQgdHlwZS5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEF1dGhvcml0eVR5cGUuQjJDOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQjJjQXV0aG9yaXR5KGF1dGhvcml0eVVybCwgdmFsaWRhdGVBdXRob3JpdHkpO1xuICAgICAgICAgICAgY2FzZSBBdXRob3JpdHlUeXBlLkFhZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFhZEF1dGhvcml0eShhdXRob3JpdHlVcmwsIHZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3JNZXNzYWdlLmludmFsaWRBdXRob3JpdHlUeXBlO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQWFkQXV0aG9yaXR5IH0gZnJvbSBcIi4vQWFkQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBBdXRob3JpdHksIEF1dGhvcml0eVR5cGUgfSBmcm9tIFwiLi9BdXRob3JpdHlcIjtcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gXCIuL0Vycm9yTWVzc2FnZVwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQjJjQXV0aG9yaXR5IGV4dGVuZHMgQWFkQXV0aG9yaXR5IHtcbiAgcHVibGljIGNvbnN0cnVjdG9yKGF1dGhvcml0eTogc3RyaW5nLCB2YWxpZGF0ZUF1dGhvcml0eTogYm9vbGVhbikge1xuICAgIHN1cGVyKGF1dGhvcml0eSwgdmFsaWRhdGVBdXRob3JpdHkpO1xuICAgIGxldCB1cmxDb21wb25lbnRzID0gVXRpbHMuR2V0VXJsQ29tcG9uZW50cyhhdXRob3JpdHkpO1xuXG4gICAgbGV0IHBhdGhTZWdtZW50cyA9IHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xuICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoIDwgMykge1xuICAgICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGg7XG4gICAgfVxuXG4gICAgdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgPSBgaHR0cHM6Ly8ke3VybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0fS8ke3BhdGhTZWdtZW50c1swXX0vJHtwYXRoU2VnbWVudHNbMV19LyR7cGF0aFNlZ21lbnRzWzJdfS9gO1xuICB9XG5cbiAgcHVibGljIGdldCBBdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGUge1xuICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkIyQztcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIFRlbmFudERpc2NvdmVyeUVuZHBvaW50XG4gICAqL1xuICBwdWJsaWMgR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgIHJlc29sdmUodGhpcy5EZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KSk7XG5cbiAgICBpZiAoIXRoaXMuSXNWYWxpZGF0aW9uRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuSXNJblRydXN0ZWRIb3N0TGlzdCh0aGlzLkNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgIHJlamVjdChFcnJvck1lc3NhZ2UudW5zdXBwb3J0ZWRBdXRob3JpdHlWYWxpZGF0aW9uKSk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=