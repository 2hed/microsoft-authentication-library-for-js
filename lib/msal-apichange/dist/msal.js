/*! msal v0.2.4 2019-02-04 */

'use strict';
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Msal",[],t):"object"==typeof exports?exports.Msal=t():e.Msal=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=function(){function e(){}return e.compareObjects=function(e,t){return!(!e||!t)&&!(!e.homeAccountIdentifier||!t.homeAccountIdentifier||e.homeAccountIdentifier!==t.homeAccountIdentifier)},e.expiresIn=function(e){return e||(e="3599"),this.now()+parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,o=this.base64DecodeStringUrlSafe(n);return o?JSON.parse(o):null}catch(e){}return null},e.base64EncodeStringUrlSafe=function(e){return window.btoa?window.btoa(e):this.encode(e)},e.base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(encodeURIComponent(window.atob(e))):decodeURIComponent(encodeURIComponent(this.decode(e)))},e.encode=function(e){var t,n,o,r,i,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=this.utf8Encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(o=e.charCodeAt(l++))>>6,a=63&o,isNaN(n)?s=a=64:isNaN(o)&&(a=64),u=u+c.charAt(r)+c.charAt(i)+c.charAt(s)+c.charAt(a);return u.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},e.decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var o,r,i,s,a,c,u,l,p="",h=0;h<n;h+=4){if(o=t.indexOf(e.charAt(h)),r=t.indexOf(e.charAt(h+1)),i=t.indexOf(e.charAt(h+2)),s=t.indexOf(e.charAt(h+3)),h+2===n-1){c=(a=o<<18|r<<12|i<<6)>>16&255,u=a>>8&255,p+=String.fromCharCode(c,u);break}if(h+1===n-1){c=(a=o<<18|r<<12)>>16&255,p+=String.fromCharCode(c);break}c=(a=o<<18|r<<12|i<<6|s)>>16&255,u=a>>8&255,l=255&a,p+=String.fromCharCode(c,u,l)}return p},e.decodeJwt=function(e){if(this.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.deserialize=function(e){var t,n=/\+/g,o=/([^&=]+)=([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},i={};for(t=o.exec(e);t;)i[r(t[1])]=r(t[2]),t=o.exec(e);return i},e.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every(function(t){return e.indexOf(t.toString().toLowerCase())>=0})},e.convertToLowerCase=function(e){return e.map(function(e){return e.toLowerCase()})},e.removeElement=function(e,t){return e.filter(function(e){return e!==t})},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.getLibraryVersion=function(){return"0.2.4"},e.replaceFirstPath=function(e,t){if(!t)return e;var n=this.GetUrlComponents(e),r=n.PathSegments;return 0===r.length||r[0]!==o.Constants.common&&r[0]!==o.Constants.organizations||(r[0]=t,e=n.Protocol+"//"+n.HostNameAndPort+"/"+r.join("/")),e},e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);return t.getRandomValues(n),n[6]|=64,n[6]&=79,n[8]|=128,n[8]&=191,e.decimalToHex(n[0])+e.decimalToHex(n[1])+e.decimalToHex(n[2])+e.decimalToHex(n[3])+"-"+e.decimalToHex(n[4])+e.decimalToHex(n[5])+"-"+e.decimalToHex(n[6])+e.decimalToHex(n[7])+"-"+e.decimalToHex(n[8])+e.decimalToHex(n[9])+"-"+e.decimalToHex(n[10])+e.decimalToHex(n[11])+e.decimalToHex(n[12])+e.decimalToHex(n[13])+e.decimalToHex(n[14])+e.decimalToHex(n[15])}for(var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",i=0,s="",a=0;a<36;a++)"-"!==o[a]&&"4"!==o[a]&&(i=16*Math.random()|0),"x"===o[a]?s+=r[i]:"y"===o[a]?(i&=3,s+=r[i|=8]):s+=o[a];return s},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var o={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5]},r=o.AbsolutePath.split("/");return r=r.filter(function(e){return e&&e.length>0}),o.PathSegments=r,o},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.checkSSO=function(e){return!(e&&(-1!==e.indexOf(o.Constants.login_hint)||-1!==e.indexOf(o.Constants.sid)))},e.constructUnifiedCacheExtraQueryParameter=function(e,t,n){return t?n+"&"+o.Constants.login_hint+"="+t+"&"+o.Constants.domain_hint+"="+o.Constants.organizations:e?e.hasOwnProperty(o.Constants.upn)?(n=this.urlRemoveQueryStringParameter(n,o.Constants.login_hint),(n=this.urlRemoveQueryStringParameter(n,o.Constants.domain_hint))?n+"&"+o.Constants.login_hint+"="+e.upn+"&"+o.Constants.domain_hint+"="+o.Constants.organizations:"&"+o.Constants.login_hint+"="+e.upn+"&"+o.Constants.domain_hint+"="+o.Constants.organizations):(n=this.urlRemoveQueryStringParameter(n,o.Constants.domain_hint))?n+"&"+o.Constants.domain_hint+"="+o.Constants.organizations:"&"+o.Constants.domain_hint+"="+o.Constants.organizations:n},e.urlRemoveQueryStringParameter=function(e,t){if(this.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},e.constructExtraQueryParametersString=function(e){var t,n=null;for(var o in e)void 0!==o&&(t=e[o],null==n?n="&"+o+"="+t:n+="&"+o+"="+t);return n},e}();t.Utils=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"errorDescription",{get:function(){return"error_description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"error",{get:function(){return"error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scope",{get:function(){return"scope"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenUser",{get:function(){return"msal.acquireTokenUser"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientInfo",{get:function(){return"client_info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authority",{get:function(){return"msal.authority"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idToken",{get:function(){return"id_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessToken",{get:function(){return"access_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expiresIn",{get:function(){return"expires_in"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sessionState",{get:function(){return"session_state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalClientInfo",{get:function(){return"msal.client.info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalError",{get:function(){return"msal.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalErrorDescription",{get:function(){return"msal.error.description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalSessionState",{get:function(){return"msal.session.state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenKeys",{get:function(){return"msal.token.keys"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessTokenKey",{get:function(){return"msal.access.token.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expirationKey",{get:function(){return"msal.expiration.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateLogin",{get:function(){return"msal.state.login"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateAcquireToken",{get:function(){return"msal.state.acquireToken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateRenew",{get:function(){return"msal.state.renew"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nonceIdToken",{get:function(){return"msal.nonce.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userName",{get:function(){return"msal.username"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idTokenKey",{get:function(){return"msal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginRequest",{get:function(){return"msal.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginError",{get:function(){return"msal.login.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewStatus",{get:function(){return"msal.token.renew.status"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msal",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login_hint",{get:function(){return"login_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"domain_hint",{get:function(){return"domain_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"organizations",{get:function(){return"organizations"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumers",{get:function(){return"consumers"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumersUtid",{get:function(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sid",{get:function(){return"sid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimeter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCancelled",{get:function(){return"Canceled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCompleted",{get:function(){return"Completed"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusInProgress",{get:function(){return"In Progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"urlHash",{get:function(){return"msal.urlHash"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"angularLoginRequest",{get:function(){return"msal.angular.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userIdentifier",{get:function(){return"userIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}();t.Constants=o;var r=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"login_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"acquiretoken_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"input_scopes_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"endpoints_resolution_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"popup_window_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"user_login_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"user_cancelled"},enumerable:!0,configurable:!0}),e}();t.ErrorCodes=r;var i=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"Login is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"Acquire token is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"Invalid value of input scopes provided"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"Endpoints cannot be resolved"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"User login is required"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"User closed the popup window and cancelled the flow"},enumerable:!0,configurable:!0}),e}();t.ErrorDescription=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(4),i=n(9);!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}(t.AuthorityType||(t.AuthorityType={}));var s=function(){function e(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=o.Utils.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=o.Utils.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw r.ErrorMessage.invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw r.ErrorMessage.authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw r.ErrorMessage.authorityUriInvalidPath},e.prototype.DiscoverEndpoints=function(e){return(new i.XhrClient).sendRequestAsync(e,"GET",!0).then(function(e){return{AuthorizationEndpoint:e.authorization_endpoint,EndSessionEndpoint:e.end_session_endpoint,Issuer:e.issuer}})},e.prototype.ResolveEndpointsAsync=function(){var e=this,t="";return this.GetOpenIdConfigurationEndpointAsync().then(function(n){return t=n,e.DiscoverEndpoints(t)}).then(function(t){return e.tenantDiscoveryResponse=t,e})},e}();t.Authority=s},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */Object.defineProperty(t,"__esModule",{value:!0});var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function s(e){return this instanceof s?(this.v=e,this):new s(e)}t.__extends=function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t.__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.__rest=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},t.__decorate=function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},t.__param=function(e,t){return function(n,o){t(n,o,e)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},t.__generator=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=r,t.__read=i,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},t.__await=s,t.__asyncGenerator=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){r[e]&&(o[e]=function(t){return new Promise(function(n,o){i.push([e,t,n,o])>1||c(e,t)})})}function c(e,t){try{(n=r[e](t)).value instanceof s?Promise.resolve(n.value.v).then(u,l):p(i[0][2],n)}catch(e){p(i[0][3],e)}var n}function u(e){c("next",e)}function l(e){c("throw",e)}function p(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},t.__asyncDelegator=function(e){var t,n;return t={},o("next"),o("throw",function(e){throw e}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){e[o]&&(t[o]=function(t){return(n=!n)?{value:s(e[o](t)),done:"return"===o}:r?r(t):t})}},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"authorityUriInvalidPath",{get:function(){return"AuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authorityUriInsecure",{get:function(){return"AuthorityUriInsecure"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"invalidAuthorityType",{get:function(){return"InvalidAuthorityType"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unsupportedAuthorityValidation",{get:function(){return"UnsupportedAuthorityValidation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"b2cAuthorityUriInvalidPath",{get:function(){return"B2cAuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),e}();t.ErrorMessage=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(13),i=n(14),s=n(15),a=n(16),c=n(1),u=n(17),l=n(18),p=n(6),h=n(7),d=n(0),g=n(20),f="id_token",C="token",m="id_token token",y=function(e,t,n){var o=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.isInIframe()?new Promise(function(){}):o.apply(this,e)},n},w=function(){function e(e,t){if(this.pTokenReceivedCallback=null,this.cacheLocations={localStorage:"localStorage",sessionStorage:"sessionStorage"},this.pConfig=e,this.pTokenReceivedCallback=t,this.pLoginInProgress=!1,this.pAcquireTokenInProgress=!1,!this.cacheLocations[this.pConfig.cache.cacheLocation])throw new Error("Cache Location is not valid. Provided value:"+this.pConfig.cache.cacheLocation+".Possible values are: "+this.cacheLocations.localStorage+", "+this.cacheLocations.sessionStorage);this.pCacheStorage=new l.Storage(this.pConfig.cache.cacheLocation),window.openedWindows=[],window.activeRenewals={},window.renewStates=[],window.callBackMappedToRenewStates={},window.callBacksMappedToRenewStates={},window.msal=this;var n=window.location.hash,o=this.isCallback(n);if(!this.pConfig.framework.isAngular)if(o)this.handleAuthenticationResponse.call(this,n);else{var r=this.pCacheStorage.getItem(c.Constants.urlHash);r&&this.processCallBack(r)}}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=g.AuthorityFactory.CreateInstance(e,this.pConfig.auth.validateAuthority)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cacheLocation",{get:function(){return this.pConfig.cache.cacheLocation},enumerable:!0,configurable:!0}),e.prototype.getRedirectUri=function(){return"function"==typeof this.pConfig.auth.redirectUri?this.pConfig.auth.redirectUri():this.pConfig.auth.redirectUri},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.pConfig.auth.postLogoutRedirectUri?this.pConfig.auth.postLogoutRedirectUri():this.pConfig.auth.postLogoutRedirectUri},e.prototype.processCallBack=function(e){this.pConfig.system.logger.info("Processing the callback from redirect response");var t=this.getRequestInfo(e);this.saveTokenFromHash(t);var n,o=t.parameters[c.Constants.accessToken]||t.parameters[c.Constants.idToken],r=t.parameters[c.Constants.errorDescription],i=t.parameters[c.Constants.error];n=t.parameters[c.Constants.accessToken]?c.Constants.accessToken:c.Constants.idToken,this.pCacheStorage.removeItem(c.Constants.urlHash);try{this.pTokenReceivedCallback&&(this.pCacheStorage.clearCookie(),this.pTokenReceivedCallback.call(this,r,o,i,n,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie))))}catch(e){this.pConfig.system.logger.error("Error occurred in token received callback function: "+e)}},e.prototype.loginRedirect=function(e,t){var n=this;if(this.pLoginInProgress&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.loginProgressError,null,c.ErrorCodes.loginProgressError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{if(e){var o=this.validateInputScope(e);if(o&&!d.Utils.isEmpty(o)&&this.pTokenReceivedCallback)return void this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));e=this.filterScopes(e)}var r;(r=this.extractADALIdToken())&&!e?(this.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=d.Utils.constructUnifiedCacheExtraQueryParameter(r,t),this.pSilentLogin=!0,this.acquireTokenSilent([this.pConfig.auth.clientId],this.authority,this.getAccount(),t).then(function(e){n.pSilentLogin=!1,n.pConfig.system.logger.info("Unified cache call is successful"),n.pTokenReceivedCallback&&n.pTokenReceivedCallback.call(n,null,e,null,c.Constants.idToken,n.getAccountState(n.pSilentAuthenticationState))},function(o){n.pSilentLogin=!1,n.pConfig.system.logger.error("Error occurred during unified cache ATS"),n.loginRedirectHelper(e,t)})):this.loginRedirectHelper(e,t)}},e.prototype.loginRedirectHelper=function(e,t){var n=this;this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var o=new s.AuthenticationRequestParameters(n.authorityInstance,n.pConfig.auth.clientId,e,f,n.getRedirectUri(),n.pConfig.auth.state);t&&(o.extraQueryParameters=t);var r=n.pCacheStorage.getItem(c.Constants.angularLoginRequest);r&&""!==r?n.pCacheStorage.setItem(c.Constants.angularLoginRequest,""):r=window.location.href,n.pCacheStorage.setItem(c.Constants.loginRequest,r,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.loginError,""),n.pCacheStorage.setItem(c.Constants.stateLogin,o.state,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.nonceIdToken,o.nonce,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.msalError,""),n.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var i=c.Constants.authority+c.Constants.resourceDelimeter+o.state;n.pCacheStorage.setItem(i,n.authority,n.pConfig.cache.storeAuthStateInCookie);var a=o.createNavigateUrl(e)+c.Constants.response_mode_fragment;n.promptUser(a)})},e.prototype.loginRedirectNew=function(e){var t=this;if(this.pLoginInProgress&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.loginProgressError,null,c.ErrorCodes.loginProgressError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{if(e.scopes){var n=this.validateInputScope(e.scopes);if(n&&!d.Utils.isEmpty(n)&&this.pTokenReceivedCallback)return void this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));e.scopes=this.filterScopes(e.scopes)}var o;o=this.extractADALIdToken();var r=d.Utils.constructExtraQueryParametersString(e.extraQueryParameters);o&&!e.scopes?(this.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),e.login_hint&&(r=d.Utils.constructUnifiedCacheExtraQueryParameter(o,e.login_hint,r)),this.pSilentLogin=!0,this.acquireTokenSilent([this.pConfig.auth.clientId],this.authority,this.getAccount(),r).then(function(e){t.pSilentLogin=!1,t.pConfig.system.logger.info("Unified cache call is successful"),t.pTokenReceivedCallback&&t.pTokenReceivedCallback.call(t,null,e,null,c.Constants.idToken,t.getAccountState(t.pSilentAuthenticationState))},function(n){t.pSilentLogin=!1,t.pConfig.system.logger.error("Error occurred during unified cache ATS"),t.loginRedirectHelperNew(e.scopes,r)})):this.loginRedirectHelper(e.scopes,r)}},e.prototype.loginRedirectHelperNew=function(e,t){var n=this;this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var o=new s.AuthenticationRequestParameters(n.authorityInstance,n.pConfig.auth.clientId,e,f,n.getRedirectUri(),n.pConfig.auth.state);t&&(o.extraQueryParameters=t);var r=n.pCacheStorage.getItem(c.Constants.angularLoginRequest);r&&""!==r?n.pCacheStorage.setItem(c.Constants.angularLoginRequest,""):r=window.location.href,n.pCacheStorage.setItem(c.Constants.loginRequest,r,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.loginError,""),n.pCacheStorage.setItem(c.Constants.stateLogin,o.state,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.nonceIdToken,o.nonce,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.msalError,""),n.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var i=c.Constants.authority+c.Constants.resourceDelimeter+o.state;n.pCacheStorage.setItem(i,n.authority,n.pConfig.cache.storeAuthStateInCookie);var a=o.createNavigateUrl(e)+c.Constants.response_mode_fragment;n.promptUser(a)})},e.prototype.loginPopup=function(e,t){var n=this;return new Promise(function(o,r){if(n.pLoginInProgress)r(c.ErrorCodes.loginProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.loginProgressError);else{if(e){var i=n.validateInputScope(e);if(i&&!d.Utils.isEmpty(i))return void r(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+c.ErrorDescription.inputScopesError);e=n.filterScopes(e)}var s;(s=n.extractADALIdToken())&&!e?(n.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=d.Utils.constructUnifiedCacheExtraQueryParameter(s,t),n.pSilentLogin=!0,n.acquireTokenSilent([n.pConfig.auth.clientId],n.authority,n.getAccount(),t).then(function(e){n.pSilentLogin=!1,n.pConfig.system.logger.info("Unified cache call is successful"),o(e)},function(i){n.pSilentLogin=!1,n.pConfig.system.logger.error("Error occurred during unified cache ATS"),n.loginPopupHelper(o,r,e,t)})):n.loginPopupHelper(o,r,e,t)}})},e.prototype.loginPopupHelper=function(e,t,n,o){var r=this;n||(n=[this.pConfig.auth.clientId]);var i=n.join(" ").toLowerCase(),a=this.openWindow("about:blank","_blank",1,this,e,t);a&&(this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var u=new s.AuthenticationRequestParameters(r.authorityInstance,r.pConfig.auth.clientId,n,f,r.getRedirectUri(),r.pConfig.auth.state);o&&(u.extraQueryParameters=o),r.pCacheStorage.setItem(c.Constants.loginRequest,window.location.href,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.loginError,""),r.pCacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.msalError,""),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var l=c.Constants.authority+c.Constants.resourceDelimeter+u.state;r.pCacheStorage.setItem(l,r.authority,r.pConfig.cache.storeAuthStateInCookie);var p=u.createNavigateUrl(n)+c.Constants.response_mode_fragment;window.renewStates.push(u.state),window.requestType=c.Constants.login,r.registerCallback(u.state,i,e,t),a&&(r.pConfig.system.logger.infoPii("Navigated Popup window to:"+p),a.location.href=p)},function(){r.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),t&&t(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),a&&a.close()}).catch(function(e){r.pConfig.system.logger.warning("could not resolve endpoints"),t(e)}))},e.prototype.loginPopupNew=function(e){var t=this;return new Promise(function(n,o){if(t.pLoginInProgress)o(c.ErrorCodes.loginProgressError+c.Constants.resourceDelimeter+c.ErrorCodes.loginProgressError);else{if(e.scopes){var r=t.validateInputScope(e.scopes);if(r&&!d.Utils.isEmpty(r))return void o(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+c.ErrorCodes.inputScopesError);e.scopes=t.filterScopes(e.scopes)}var i;i=t.extractADALIdToken();var s=d.Utils.constructExtraQueryParametersString(e.extraQueryParameters);if(i&&!e.scopes){t.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),s=d.Utils.constructUnifiedCacheExtraQueryParameter(i,e.login_hint,s),t.pSilentLogin=!0;var a={scopes:[t.pConfig.auth.clientId],authority:t.authority,account:t.getAccount(),extraQueryParameters:e.extraQueryParameters};t.acquireTokenSilentNew(a).then(function(e){t.pSilentLogin=!1,t.pConfig.system.logger.info("Unified cache call is successful"),n(e)},function(r){t.pSilentLogin=!1,t.pConfig.system.logger.error("Error occurred during unified cache ATS"),t.loginPopupHelperNew(n,o,e.scopes,s)})}else t.loginPopupHelperNew(n,o,e.scopes,s)}})},e.prototype.loginPopupHelperNew=function(e,t,n,o){var r=this;n||(n=[this.pConfig.auth.clientId]);var i=n.join(" ").toLowerCase(),a=this.openWindow("about:blank","_blank",1,this,e,t);a&&(this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var u=new s.AuthenticationRequestParameters(r.authorityInstance,r.pConfig.auth.clientId,n,f,r.getRedirectUri(),r.pConfig.auth.state);o&&(u.extraQueryParameters=o),r.pCacheStorage.setItem(c.Constants.loginRequest,window.location.href,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.loginError,""),r.pCacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.msalError,""),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var l=c.Constants.authority+c.Constants.resourceDelimeter+u.state;r.pCacheStorage.setItem(l,r.authority,r.pConfig.cache.storeAuthStateInCookie);var p=u.createNavigateUrl(n)+c.Constants.response_mode_fragment;window.renewStates.push(u.state),window.requestType=c.Constants.login,r.registerCallback(u.state,i,e,t),a&&(r.pConfig.system.logger.infoPii("Navigated Popup window to:"+p),a.location.href=p)},function(){r.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),t&&t(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),a&&a.close()}).catch(function(e){r.pConfig.system.logger.warning("could not resolve endpoints"),t(e)}))},e.prototype.acquireTokenPopup=function(e,t,n,o){var r=this;return new Promise(function(i,a){var u=r.validateInputScope(e);u&&!d.Utils.isEmpty(u)&&a(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+u),e&&(e=r.filterScopes(e));var l=n||r.getAccount();if(r.pAcquireTokenInProgress)a(c.ErrorCodes.acquireTokenProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.acquireTokenProgressError);else{var p,h=e.join(" ").toLowerCase();if(!(l||o&&-1!==o.indexOf(c.Constants.login_hint)))return r.pConfig.system.logger.info("User login is required"),void a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError);r.pAcquireTokenInProgress=!0;var y=t?g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority):r.authorityInstance,w=r.openWindow("about:blank","_blank",1,r,i,a);w&&y.ResolveEndpointsAsync().then(function(){var t;p=d.Utils.compareObjects(l,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,f,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state),r.pCacheStorage.setItem(c.Constants.nonceIdToken,p.nonce),p.state=p.state,t=l?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+l.homeAccountIdentifier+c.Constants.resourceDelimeter+p.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+p.state,r.pCacheStorage.setItem(t,JSON.stringify(l));var n=c.Constants.authority+c.Constants.resourceDelimeter+p.state;r.pCacheStorage.setItem(n,y.CanonicalAuthority,r.pConfig.cache.storeAuthStateInCookie),o&&(p.extraQueryParameters=o);var u=p.createNavigateUrl(e)+c.Constants.response_mode_fragment;u=r.addHintParameters(u,l),window.renewStates.push(p.state),window.requestType=c.Constants.renewToken,r.registerCallback(p.state,h,i,a),w&&(w.location.href=u)},function(){r.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),a&&a(c.ErrorCodes.endpointResolutionError+c.Constants.resourceDelimeter+c.ErrorDescription.endpointResolutionError),w&&w.close()}).catch(function(e){r.pConfig.system.logger.warning("could not resolve endpoints"),a(e)})}})},e.prototype.acquireTokenPopupNew=function(e){var t=this;return new Promise(function(n,o){var r=t.validateInputScope(e.scopes);r&&!d.Utils.isEmpty(r)&&o(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+r),e.scopes&&(e.scopes=t.filterScopes(e.scopes));var i=e.account?e.account:t.getAccount();if(t.pAcquireTokenInProgress)o(c.ErrorCodes.acquireTokenProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.acquireTokenProgressError);else{var a,u=e.scopes.join(" ").toLowerCase(),l=d.Utils.constructExtraQueryParametersString(e.extraQueryParameters);if(!i&&!e.login_hint)return t.pConfig.system.logger.info("User login is required"),void o(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError);t.pAcquireTokenInProgress=!0;var p=e.authority?g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority):t.authorityInstance,h=t.openWindow("about:blank","_blank",1,t,n,o);h&&p.ResolveEndpointsAsync().then(function(){var r;a=d.Utils.compareObjects(i,t.getAccount())?e.scopes.indexOf(t.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(p,t.pConfig.auth.clientId,e.scopes,f,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(p,t.pConfig.auth.clientId,e.scopes,C,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(p,t.pConfig.auth.clientId,e.scopes,m,t.getRedirectUri(),t.pConfig.auth.state),t.pCacheStorage.setItem(c.Constants.nonceIdToken,a.nonce),a.state=a.state,r=i?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+i.homeAccountIdentifier+c.Constants.resourceDelimeter+a.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+a.state,t.pCacheStorage.setItem(r,JSON.stringify(i));var g=c.Constants.authority+c.Constants.resourceDelimeter+a.state;t.pCacheStorage.setItem(g,p.CanonicalAuthority,t.pConfig.cache.storeAuthStateInCookie),l&&(a.extraQueryParameters=l);var y=a.createNavigateUrl(e.scopes)+c.Constants.response_mode_fragment;y=t.addHintParameters(y,i),window.renewStates.push(a.state),window.requestType=c.Constants.renewToken,t.registerCallback(a.state,u,n,o),h&&(h.location.href=y)},function(){t.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),t.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),t.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),o&&o(c.ErrorCodes.endpointResolutionError+c.Constants.resourceDelimeter+c.ErrorDescription.endpointResolutionError),h&&h.close()}).catch(function(e){t.pConfig.system.logger.warning("could not resolve endpoints"),o(e)})}})},e.prototype.acquireTokenSilent=function(e,t,n,o){var r=this;return new Promise(function(i,a){var u=r.validateInputScope(e);if(u&&!d.Utils.isEmpty(u))return a(c.ErrorCodes.inputScopesError+"|"+u),null;e&&(e=r.filterScopes(e));var l,p=e.join(" ").toLowerCase(),h=n||r.getAccount(),y=r.pCacheStorage.getItem(c.Constants.adalIdToken);if(!h&&d.Utils.checkSSO(o)&&d.Utils.isEmpty(y))return r.pConfig.system.logger.info("User login is required"),a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError),null;if(!h&&!d.Utils.isEmpty(y)){var w=d.Utils.extractIdToken(y);console.log("ADAL's idToken exists. Extracting login information from ADAL's idToken "),o=d.Utils.constructUnifiedCacheExtraQueryParameter(w,o)}l=d.Utils.compareObjects(h,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,f,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state):e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,f,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state);var v=r.getCachedToken(l,h);if(v){if(v.token)return r.pConfig.system.logger.info("Token is already in cache for scope:"+p),i(v.token),null;if(v.errorDesc||v.error)return r.pConfig.system.logger.infoPii(v.errorDesc+":"+v.error),a(v.errorDesc+c.Constants.resourceDelimeter+v.error),null}else r.pConfig.system.logger.verbose("Token is not in cache for scope:"+p);return l.authorityInstance||(l.authorityInstance=t?g.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority):r.authorityInstance),l.authorityInstance.ResolveEndpointsAsync().then(function(){window.activeRenewals[p]?(r.pConfig.system.logger.verbose("Renew token for scope: "+p+" is in progress. Registering callback"),r.registerCallback(window.activeRenewals[p],p,i,a)):e&&e.indexOf(r.pConfig.auth.clientId)>-1&&1===e.length?(r.pConfig.system.logger.verbose("renewing idToken"),r.renewIdToken(e,i,a,h,l,o)):(r.pConfig.system.logger.verbose("renewing accesstoken"),r.renewToken(e,i,a,h,l,o))}).catch(function(e){return r.pConfig.system.logger.warning("could not resolve endpoints"),a(e),null})})},e.prototype.acquireTokenSilentNew=function(e){var t=this;return new Promise(function(n,o){var r=t.validateInputScope(e.scopes);if(r&&!d.Utils.isEmpty(r))return o(c.ErrorCodes.inputScopesError+"|"+r),null;e.scopes&&(e.scopes=t.filterScopes(e.scopes));var i,a=e.scopes.join(" ").toLowerCase(),u=e.account?e.account:t.getAccount(),l=t.pCacheStorage.getItem(c.Constants.adalIdToken),p=d.Utils.constructExtraQueryParametersString(e.extraQueryParameters);if(!(u||e.login_hint||e.sid)&&d.Utils.isEmpty(l))return t.pConfig.system.logger.info("User login is required"),o(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError),null;if(!u&&!d.Utils.isEmpty(l)){var h=d.Utils.extractIdToken(l);console.log("ADAL's idToken exists. Extracting login information from ADAL's idToken "),p=d.Utils.constructUnifiedCacheExtraQueryParameter(h,p)}i=d.Utils.compareObjects(u,t.getAccount())?e.scopes.indexOf(t.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority),t.pConfig.auth.clientId,e.scopes,f,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority),t.pConfig.auth.clientId,e.scopes,C,t.getRedirectUri(),t.pConfig.auth.state):e.scopes.indexOf(t.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority),t.pConfig.auth.clientId,e.scopes,f,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority),t.pConfig.auth.clientId,e.scopes,m,t.getRedirectUri(),t.pConfig.auth.state);var y=t.getCachedToken(i,u);if(y){if(y.token)return t.pConfig.system.logger.info("Token is already in cache for scope:"+a),n(y.token),null;if(y.errorDesc||y.error)return t.pConfig.system.logger.infoPii(y.errorDesc+":"+y.error),o(y.errorDesc+c.Constants.resourceDelimeter+y.error),null}else t.pConfig.system.logger.verbose("Token is not in cache for scope:"+a);return i.authorityInstance||(i.authorityInstance=e.authority?g.AuthorityFactory.CreateInstance(e.authority,t.pConfig.auth.validateAuthority):t.authorityInstance),i.authorityInstance.ResolveEndpointsAsync().then(function(){window.activeRenewals[a]?(t.pConfig.system.logger.verbose("Renew token for scope: "+a+" is in progress. Registering callback"),t.registerCallback(window.activeRenewals[a],a,n,o)):e.scopes&&e.scopes.indexOf(t.pConfig.auth.clientId)>-1&&1===e.scopes.length?(t.pConfig.system.logger.verbose("renewing idToken"),t.renewIdToken(e.scopes,n,o,u,i,p)):(t.pConfig.system.logger.verbose("renewing accesstoken"),t.renewToken(e.scopes,n,o,u,i,p))}).catch(function(e){return t.pConfig.system.logger.warning("could not resolve endpoints"),o(e),null})})},e.prototype.acquireTokenRedirect=function(e,t,n,o){var r=this,i=this.validateInputScope(e);if(i&&!d.Utils.isEmpty(i)&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{e&&(e=this.filterScopes(e));var a=n||this.getAccount();if(!this.pAcquireTokenInProgress){var u;e.join(" ").toLowerCase();if(!(a||o&&-1!==o.indexOf(c.Constants.login_hint))&&this.pTokenReceivedCallback)return this.pConfig.system.logger.info("User login is required"),void this.pTokenReceivedCallback(c.ErrorDescription.userLoginError,null,c.ErrorCodes.userLoginError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));this.pAcquireTokenInProgress=!0;var l=t?g.AuthorityFactory.CreateInstance(t,this.pConfig.auth.validateAuthority):this.authorityInstance;l.ResolveEndpointsAsync().then(function(){var t;u=d.Utils.compareObjects(a,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,f,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state),r.pCacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,r.pConfig.cache.storeAuthStateInCookie),t=a?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+a.homeAccountIdentifier+c.Constants.resourceDelimeter+u.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+u.state,r.pCacheStorage.setItem(t,JSON.stringify(a));var n=c.Constants.authority+c.Constants.resourceDelimeter+u.state;r.pCacheStorage.setItem(n,l.CanonicalAuthority,r.pConfig.cache.storeAuthStateInCookie),o&&(u.extraQueryParameters=o);var i=u.createNavigateUrl(e)+c.Constants.response_mode_fragment;(i=r.addHintParameters(i,a))&&(r.pCacheStorage.setItem(c.Constants.stateAcquireToken,u.state,r.pConfig.cache.storeAuthStateInCookie),window.location.replace(i))})}}},e.prototype.acquireTokenRedirectNew=function(e){var t=this,n=this.validateInputScope(e.scopes);if(n&&!d.Utils.isEmpty(n)&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{e.scopes&&(e.scopes=this.filterScopes(e.scopes));var o=e.account?e.account:this.getAccount();if(!this.pAcquireTokenInProgress){e.scopes.join(" ").toLowerCase();var r,i=d.Utils.constructExtraQueryParametersString(e.extraQueryParameters);if(!o&&!e.login_hint&&this.pTokenReceivedCallback)return this.pConfig.system.logger.info("User login is required"),void this.pTokenReceivedCallback(c.ErrorDescription.userLoginError,null,c.ErrorCodes.userLoginError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));this.pAcquireTokenInProgress=!0;var a=e.authority?g.AuthorityFactory.CreateInstance(e.authority,this.pConfig.auth.validateAuthority):this.authorityInstance;a.ResolveEndpointsAsync().then(function(){var n;r=d.Utils.compareObjects(o,t.getAccount())?e.scopes.indexOf(t.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(a,t.pConfig.auth.clientId,e.scopes,f,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(a,t.pConfig.auth.clientId,e.scopes,C,t.getRedirectUri(),t.pConfig.auth.state):new s.AuthenticationRequestParameters(a,t.pConfig.auth.clientId,e.scopes,m,t.getRedirectUri(),t.pConfig.auth.state),t.pCacheStorage.setItem(c.Constants.nonceIdToken,r.nonce,t.pConfig.cache.storeAuthStateInCookie),n=o?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o.homeAccountIdentifier+c.Constants.resourceDelimeter+r.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+r.state,t.pCacheStorage.setItem(n,JSON.stringify(o));var u=c.Constants.authority+c.Constants.resourceDelimeter+r.state;t.pCacheStorage.setItem(u,a.CanonicalAuthority,t.pConfig.cache.storeAuthStateInCookie),i&&(r.extraQueryParameters=i);var l=r.createNavigateUrl(e.scopes)+c.Constants.response_mode_fragment;(l=t.addHintParameters(l,o))&&(t.pCacheStorage.setItem(c.Constants.stateAcquireToken,r.state,t.pConfig.cache.storeAuthStateInCookie),window.location.replace(l))})}}},e.prototype.promptUser=function(e){e&&!d.Utils.isEmpty(e)?(this.pConfig.system.logger.infoPii("Navigate to:"+e),window.location.replace(e)):this.pConfig.system.logger.info("Navigate url is empty")},e.prototype.openWindow=function(e,t,n,o,r,i){var s=this,a=this.openPopup(e,t,c.Constants.popUpWidth,c.Constants.popUpHeight);if(null==a)return o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1,this.pConfig.system.logger.info(c.ErrorCodes.popUpWindowError+":"+c.ErrorDescription.popUpWindowError),this.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.popUpWindowError),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.popUpWindowError),i&&i(c.ErrorCodes.popUpWindowError+c.Constants.resourceDelimeter+c.ErrorDescription.popUpWindowError),null;window.openedWindows.push(a);var u=window.setInterval(function(){if(a&&a.closed&&o.pLoginInProgress){if(i&&i(c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError),window.clearInterval(u),s.pConfig.framework.isAngular)return void s.broadcast("msal:popUpClosed",c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError);o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1}try{var e=a.location;if(-1!==e.href.indexOf(s.getRedirectUri())&&(window.clearInterval(u),o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1,s.pConfig.system.logger.info("Closing popup window"),s.pConfig.framework.isAngular)){s.broadcast("msal:popUpHashChanged",e.hash);for(var t=0;t<window.openedWindows.length;t++)window.openedWindows[t].close()}}catch(e){}},n);return a},e.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},e.prototype.logout=function(){this.clearCache(),this.pAccount=null;var e="";this.getPostLogoutRedirectUri()&&(e="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()));var t=this.authority+"/oauth2/v2.0/logout?"+e;this.promptUser(t)},e.prototype.clearCache=function(){window.renewStates=[];for(var e=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),t=0;t<e.length;t++)this.pCacheStorage.removeItem(JSON.stringify(e[t].key));this.pCacheStorage.resetCacheItems(),this.pCacheStorage.clearCookie()},e.prototype.clearCacheForScope=function(e){for(var t=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var o=t[n];o.value.accessToken===e&&this.pCacheStorage.removeItem(JSON.stringify(o.key))}},e.prototype.openPopup=function(e,t,n,o){try{var r=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=s/2-n/2+r,u=a/2-o/2+i,l=window.open(e,t,"width="+n+", height="+o+", top="+u+", left="+c);return l.focus&&l.focus(),l}catch(e){return this.pConfig.system.logger.error("error opening popup "+e.message),this.pLoginInProgress=!1,this.pAcquireTokenInProgress=!1,null}},e.prototype.validateInputScope=function(e){if(!e||e.length<1)return"Scopes cannot be passed as an empty array";if(!Array.isArray(e))throw new Error("API does not accept non-array scopes");return e.indexOf(this.pConfig.auth.clientId)>-1&&e.length>1?"ClientId can only be provided as a single scope":""},e.prototype.filterScopes=function(e){return e=(e=e.filter(function(e){return"openid"!==e})).filter(function(e){return"profile"!==e})},e.prototype.registerCallback=function(e,t,n,o){var r=this;window.activeRenewals[t]=e,window.callBacksMappedToRenewStates[e]||(window.callBacksMappedToRenewStates[e]=[]),window.callBacksMappedToRenewStates[e].push({resolve:n,reject:o}),window.callBackMappedToRenewStates[e]||(window.callBackMappedToRenewStates[e]=function(n,o,i,s){window.activeRenewals[t]=null;for(var a=0;a<window.callBacksMappedToRenewStates[e].length;++a)try{n||i?window.callBacksMappedToRenewStates[e][a].reject(n+c.Constants.resourceDelimeter+i):o&&window.callBacksMappedToRenewStates[e][a].resolve(o)}catch(e){r.pConfig.system.logger.warning(e)}window.callBacksMappedToRenewStates[e]=null,window.callBackMappedToRenewStates[e]=null})},e.prototype.getCachedTokenInternal=function(e,t){var n,o=t||this.getAccount();if(!o)return null;var r=this.authorityInstance?this.authorityInstance:g.AuthorityFactory.CreateInstance(this.authority,this.pConfig.auth.validateAuthority);return n=d.Utils.compareObjects(o,this.getAccount())?e.indexOf(this.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,f,this.getRedirectUri(),this.pConfig.auth.state):new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,C,this.getRedirectUri(),this.pConfig.auth.state):new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,m,this.getRedirectUri(),this.pConfig.auth.state),this.getCachedToken(n,t)},e.prototype.getCachedToken=function(e,t){var n=null,o=e.scopes,r=this.pCacheStorage.getAllAccessTokens(this.pConfig.auth.clientId,t?t.homeAccountIdentifier:null);if(0===r.length)return null;var i=[];if(e.authority){for(s=0;s<r.length;s++){c=(a=r[s]).key.scopes.split(" ");d.Utils.containsScope(c,o)&&a.key.authority===e.authority&&i.push(a)}if(0===i.length)return null;if(1!==i.length)return{errorDesc:"The cache contains multiple tokens satisfying the requirements.Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};n=i[0]}else{for(var s=0;s<r.length;s++){var a,c=(a=r[s]).key.scopes.split(" ");d.Utils.containsScope(c,o)&&i.push(a)}if(1===i.length)n=i[0],e.authorityInstance=g.AuthorityFactory.CreateInstance(n.key.authority,this.pConfig.auth.validateAuthority);else{if(i.length>1)return{errorDesc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};var u=this.getUniqueAuthority(r,"authority");if(u.length>1)return{errorDesc:"Multiple authorities found in the cache. Pass authority in the API overload.",token:null,error:"multiple_matching_tokens_detected"};e.authorityInstance=g.AuthorityFactory.CreateInstance(u[0],this.pConfig.auth.validateAuthority)}}if(null!=n){var l=Number(n.value.expiresIn),p=this.pConfig.system.tokenRenewalOffsetSeconds||300;return l&&l>d.Utils.now()+p?{errorDesc:null,token:n.value.accessToken,error:null}:(this.pCacheStorage.removeItem(JSON.stringify(i[0].key)),null)}return null},e.prototype.getAllAccounts=function(){for(var e=[],t=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var o=new u.IdToken(t[n].value.idToken),r=new a.HomeAccountIdentifier(t[n].value.clientInfo),i=h.Account.createAccount(o,r);e.push(i)}return this.getUniqueAccounts(e)},e.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],o=0;o<e.length;++o)e[o].homeAccountIdentifier&&-1===t.indexOf(e[o].homeAccountIdentifier)&&(t.push(e[o].homeAccountIdentifier),n.push(e[o]));return n},e.prototype.getUniqueAuthority=function(e,t){var n=[],o=[];return e.forEach(function(e){e.key.hasOwnProperty(t)&&-1===o.indexOf(e.key[t])&&(o.push(e.key[t]),n.push(e.key[t]))}),n},e.prototype.addHintParameters=function(e,t){var n=t||this.getAccount();if(n){var o=n.homeAccountIdentifier.split("."),r=d.Utils.base64DecodeStringUrlSafe(o[0]),i=d.Utils.base64DecodeStringUrlSafe(o[1]);n.sid&&-1!==e.indexOf(c.Constants.prompt_none)?this.urlContainsQueryStringParameter(c.Constants.sid,e)||this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||(e+="&"+c.Constants.sid+"="+encodeURIComponent(n.sid)):this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||!n.userName||d.Utils.isEmpty(n.userName)||(e+="&"+c.Constants.login_hint+"="+encodeURIComponent(n.userName)),d.Utils.isEmpty(r)||d.Utils.isEmpty(i)||(this.urlContainsQueryStringParameter("domain_req",e)||d.Utils.isEmpty(i)||(e+="&domain_req="+encodeURIComponent(i)),this.urlContainsQueryStringParameter("login_req",e)||d.Utils.isEmpty(r)||(e+="&login_req="+encodeURIComponent(r))),this.urlContainsQueryStringParameter(c.Constants.domain_hint,e)||d.Utils.isEmpty(i)||(i===c.Constants.consumersUtid?e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.consumers):e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.organizations))}return e},e.prototype.urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},e.prototype.extractADALIdToken=function(){var e=this.pCacheStorage.getItem(c.Constants.adalIdToken);return d.Utils.isEmpty(e)?null:d.Utils.extractIdToken(e)},e.prototype.loadIframeTimeout=function(e,t,n){var o=this,r=window.activeRenewals[n];this.pConfig.system.logger.verbose("Set loading state to pending for: "+n+":"+r),this.pCacheStorage.setItem(c.Constants.renewStatus+r,c.Constants.tokenRenewStatusInProgress),this.loadFrame(e,t),setTimeout(function(){o.pCacheStorage.getItem(c.Constants.renewStatus+r)===c.Constants.tokenRenewStatusInProgress&&(o.pConfig.system.logger.verbose("Loading frame has timed out after: "+o.pConfig.system.loadFrameTimeout/1e3+" seconds for scope "+n+":"+r),r&&window.callBackMappedToRenewStates[r]&&window.callBackMappedToRenewStates[r]("Token renewal operation failed due to timeout",null,"Token Renewal Failed",c.Constants.accessToken),o.pCacheStorage.setItem(c.Constants.renewStatus+r,c.Constants.tokenRenewStatusCancelled))},this.pConfig.system.loadFrameTimeout)},e.prototype.loadFrame=function(e,t){var n=this;this.pConfig.system.logger.info("LoadFrame: "+t);var o=t;setTimeout(function(){var r=n.addAdalFrame(o);""!==r.src&&"about:blank"!==r.src||(r.src=e,n.pConfig.system.logger.infoPii("Frame Name : "+t+" Navigated to: "+e))},500)},e.prototype.addAdalFrame=function(e){if(void 0===e)return null;this.pConfig.system.logger.info("Add msal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(t=window.frames[e])}return t},e.prototype.renewToken=function(e,t,n,o,r,i){var s=e.join(" ").toLowerCase();this.pConfig.system.logger.verbose("renewToken is called for scope:"+s);var a,u=this.addAdalFrame("msalRenewFrame"+s);i&&(r.extraQueryParameters=i),a=o?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o.homeAccountIdentifier+c.Constants.resourceDelimeter+r.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+r.state,this.pCacheStorage.setItem(a,JSON.stringify(o));var l=c.Constants.authority+c.Constants.resourceDelimeter+r.state;this.pCacheStorage.setItem(l,r.authority),this.pCacheStorage.setItem(c.Constants.nonceIdToken,r.nonce),this.pConfig.system.logger.verbose("Renew token Expected state: "+r.state);var p=d.Utils.urlRemoveQueryStringParameter(r.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;p=this.addHintParameters(p,o),window.renewStates.push(r.state),window.requestType=c.Constants.renewToken,this.registerCallback(r.state,s,t,n),this.pConfig.system.logger.infoPii("Navigate to:"+p),u.src="about:blank",this.loadIframeTimeout(p,"msalRenewFrame"+s,s)},e.prototype.renewIdToken=function(e,t,n,o,r,i){e.join(" ").toLowerCase();this.pConfig.system.logger.info("renewidToken is called");var s,a=this.addAdalFrame("msalIdTokenFrame");i&&(r.extraQueryParameters=i),s=o?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o.homeAccountIdentifier+c.Constants.resourceDelimeter+r.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+r.state,this.pCacheStorage.setItem(s,JSON.stringify(o));var u=c.Constants.authority+c.Constants.resourceDelimeter+r.state;this.pCacheStorage.setItem(u,r.authority),this.pCacheStorage.setItem(c.Constants.nonceIdToken,r.nonce),this.pConfig.system.logger.verbose("Renew Idtoken Expected state: "+r.state);var l=d.Utils.urlRemoveQueryStringParameter(r.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;l=this.addHintParameters(l,o),this.pSilentLogin?(window.requestType=c.Constants.login,this.pSilentAuthenticationState=r.state):(window.requestType=c.Constants.renewToken,window.renewStates.push(r.state)),this.registerCallback(r.state,this.pConfig.auth.clientId,t,n),this.pConfig.system.logger.infoPii("Navigate to:"+l),a.src="about:blank",this.loadIframeTimeout(l,"msalIdTokenFrame",this.pConfig.auth.clientId)},e.prototype.getAccount=function(){if(this.pAccount)return this.pAccount;var e=this.pCacheStorage.getItem(c.Constants.idTokenKey),t=this.pCacheStorage.getItem(c.Constants.msalClientInfo);if(!d.Utils.isEmpty(e)&&!d.Utils.isEmpty(t)){var n=new u.IdToken(e),o=new a.HomeAccountIdentifier(t);return this.pAccount=h.Account.createAccount(n,o),this.pAccount}return null},e.prototype.handleAuthenticationResponse=function(e){null==e&&(e=window.location.hash);var t=null,n=!1,o=!1;try{o=window.opener&&window.opener.msal&&window.opener.msal!==window.msal}catch(e){o=!1}o?(t=window.opener.msal,n=!0):window.parent&&window.parent.msal&&(t=window.parent.msal);var r,i=t.getRequestInfo(e),s=null,a=null;if(t.pLogger.info("Returned from redirect url"),window.parent!==window&&window.parent.msal)a=window.parent.callBackMappedToRenewStates[i.stateResponse];else if(o)a=window.opener.callBackMappedToRenewStates[i.stateResponse];else{if(t._navigateToLoginRequestUrl)return a=null,t.pCacheStorage.setItem(c.Constants.urlHash,e),!1,void(window.parent!==window||n||(window.location.href=t.pCacheStorage.getItem(c.Constants.loginRequest,this.pConfig.cache.storeAuthStateInCookie)));a=t.pTokenReceivedCallback,window.location.hash=""}t.saveTokenFromHash(i),i.requestType===c.Constants.renewToken&&window.parent?(window.parent!==window?t.pLogger.verbose("Window is in iframe, acquiring token silently"):t.pLogger.verbose("acquiring token interactive in progress"),s=i.parameters[c.Constants.accessToken]||i.parameters[c.Constants.idToken],r=c.Constants.accessToken):i.requestType===c.Constants.login&&(s=i.parameters[c.Constants.idToken],r=c.Constants.idToken);var u=i.parameters[c.Constants.errorDescription],l=i.parameters[c.Constants.error];try{a&&(i.stateMatch?a.call(t,u,s,l,r,this.getAccountState(i.stateResponse)):a.call(t,u,s,l,r,null))}catch(e){t.pLogger.error("Error occurred in token received callback function: "+e)}if(o)for(var p=0;p<window.opener.openedWindows.length;p++)window.opener.openedWindows[p].close()},e.prototype.saveAccessToken=function(e,t,n,o,s){var u,l=new a.HomeAccountIdentifier(o);if(t.parameters.hasOwnProperty("scope")){for(var p=(u=t.parameters.scope).split(" "),h=this.pCacheStorage.getAllAccessTokens(this.pConfig.auth.clientId,e),g=0;g<h.length;g++){var f=h[g];if(f.key.userIdentifier===n.homeAccountIdentifier){var C=f.key.scopes.split(" ");d.Utils.isIntersectingScopes(C,p)&&this.pCacheStorage.removeItem(JSON.stringify(f.key))}}var m=new r.AccessTokenKey(e,this.pConfig.auth.clientId,u,l.uid,l.utid),y=new i.AccessTokenValue(t.parameters[c.Constants.accessToken],s.rawIdToken,d.Utils.expiresIn(t.parameters[c.Constants.expiresIn]).toString(),o);this.pCacheStorage.setItem(JSON.stringify(m),JSON.stringify(y))}else{u=this.pConfig.auth.clientId;m=new r.AccessTokenKey(e,this.pConfig.auth.clientId,u,l.uid,l.utid),y=new i.AccessTokenValue(t.parameters[c.Constants.idToken],t.parameters[c.Constants.idToken],s.expiration,o);this.pCacheStorage.setItem(JSON.stringify(m),JSON.stringify(y))}},e.prototype.saveTokenFromHash=function(e){this.pConfig.system.logger.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this.pCacheStorage.setItem(c.Constants.msalError,""),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var t="",n="";if(e.parameters.hasOwnProperty("scope")?e.parameters.scope.toLowerCase():this.pConfig.auth.clientId,e.parameters.hasOwnProperty(c.Constants.errorDescription)||e.parameters.hasOwnProperty(c.Constants.error)){if(this.pConfig.system.logger.infoPii("Error :"+e.parameters[c.Constants.error]+"; Error description:"+e.parameters[c.Constants.errorDescription]),this.pCacheStorage.setItem(c.Constants.msalError,e.parameters.error),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,e.parameters[c.Constants.errorDescription]),e.requestType===c.Constants.login&&(this.pLoginInProgress=!1,this.pCacheStorage.setItem(c.Constants.loginError,e.parameters[c.Constants.errorDescription]+":"+e.parameters[c.Constants.error]),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse),e.requestType===c.Constants.renewToken){this.pAcquireTokenInProgress=!1,t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var o=null!==this.getAccount()?this.getAccount().homeAccountIdentifier:"";n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o+c.Constants.resourceDelimeter+e.stateResponse}}else if(e.stateMatch){var r;this.pConfig.system.logger.info("State is right"),e.parameters.hasOwnProperty(c.Constants.sessionState)&&this.pCacheStorage.setItem(c.Constants.msalSessionState,e.parameters[c.Constants.sessionState]);var i="";if(e.parameters.hasOwnProperty(c.Constants.accessToken)){this.pConfig.system.logger.info("Fragment has access token"),this.pAcquireTokenInProgress=!1;var s=void 0;r=e.parameters.hasOwnProperty(c.Constants.idToken)?new u.IdToken(e.parameters[c.Constants.idToken]):new u.IdToken(this.pCacheStorage.getItem(c.Constants.idTokenKey)),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var l=this.pCacheStorage.getItem(t,this.pConfig.cache.storeAuthStateInCookie);d.Utils.isEmpty(l)||(l=d.Utils.replaceFirstPath(l,r.tenantId)),e.parameters.hasOwnProperty(c.Constants.clientInfo)?(i=e.parameters[c.Constants.clientInfo],s=h.Account.createAccount(r,new a.HomeAccountIdentifier(i))):(this.pConfig.system.logger.warning("ClientInfo not received in the response from AAD"),s=h.Account.createAccount(r,new a.HomeAccountIdentifier(i))),n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+s.homeAccountIdentifier+c.Constants.resourceDelimeter+e.stateResponse;var p=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+e.stateResponse,g=this.pCacheStorage.getItem(n),f=void 0;d.Utils.isEmpty(g)?d.Utils.isEmpty(this.pCacheStorage.getItem(p))||this.saveAccessToken(l,e,s,i,r):(f=JSON.parse(g),s&&f&&d.Utils.compareObjects(s,f)?(this.saveAccessToken(l,e,s,i,r),this.pConfig.system.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.pConfig.system.logger.warning("The user object created from the response is not the same as the one passed in the acquireToken request"))}if(e.parameters.hasOwnProperty(c.Constants.idToken)){this.pConfig.system.logger.info("Fragment has id token"),this.pLoginInProgress=!1,r=new u.IdToken(e.parameters[c.Constants.idToken]),e.parameters.hasOwnProperty(c.Constants.clientInfo)?i=e.parameters[c.Constants.clientInfo]:this.pConfig.system.logger.warning("ClientInfo not received in the response from AAD"),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;l=this.pCacheStorage.getItem(t,this.pConfig.cache.storeAuthStateInCookie);d.Utils.isEmpty(l)||(l=d.Utils.replaceFirstPath(l,r.tenantId)),this.pAccount=h.Account.createAccount(r,new a.HomeAccountIdentifier(i)),r&&r.nonce?r.nonce!==this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)?(this.pAccount=null,this.pCacheStorage.setItem(c.Constants.loginError,"Nonce Mismatch. Expected Nonce: "+this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)+",Actual Nonce: "+r.nonce),this.pConfig.system.logger.error("Nonce Mismatch.Expected Nonce: "+this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)+",Actual Nonce: "+r.nonce)):(this.pCacheStorage.setItem(c.Constants.idTokenKey,e.parameters[c.Constants.idToken]),this.pCacheStorage.setItem(c.Constants.msalClientInfo,i),this.saveAccessToken(l,e,this.pAccount,i,r)):(t=e.stateResponse,n=e.stateResponse,this.pConfig.system.logger.error("Invalid id_token received in the response"),e.parameters.error="invalid idToken",e.parameters.error_description="Invalid idToken. idToken: "+e.parameters[c.Constants.idToken],this.pCacheStorage.setItem(c.Constants.msalError,"invalid idToken"),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid idToken. idToken: "+e.parameters[c.Constants.idToken]))}}else t=e.stateResponse,n=e.stateResponse,this.pConfig.system.logger.error("State Mismatch.Expected State: "+this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)+",Actual State: "+e.stateResponse),e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this.pCacheStorage.setItem(c.Constants.msalError,"Invalid_state"),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid_state. state: "+e.stateResponse);this.pCacheStorage.setItem(c.Constants.renewStatus+e.stateResponse,c.Constants.tokenRenewStatusCompleted),this.pCacheStorage.removeAcquireTokenEntries(t,n),this.pConfig.cache.storeAuthStateInCookie&&(this.pCacheStorage.setItemCookie(t,"",-1),this.pCacheStorage.clearCookie())},e.prototype.isCallback=function(e){e=this.getHash(e);var t=d.Utils.deserialize(e);return t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken)},e.prototype.getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},e.prototype.getRequestInfo=function(e){e=this.getHash(e);var t=d.Utils.deserialize(e),n=new p.TokenResponse;if(t&&(n.parameters=t,t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken))){n.valid=!0;var o=void 0;if(!t.hasOwnProperty("state"))return n;if(o=t.state,n.stateResponse=o,o===this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)||o===this.pSilentAuthenticationState)return n.requestType=c.Constants.login,n.stateMatch=!0,n;if(o===this.pCacheStorage.getItem(c.Constants.stateAcquireToken,this.pConfig.cache.storeAuthStateInCookie))return n.requestType=c.Constants.renewToken,n.stateMatch=!0,n;if(!n.stateMatch){n.requestType=window.requestType;for(var r=window.renewStates,i=0;i<r.length;i++)if(r[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},e.prototype.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.getAccountState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.isInIframe=function(){return window.parent!==window},e.prototype.loginInProgress=function(){return!!this.pCacheStorage.getItem(c.Constants.urlHash)||this.pLoginInProgress},e.prototype.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},e.prototype.getScopesForEndpoint=function(e){if(this.pConfig.framework.unprotectedResources.length>0)for(var t=0;t<this.pConfig.framework.unprotectedResources.length;t++)if(e.indexOf(this.pConfig.framework.unprotectedResources[t])>-1)return null;if(this.pConfig.framework.protectedResourceMap.size>0)for(var n=0,o=Array.from(this.pConfig.framework.protectedResourceMap.keys());n<o.length;n++){var r=o[n];if(e.indexOf(r)>-1)return this.pConfig.framework.protectedResourceMap.get(r)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this.getHostFromUri(e)===this.getHostFromUri(this.getRedirectUri())?new Array(this.pConfig.auth.clientId):null:new Array(this.pConfig.auth.clientId)},e.prototype.setloginInProgress=function(e){this.pLoginInProgress=e},e.prototype.getAcquireTokenInProgress=function(){return this.pAcquireTokenInProgress},e.prototype.setAcquireTokenInProgress=function(e){this.pAcquireTokenInProgress=e},e.prototype.getLogger=function(){return this.pConfig.system.logger},o.__decorate([y],e.prototype,"acquireTokenSilent",null),o.__decorate([y],e.prototype,"acquireTokenSilentNew",null),e}();t.UserAgentApplication=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){this.valid=!1,this.parameters={},this.stateMatch=!1,this.stateResponse="",this.requestType="unknown"}}();t.TokenResponse=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e,t,n,o,r,i,s){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=n,this.name=o,this.idToken=r,this.sid=i,this.environment=s}return e.createAccount=function(t,n){var r,i,s,a;return t?(r=t.uid,i=t.utid):(r="",i=""),n?(s=n.uid,a=n.utid):(s="",a=""),new e(o.Utils.base64EncodeStringUrlSafe(r)+"."+o.Utils.base64EncodeStringUrlSafe(i),o.Utils.base64EncodeStringUrlSafe(s)+"."+o.Utils.base64EncodeStringUrlSafe(a),t.preferredName,t.name,t.decodedIdToken,t.sid,t.issuer)},e}();t.Account=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(2),i=n(9),s=function(e){function t(t,n){return e.call(this,t,n)||this}return o.__extends(t,e),Object.defineProperty(t.prototype,"AadInstanceDiscoveryEndpointUrl",{get:function(){return t.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return r.AuthorityType.Aad},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});if(!this.IsValidationEnabled)return t;var n=this.CanonicalAuthorityUrlComponents.HostNameAndPort;return this.IsInTrustedHostList(n)?t:(new i.XhrClient).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then(function(e){return e.tenant_discovery_endpoint})},t.prototype.IsInTrustedHostList=function(e){return t.TrustedHostList[e.toLowerCase()]},t.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",t.TrustedHostList={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"},t}(r.Authority);t.AadAuthority=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,n){var o=this;return new Promise(function(n,r){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(e){(i.status<200||i.status>=300)&&r(o.handleError(i.responseText));try{var t=JSON.parse(i.responseText)}catch(e){r(o.handleError(i.responseText))}n(t)},i.onerror=function(e){r(i.status)},"GET"!==t)throw"not implemented";i.send()})},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},e}();t.XhrClient=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(0);!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(o=t.LogLevel||(t.LogLevel={}));var i=function(){function e(e,t){void 0===t&&(t={}),this._level=o.Info;var n=t.correlationId,r=void 0===n?"":n,i=t.level,s=void 0===i?o.Info:i,a=t.piiLoggingEnabled,c=void 0!==a&&a;this._localCallback=e,this._correlationId=r,this._level=s,this._piiLoggingEnabled=c}return e.prototype.logMessage=function(e,t,n){if(!(e>this._level||!this._piiLoggingEnabled&&n)){var i,s=(new Date).toUTCString();i=r.Utils.isEmpty(this._correlationId)?s+":"+r.Utils.getLibraryVersion()+"-"+o[e]+" "+t:s+":"+this._correlationId+"-"+r.Utils.getLibraryVersion()+"-"+o[e]+" "+t,this.executeCallback(e,i,n)}},e.prototype.executeCallback=function(e,t,n){this._localCallback&&this._localCallback(e,t,n)},e.prototype.error=function(e){this.logMessage(o.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(o.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(o.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(o.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(o.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(o.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(o.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(o.Verbose,e,!0)},e}();t.Logger=i},function(e,t,n){e.exports=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.UserAgentApplication=o.UserAgentApplication;var r=n(10);t.Logger=r.Logger;var i=n(10);t.LogLevel=i.LogLevel;var s=n(7);t.Account=s.Account;var a=n(1);t.Constants=a.Constants;var c=n(6);t.TokenResponse=c.TokenResponse;var u=n(2);t.Authority=u.Authority;var l=n(5);t.CacheResult=l.CacheResult;var p=n(22);t.TConfiguration=p.TConfiguration},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){return function(e,t,n,r,i){this.authority=e,this.clientId=t,this.scopes=n,this.userIdentifier=o.Utils.base64EncodeStringUrlSafe(r)+"."+o.Utils.base64EncodeStringUrlSafe(i)}}();t.AccessTokenKey=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,n,o){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.clientInfo=o}}();t.AccessTokenValue=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e,t,n,r,i,s){this.authorityInstance=e,this.clientId=t,this.scopes=n,this.responseType=r,this.redirectUri=i,this.correlationId=o.Utils.createNewGuid(),this.state=s&&!o.Utils.isEmpty(s)?o.Utils.createNewGuid()+"|"+s:o.Utils.createNewGuid(),this.nonce=o.Utils.createNewGuid(),this.xClientSku="MSAL.JS",this.xClientVer=o.Utils.getLibraryVersion()}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=this.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},e.prototype.createNavigationUrlString=function(e){e||(e=[this.clientId]),-1===e.indexOf(this.clientId)&&e.push(this.clientId);var t=[];return t.push("response_type="+this.responseType),this.translateclientIdUsedInScope(e),t.push("scope="+encodeURIComponent(this.parseScope(e))),t.push("client_id="+encodeURIComponent(this.clientId)),t.push("redirect_uri="+encodeURIComponent(this.redirectUri)),t.push("state="+encodeURIComponent(this.state)),t.push("nonce="+encodeURIComponent(this.nonce)),t.push("client_info=1"),t.push("x-client-SKU="+this.xClientSku),t.push("x-client-Ver="+this.xClientVer),this.extraQueryParameters&&t.push(this.extraQueryParameters),t.push("client-request-id="+encodeURIComponent(this.correlationId)),t},e.prototype.translateclientIdUsedInScope=function(e){var t=e.indexOf(this.clientId);t>=0&&(e.splice(t,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},e.prototype.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},e}();t.AuthenticationRequestParameters=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e){if(!e||o.Utils.isEmpty(e))return this.uid="",void(this.utid="");try{var t=o.Utils.base64DecodeStringUrlSafe(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(e){throw new Error(e)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e}();t.HomeAccountIdentifier=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){return function(e){if(o.Utils.isEmpty(e))throw new Error("null or empty raw idtoken");try{this.rawIdToken=e,this.decodedIdToken=o.Utils.extractIdToken(e),this.decodedIdToken&&(this.decodedIdToken.hasOwnProperty("iss")&&(this.issuer=this.decodedIdToken.iss),this.decodedIdToken.hasOwnProperty("oid")&&(this.objectId=this.decodedIdToken.oid),this.decodedIdToken.hasOwnProperty("sub")&&(this.subject=this.decodedIdToken.sub),this.decodedIdToken.hasOwnProperty("tid")&&(this.tenantId=this.decodedIdToken.tid),this.decodedIdToken.hasOwnProperty("ver")&&(this.version=this.decodedIdToken.ver),this.decodedIdToken.hasOwnProperty("preferred_username")&&(this.preferredName=this.decodedIdToken.preferred_username),this.decodedIdToken.hasOwnProperty("name")&&(this.name=this.decodedIdToken.name),this.decodedIdToken.hasOwnProperty("nonce")&&(this.nonce=this.decodedIdToken.nonce),this.decodedIdToken.hasOwnProperty("exp")&&(this.expiration=this.decodedIdToken.exp),this.decodedIdToken.hasOwnProperty("home_oid")&&(this.homeObjectId=this.decodedIdToken.home_oid),this.decodedIdToken.hasOwnProperty("sid")&&(this.sid=this.decodedIdToken.sid),this.decodedIdToken.hasOwnProperty("uid")&&(this.uid=this.decodedIdToken.uid),this.decodedIdToken.hasOwnProperty("utid")&&(this.utid=this.decodedIdToken.utid))}catch(e){throw new Error("Failed to parse the returned id token")}}}();t.IdToken=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(19),i=function(){function e(t){if(e._instance)return e._instance;if(this._cacheLocation=t,this._localStorageSupported=void 0!==window[this._cacheLocation]&&null!=window[this._cacheLocation],this._sessionStorageSupported=void 0!==window[t]&&null!=window[t],e._instance=this,!this._localStorageSupported&&!this._sessionStorageSupported)throw new Error("localStorage and sessionStorage not supported");return e._instance}return e.prototype.setItem=function(e,t,n){window[this._cacheLocation]&&window[this._cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this._cacheLocation]?window[this._cacheLocation].getItem(e):null},e.prototype.removeItem=function(e){if(window[this._cacheLocation])return window[this._cacheLocation].removeItem(e)},e.prototype.clear=function(){if(window[this._cacheLocation])return window[this._cacheLocation].clear()},e.prototype.getAllAccessTokens=function(e,t){var n,o=[],i=window[this._cacheLocation];if(i){var s=void 0;for(s in i)if(i.hasOwnProperty(s)&&s.match(e)&&s.match(t)){var a=this.getItem(s);a&&(n=new r.AccessTokenCacheItem(JSON.parse(s),JSON.parse(a)),o.push(n))}}return o},e.prototype.removeAcquireTokenEntries=function(e,t){var n=window[this._cacheLocation];if(n){var o=void 0;for(o in n)n.hasOwnProperty(o)&&(""!==e&&o.indexOf(e)>-1||""!==t&&o.indexOf(t)>-1)&&this.removeItem(o)}},e.prototype.resetCacheItems=function(){var e=window[this._cacheLocation];if(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(-1!==t.indexOf(o.Constants.msal)&&this.setItem(t,""),-1!==t.indexOf(o.Constants.renewStatus)&&this.removeItem(t))}},e.prototype.setItemCookie=function(e,t,n){var o=e+"="+t+";";n&&(o+="expires="+this.setExpirationCookie(n)+";");document.cookie=o},e.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},e.prototype.setExpirationCookie=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e.prototype.clearCookie=function(){this.setItemCookie(o.Constants.nonceIdToken,"",-1),this.setItemCookie(o.Constants.stateLogin,"",-1),this.setItemCookie(o.Constants.loginRequest,"",-1),this.setItemCookie(o.Constants.stateAcquireToken,"",-1)},e}();t.Storage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){this.key=e,this.value=t}}();t.AccessTokenCacheItem=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(21),s=n(2),a=n(4),c=function(){function e(){}return e.DetectAuthorityFromUrl=function(e){switch(e=o.Utils.CanonicalizeUri(e),o.Utils.GetUrlComponents(e).PathSegments[0]){case"tfp":return s.AuthorityType.B2C;case"adfs":return s.AuthorityType.Adfs;default:return s.AuthorityType.Aad}},e.CreateInstance=function(t,n){if(o.Utils.isEmpty(t))return null;switch(e.DetectAuthorityFromUrl(t)){case s.AuthorityType.B2C:return new i.B2cAuthority(t,n);case s.AuthorityType.Aad:return new r.AadAuthority(t,n);default:throw a.ErrorMessage.invalidAuthorityType}},e}();t.AuthorityFactory=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(8),i=n(2),s=n(4),a=n(0),c=function(e){function t(t,n){var o=e.call(this,t,n)||this,r=a.Utils.GetUrlComponents(t),i=r.PathSegments;if(i.length<3)throw s.ErrorMessage.b2cAuthorityUriInvalidPath;return o.CanonicalAuthority="https://"+r.HostNameAndPort+"/"+i[0]+"/"+i[1]+"/"+i[2]+"/",o}return o.__extends(t,e),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return i.AuthorityType.B2C},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});return this.IsValidationEnabled?this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?t:new Promise(function(e,t){return t(s.ErrorMessage.unsupportedAuthorityValidation)}):t},t}(r.AadAuthority);t.B2cAuthority=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=function(e,t,n,o){var r=void 0===e?{clientId:s}:e,i=r.clientId,s=void 0===i?"":i,a=r.authority,c=void 0===a?null:a,u=r.validateAuthority,l=void 0===u||u,p=r.redirectUri,h=void 0===p?function(){return window.location.href.split("?")[0].split("#")[0]}:p,d=r.postLogoutRedirectUri,g=void 0===d?function(){return window.location.href.split("?")[0].split("#")[0]}:d,f=r.state,C=void 0===f?"":f,m=r.navigateToLoginRequestUrl,y=void 0===m||m,w=void 0===t?{}:t,v=w.cacheLocation,I=void 0===v?"localStorage":v,k=w.storeAuthStateInCookie,b=void 0!==k&&k,S=void 0===n?{}:n,A=S.loadFrameTimeout,T=void 0===A?6e3:A,P=S.tokenRenewalOffsetSeconds,E=void 0===P?300:P,U=void 0===o?{}:o,R=U.isAngular,_=void 0!==R&&R,O=U.unprotectedResources,x=void 0===O?new Array:O,D=U.protectedResourceMap;return{auth:{clientId:s,authority:c,validateAuthority:l,redirectUri:h,postLogoutRedirectUri:g,state:C,navigateToLoginRequestUrl:y},cache:{cacheLocation:I,storeAuthStateInCookie:b},system:{loadFrameTimeout:T,tokenRenewalOffsetSeconds:E},framework:{isAngular:_,unprotectedResources:x,protectedResourceMap:void 0===D?new Map:D}}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL01zYWwvLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BdXRob3JpdHkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9FcnJvck1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Vc2VyQWdlbnRBcHBsaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1JlcXVlc3RJbmZvLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjb3VudC50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0FhZEF1dGhvcml0eS50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1hIUkNsaWVudC50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjZXNzVG9rZW5LZXkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BY2Nlc3NUb2tlblZhbHVlLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycy50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0hvbWVBY2NvdW50SWRlbnRpZmllci50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0lkVG9rZW4udHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9TdG9yYWdlLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjZXNzVG9rZW5DYWNoZUl0ZW0udHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BdXRob3JpdHlGYWN0b3J5LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQjJjQXV0aG9yaXR5LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQ29uZmlndXJhdGlvbi50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29uc3RhbnRzXzEiLCJVdGlscyIsImNvbXBhcmVPYmplY3RzIiwidTEiLCJ1MiIsImhvbWVBY2NvdW50SWRlbnRpZmllciIsImV4cGlyZXNJbiIsImV4cGlyZXMiLCJ0aGlzIiwibm93IiwicGFyc2VJbnQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImlzRW1wdHkiLCJzdHIiLCJsZW5ndGgiLCJleHRyYWN0SWRUb2tlbiIsImVuY29kZWRJZFRva2VuIiwiZGVjb2RlZFRva2VuIiwiZGVjb2RlSnd0IiwiYmFzZTY0SWRUb2tlbiIsIkpXU1BheWxvYWQiLCJiYXNlNjREZWNvZGVkIiwiYmFzZTY0RGVjb2RlU3RyaW5nVXJsU2FmZSIsIkpTT04iLCJwYXJzZSIsImVyciIsImJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUiLCJpbnB1dCIsImJ0b2EiLCJlbmNvZGUiLCJyZXBsYWNlIiwiYXRvYiIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImRlY29kZSIsImNocjEiLCJjaHIyIiwiY2hyMyIsImVuYzEiLCJlbmMyIiwiZW5jMyIsImVuYzQiLCJrZXlTdHIiLCJvdXRwdXQiLCJ1dGY4RW5jb2RlIiwiY2hhckNvZGVBdCIsImlzTmFOIiwiY2hhckF0IiwidXRmdGV4dCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNvZGVzIiwiRXJyb3IiLCJoMSIsImgyIiwiaDMiLCJoNCIsImJpdHMiLCJjMSIsImMyIiwiYzMiLCJkZWNvZGVkIiwiaW5kZXhPZiIsImp3dFRva2VuIiwibWF0Y2hlcyIsImV4ZWMiLCJoZWFkZXIiLCJKV1NTaWciLCJkZXNlcmlhbGl6ZSIsInF1ZXJ5IiwibWF0Y2giLCJwbCIsInNlYXJjaCIsIm9iaiIsImlzSW50ZXJzZWN0aW5nU2NvcGVzIiwiY2FjaGVkU2NvcGVzIiwic2NvcGVzIiwiY29udmVydFRvTG93ZXJDYXNlIiwidG9Mb3dlckNhc2UiLCJjb250YWluc1Njb3BlIiwiZXZlcnkiLCJ0b1N0cmluZyIsIm1hcCIsInNjb3BlIiwicmVtb3ZlRWxlbWVudCIsImZpbHRlciIsImRlY2ltYWxUb0hleCIsIm51bSIsImhleCIsImdldExpYnJhcnlWZXJzaW9uIiwicmVwbGFjZUZpcnN0UGF0aCIsInVybCIsInRlbmFudElkIiwidXJsT2JqZWN0IiwiR2V0VXJsQ29tcG9uZW50cyIsInBhdGhBcnJheSIsIlBhdGhTZWdtZW50cyIsIkNvbnN0YW50cyIsImNvbW1vbiIsIm9yZ2FuaXphdGlvbnMiLCJQcm90b2NvbCIsIkhvc3ROYW1lQW5kUG9ydCIsImpvaW4iLCJjcmVhdGVOZXdHdWlkIiwiY3J5cHRvT2JqIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiYnVmZmVyIiwiVWludDhBcnJheSIsImd1aWRIb2xkZXIiLCJndWlkUmVzcG9uc2UiLCJyYW5kb20iLCJyZWdFeCIsIlJlZ0V4cCIsInVybENvbXBvbmVudHMiLCJBYnNvbHV0ZVBhdGgiLCJwYXRoU2VnbWVudHMiLCJzcGxpdCIsInZhbCIsIkNhbm9uaWNhbGl6ZVVyaSIsImVuZHNXaXRoIiwic3VmZml4IiwiY2hlY2tTU08iLCJleHRyYVF1ZXJ5UGFyYW1ldGVycyIsImxvZ2luX2hpbnQiLCJzaWQiLCJjb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyIiwiaWRUb2tlbk9iamVjdCIsImRvbWFpbl9oaW50IiwidXBuIiwidXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIiLCJyZWdleCIsImNvbnN0cnVjdEV4dHJhUXVlcnlQYXJhbWV0ZXJzU3RyaW5nIiwicmVxRXh0cmFRdWVyeVBhcmFtZXRlcnMiLCJ1bmRlZmluZWQiLCJfcG9wVXBXaWR0aCIsIndpZHRoIiwiX3BvcFVwSGVpZ2h0IiwiaGVpZ2h0IiwiRXJyb3JDb2RlcyIsIkVycm9yRGVzY3JpcHRpb24iLCJVdGlsc18xIiwiRXJyb3JNZXNzYWdlXzEiLCJYSFJDbGllbnRfMSIsIkF1dGhvcml0eVR5cGUiLCJBdXRob3JpdHkiLCJhdXRob3JpdHkiLCJ2YWxpZGF0ZUF1dGhvcml0eSIsIklzVmFsaWRhdGlvbkVuYWJsZWQiLCJDYW5vbmljYWxBdXRob3JpdHkiLCJ2YWxpZGF0ZUFzVXJpIiwiQ2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyIsInZhbGlkYXRlUmVzb2x2ZWQiLCJ0ZW5hbnREaXNjb3ZlcnlSZXNwb25zZSIsIkF1dGhvcml6YXRpb25FbmRwb2ludCIsIlRlbmFudCIsIkVuZFNlc3Npb25FbmRwb2ludCIsIklzc3VlciIsImNhbm9uaWNhbEF1dGhvcml0eSIsImNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMiLCJjb21wb25lbnRzIiwiZSIsIkVycm9yTWVzc2FnZSIsImludmFsaWRBdXRob3JpdHlUeXBlIiwiYXV0aG9yaXR5VXJpSW5zZWN1cmUiLCJhdXRob3JpdHlVcmlJbnZhbGlkUGF0aCIsIkRpc2NvdmVyRW5kcG9pbnRzIiwib3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50IiwiWGhyQ2xpZW50Iiwic2VuZFJlcXVlc3RBc3luYyIsInRoZW4iLCJyZXNwb25zZSIsImF1dGhvcml6YXRpb25fZW5kcG9pbnQiLCJlbmRfc2Vzc2lvbl9lbmRwb2ludCIsImlzc3VlciIsIlJlc29sdmVFbmRwb2ludHNBc3luYyIsIl90aGlzIiwiR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMiLCJvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRSZXNwb25zZSIsImV4dGVuZFN0YXRpY3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiYiIsIl9fdmFsdWVzIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsIl9fcmVhZCIsImFyIiwicHVzaCIsImVycm9yIiwiX19hd2FpdCIsInYiLCJfX2V4dGVuZHMiLCJfXyIsImNvbnN0cnVjdG9yIiwiX19hc3NpZ24iLCJhc3NpZ24iLCJhcmd1bWVudHMiLCJfX3Jlc3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJfX2RlY29yYXRlIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJfX3BhcmFtIiwicGFyYW1JbmRleCIsImRlY29yYXRvciIsIl9fbWV0YWRhdGEiLCJtZXRhZGF0YUtleSIsIm1ldGFkYXRhVmFsdWUiLCJtZXRhZGF0YSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsInJlamVjdGVkIiwidGhyb3ciLCJyZXN1bHQiLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsInJldHVybiIsIm9wIiwiVHlwZUVycm9yIiwicG9wIiwiX19leHBvcnRTdGFyIiwiX19zcHJlYWQiLCJjb25jYXQiLCJfX2FzeW5jR2VuZXJhdG9yIiwiYXN5bmNJdGVyYXRvciIsInEiLCJhIiwicmVzdW1lIiwiZnVsZmlsbCIsInNldHRsZSIsInNoaWZ0IiwiX19hc3luY0RlbGVnYXRvciIsIl9fYXN5bmNWYWx1ZXMiLCJBY2Nlc3NUb2tlbktleV8xIiwiQWNjZXNzVG9rZW5WYWx1ZV8xIiwiQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVyc18xIiwiSG9tZUFjY291bnRJZGVudGlmaWVyXzEiLCJJZFRva2VuXzEiLCJTdG9yYWdlXzEiLCJSZXF1ZXN0SW5mb18xIiwiQWNjb3VudF8xIiwiQXV0aG9yaXR5RmFjdG9yeV8xIiwiUmVzcG9uc2VUeXBlcyIsInJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lIiwicHJvcGVydHlLZXkiLCJkZXNjcmlwdG9yIiwidG9rZW5BY3F1aXNpdGlvbk1ldGhvZCIsImFyZ3MiLCJfaSIsImlzSW5JZnJhbWUiLCJVc2VyQWdlbnRBcHBsaWNhdGlvbiIsImNvbmZpZyIsImNhbGxiYWNrIiwicFRva2VuUmVjZWl2ZWRDYWxsYmFjayIsImNhY2hlTG9jYXRpb25zIiwibG9jYWxTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJwQ29uZmlnIiwicExvZ2luSW5Qcm9ncmVzcyIsInBBY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiY2FjaGUiLCJjYWNoZUxvY2F0aW9uIiwicENhY2hlU3RvcmFnZSIsIlN0b3JhZ2UiLCJvcGVuZWRXaW5kb3dzIiwiYWN0aXZlUmVuZXdhbHMiLCJyZW5ld1N0YXRlcyIsImNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlcyIsImNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXMiLCJtc2FsIiwidXJsSGFzaCIsImxvY2F0aW9uIiwiaGFzaCIsImlzQ2FsbGJhY2siLCJmcmFtZXdvcmsiLCJpc0FuZ3VsYXIiLCJoYW5kbGVBdXRoZW50aWNhdGlvblJlc3BvbnNlIiwicGVuZGluZ0NhbGxiYWNrIiwiZ2V0SXRlbSIsInByb2Nlc3NDYWxsQmFjayIsImF1dGhvcml0eUluc3RhbmNlIiwiQXV0aG9yaXR5RmFjdG9yeSIsIkNyZWF0ZUluc3RhbmNlIiwiYXV0aCIsImdldFJlZGlyZWN0VXJpIiwicmVkaXJlY3RVcmkiLCJnZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkiLCJwb3N0TG9nb3V0UmVkaXJlY3RVcmkiLCJzeXN0ZW0iLCJsb2dnZXIiLCJpbmZvIiwicmVxdWVzdEluZm8iLCJnZXRSZXF1ZXN0SW5mbyIsInNhdmVUb2tlbkZyb21IYXNoIiwidG9rZW5UeXBlIiwidG9rZW4iLCJwYXJhbWV0ZXJzIiwiYWNjZXNzVG9rZW4iLCJpZFRva2VuIiwiZXJyb3JEZXNjIiwiZXJyb3JEZXNjcmlwdGlvbiIsInJlbW92ZUl0ZW0iLCJjbGVhckNvb2tpZSIsImdldEFjY291bnRTdGF0ZSIsInN0YXRlTG9naW4iLCJzdG9yZUF1dGhTdGF0ZUluQ29va2llIiwibG9naW5SZWRpcmVjdCIsImxvZ2luUHJvZ3Jlc3NFcnJvciIsImlzVmFsaWRTY29wZSIsInZhbGlkYXRlSW5wdXRTY29wZSIsImlucHV0U2NvcGVzRXJyb3IiLCJmaWx0ZXJTY29wZXMiLCJleHRyYWN0QURBTElkVG9rZW4iLCJwU2lsZW50TG9naW4iLCJhY3F1aXJlVG9rZW5TaWxlbnQiLCJjbGllbnRJZCIsImdldEFjY291bnQiLCJwU2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSIsImxvZ2luUmVkaXJlY3RIZWxwZXIiLCJhdXRoZW50aWNhdGlvblJlcXVlc3QiLCJBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzIiwic3RhdGUiLCJsb2dpblN0YXJ0UGFnZSIsImFuZ3VsYXJMb2dpblJlcXVlc3QiLCJzZXRJdGVtIiwiaHJlZiIsImxvZ2luUmVxdWVzdCIsImxvZ2luRXJyb3IiLCJub25jZUlkVG9rZW4iLCJub25jZSIsIm1zYWxFcnJvciIsIm1zYWxFcnJvckRlc2NyaXB0aW9uIiwiYXV0aG9yaXR5S2V5IiwicmVzb3VyY2VEZWxpbWV0ZXIiLCJ1cmxOYXZpZ2F0ZSIsImNyZWF0ZU5hdmlnYXRlVXJsIiwicmVzcG9uc2VfbW9kZV9mcmFnbWVudCIsInByb21wdFVzZXIiLCJsb2dpblJlZGlyZWN0TmV3IiwiYXV0aFBhcmFtcyIsImxvZ2luUmVkaXJlY3RIZWxwZXJOZXciLCJsb2dpblBvcHVwIiwibG9naW5Qb3B1cEhlbHBlciIsInBvcFVwV2luZG93Iiwib3BlbldpbmRvdyIsInJlcXVlc3RUeXBlIiwibG9naW4iLCJyZWdpc3RlckNhbGxiYWNrIiwiaW5mb1BpaSIsImVuZHBvaW50UmVzb2x1dGlvbkVycm9yIiwiY2xvc2UiLCJjYXRjaCIsIndhcm5pbmciLCJsb2dpblBvcHVwTmV3IiwiYXV0aFJlcXVlc3QiLCJhY2NvdW50IiwiYWNxdWlyZVRva2VuU2lsZW50TmV3IiwibG9naW5Qb3B1cEhlbHBlck5ldyIsImFjcXVpcmVUb2tlblBvcHVwIiwiYWNjb3VudE9iamVjdCIsImFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IiLCJ1c2VyTG9naW5FcnJvciIsImFjcXVpcmVUb2tlbkF1dGhvcml0eSIsImFjcXVpcmVUb2tlblVzZXJLZXkiLCJhY3F1aXJlVG9rZW5Vc2VyIiwibm9fYWNjb3VudCIsInN0cmluZ2lmeSIsImFkZEhpbnRQYXJhbWV0ZXJzIiwicmVuZXdUb2tlbiIsImFjcXVpcmVUb2tlblBvcHVwTmV3IiwiYXV0aGVudGljYXRpb25SZXF1ZXN0XzEiLCJzY29wZV8xIiwiYWNjb3VudE9iamVjdF8xIiwiYWRhbElkVG9rZW4iLCJjb25zb2xlIiwibG9nIiwiY2FjaGVSZXN1bHQiLCJnZXRDYWNoZWRUb2tlbiIsInZlcmJvc2UiLCJyZW5ld0lkVG9rZW4iLCJhdXRoZW50aWNhdGlvblJlcXVlc3RfMiIsInNjb3BlXzIiLCJhY2NvdW50T2JqZWN0XzIiLCJleHRyYVF1ZXJ5UGFyYW1ldGVyc18xIiwiYWNxdWlyZVRva2VuUmVkaXJlY3QiLCJzdGF0ZUFjcXVpcmVUb2tlbiIsImFjcXVpcmVUb2tlblJlZGlyZWN0TmV3IiwidGl0bGUiLCJpbnRlcnZhbCIsImluc3RhbmNlIiwicG9wdXBXaW5kb3ciLCJvcGVuUG9wdXAiLCJwb3BVcFdpZHRoIiwicG9wVXBIZWlnaHQiLCJwb3BVcFdpbmRvd0Vycm9yIiwicG9sbFRpbWVyIiwic2V0SW50ZXJ2YWwiLCJjbG9zZWQiLCJ1c2VyQ2FuY2VsbGVkRXJyb3IiLCJjbGVhckludGVydmFsIiwiYnJvYWRjYXN0IiwicG9wVXBXaW5kb3dMb2NhdGlvbiIsImV2ZW50TmFtZSIsImRhdGEiLCJldnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJsb2dvdXQiLCJjbGVhckNhY2hlIiwicEFjY291bnQiLCJhY2Nlc3NUb2tlbkl0ZW1zIiwiZ2V0QWxsQWNjZXNzVG9rZW5zIiwidXNlcklkZW50aWZpZXIiLCJyZXNldENhY2hlSXRlbXMiLCJjbGVhckNhY2hlRm9yU2NvcGUiLCJ3aW5MZWZ0Iiwic2NyZWVuTGVmdCIsInNjcmVlblgiLCJ3aW5Ub3AiLCJzY3JlZW5Ub3AiLCJzY3JlZW5ZIiwiaW5uZXJXaWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3AiLCJvcGVuIiwiZm9jdXMiLCJtZXNzYWdlIiwiaXNBcnJheSIsImVsZW1lbnQiLCJleHBlY3RlZFN0YXRlIiwiZ2V0Q2FjaGVkVG9rZW5JbnRlcm5hbCIsInVzZXJPYmplY3QiLCJuZXdBdXRob3JpdHkiLCJhY2Nlc3NUb2tlbkNhY2hlSXRlbSIsInRva2VuQ2FjaGVJdGVtcyIsImZpbHRlcmVkSXRlbXMiLCJjYWNoZUl0ZW0iLCJhdXRob3JpdHlMaXN0IiwiZ2V0VW5pcXVlQXV0aG9yaXR5IiwiZXhwaXJlZCIsIk51bWJlciIsIm9mZnNldCIsInRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMiLCJnZXRBbGxBY2NvdW50cyIsImFjY291bnRzIiwiYWNjZXNzVG9rZW5DYWNoZUl0ZW1zIiwiSWRUb2tlbiIsImNsaWVudEluZm8iLCJIb21lQWNjb3VudElkZW50aWZpZXIiLCJBY2NvdW50IiwiY3JlYXRlQWNjb3VudCIsImdldFVuaXF1ZUFjY291bnRzIiwiZmxhZ3MiLCJ1bmlxdWVVc2VycyIsImluZGV4IiwiZm9yRWFjaCIsImFjY291bnRPYmoiLCJkZWNvZGVkQ2xpZW50SW5mbyIsInVpZCIsInV0aWQiLCJwcm9tcHRfbm9uZSIsInVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIiLCJ1c2VyTmFtZSIsImNvbnN1bWVyc1V0aWQiLCJjb25zdW1lcnMiLCJ0ZXN0IiwibG9hZElmcmFtZVRpbWVvdXQiLCJmcmFtZU5hbWUiLCJyZW5ld1N0YXR1cyIsInRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzIiwibG9hZEZyYW1lIiwic2V0VGltZW91dCIsImxvYWRGcmFtZVRpbWVvdXQiLCJ0b2tlblJlbmV3U3RhdHVzQ2FuY2VsbGVkIiwiZnJhbWVDaGVjayIsImZyYW1lSGFuZGxlIiwiYWRkQWRhbEZyYW1lIiwic3JjIiwiaWZyYW1lSWQiLCJhZGFsRnJhbWUiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpZnIiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJwb3NpdGlvbiIsImJvcmRlciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJmcmFtZXMiLCJwcm9tcHQiLCJyYXdJZFRva2VuIiwiaWRUb2tlbktleSIsInJhd0NsaWVudEluZm8iLCJtc2FsQ2xpZW50SW5mbyIsInNlbGYiLCJpc1BvcHVwIiwiaXNXaW5kb3dPcGVuZXJNc2FsIiwib3BlbmVyIiwicGFyZW50IiwidG9rZW5SZWNlaXZlZENhbGxiYWNrIiwicExvZ2dlciIsInN0YXRlUmVzcG9uc2UiLCJfbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCIsInN0YXRlTWF0Y2giLCJzYXZlQWNjZXNzVG9rZW4iLCJ0b2tlblJlc3BvbnNlIiwiY2xpZW50T2JqIiwiY29uc2VudGVkU2NvcGVzIiwiYWNjZXNzVG9rZW5LZXkiLCJBY2Nlc3NUb2tlbktleSIsImFjY2Vzc1Rva2VuVmFsdWUiLCJBY2Nlc3NUb2tlblZhbHVlIiwiZXhwaXJhdGlvbiIsInVzZXJLZXkiLCJzZXNzaW9uU3RhdGUiLCJtc2FsU2Vzc2lvblN0YXRlIiwiYWNxdWlyZVRva2VuVXNlcktleV9ub3VzZXIiLCJjYWNoZWRVc2VyIiwidG9rZW5SZW5ld1N0YXR1c0NvbXBsZXRlZCIsInJlbW92ZUFjcXVpcmVUb2tlbkVudHJpZXMiLCJzZXRJdGVtQ29va2llIiwiZ2V0SGFzaCIsInN1YnN0cmluZyIsIlRva2VuUmVzcG9uc2UiLCJ2YWxpZCIsInN0YXRlc0luUGFyZW50Q29udGV4dCIsImdldFNjb3BlRnJvbVN0YXRlIiwic3BsaXRJbmRleCIsImxvZ2luSW5Qcm9ncmVzcyIsImdldEhvc3RGcm9tVXJpIiwidXJpIiwiZXh0cmFjdGVkVXJpIiwiZ2V0U2NvcGVzRm9yRW5kcG9pbnQiLCJlbmRwb2ludCIsInVucHJvdGVjdGVkUmVzb3VyY2VzIiwicHJvdGVjdGVkUmVzb3VyY2VNYXAiLCJzaXplIiwiX2EiLCJmcm9tIiwia2V5cyIsInNldGxvZ2luSW5Qcm9ncmVzcyIsImdldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MiLCJzZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiYWNxdWlyZVRva2VuSW5Qcm9ncmVzcyIsImdldExvZ2dlciIsInRzbGliXzEiLCJhY2NvdW50SWRlbnRpZmllciIsImVudmlyb25tZW50IiwiYWNjb3VudFVpZCIsImFjY291bnRVdGlkIiwicHJlZmVycmVkTmFtZSIsImRlY29kZWRJZFRva2VuIiwiQXV0aG9yaXR5XzEiLCJBYWRBdXRob3JpdHkiLCJfc3VwZXIiLCJBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50IiwiQWFkIiwicmVzdWx0UHJvbWlzZSIsIkRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQiLCJob3N0IiwiSXNJblRydXN0ZWRIb3N0TGlzdCIsIkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnRVcmwiLCJ0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50IiwiVHJ1c3RlZEhvc3RMaXN0IiwibG9naW4ud2luZG93cy5uZXQiLCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuIiwibG9naW4uY2xvdWRnb3ZhcGkudXMiLCJsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tIiwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlIiwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzIiwibWV0aG9kIiwiZW5hYmxlQ2FjaGluZyIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib25sb2FkIiwiZXYiLCJzdGF0dXMiLCJoYW5kbGVFcnJvciIsInJlc3BvbnNlVGV4dCIsImpzb25SZXNwb25zZSIsIm9uZXJyb3IiLCJzZW5kIiwiTG9nTGV2ZWwiLCJMb2dnZXIiLCJsb2NhbENhbGxiYWNrIiwib3B0aW9ucyIsIl9sZXZlbCIsIkluZm8iLCJjb3JyZWxhdGlvbklkIiwiX2IiLCJsZXZlbCIsIl9jIiwicGlpTG9nZ2luZ0VuYWJsZWQiLCJfbG9jYWxDYWxsYmFjayIsIl9jb3JyZWxhdGlvbklkIiwiX3BpaUxvZ2dpbmdFbmFibGVkIiwibG9nTWVzc2FnZSIsImxvZ0xldmVsIiwiY29udGFpbnNQaWkiLCJ0aW1lc3RhbXAiLCJ0b1VUQ1N0cmluZyIsImV4ZWN1dGVDYWxsYmFjayIsImVycm9yUGlpIiwiV2FybmluZyIsIndhcm5pbmdQaWkiLCJWZXJib3NlIiwidmVyYm9zZVBpaSIsIlVzZXJBZ2VudEFwcGxpY2F0aW9uXzEiLCJMb2dnZXJfMSIsIkxvZ2dlcl8yIiwiVXNlckFnZW50QXBwbGljYXRpb25fMiIsIkNhY2hlUmVzdWx0IiwiQ29uZmlndXJhdGlvbl8xIiwiVENvbmZpZ3VyYXRpb24iLCJyZXNwb25zZVR5cGUiLCJ4Q2xpZW50U2t1IiwieENsaWVudFZlciIsImNyZWF0ZU5hdmlnYXRpb25VcmxTdHJpbmciLCJhdXRoRW5kcG9pbnQiLCJ0cmFuc2xhdGVjbGllbnRJZFVzZWRJblNjb3BlIiwicGFyc2VTY29wZSIsImNsaWVudElkSW5kZXgiLCJzcGxpY2UiLCJzY29wZUxpc3QiLCJyYXdBY2NvdW50SWRlbnRpZmllciIsImRlY29kZWRBY2NvdW50SWRlbnRpZmllciIsIl91aWQiLCJfdXRpZCIsIm9iamVjdElkIiwic3ViamVjdCIsInZlcnNpb24iLCJob21lT2JqZWN0SWQiLCJBY2Nlc3NUb2tlbkNhY2hlSXRlbV8xIiwiX2luc3RhbmNlIiwiX2NhY2hlTG9jYXRpb24iLCJfbG9jYWxTdG9yYWdlU3VwcG9ydGVkIiwiX3Nlc3Npb25TdG9yYWdlU3VwcG9ydGVkIiwiZW5hYmxlQ29va2llU3RvcmFnZSIsImdldEl0ZW1Db29raWUiLCJjbGVhciIsInJlc3VsdHMiLCJzdG9yYWdlIiwiQWNjZXNzVG9rZW5DYWNoZUl0ZW0iLCJjTmFtZSIsImNWYWx1ZSIsImNvb2tpZVN0ciIsInNldEV4cGlyYXRpb25Db29raWUiLCJjb29raWUiLCJjYSIsImNvb2tpZUxpZmUiLCJ0b2RheSIsIkFhZEF1dGhvcml0eV8xIiwiQjJjQXV0aG9yaXR5XzEiLCJEZXRlY3RBdXRob3JpdHlGcm9tVXJsIiwiYXV0aG9yaXR5VXJsIiwiQjJDIiwiQWRmcyIsIkIyY0F1dGhvcml0eSIsImIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoIiwidW5zdXBwb3J0ZWRBdXRob3JpdHlWYWxpZGF0aW9uIiwiQ29uZmlndXJhdGlvbiIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJfaiIsIl9rIiwiX2wiLCJfbSIsIm5hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmwiLCJfbyIsIl9wIiwiX3EiLCJfciIsIl9zIiwiX3QiLCJfdSIsIl92IiwiX3ciLCJfeCIsIk1hcCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxVQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLEtBQUFELElBRUFELEVBQUEsS0FBQUMsSUFSQSxDQVNDSyxPQUFBLFdBQ0QsbUJDVEEsSUFBQUMs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b0YsRUFBQUQsRUFBQS9NLHdCQUFBLElBQUFnTixFQUFBLElBQUFBLEVBQXlCQyxFQUFBRixFQUFBN08saUNBQUEsSUFBQStPLEVBQUEsSUFBQUEsRUFDM0JDLE9BQUEsSUFBQWhCLEVBQUEsR0FBQUEsRUFBRWlCLEVBQUFELEVBQUE3WixpQkFBQSxJQUFBOFosS0FBbUJDLEVBQUFGLEVBQUEvSSw0QkFBQSxJQUFBaUosRUFBQSxJQUFBcmhCLE1BQUFxaEIsRUFBNENDLEVBQUFILEVBQUE5SSxxQkFVakUsTUFQYSxDQUNUdlEsS0FBTSxDQUFFZ0MsU0FBUUEsRUFBRWxNLFVBQVNBLEVBQUVDLGtCQUFpQkEsRUFBRW1LLFlBQVdBLEVBQUVFLHNCQUFxQkEsRUFBRWtDLE1BQUtBLEVBQUV3VywwQkFBeUJBLEdBQ3BIcmEsTUFBTyxDQUFFQyxjQUFhQSxFQUFFNEMsdUJBQXNCQSxHQUM5Q2pCLE9BQVEsQ0FBRThMLGlCQUFnQkEsRUFBRTlCLDBCQUF5QkEsR0FDckQ5SyxVQUFXLENBQUVDLFVBQVNBLEVBQUU4USxxQkFBb0JBLEVBQUVDLDBCQVBlLElBQUFpSixFQUFBLElBQUFDLElBQUFEIiwiZmlsZSI6Im1zYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIk1zYWxcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiTXNhbFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJNc2FsXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IElVcmkgfSBmcm9tIFwiLi9JVXJpXCI7XG5pbXBvcnQgeyBBY2NvdW50IH0gZnJvbSBcIi4vQWNjb3VudFwiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5cbi8qKiBcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFV0aWxzIHtcblxuICAvKipcbiAgICogVXRpbHMgZnVuY3Rpb24gdG8gY29tcGFyZSB0d28gQWNjb3VudCBvYmplY3RzIC0gdXNlZCB0byBjaGVjayBpZiB0aGUgc2FtZSB1c2VyIGlzIGxvZ2dlZCBpblxuICAgKiBcbiAgICogQHBhcmFtIHUxOiBBY2NvdW50IG9iamVjdCBcbiAgICogQHBhcmFtIHUyOiBBY2NvdW50IG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVPYmplY3RzKHUxOiBBY2NvdW50LCB1MjogQWNjb3VudCk6IGJvb2xlYW4ge1xuICAgIGlmICghdTEgfHwgIXUyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh1MS5ob21lQWNjb3VudElkZW50aWZpZXIgJiYgdTIuaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XG4gICAgICBpZiAodTEuaG9tZUFjY291bnRJZGVudGlmaWVyID09PSB1Mi5ob21lQWNjb3VudElkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBleHBpcmVzaW4gaW4gdGltZVxuICAgKiBcbiAgICogQHBhcmFtIGV4cGlyZXMgXG4gICAqL1xuICBzdGF0aWMgZXhwaXJlc0luKGV4cGlyZXM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gaWYgQUFEIGRpZCBub3Qgc2VuZCBcImV4cGlyZXNfaW5cIiBwcm9wZXJ0eSwgdXNlIGRlZmF1bHQgZXhwaXJhdGlvbiBvZiAzNTk5IHNlY29uZHMsIGZvciBzb21lIHJlYXNvbiBBQUQgc2VuZHMgMzU5OSBhcyBcImV4cGlyZXNfaW5cIiB2YWx1ZSBpbnN0ZWFkIG9mIDM2MDBcbiAgICBpZiAoIWV4cGlyZXMpIHtcbiAgICAgIGV4cGlyZXMgPSBcIjM1OTlcIjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubm93KCkgKyBwYXJzZUludChleHBpcmVzLCAxMCk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJuIHRoZSBjdXJyZW50IHRpbWVcbiAgICovXG4gIHN0YXRpYyBub3coKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAuMCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBzdHJpbmcgaXMgZW1wdHlcbiAgICogXG4gICAqIEBwYXJhbSBzdHIgXG4gICAqL1xuICBzdGF0aWMgaXNFbXB0eShzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodHlwZW9mIHN0ciA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhc3RyIHx8IDAgPT09IHN0ci5sZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgSWRUb2tlbiBieSBkZWNvZGluZyB0aGUgUkFXSWRUb2tlblxuICAgKiBcbiAgICogQHBhcmFtIGVuY29kZWRJZFRva2VuIFxuICAgKi9cbiAgc3RhdGljIGV4dHJhY3RJZFRva2VuKGVuY29kZWRJZFRva2VuOiBzdHJpbmcpOiBhbnkge1xuICAgIC8vIGlkIHRva2VuIHdpbGwgYmUgZGVjb2RlZCB0byBnZXQgdGhlIHVzZXJuYW1lXG4gICAgY29uc3QgZGVjb2RlZFRva2VuID0gdGhpcy5kZWNvZGVKd3QoZW5jb2RlZElkVG9rZW4pO1xuICAgIGlmICghZGVjb2RlZFRva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhc2U2NElkVG9rZW4gPSBkZWNvZGVkVG9rZW4uSldTUGF5bG9hZDtcbiAgICAgIGNvbnN0IGJhc2U2NERlY29kZWQgPSB0aGlzLmJhc2U2NERlY29kZVN0cmluZ1VybFNhZmUoYmFzZTY0SWRUb2tlbik7XG4gICAgICBpZiAoIWJhc2U2NERlY29kZWQpIHtcbiAgICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIuaW5mbyhcIlRoZSByZXR1cm5lZCBpZF90b2tlbiBjb3VsZCBub3QgYmUgYmFzZTY0IHVybCBzYWZlIGRlY29kZWQuXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8vIEVDTUEgc2NyaXB0IGhhcyBKU09OIGJ1aWx0LWluIHN1cHBvcnRcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGJhc2U2NERlY29kZWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIuZXJyb3IoXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gY291bGQgbm90IGJlIGRlY29kZWRcIiArIGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBlbmNvZGluZyAtIHBsYXRmb3JtIHNwZWNpZmljIGNoZWNrXG4gICAqIFxuICAgKiBAcGFyYW0gaW5wdXQgXG4gICAqL1xuICBzdGF0aWMgYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBodG1sNSBzaG91bGQgc3VwcG9ydCBhdG9iIGZ1bmN0aW9uIGZvciBkZWNvZGluZ1xuICAgIGlmICh3aW5kb3cuYnRvYSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5idG9hKGlucHV0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmNvZGUoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBkZWNvZGluZyAtIHBsYXRmb3JtIHNwZWNpZmljIGNoZWNrXG4gICAqIFxuICAgKiBAcGFyYW0gYmFzZTY0SWRUb2tlbiBcbiAgICovXG4gIHN0YXRpYyBiYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGJhc2U2NElkVG9rZW46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gaHRtbDUgc2hvdWxkIHN1cHBvcnQgYXRvYiBmdW5jdGlvbiBmb3IgZGVjb2RpbmdcbiAgICBiYXNlNjRJZFRva2VuID0gYmFzZTY0SWRUb2tlbi5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICBpZiAod2luZG93LmF0b2IpIHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKGJhc2U2NElkVG9rZW4pKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGVjb2RlKGJhc2U2NElkVG9rZW4pKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGVuY29kZSBhIHN0cmluZ1xuICAgKiBcbiAgICogQHBhcmFtIGlucHV0IFxuICAgKi9cbiAgc3RhdGljIGVuY29kZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBrZXlTdHI6IHN0cmluZyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtcbiAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICBsZXQgY2hyMTogbnVtYmVyLCBjaHIyOiBudW1iZXIsIGNocjM6IG51bWJlciwgZW5jMTogbnVtYmVyLCBlbmMyOiBudW1iZXIsIGVuYzM6IG51bWJlciwgZW5jNDogbnVtYmVyO1xuICAgIHZhciBpID0gMDtcblxuICAgIGlucHV0ID0gdGhpcy51dGY4RW5jb2RlKGlucHV0KTtcblxuICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICBjaHIxID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgIGNocjMgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG5cbiAgICAgIGVuYzEgPSBjaHIxID4+IDI7XG4gICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcbiAgICAgIGVuYzMgPSAoKGNocjIgJiAxNSkgPDwgMikgfCAoY2hyMyA+PiA2KTtcbiAgICAgIGVuYzQgPSBjaHIzICYgNjM7XG5cbiAgICAgIGlmIChpc05hTihjaHIyKSkge1xuICAgICAgICBlbmMzID0gZW5jNCA9IDY0O1xuICAgICAgfSBlbHNlIGlmIChpc05hTihjaHIzKSkge1xuICAgICAgICBlbmM0ID0gNjQ7XG4gICAgICB9XG5cbiAgICAgIG91dHB1dCA9IG91dHB1dCArIGtleVN0ci5jaGFyQXQoZW5jMSkgKyBrZXlTdHIuY2hhckF0KGVuYzIpICsga2V5U3RyLmNoYXJBdChlbmMzKSArIGtleVN0ci5jaGFyQXQoZW5jNCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dC5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIikucmVwbGFjZSgvPSskLywgXCJcIik7XG4gIH1cblxuICAvKipcbiAgICogdXRmOCBlbmNvZGUgYSBzdHJpbmdcbiAgICogXG4gICAqIEBwYXJhbSBpbnB1dCBcbiAgICovXG4gIHN0YXRpYyB1dGY4RW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICAgIHZhciB1dGZ0ZXh0ID0gXCJcIjtcblxuICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaW5wdXQubGVuZ3RoOyBuKyspIHtcbiAgICAgIHZhciBjID0gaW5wdXQuY2hhckNvZGVBdChuKTtcblxuICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKGMgPiAxMjcpICYmIChjIDwgMjA0OCkpIHtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDYpIHwgMTkyKTtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgNjMpIHwgMTI4KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gMTIpIHwgMjI0KTtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyA+PiA2KSAmIDYzKSB8IDEyOCk7XG4gICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyAmIDYzKSB8IDEyOCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHV0ZnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogZGVjb2RlIGEgc3RyaW5nXG4gICAqIFxuICAgKiBAcGFyYW0gYmFzZTY0SWRUb2tlbiBcbiAgICovXG4gIHN0YXRpYyBkZWNvZGUoYmFzZTY0SWRUb2tlbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB2YXIgY29kZXMgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgYmFzZTY0SWRUb2tlbiA9IFN0cmluZyhiYXNlNjRJZFRva2VuKS5yZXBsYWNlKC89KyQvLCBcIlwiKTtcbiAgICB2YXIgbGVuZ3RoID0gYmFzZTY0SWRUb2tlbi5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCAlIDQgPT09IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSB0b2tlbiB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC5cIik7XG4gICAgfVxuICAgIGxldCBoMTogbnVtYmVyLCBoMjogbnVtYmVyLCBoMzogbnVtYmVyLCBoNDogbnVtYmVyLCBiaXRzOiBudW1iZXIsIGMxOiBudW1iZXIsIGMyOiBudW1iZXIsIGMzOiBudW1iZXIsIGRlY29kZWQgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgIC8vRXZlcnkgNCBiYXNlNjQgZW5jb2RlZCBjaGFyYWN0ZXIgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gMyBieXRlIHN0cmluZywgd2hpY2ggaXMgMjQgYml0c1xuICAgICAgLy8gdGhlbiA2IGJpdHMgcGVyIGJhc2U2NCBlbmNvZGVkIGNoYXJhY3RlclxuICAgICAgaDEgPSBjb2Rlcy5pbmRleE9mKGJhc2U2NElkVG9rZW4uY2hhckF0KGkpKTtcbiAgICAgIGgyID0gY29kZXMuaW5kZXhPZihiYXNlNjRJZFRva2VuLmNoYXJBdChpICsgMSkpO1xuICAgICAgaDMgPSBjb2Rlcy5pbmRleE9mKGJhc2U2NElkVG9rZW4uY2hhckF0KGkgKyAyKSk7XG4gICAgICBoNCA9IGNvZGVzLmluZGV4T2YoYmFzZTY0SWRUb2tlbi5jaGFyQXQoaSArIDMpKTtcbiAgICAgIC8vIEZvciBwYWRkaW5nLCBpZiBsYXN0IHR3byBhcmUgXCI9XCJcbiAgICAgIGlmIChpICsgMiA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBiaXRzID0gaDEgPDwgMTggfCBoMiA8PCAxMiB8IGgzIDw8IDY7XG4gICAgICAgIGMxID0gYml0cyA+PiAxNiAmIDI1NTtcbiAgICAgICAgYzIgPSBiaXRzID4+IDggJiAyNTU7XG4gICAgICAgIGRlY29kZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSwgYzIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIGlmIGxhc3Qgb25lIGlzIFwiPVwiXG4gICAgICBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBiaXRzID0gaDEgPDwgMTggfCBoMiA8PCAxMjtcbiAgICAgICAgYzEgPSBiaXRzID4+IDE2ICYgMjU1O1xuICAgICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJpdHMgPSBoMSA8PCAxOCB8IGgyIDw8IDEyIHwgaDMgPDwgNiB8IGg0O1xuICAgICAgLy8gdGhlbiBjb252ZXJ0IHRvIDMgYnl0ZSBjaGFyc1xuICAgICAgYzEgPSBiaXRzID4+IDE2ICYgMjU1O1xuICAgICAgYzIgPSBiaXRzID4+IDggJiAyNTU7XG4gICAgICBjMyA9IGJpdHMgJiAyNTU7XG4gICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEsIGMyLCBjMyk7XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIGRlY29kZSBhIEpXVFxuICAgKiBcbiAgICogQHBhcmFtIGp3dFRva2VuIFxuICAgKi9cbiAgc3RhdGljIGRlY29kZUp3dChqd3RUb2tlbjogc3RyaW5nKTogYW55IHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KGp3dFRva2VuKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGlkVG9rZW5QYXJ0c1JlZ2V4ID0gL14oW15cXC5cXHNdKilcXC4oW15cXC5cXHNdKylcXC4oW15cXC5cXHNdKikkLztcbiAgICBjb25zdCBtYXRjaGVzID0gaWRUb2tlblBhcnRzUmVnZXguZXhlYyhqd3RUb2tlbik7XG4gICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMubGVuZ3RoIDwgNCkge1xuICAgICAgLy90aGlzLl9yZXF1ZXN0Q29udGV4dC5sb2dnZXIud2FybihcIlRoZSByZXR1cm5lZCBpZF90b2tlbiBpcyBub3QgcGFyc2VhYmxlLlwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjcmFja2VkVG9rZW4gPSB7XG4gICAgICBoZWFkZXI6IG1hdGNoZXNbMV0sXG4gICAgICBKV1NQYXlsb2FkOiBtYXRjaGVzWzJdLFxuICAgICAgSldTU2lnOiBtYXRjaGVzWzNdXG4gICAgfTtcbiAgICByZXR1cm4gY3JhY2tlZFRva2VuO1xuICB9XG5cblxuICAvKipcbiAgICogZGVzZXJpYWxpemUgYSBzdHJpbmdcbiAgICogXG4gICAqIEBwYXJhbSBxdWVyeSBcbiAgICovXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZShxdWVyeTogc3RyaW5nKTogYW55IHtcbiAgICBsZXQgbWF0Y2g6IEFycmF5PHN0cmluZz47IC8vIFJlZ2V4IGZvciByZXBsYWNpbmcgYWRkaXRpb24gc3ltYm9sIHdpdGggYSBzcGFjZVxuICAgIGNvbnN0IHBsID0gL1xcKy9nO1xuICAgIGNvbnN0IHNlYXJjaCA9IC8oW14mPV0rKT0oW14mXSopL2c7XG4gICAgY29uc3QgZGVjb2RlID0gKHM6IHN0cmluZykgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMucmVwbGFjZShwbCwgXCIgXCIpKTtcbiAgICBjb25zdCBvYmo6IHt9ID0ge307XG4gICAgbWF0Y2ggPSBzZWFyY2guZXhlYyhxdWVyeSk7XG4gICAgd2hpbGUgKG1hdGNoKSB7XG4gICAgICBvYmpbZGVjb2RlKG1hdGNoWzFdKV0gPSBkZWNvZGUobWF0Y2hbMl0pO1xuICAgICAgbWF0Y2ggPSBzZWFyY2guZXhlYyhxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlcmUgYXJlIGR1cCBzY29wZXMgaW4gYSBnaXZlbiByZXF1ZXN0XG4gICAqIFxuICAgKiBAcGFyYW0gY2FjaGVkU2NvcGVzIFxuICAgKiBAcGFyYW0gc2NvcGVzIFxuICAgKi9cbiAgc3RhdGljIGlzSW50ZXJzZWN0aW5nU2NvcGVzKGNhY2hlZFNjb3BlczogQXJyYXk8c3RyaW5nPiwgc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgY2FjaGVkU2NvcGVzID0gdGhpcy5jb252ZXJ0VG9Mb3dlckNhc2UoY2FjaGVkU2NvcGVzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjb3Blcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNhY2hlZFNjb3Blcy5pbmRleE9mKHNjb3Blc1tpXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGdpdmVuIHNjb3BlIGlzIHByZXNlbnQgaW4gdGhlIHJlcXVlc3RcbiAgICogXG4gICAqIEBwYXJhbSBjYWNoZWRTY29wZXMgXG4gICAqIEBwYXJhbSBzY29wZXMgXG4gICAqL1xuICBzdGF0aWMgY29udGFpbnNTY29wZShjYWNoZWRTY29wZXM6IEFycmF5PHN0cmluZz4sIHNjb3BlczogQXJyYXk8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGNhY2hlZFNjb3BlcyA9IHRoaXMuY29udmVydFRvTG93ZXJDYXNlKGNhY2hlZFNjb3Blcyk7XG4gICAgcmV0dXJuIHNjb3Blcy5ldmVyeSgodmFsdWU6IGFueSk6IGJvb2xlYW4gPT4gY2FjaGVkU2NvcGVzLmluZGV4T2YodmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSA+PSAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0b0xvd2VyXG4gICAqIFxuICAgKiBAcGFyYW0gc2NvcGVzIFxuICAgKi9cbiAgc3RhdGljIGNvbnZlcnRUb0xvd2VyQ2FzZShzY29wZXM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gc2NvcGVzLm1hcChzY29wZSA9PiBzY29wZS50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZW1vdmUgb25lIGVsZW1lbnQgZnJvbSBhIHNjb3BlIGFycmF5XG4gICAqIFxuICAgKiBAcGFyYW0gc2NvcGVzIFxuICAgKiBAcGFyYW0gc2NvcGUgXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlRWxlbWVudChzY29wZXM6IEFycmF5PHN0cmluZz4sIHNjb3BlOiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gc2NvcGVzLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZSAhPT0gc2NvcGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY2ltYWwgdG8gSGV4XG4gICAqIFxuICAgKiBAcGFyYW0gbnVtIFxuICAgKi9cbiAgc3RhdGljIGRlY2ltYWxUb0hleChudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgdmFyIGhleDogc3RyaW5nID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICB3aGlsZSAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgIGhleCA9IFwiMFwiICsgaGV4O1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIE1TQUwgSlMgTGlicmFyeSBWZXJzaW9uXG4gICAqL1xuICBzdGF0aWMgZ2V0TGlicmFyeVZlcnNpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCIwLjIuNFwiO1xuICB9XG5cbiAgLyoqIFxuICAgICogR2l2ZW4gYSB1cmwgbGlrZSBodHRwczovL2E6Yi9jb21tb24vZD9lPWYjZywgYW5kIGEgdGVuYW50SWQsIHJldHVybnMgaHR0cHM6Ly9hOmIvdGVuYW50SWQvZFxuICAgICogXG4gICAgKiBAcGFyYW0gaHJlZiBUaGUgdXJsXG4gICAgKiBAcGFyYW0gdGVuYW50SWQgVGhlIHRlbmFudCBpZCB0byByZXBsYWNlXG4gICAgKi9cbiAgc3RhdGljIHJlcGxhY2VGaXJzdFBhdGgodXJsOiBzdHJpbmcsIHRlbmFudElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdGVuYW50SWQpIHtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuICAgIHZhciB1cmxPYmplY3QgPSB0aGlzLkdldFVybENvbXBvbmVudHModXJsKTtcbiAgICB2YXIgcGF0aEFycmF5ID0gdXJsT2JqZWN0LlBhdGhTZWdtZW50cztcbiAgICBpZiAocGF0aEFycmF5Lmxlbmd0aCAhPT0gMCAmJiAocGF0aEFycmF5WzBdID09PSBDb25zdGFudHMuY29tbW9uIHx8IHBhdGhBcnJheVswXSA9PT0gQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnMpKSB7XG4gICAgICBwYXRoQXJyYXlbMF0gPSB0ZW5hbnRJZDtcbiAgICAgIHVybCA9IHVybE9iamVjdC5Qcm90b2NvbCArIFwiLy9cIiArIHVybE9iamVjdC5Ib3N0TmFtZUFuZFBvcnQgKyBcIi9cIiArIHBhdGhBcnJheS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEdVSUQgLSB1c2VkIHRvIHBvcHVsYXRlIHN0YXRlP1xuICAgKiBAcmV0dXJucyBzdHJpbmcgKEdVSUQpXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTmV3R3VpZCgpOiBzdHJpbmcge1xuICAgIC8vIFJGQzQxMjI6IFRoZSB2ZXJzaW9uIDQgVVVJRCBpcyBtZWFudCBmb3IgZ2VuZXJhdGluZyBVVUlEcyBmcm9tIHRydWx5LXJhbmRvbSBvclxuICAgIC8vIHBzZXVkby1yYW5kb20gbnVtYmVycy5cbiAgICAvLyBUaGUgYWxnb3JpdGhtIGlzIGFzIGZvbGxvd3M6XG4gICAgLy8gICAgIFNldCB0aGUgdHdvIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyAoYml0cyA2IGFuZCA3KSBvZiB0aGVcbiAgICAvLyAgICAgICAgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZCB0byB6ZXJvIGFuZCBvbmUsIHJlc3BlY3RpdmVseS5cbiAgICAvLyAgICAgU2V0IHRoZSBmb3VyIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyAoYml0cyAxMiB0aHJvdWdoIDE1KSBvZiB0aGVcbiAgICAvLyAgICAgICAgdGltZV9oaV9hbmRfdmVyc2lvbiBmaWVsZCB0byB0aGUgNC1iaXQgdmVyc2lvbiBudW1iZXIgZnJvbVxuICAgIC8vICAgICAgICBTZWN0aW9uIDQuMS4zLiBWZXJzaW9uNFxuICAgIC8vICAgICBTZXQgYWxsIHRoZSBvdGhlciBiaXRzIHRvIHJhbmRvbWx5IChvciBwc2V1ZG8tcmFuZG9tbHkpIGNob3NlblxuICAgIC8vICAgICB2YWx1ZXMuXG4gICAgLy8gVVVJRCAgICAgICAgICAgICAgICAgICA9IHRpbWUtbG93IFwiLVwiIHRpbWUtbWlkIFwiLVwidGltZS1oaWdoLWFuZC12ZXJzaW9uIFwiLVwiY2xvY2stc2VxLXJlc2VydmVkIGFuZCBsb3coMmhleE9jdGV0KVwiLVwiIG5vZGVcbiAgICAvLyB0aW1lLWxvdyAgICAgICAgICAgICAgID0gNGhleE9jdGV0XG4gICAgLy8gdGltZS1taWQgICAgICAgICAgICAgICA9IDJoZXhPY3RldFxuICAgIC8vIHRpbWUtaGlnaC1hbmQtdmVyc2lvbiAgPSAyaGV4T2N0ZXRcbiAgICAvLyBjbG9jay1zZXEtYW5kLXJlc2VydmVkID0gaGV4T2N0ZXQ6XG4gICAgLy8gY2xvY2stc2VxLWxvdyAgICAgICAgICA9IGhleE9jdGV0XG4gICAgLy8gbm9kZSAgICAgICAgICAgICAgICAgICA9IDZoZXhPY3RldFxuICAgIC8vIEZvcm1hdDogeHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XG4gICAgLy8geSBjb3VsZCBiZSAxMDAwLCAxMDAxLCAxMDEwLCAxMDExIHNpbmNlIG1vc3Qgc2lnbmlmaWNhbnQgdHdvIGJpdHMgbmVlZHMgdG8gYmUgMTBcbiAgICAvLyB5IHZhbHVlcyBhcmUgOCwgOSwgQSwgQlxuXG4gICAgY29uc3QgY3J5cHRvT2JqOiBDcnlwdG8gPSB3aW5kb3cuY3J5cHRvOyAvLyBmb3IgSUUgMTFcbiAgICBpZiAoY3J5cHRvT2JqICYmIGNyeXB0b09iai5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIGNvbnN0IGJ1ZmZlcjogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KDE2KTtcbiAgICAgIGNyeXB0b09iai5nZXRSYW5kb21WYWx1ZXMoYnVmZmVyKTtcblxuICAgICAgLy9idWZmZXJbNl0gYW5kIGJ1ZmZlcls3XSByZXByZXNlbnRzIHRoZSB0aW1lX2hpX2FuZF92ZXJzaW9uIGZpZWxkLiBXZSB3aWxsIHNldCB0aGUgZm91ciBtb3N0IHNpZ25pZmljYW50IGJpdHMgKDQgdGhyb3VnaCA3KSBvZiBidWZmZXJbNl0gdG8gcmVwcmVzZW50IGRlY2ltYWwgbnVtYmVyIDQgKFVVSUQgdmVyc2lvbiBudW1iZXIpLlxuICAgICAgYnVmZmVyWzZdIHw9IDB4NDA7IC8vYnVmZmVyWzZdIHwgMDEwMDAwMDAgd2lsbCBzZXQgdGhlIDYgYml0IHRvIDEuXG4gICAgICBidWZmZXJbNl0gJj0gMHg0ZjsgLy9idWZmZXJbNl0gJiAwMTAwMTExMSB3aWxsIHNldCB0aGUgNCwgNSwgYW5kIDcgYml0IHRvIDAgc3VjaCB0aGF0IGJpdHMgNC03ID09IDAxMDAgPSBcIjRcIi5cblxuICAgICAgLy9idWZmZXJbOF0gcmVwcmVzZW50cyB0aGUgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZCBmaWVsZC4gV2Ugd2lsbCBzZXQgdGhlIHR3byBtb3N0IHNpZ25pZmljYW50IGJpdHMgKDYgYW5kIDcpIG9mIHRoZSBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkIHRvIHplcm8gYW5kIG9uZSwgcmVzcGVjdGl2ZWx5LlxuICAgICAgYnVmZmVyWzhdIHw9IDB4ODA7IC8vYnVmZmVyWzhdIHwgMTAwMDAwMDAgd2lsbCBzZXQgdGhlIDcgYml0IHRvIDEuXG4gICAgICBidWZmZXJbOF0gJj0gMHhiZjsgLy9idWZmZXJbOF0gJiAxMDExMTExMSB3aWxsIHNldCB0aGUgNiBiaXQgdG8gMC5cblxuICAgICAgcmV0dXJuIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMF0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclsxXSlcbiAgICAgICAgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzJdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbM10pXG4gICAgICAgICsgXCItXCIgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzRdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbNV0pXG4gICAgICAgICsgXCItXCIgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzZdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbN10pXG4gICAgICAgICsgXCItXCIgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzhdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbOV0pXG4gICAgICAgICsgXCItXCIgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzEwXSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzExXSlcbiAgICAgICAgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzEyXSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzEzXSlcbiAgICAgICAgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzE0XSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzE1XSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgZ3VpZEhvbGRlcjogc3RyaW5nID0gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIjtcbiAgICAgIGNvbnN0IGhleDogc3RyaW5nID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XG4gICAgICBsZXQgcjogbnVtYmVyID0gMDtcbiAgICAgIGxldCBndWlkUmVzcG9uc2U6IHN0cmluZyA9IFwiXCI7XG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgMzY7IGkrKykge1xuICAgICAgICBpZiAoZ3VpZEhvbGRlcltpXSAhPT0gXCItXCIgJiYgZ3VpZEhvbGRlcltpXSAhPT0gXCI0XCIpIHtcbiAgICAgICAgICAvLyBlYWNoIHggYW5kIHkgbmVlZHMgdG8gYmUgcmFuZG9tXG4gICAgICAgICAgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGd1aWRIb2xkZXJbaV0gPT09IFwieFwiKSB7XG4gICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGhleFtyXTtcbiAgICAgICAgfSBlbHNlIGlmIChndWlkSG9sZGVyW2ldID09PSBcInlcIikge1xuICAgICAgICAgIC8vIGNsb2NrLXNlcS1hbmQtcmVzZXJ2ZWQgZmlyc3QgaGV4IGlzIGZpbHRlcmVkIGFuZCByZW1haW5pbmcgaGV4IHZhbHVlcyBhcmUgcmFuZG9tXG4gICAgICAgICAgciAmPSAweDM7IC8vIGJpdCBhbmQgd2l0aCAwMDExIHRvIHNldCBwb3MgMiB0byB6ZXJvID8wPz9cbiAgICAgICAgICByIHw9IDB4ODsgLy8gc2V0IHBvcyAzIHRvIDEgYXMgMT8/P1xuICAgICAgICAgIGd1aWRSZXNwb25zZSArPSBoZXhbcl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGd1aWRIb2xkZXJbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBndWlkUmVzcG9uc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIFxuICAgKiBQYXJzZXMgb3V0IHRoZSBjb21wb25lbnRzIGZyb20gYSB1cmwgc3RyaW5nLlxuICAgKiBcbiAgICogQHBhcmFtcyBzdHJpbmdcbiAgICogQHJldHVybnMgQW4gb2JqZWN0IHdpdGggdGhlIHZhcmlvdXMgY29tcG9uZW50cy4gUGxlYXNlIGNhY2hlIHRoaXMgdmFsdWUgaW5zdGVkIG9mIGNhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyBvbiB0aGUgc2FtZSB1cmwuXG4gICAqL1xuICBzdGF0aWMgR2V0VXJsQ29tcG9uZW50cyh1cmw6IHN0cmluZyk6IElVcmkge1xuICAgIGlmICghdXJsKSB7XG4gICAgICB0aHJvdyBcIlVybCByZXF1aXJlZFwiO1xuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2N1cnRpc3ovMTExMzliMmNmY2FlZjRhMjYxZTBcbiAgICB2YXIgcmVnRXggPSBSZWdFeHAoXCJeKChbXjovPyNdKyk6KT8oLy8oW14vPyNdKikpPyhbXj8jXSopKFxcXFw/KFteI10qKSk/KCMoLiopKT9cIik7XG5cbiAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXgpO1xuXG4gICAgaWYgKCFtYXRjaCB8fCBtYXRjaC5sZW5ndGggPCA2KSB7XG4gICAgICB0aHJvdyBcIlZhbGlkIHVybCByZXF1aXJlZFwiO1xuICAgIH1cblxuICAgIGxldCB1cmxDb21wb25lbnRzID0gPElVcmk+e1xuICAgICAgUHJvdG9jb2w6IG1hdGNoWzFdLFxuICAgICAgSG9zdE5hbWVBbmRQb3J0OiBtYXRjaFs0XSxcbiAgICAgIEFic29sdXRlUGF0aDogbWF0Y2hbNV1cbiAgICB9O1xuXG4gICAgbGV0IHBhdGhTZWdtZW50cyA9IHVybENvbXBvbmVudHMuQWJzb2x1dGVQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICBwYXRoU2VnbWVudHMgPSBwYXRoU2VnbWVudHMuZmlsdGVyKCh2YWwpID0+IHZhbCAmJiB2YWwubGVuZ3RoID4gMCk7IC8vIHJlbW92ZSBlbXB0eSBlbGVtZW50c1xuICAgIHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzID0gcGF0aFNlZ21lbnRzO1xuICAgIHJldHVybiB1cmxDb21wb25lbnRzO1xuICB9XG5cblxuICAvKipcbiAgICogR2l2ZW4gYSB1cmwgb3IgcGF0aCwgYXBwZW5kIGEgdHJhaWxpbmcgc2xhc2ggaWYgb25lIGRvZXNudCBleGlzdFxuICAgKiBcbiAgICogQHBhcmFtIHVybCBcbiAgICovXG4gIHN0YXRpYyBDYW5vbmljYWxpemVVcmkodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh1cmwpIHtcbiAgICAgIHVybCA9IHVybC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmICh1cmwgJiYgIVV0aWxzLmVuZHNXaXRoKHVybCwgXCIvXCIpKSB7XG4gICAgICB1cmwgKz0gXCIvXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKiBcbiAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHVybCBlbmRzIHdpdGggdGhlIHN1ZmZpeFxuICAgICogUmVxdWlyZWQgYmVjYXVzZSB3ZSBhcmUgY29tcGlsaW5nIGZvciBlczUgaW5zdGVhZCBvZiBlczZcbiAgICAqIFxuICAgICogQHBhcmFtIHVybFxuICAgICogQHBhcmFtIHN0clxuICAgICovXG4gIHN0YXRpYyBlbmRzV2l0aCh1cmw6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXVybCB8fCAhc3VmZml4KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC5pbmRleE9mKHN1ZmZpeCwgdXJsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1NTTyhleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nKSB7XG4gICAgcmV0dXJuICEoZXh0cmFRdWVyeVBhcmFtZXRlcnMgJiYgKChleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5sb2dpbl9oaW50KSAhPT0gLTEgfHwgZXh0cmFRdWVyeVBhcmFtZXRlcnMuaW5kZXhPZihDb25zdGFudHMuc2lkKSAhPT0gLTEpKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyBleHRyYVF1ZXJ5UGFyYW1ldGVycyB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIgZm9yIHRoZSBBdXRoZW50aWNhdGlvblBhcmFtZXRlcnMgc2V0IGJ5IHRoZSBkZXZlbG9wZXJcbiAgICogaW4gYW55IGxvZ2luKCkgb3IgYWNxdWlyZVRva2VuKCkgY2FsbHNcbiAgICogXG4gICAqIC8vVE9ETzogY2hlY2sgaG93IHRoaXMgYmVoYXZlcyB3aGVuIGRvbWFpbl9oaW50IG9ubHkgaXMgc2VudCBpbiBleHRyYXBhcmFtZXRlcnMgYW5kIGlkVG9rZW4gaGFzIG5vIHVwbi5cbiAgICogLy9UT0RPOiBUZXN0IGFsbCBwYXRocyB0aG9yb3VnaGx5XG4gICAqIFxuICAgKiBAcGFyYW0gaWRUb2tlbk9iamVjdCBcbiAgICogQHBhcmFtIGxvZ2luX2hpbnQgXG4gICAqIEBwYXJhbSBleHRyYVF1ZXJ5UGFyYW1ldGVycyBcbiAgICovXG4gIHN0YXRpYyBjb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyKGlkVG9rZW5PYmplY3Q6IGFueSwgbG9naW5faGludDogc3RyaW5nLCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZykge1xuICAgIFxuICAgIC8vIGlmIGxvZ2luX2hpbnQgaXMgc2VudCBhcyBhIHBhcnQgb2YgdGhlIHJlcXVlc3QsIGdpdmUgZGV2ZWxvcGVyIHRoZSBwcmVmZXJlbmNlXG4gICAgaWYgKGxvZ2luX2hpbnQpIHtcbiAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyArPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBsb2dpbl9oaW50ICsgXCImXCIgKyBDb25zdGFudHMuZG9tYWluX2hpbnQgKyBcIj1cIiArIENvbnN0YW50cy5vcmdhbml6YXRpb25zO1xuICAgIH1cbiAgICBcbiAgICAvLyBlbHNlIGV4dHJhY3QgdGhlIGxvZ2luX2hpbnQgZnJvbSB0aGUgaWRUb2tlbjsgbG9naW5faGludCA9IGlkVG9rZW4udXBuXG4gICAgaWYgKGlkVG9rZW5PYmplY3QpIHtcbiAgICAgIGlmIChpZFRva2VuT2JqZWN0Lmhhc093blByb3BlcnR5KENvbnN0YW50cy51cG4pKSB7XG4gICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcihleHRyYVF1ZXJ5UGFyYW1ldGVycywgQ29uc3RhbnRzLmxvZ2luX2hpbnQpO1xuICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMudXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIoZXh0cmFRdWVyeVBhcmFtZXRlcnMsIENvbnN0YW50cy5kb21haW5faGludCk7XG4gICAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyArPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBpZFRva2VuT2JqZWN0LnVwbiArIFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBpZFRva2VuT2JqZWN0LnVwbiArIFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcihleHRyYVF1ZXJ5UGFyYW1ldGVycywgQ29uc3RhbnRzLmRvbWFpbl9oaW50KTtcbiAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dHJhUXVlcnlQYXJhbWV0ZXJzICs9IFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFV0aWxzIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgbG9naW5faGludCBhbmQgZG9tYWluX2hpbnQgZnJvbSB0aGUgaS9wIGV4dHJhUXVlcnlQYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSB1cmwgXG4gICAqIEBwYXJhbSBuYW1lIFxuICAgKi9cbiAgc3RhdGljIHVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKHVybDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmlzRW1wdHkodXJsKSkge1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICAvL1xuICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCIoXFxcXCZcIiArIG5hbWUgKyBcIj0pW15cXCZdK1wiKTtcbiAgICB1cmwgPSB1cmwucmVwbGFjZShyZWdleCwgXCJcIik7XG5cbiAgICAvLyBuYW1lPXZhbHVlJlxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIihcIiArIG5hbWUgKyBcIj0pW15cXCZdKyZcIik7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UocmVnZXgsIFwiXCIpO1xuXG4gICAgLy8gbmFtZT12YWx1ZVxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIihcIiArIG5hbWUgKyBcIj0pW15cXCZdK1wiKTtcbiAgICB1cmwgPSB1cmwucmVwbGFjZShyZWdleCwgXCJcIik7XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdCBleHRyYVF1ZXJ5UGFyYW1ldGVycyBmcm9tIHRoZSByZXF1ZXN0XG4gICAqIFxuICAgKi9cbiAgc3RhdGljIGNvbnN0cnVjdEV4dHJhUXVlcnlQYXJhbWV0ZXJzU3RyaW5nIChyZXFFeHRyYVF1ZXJ5UGFyYW1ldGVyczoge1toZWFkZXI6IHN0cmluZ106IHN0cmluZ30pOiBzdHJpbmcge1xuICAgICAgXG4gICAgbGV0IGV4dHJhUXVlcnlQYXJhbWV0ZXJzOiBzdHJpbmcgPSBudWxsO1xuICAgIGxldCB2YWx1ZTogc3RyaW5nO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHJlcUV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICBcbiAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHJlcUV4dHJhUXVlcnlQYXJhbWV0ZXJzW2tleV07XG4gICAgICBcbiAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzID09IG51bGwpIHtcbiAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFwiJlwiICsga2V5ICsgXCI9XCIgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyArPSBcIiZcIiArIGtleSArIFwiPVwiICsgdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XG4gIH1cblxufVxuIiwiLypcclxuICAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAgKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gICogIE1JVCBMaWNlbnNlXHJcbiAgKlxyXG4gICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAgKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcclxuICAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAgKiBjb25kaXRpb25zOlxyXG4gICpcclxuICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICAqXHJcbiAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXHJcbiAgKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAgKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAgKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gICovXHJcblxyXG4vKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc3RhbnRzIHtcclxuICAgIHN0YXRpYyBnZXQgZXJyb3JEZXNjcmlwdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJlcnJvcl9kZXNjcmlwdGlvblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImVycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc2NvcGUoKTogc3RyaW5nIHsgcmV0dXJuIFwic2NvcGVcIjsgfVxyXG4gICAgc3RhdGljIGdldCBhY3F1aXJlVG9rZW5Vc2VyKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYWNxdWlyZVRva2VuVXNlclwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGNsaWVudEluZm8oKTogc3RyaW5nIHsgcmV0dXJuIFwiY2xpZW50X2luZm9cIjsgfVxyXG4gICAgc3RhdGljIGdldCBjbGllbnRJZCgpOiBzdHJpbmcgeyByZXR1cm4gXCJjbGllbnRJZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGF1dGhvcml0eSgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmF1dGhvcml0eVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGlkVG9rZW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiaWRfdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBhY2Nlc3NUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJhY2Nlc3NfdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBleHBpcmVzSW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiZXhwaXJlc19pblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHNlc3Npb25TdGF0ZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJzZXNzaW9uX3N0YXRlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbXNhbENsaWVudEluZm8oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5jbGllbnQuaW5mb1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWxFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmVycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbXNhbEVycm9yRGVzY3JpcHRpb24oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5lcnJvci5kZXNjcmlwdGlvblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWxTZXNzaW9uU3RhdGUoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zZXNzaW9uLnN0YXRlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgdG9rZW5LZXlzKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwudG9rZW4ua2V5c1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGFjY2Vzc1Rva2VuS2V5KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYWNjZXNzLnRva2VuLmtleVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGV4cGlyYXRpb25LZXkoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5leHBpcmF0aW9uLmtleVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHN0YXRlTG9naW4oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5sb2dpblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHN0YXRlQWNxdWlyZVRva2VuKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuc3RhdGUuYWNxdWlyZVRva2VuXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc3RhdGVSZW5ldygpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLnN0YXRlLnJlbmV3XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbm9uY2VJZFRva2VuKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwubm9uY2UuaWR0b2tlblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVzZXJOYW1lKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwudXNlcm5hbWVcIjsgfVxyXG4gICAgc3RhdGljIGdldCBpZFRva2VuS2V5KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuaWR0b2tlblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luUmVxdWVzdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmxvZ2luLnJlcXVlc3RcIjsgfVxyXG4gICAgc3RhdGljIGdldCBsb2dpbkVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwubG9naW4uZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCByZW5ld1N0YXR1cygpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLnRva2VuLnJlbmV3LnN0YXR1c1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWwoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG5vX2FjY291bnQoKTogc3RyaW5nIHsgcmV0dXJuIFwiTk9fQUNDT1VOVFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luX2hpbnQoKTogc3RyaW5nIHsgcmV0dXJuIFwibG9naW5faGludFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGRvbWFpbl9oaW50KCk6IHN0cmluZyB7IHJldHVybiBcImRvbWFpbl9oaW50XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgb3JnYW5pemF0aW9ucygpOiBzdHJpbmcgeyByZXR1cm4gXCJvcmdhbml6YXRpb25zXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgY29uc3VtZXJzKCk6IHN0cmluZyB7IHJldHVybiBcImNvbnN1bWVyc1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGNvbnN1bWVyc1V0aWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiOTE4ODA0MGQtNmM2Ny00YzViLWIxMTItMzZhMzA0YjY2ZGFkXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc2lkKCk6IHN0cmluZyB7IHJldHVybiBcInNpZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVwbigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1cG5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBhZGFsSWRUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJhZGFsLmlkdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBwcm9tcHRfc2VsZWN0X2FjY291bnQoKTogc3RyaW5nIHsgcmV0dXJuIFwiJnByb21wdD1zZWxlY3RfYWNjb3VudFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHByb21wdF9ub25lKCk6IHN0cmluZyB7IHJldHVybiBcIiZwcm9tcHQ9bm9uZVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHByb21wdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJwcm9tcHRcIjsgfVxyXG4gICAgc3RhdGljIGdldCByZXNwb25zZV9tb2RlX2ZyYWdtZW50KCk6IHN0cmluZyB7IHJldHVybiBcIiZyZXNwb25zZV9tb2RlPWZyYWdtZW50XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcmVzb3VyY2VEZWxpbWV0ZXIoKTogc3RyaW5nIHsgcmV0dXJuIFwifFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNDYW5jZWxsZWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiQ2FuY2VsZWRcIjsgfVxyXG4gICAgc3RhdGljIGdldCB0b2tlblJlbmV3U3RhdHVzQ29tcGxldGVkKCk6IHN0cmluZyB7IHJldHVybiBcIkNvbXBsZXRlZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzKCk6IHN0cmluZyB7IHJldHVybiBcIkluIFByb2dyZXNzXCI7IH1cclxuICAgIHByaXZhdGUgc3RhdGljIF9wb3BVcFdpZHRoOiBudW1iZXIgPSA0ODM7XHJcbiAgICBzdGF0aWMgZ2V0IHBvcFVwV2lkdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3BvcFVwV2lkdGg7IH1cclxuICAgIHN0YXRpYyBzZXQgcG9wVXBXaWR0aCh3aWR0aDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuX3BvcFVwV2lkdGggPSB3aWR0aDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIF9wb3BVcEhlaWdodDogbnVtYmVyID0gNjAwO1xyXG4gICAgc3RhdGljIGdldCBwb3BVcEhlaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcG9wVXBIZWlnaHQ7IH1cclxuICAgIHN0YXRpYyBzZXQgcG9wVXBIZWlnaHQoaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5fcG9wVXBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luKCk6IHN0cmluZyB7IHJldHVybiBcIkxPR0lOXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcmVuZXdUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJSRU5FV19UT0tFTlwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVua25vd24oKTogc3RyaW5nIHsgcmV0dXJuIFwiVU5LTk9XTlwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVybEhhc2goKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC51cmxIYXNoXCI7IH1cclxuICAgICAgc3RhdGljIGdldCBhbmd1bGFyTG9naW5SZXF1ZXN0KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYW5ndWxhci5sb2dpbi5yZXF1ZXN0XCI7IH1cclxuICAgICAgc3RhdGljIGdldCB1c2VySWRlbnRpZmllcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VySWRlbnRpZmllclwiOyB9XHJcbiAgICAgIHN0YXRpYyBnZXQgY29tbW9uKCk6IHN0cmluZyB7IHJldHVybiBcImNvbW1vblwiOyB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBFcnJvckNvZGVzIHtcclxuICAgIHN0YXRpYyBnZXQgbG9naW5Qcm9ncmVzc0Vycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImxvZ2luX3Byb2dyZXNzX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJhY3F1aXJldG9rZW5fcHJvZ3Jlc3NfZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCBpbnB1dFNjb3Blc0Vycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImlucHV0X3Njb3Blc19lcnJvclwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGVuZHBvaW50UmVzb2x1dGlvbkVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImVuZHBvaW50c19yZXNvbHV0aW9uX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcG9wVXBXaW5kb3dFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJwb3B1cF93aW5kb3dfZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCB1c2VyTG9naW5FcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VyX2xvZ2luX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgdXNlckNhbmNlbGxlZEVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcInVzZXJfY2FuY2VsbGVkXCI7IH1cclxuICB9XHJcbiAgXHJcbiAgLypcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEVycm9yRGVzY3JpcHRpb24ge1xyXG4gICAgICBzdGF0aWMgZ2V0IGxvZ2luUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiTG9naW4gaXMgaW4gcHJvZ3Jlc3NcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCBhY3F1aXJlVG9rZW5Qcm9ncmVzc0Vycm9yKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICByZXR1cm4gXCJBY3F1aXJlIHRva2VuIGlzIGluIHByb2dyZXNzXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRpYyBnZXQgaW5wdXRTY29wZXNFcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiSW52YWxpZCB2YWx1ZSBvZiBpbnB1dCBzY29wZXMgcHJvdmlkZWRcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCBlbmRwb2ludFJlc29sdXRpb25FcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiRW5kcG9pbnRzIGNhbm5vdCBiZSByZXNvbHZlZFwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdGF0aWMgZ2V0IHBvcFVwV2luZG93RXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIkVycm9yIG9wZW5pbmcgcG9wdXAgd2luZG93LiBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IGFyZSB1c2luZyBJRSBvciBpZiBwb3B1cHMgYXJlIGJsb2NrZWQgaW4gdGhlIGJyb3dzZXIuXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRpYyBnZXQgdXNlckxvZ2luRXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCB1c2VyQ2FuY2VsbGVkRXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIlVzZXIgY2xvc2VkIHRoZSBwb3B1cCB3aW5kb3cgYW5kIGNhbmNlbGxlZCB0aGUgZmxvd1wiO1xyXG4gICAgICB9XHJcblxyXG4gIH1cclxuIiwiaW1wb3J0IHsgSVVyaSB9IGZyb20gXCIuL0lVcmlcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcbmltcG9ydCB7IElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZSB9IGZyb20gXCIuL0lUZW5hbnREaXNjb3ZlcnlSZXNwb25zZVwiO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vRXJyb3JNZXNzYWdlXCI7XG5pbXBvcnQgeyBYaHJDbGllbnQgfSBmcm9tIFwiLi9YSFJDbGllbnRcIjtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGVudW0gQXV0aG9yaXR5VHlwZSB7XG4gIEFhZCxcbiAgQWRmcyxcbiAgQjJDXG59XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBdXRob3JpdHkge1xuICBjb25zdHJ1Y3RvcihhdXRob3JpdHk6IHN0cmluZywgdmFsaWRhdGVBdXRob3JpdHk6IGJvb2xlYW4pIHtcbiAgICB0aGlzLklzVmFsaWRhdGlvbkVuYWJsZWQgPSB2YWxpZGF0ZUF1dGhvcml0eTtcbiAgICB0aGlzLkNhbm9uaWNhbEF1dGhvcml0eSA9IGF1dGhvcml0eTtcblxuICAgIHRoaXMudmFsaWRhdGVBc1VyaSgpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGdldCBBdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGU7XG5cbiAgcHVibGljIElzVmFsaWRhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG5cbiAgcHVibGljIGdldCBUZW5hbnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLlBhdGhTZWdtZW50c1swXTtcbiAgfVxuXG4gIHByaXZhdGUgdGVuYW50RGlzY292ZXJ5UmVzcG9uc2U6IElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZTtcblxuICBwdWJsaWMgZ2V0IEF1dGhvcml6YXRpb25FbmRwb2ludCgpOiBzdHJpbmcge1xuICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xuICAgIHJldHVybiB0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlLkF1dGhvcml6YXRpb25FbmRwb2ludC5yZXBsYWNlKFwie3RlbmFudH1cIiwgdGhpcy5UZW5hbnQpO1xuICB9XG5cbiAgcHVibGljIGdldCBFbmRTZXNzaW9uRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICB0aGlzLnZhbGlkYXRlUmVzb2x2ZWQoKTtcbiAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5FbmRTZXNzaW9uRW5kcG9pbnQucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgU2VsZlNpZ25lZEp3dEF1ZGllbmNlKCk6IHN0cmluZyB7XG4gICAgdGhpcy52YWxpZGF0ZVJlc29sdmVkKCk7XG4gICAgcmV0dXJuIHRoaXMudGVuYW50RGlzY292ZXJ5UmVzcG9uc2UuSXNzdWVyLnJlcGxhY2UoXCJ7dGVuYW50fVwiLCB0aGlzLlRlbmFudCk7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlUmVzb2x2ZWQoKSB7XG4gICAgaWYgKCF0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBcIlBsZWFzZSBjYWxsIFJlc29sdmVFbmRwb2ludHNBc3luYyBmaXJzdFwiO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIEEgVVJMIHRoYXQgaXMgdGhlIGF1dGhvcml0eSBzZXQgYnkgdGhlIGRldmVsb3BlclxuICAgKi9cbiAgcHVibGljIGdldCBDYW5vbmljYWxBdXRob3JpdHkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxBdXRob3JpdHk7XG4gIH1cblxuICBwdWJsaWMgc2V0IENhbm9uaWNhbEF1dGhvcml0eSh1cmw6IHN0cmluZykge1xuICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5ID0gVXRpbHMuQ2Fub25pY2FsaXplVXJpKHVybCk7XG4gICAgdGhpcy5jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgY2Fub25pY2FsQXV0aG9yaXR5OiBzdHJpbmc7XG4gIHByaXZhdGUgY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50czogSVVyaTtcblxuICBwdWJsaWMgZ2V0IENhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMoKTogSVVyaSB7XG4gICAgaWYgKCF0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IFV0aWxzLkdldFVybENvbXBvbmVudHModGhpcy5DYW5vbmljYWxBdXRob3JpdHkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM7XG4gIH1cblxuICAvKlxuICAgKiAvLyBodHRwOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1kaXNjb3ZlcnktMV8wLmh0bWwjUHJvdmlkZXJNZXRhZGF0YVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCBEZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuQ2Fub25pY2FsQXV0aG9yaXR5fXYyLjAvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gO1xuICB9XG5cbiAgLypcbiAgICogR2l2ZW4gYSBzdHJpbmcsIHZhbGlkYXRlIHRoYXQgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly9kb21haW4vcGF0aFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUFzVXJpKCkge1xuICAgIGxldCBjb21wb25lbnRzO1xuICAgIHRyeSB7XG4gICAgICBjb21wb25lbnRzID0gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IEVycm9yTWVzc2FnZS5pbnZhbGlkQXV0aG9yaXR5VHlwZTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbXBvbmVudHMuUHJvdG9jb2wgfHwgY29tcG9uZW50cy5Qcm90b2NvbC50b0xvd2VyQ2FzZSgpICE9PSBcImh0dHBzOlwiKSB7XG4gICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYXV0aG9yaXR5VXJpSW5zZWN1cmU7XG4gICAgfVxuXG4gICAgaWYgKCFjb21wb25lbnRzLlBhdGhTZWdtZW50cyB8fCBjb21wb25lbnRzLlBhdGhTZWdtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYXV0aG9yaXR5VXJpSW52YWxpZFBhdGg7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogQ2FsbHMgdGhlIE9JREMgZW5kcG9pbnQgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlXG4gICAqL1xuICBwcml2YXRlIERpc2NvdmVyRW5kcG9pbnRzKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludDogc3RyaW5nKTogUHJvbWlzZTxJVGVuYW50RGlzY292ZXJ5UmVzcG9uc2U+IHtcbiAgICBsZXQgY2xpZW50ID0gbmV3IFhockNsaWVudCgpO1xuICAgIHJldHVybiBjbGllbnQuc2VuZFJlcXVlc3RBc3luYyhvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQsIFwiR0VUXCIsIC8qZW5hYmxlQ2FjaGluZzogKi8gdHJ1ZSlcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiA8SVRlbmFudERpc2NvdmVyeVJlc3BvbnNlPntcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uRW5kcG9pbnQ6IHJlc3BvbnNlLmF1dGhvcml6YXRpb25fZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgRW5kU2Vzc2lvbkVuZHBvaW50OiByZXNwb25zZS5lbmRfc2Vzc2lvbl9lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBJc3N1ZXI6IHJlc3BvbnNlLmlzc3VlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZS5cbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgYXV0aG9yaXR5IGlzIGluIHRoZSBjYWNoZVxuICAgKiBEaXNjb3ZlciBlbmRwb2ludHMgdmlhIG9wZW5pZC1jb25maWd1cmF0aW9uXG4gICAqIElmIHN1Y2Nlc3NmdWwsIGNhY2hlcyB0aGUgZW5kcG9pbnQgZm9yIGxhdGVyIHVzZSBpbiBPSURDXG4gICAqL1xuICBwdWJsaWMgUmVzb2x2ZUVuZHBvaW50c0FzeW5jKCk6IFByb21pc2U8QXV0aG9yaXR5PiB7XG4gICAgbGV0IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9IFwiXCI7XG4gICAgcmV0dXJuIHRoaXMuR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKS50aGVuKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlID0+IHtcbiAgICAgIG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlO1xuICAgICAgcmV0dXJuIHRoaXMuRGlzY292ZXJFbmRwb2ludHMob3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KTtcbiAgICB9KS50aGVuKCh0ZW5hbnREaXNjb3ZlcnlSZXNwb25zZTogSVRlbmFudERpc2NvdmVyeVJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlID0gdGVuYW50RGlzY292ZXJ5UmVzcG9uc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIFRlbmFudERpc2NvdmVyeUVuZHBvaW50XG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0geVtvcFswXSAmIDIgPyBcInJldHVyblwiIDogb3BbMF0gPyBcInRocm93XCIgOiBcIm5leHRcIl0pICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gWzAsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7ICB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAob1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xyXG59IiwiLypcbiAgKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gICogIE1JVCBMaWNlbnNlXG4gICpcbiAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAgKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAgKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gICogY29uZGl0aW9uczpcbiAgKlxuICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gICpcbiAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAgKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gICovXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvck1lc3NhZ2Uge1xuICBzdGF0aWMgZ2V0IGF1dGhvcml0eVVyaUludmFsaWRQYXRoKCk6IHN0cmluZyB7IHJldHVybiBcIkF1dGhvcml0eVVyaUludmFsaWRQYXRoXCI7IH1cbiAgc3RhdGljIGdldCBhdXRob3JpdHlVcmlJbnNlY3VyZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJBdXRob3JpdHlVcmlJbnNlY3VyZVwiOyB9XG4gIHN0YXRpYyBnZXQgaW52YWxpZEF1dGhvcml0eVR5cGUoKTogc3RyaW5nIHsgcmV0dXJuIFwiSW52YWxpZEF1dGhvcml0eVR5cGVcIjsgfVxuICBzdGF0aWMgZ2V0IHVuc3VwcG9ydGVkQXV0aG9yaXR5VmFsaWRhdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJVbnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb25cIjsgfVxuICBzdGF0aWMgZ2V0IGIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoKCk6IHN0cmluZyB7IHJldHVybiBcIkIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoXCI7IH1cbn1cbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxyXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gKiAgTUlUIExpY2Vuc2VcclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxyXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXHJcbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAqIGNvbmRpdGlvbnM6XHJcbiAqXHJcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4gKlxyXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcclxuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxyXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbkNhY2hlSXRlbVwiO1xyXG5pbXBvcnQgeyBBY2Nlc3NUb2tlbktleSB9IGZyb20gXCIuL0FjY2Vzc1Rva2VuS2V5XCI7XHJcbmltcG9ydCB7IEFjY2Vzc1Rva2VuVmFsdWUgfSBmcm9tIFwiLi9BY2Nlc3NUb2tlblZhbHVlXCI7XHJcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi9BdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzXCI7XHJcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBIb21lQWNjb3VudElkZW50aWZpZXIgfSBmcm9tIFwiLi9Ib21lQWNjb3VudElkZW50aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uc3RhbnRzLCBFcnJvckNvZGVzLCBFcnJvckRlc2NyaXB0aW9uIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IElkVG9rZW4gfSBmcm9tIFwiLi9JZFRva2VuXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSBcIi4vU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBUb2tlblJlc3BvbnNlIH0gZnJvbSBcIi4vUmVxdWVzdEluZm9cIjtcclxuaW1wb3J0IHsgQWNjb3VudCB9IGZyb20gXCIuL0FjY291bnRcIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgeyBBdXRob3JpdHlGYWN0b3J5IH0gZnJvbSBcIi4vQXV0aG9yaXR5RmFjdG9yeVwiO1xyXG5pbXBvcnQgeyBUQ29uZmlndXJhdGlvbiwgQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25cIjtcclxuaW1wb3J0IHsgQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzIH0gZnJvbSBcIi4vUmVxdWVzdFwiO1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgbXNhbDogT2JqZWN0O1xyXG4gICAgQ3VzdG9tRXZlbnQ6IEN1c3RvbUV2ZW50O1xyXG4gICAgRXZlbnQ6IEV2ZW50O1xyXG4gICAgYWN0aXZlUmVuZXdhbHM6IHt9O1xyXG4gICAgcmVuZXdTdGF0ZXM6IEFycmF5PHN0cmluZz47XHJcbiAgICBjYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXM6IHt9O1xyXG4gICAgY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlczoge307XHJcbiAgICBvcGVuZWRXaW5kb3dzOiBBcnJheTxXaW5kb3c+O1xyXG4gICAgcmVxdWVzdFR5cGU6IHN0cmluZztcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmxldCBSZXNwb25zZVR5cGVzID0ge1xyXG4gIGlkX3Rva2VuOiBcImlkX3Rva2VuXCIsXHJcbiAgdG9rZW46IFwidG9rZW5cIixcclxuICBpZF90b2tlbl90b2tlbjogXCJpZF90b2tlbiB0b2tlblwiXHJcbn07XHJcblxyXG4vKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlUmVzdWx0IHtcclxuICBlcnJvckRlc2M6IHN0cmluZztcclxuICB0b2tlbjogc3RyaW5nO1xyXG4gIGVycm9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEEgdHlwZSBhbGlhcyBvZiBmb3IgYSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2suZXJyb3JEZXNjIGVycm9yIGRlc2NyaXB0aW9uIHJldHVybmVkIGZyb20gdGhlIFNUUyBpZiBBUEkgY2FsbCBmYWlscy5cclxuICogQHBhcmFtIHRva2VuUmVjZWl2ZWRDYWxsYmFjay50b2tlbiB0b2tlbiByZXR1cm5lZCBmcm9tIFNUUyBpZiB0b2tlbiByZXF1ZXN0IGlzIHN1Y2Nlc3NmdWwuXHJcbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2suZXJyb3IgZXJyb3IgY29kZSByZXR1cm5lZCBmcm9tIHRoZSBTVFMgaWYgQVBJIGNhbGwgZmFpbHMuXHJcbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sudG9rZW5UeXBlIHRva2VuVHlwZSByZXR1cm5lZCBmcm9tIHRoZSBTVFMgaWYgQVBJIGNhbGwgaXMgc3VjY2Vzc2Z1bC4gUG9zc2libGUgdmFsdWVzIGFyZTogaWRfdG9rZW4gT1IgYWNjZXNzX3Rva2VuLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgdG9rZW5SZWNlaXZlZENhbGxiYWNrID0gKGVycm9yRGVzYzogc3RyaW5nLCB0b2tlbjogc3RyaW5nLCBlcnJvcjogc3RyaW5nLCB0b2tlblR5cGU6IHN0cmluZywgdXNlclN0YXRlOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cclxuLypcclxuICogd3JhcHBlciBhcm91bmQgYWNxdWlyZVRva2VuU2lsZW50KCkgdG8gaGFuZGxlIHRva2VucyBvdXQgb2YgaWZyYW1lXHJcbiAqIFRPRE86IEdldCBtb3JlIGRldGFpbHMgYW5kIHVzZWNhc2VzIGZyb20gdGhlIGhpc3RvcnlcclxuICovXHJcbmNvbnN0IHJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lID0gKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpID0+IHtcclxuICBjb25zdCB0b2tlbkFjcXVpc2l0aW9uTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcclxuICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0luSWZyYW1lKClcclxuICAgICAgPyBuZXcgUHJvbWlzZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9KVxyXG4gICAgICA6IHRva2VuQWNxdWlzaXRpb25NZXRob2QuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgfTtcclxuICByZXR1cm4gZGVzY3JpcHRvcjtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBVc2VyQWdlbnRBcHBsaWNhdGlvbiBjbGFzc1xyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVzZXJBZ2VudEFwcGxpY2F0aW9uIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQWxsIENvbmZpZyBQYXJhbXMgaW4gYSBzaW5nbGUgb2JqZWN0XHJcbiAgICovXHJcbiAgcENvbmZpZzogVENvbmZpZ3VyYXRpb247XHJcblxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuXHJcbiAgICogVE9ETzogUmVtb3ZlIHRoaXMgZnJvbSBDb25maWd1cmF0aW9uIGFuZCBhZGQgdGhpcyBhcyBhIHBhcmFtZXRlciB0byByZWRpcmVjdCgpIGNhbGxzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwVG9rZW5SZWNlaXZlZENhbGxiYWNrOiB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSBudWxsO1xyXG5cclxuICAvKiogQXV0aG9yaXR5IFN1cHBvcnQgQ29kZSAqL1xyXG5cclxuICAvKiogXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBhdXRob3JpdHlJbnN0YW5jZTogQXV0aG9yaXR5O1xyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gc2V0IHRoZSBhdXRob3JpdHkuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cclxuICAgKiAtIEluIEF6dXJlIEFELCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDt0ZW5hbnQmZ3Q7LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXQgYXV0aG9yaXR5KHZhbCkge1xyXG4gICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA9IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UodmFsLCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBhdXRob3JpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBhdXRob3JpdHkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmF1dGhvcml0eUluc3RhbmNlLkNhbm9uaWNhbEF1dGhvcml0eTtcclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBWYWxpZGF0ZSBjYWNoZSBsb2NhdGlvbiBhbmQgaW5pdGlhbGl6ZSBzdG9yYWdlIFxyXG4gICAqL1xyXG5cclxuICAvKiogXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2FjaGVMb2NhdGlvbnMgPSB7XHJcbiAgICBsb2NhbFN0b3JhZ2U6IFwibG9jYWxTdG9yYWdlXCIsXHJcbiAgICBzZXNzaW9uU3RvcmFnZTogXCJzZXNzaW9uU3RvcmFnZVwiXHJcbiAgfTtcclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBjYWNoZSBsb2NhdGlvblxyXG4gICAqL1xyXG4gIGdldCBjYWNoZUxvY2F0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmNhY2hlLmNhY2hlTG9jYXRpb247XHJcbiAgfVxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHBDYWNoZVN0b3JhZ2U6IFN0b3JhZ2U7XHJcblxyXG5cclxuICAvKiogT3RoZXIgVmFyaWFibGVzICovXHJcblxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuIFxyXG4gICAqIFRyYWNrcyBpZiBsb2dpbiBpcyBhbHJlYWR5IGluaXRpYXRlZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcExvZ2luSW5Qcm9ncmVzczogYm9vbGVhbjtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEBoaWRkZW5cclxuICAgKiBUcmFja3MgaW4gVG9rZW4gUmVxdWVzdCBpcyBhbHJlYWR5IGluaXRpYXRlZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHBTaWxlbnRMb2dpbjogYm9vbGVhbjtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEBoaWRkZW5cclxuICAgKiBBY2NvdW50IG9iamVjdCAtIEN1cnJlbnQgbG9naW4vdG9rZW4gcmVxdWVzdCBhY2NvdW50XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwQWNjb3VudDogQWNjb3VudDtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEluaXRpYWxpemUgYSBVc2VyQWdlbnRBcHBsaWNhdGlvbiB3aXRoIGEgZ2l2ZW4gY2xpZW50SWQgYW5kIGF1dGhvcml0eS5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xpZW50SWQgLSBUaGUgY2xpZW50SUQgb2YgeW91ciBhcHBsaWNhdGlvbiwgeW91IHNob3VsZCBnZXQgdGhpcyBmcm9tIHRoZSBhcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXHJcbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2U+LyZsdDt0ZW5hbnQmZ3Q7LFxcIHdoZXJlICZsdDtpbnN0YW5jZSZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXHJcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O2luc3RhbmNlJmd0Oy90ZnAvJmx0O3RlbmFudElkJmd0Oy8mbHQ7cG9saWN5TmFtZSZndDsvXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqIEBwYXJhbSBwVG9rZW5SZWNlaXZlZENhbGxiYWNrIC0gIFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZ2V0IHRoZSBjYWxsIGJhY2sgb25jZSB0aGlzIEFQSSBpcyBjb21wbGV0ZWQgKGVpdGhlciBzdWNjZXNzZnVsbHkgb3Igd2l0aCBhIGZhaWx1cmUpLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsaWRhdGVBdXRob3JpdHkgLSAgYm9vbGVhbiB0byB0dXJuIGF1dGhvcml0eSB2YWxpZGF0aW9uIG9uL29mZi5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRDb25maWd1cmF0aW9uLCBjYWxsYmFjazogdG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBDb25maWd1cmF0aW9uIFxyXG4gICAgdGhpcy5wQ29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgIC8vIFNldCB0aGUgY2FsbGJhY2tcclxuICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cclxuICAgIC8vIFRPRE86IE5ldyBkZXNpZ24gZm9yIHJlZGlyZWN0IC0gYWRkIGEgbmV3IGZ1bmN0aW9uLiBQbGFjZWhvbGRlciB1bnRpbCB0aGVuXHJcbiAgICAvLyB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB0b2tlblJlY2VpdmVkQ2FsbGJhY2s7XHJcblxyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICB0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCF0aGlzLmNhY2hlTG9jYXRpb25zW3RoaXMucENvbmZpZy5jYWNoZS5jYWNoZUxvY2F0aW9uXSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWNoZSBMb2NhdGlvbiBpcyBub3QgdmFsaWQuIFByb3ZpZGVkIHZhbHVlOlwiICsgdGhpcy5wQ29uZmlnLmNhY2hlLmNhY2hlTG9jYXRpb24gKyBcIi5Qb3NzaWJsZSB2YWx1ZXMgYXJlOiBcIiArIHRoaXMuY2FjaGVMb2NhdGlvbnMubG9jYWxTdG9yYWdlICsgXCIsIFwiICsgdGhpcy5jYWNoZUxvY2F0aW9ucy5zZXNzaW9uU3RvcmFnZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UgPSBuZXcgU3RvcmFnZSh0aGlzLnBDb25maWcuY2FjaGUuY2FjaGVMb2NhdGlvbik7IC8vY2FjaGUga2V5cyBtc2FsXHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgV2luZG93IEhhbmRsaW5nIGNvZGVcclxuICAgIC8vIFRPRE86IHJlZmFjdG9yIC0gd3JpdGUgYSB1dGlsaXR5IGZ1bmN0aW9uIFxyXG4gICAgd2luZG93Lm9wZW5lZFdpbmRvd3MgPSBbXTtcclxuICAgIHdpbmRvdy5hY3RpdmVSZW5ld2FscyA9IHt9O1xyXG4gICAgd2luZG93LnJlbmV3U3RhdGVzID0gW107XHJcbiAgICB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzID0ge307XHJcbiAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHt9O1xyXG4gICAgd2luZG93Lm1zYWwgPSB0aGlzO1xyXG4gICAgdmFyIHVybEhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcclxuICAgIHZhciBpc0NhbGxiYWNrID0gdGhpcy5pc0NhbGxiYWNrKHVybEhhc2gpO1xyXG5cclxuICAgIC8vIE9uIHRoZSBTZXJ2ZXIgMzAyIC0gUmVkaXJlY3QsIGhhbmRsZSB0aGlzXHJcbiAgICBpZiAoIXRoaXMucENvbmZpZy5mcmFtZXdvcmsuaXNBbmd1bGFyKSB7XHJcbiAgICAgIGlmIChpc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoZW50aWNhdGlvblJlc3BvbnNlLmNhbGwodGhpcywgdXJsSGFzaCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIHBlbmRpbmdDYWxsYmFjayA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy51cmxIYXNoKTtcclxuICAgICAgICBpZiAocGVuZGluZ0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICB0aGlzLnByb2Nlc3NDYWxsQmFjayhwZW5kaW5nQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSByZWRpcmVjdCB1cmkuIEV2YWx1YXRlcyByZWRpcmVjdFVyaSBpZiBpdHMgYSBmdW5jdGlvbiwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGl0cyB2YWx1ZS5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0UmVkaXJlY3RVcmkoKTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgdGhpcy5wQ29uZmlnLmF1dGgucmVkaXJlY3RVcmkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmF1dGgucmVkaXJlY3RVcmkoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnBDb25maWcuYXV0aC5yZWRpcmVjdFVyaTtcclxuICB9XHJcblxyXG5cclxuICAvKiogXHJcbiAgICogVXNlZCB0byBnZXQgdGhlIHBvc3QgbG9nb3V0IHJlZGlyZWN0IHVyaS4gRXZhbHVhdGVzIHBvc3RMb2dvdXRyZWRpcmVjdFVyaSBpZiBpdHMgYSBmdW5jdGlvbiwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGl0cyB2YWx1ZS5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0UG9zdExvZ291dFJlZGlyZWN0VXJpKCk6IHN0cmluZyB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMucENvbmZpZy5hdXRoLnBvc3RMb2dvdXRSZWRpcmVjdFVyaSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnBDb25maWcuYXV0aC5wb3N0TG9nb3V0UmVkaXJlY3RVcmkoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnBDb25maWcuYXV0aC5wb3N0TG9nb3V0UmVkaXJlY3RVcmk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gY2FsbCB0aGUgY29uc3RydWN0b3IgY2FsbGJhY2sgd2l0aCB0aGUgdG9rZW4vZXJyb3JcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2hhc2g9d2luZG93LmxvY2F0aW9uLmhhc2hdIC0gSGFzaCBmcmFnbWVudCBvZiBVcmwuXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgcHJvY2Vzc0NhbGxCYWNrKGhhc2g6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlByb2Nlc3NpbmcgdGhlIGNhbGxiYWNrIGZyb20gcmVkaXJlY3QgcmVzcG9uc2VcIik7XHJcbiAgICBjb25zdCByZXF1ZXN0SW5mbyA9IHRoaXMuZ2V0UmVxdWVzdEluZm8oaGFzaCk7XHJcbiAgICB0aGlzLnNhdmVUb2tlbkZyb21IYXNoKHJlcXVlc3RJbmZvKTtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dIHx8IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xyXG4gICAgY29uc3QgZXJyb3JEZXNjID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl07XHJcbiAgICBjb25zdCBlcnJvciA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yXTtcclxuICAgIHZhciB0b2tlblR5cGU6IHN0cmluZztcclxuXHJcbiAgICBpZiAocmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dKSB7XHJcbiAgICAgIHRva2VuVHlwZSA9IENvbnN0YW50cy5hY2Nlc3NUb2tlbjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0b2tlblR5cGUgPSBDb25zdGFudHMuaWRUb2tlbjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShDb25zdGFudHMudXJsSGFzaCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xyXG4gICAgICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjay5jYWxsKHRoaXMsIGVycm9yRGVzYywgdG9rZW4sIGVycm9yLCB0b2tlblR5cGUsIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkIGluIHRva2VuIHJlY2VpdmVkIGNhbGxiYWNrIGZ1bmN0aW9uOiBcIiArIGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqIFxyXG4gICAqIEluaXRpYXRlIHRoZSBsb2dpbiBwcm9jZXNzIGJ5IHJlZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBTVFMgYXV0aG9yaXphdGlvbiBlbmRwb2ludC5cclxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBzY29wZXMgLSBQZXJtaXNzaW9ucyB5b3Ugd2FudCBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBOb3QgYWxsIHNjb3BlcyBhcmUgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBhdXRoZW50aWNhdGlvbiBzZXJ2ZXIgZHVyaW5nIHRoZSBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqL1xyXG4gIGxvZ2luUmVkaXJlY3Qoc2NvcGVzPzogQXJyYXk8c3RyaW5nPiwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIC8qXHJcbiAgICAxLiBDcmVhdGUgbmF2aWdhdGUgdXJsXHJcbiAgICAyLiBzYXZlcyB2YWx1ZSBpbiBjYWNoZVxyXG4gICAgMy4gcmVkaXJlY3QgdXNlciB0byBBQURcclxuICAgICAqL1xyXG4gICAgaWYgKHRoaXMucExvZ2luSW5Qcm9ncmVzcykge1xyXG4gICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24ubG9naW5Qcm9ncmVzc0Vycm9yLCBudWxsLCBFcnJvckNvZGVzLmxvZ2luUHJvZ3Jlc3NFcnJvciwgQ29uc3RhbnRzLmlkVG9rZW4sIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKHNjb3Blcyk7XHJcbiAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjayhFcnJvckRlc2NyaXB0aW9uLmlucHV0U2NvcGVzRXJyb3IsIG51bGwsIEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciwgQ29uc3RhbnRzLmlkVG9rZW4sIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoc2NvcGVzKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaWRUb2tlbk9iamVjdDtcclxuICAgIGlkVG9rZW5PYmplY3QgPSB0aGlzLmV4dHJhY3RBREFMSWRUb2tlbigpO1xyXG4gICAgaWYgKGlkVG9rZW5PYmplY3QgJiYgIXNjb3Blcykge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiQURBTCdzIGlkVG9rZW4gZXhpc3RzLiBFeHRyYWN0aW5nIGxvZ2luIGluZm9ybWF0aW9uIGZyb20gQURBTCdzIGlkVG9rZW4gXCIpO1xyXG4gICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFV0aWxzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIoaWRUb2tlbk9iamVjdCwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KFt0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZF0sIHRoaXMuYXV0aG9yaXR5LCB0aGlzLmdldEFjY291bnQoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgLnRoZW4oKGlkVG9rZW4pID0+IHtcclxuICAgICAgICAgIHRoaXMucFNpbGVudExvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVW5pZmllZCBjYWNoZSBjYWxsIGlzIHN1Y2Nlc3NmdWxcIik7XHJcbiAgICAgICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjay5jYWxsKHRoaXMsIG51bGwsIGlkVG9rZW4sIG51bGwsIENvbnN0YW50cy5pZFRva2VuLCB0aGlzLmdldEFjY291bnRTdGF0ZSh0aGlzLnBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XHJcbiAgICAgICAgICB0aGlzLmxvZ2luUmVkaXJlY3RIZWxwZXIoc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5sb2dpblJlZGlyZWN0SGVscGVyKHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGhpZGRlblxyXG4gICAqIEBwYXJhbSBzY29wZXMgXHJcbiAgICogQHBhcmFtIGV4dHJhUXVlcnlQYXJhbWV0ZXJzIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgbG9naW5SZWRpcmVjdEhlbHBlcihzY29wZXM/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZykge1xyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gdHJ1ZTtcclxuICAgIHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UuUmVzb2x2ZUVuZHBvaW50c0FzeW5jKClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UsIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbG9naW5TdGFydFBhZ2UgPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuYW5ndWxhckxvZ2luUmVxdWVzdCk7XHJcbiAgICAgICAgaWYgKCFsb2dpblN0YXJ0UGFnZSB8fCBsb2dpblN0YXJ0UGFnZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgbG9naW5TdGFydFBhZ2UgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuYW5ndWxhckxvZ2luUmVxdWVzdCwgXCJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5SZXF1ZXN0LCBsb2dpblN0YXJ0UGFnZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIlwiKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgXCJcIik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIlwiKTtcclxuICAgICAgICBjb25zdCBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICBjb25zdCB1cmxOYXZpZ2F0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChzY29wZXMpICsgQ29uc3RhbnRzLnJlc3BvbnNlX21vZGVfZnJhZ21lbnQ7XHJcbiAgICAgICAgdGhpcy5wcm9tcHRVc2VyKHVybE5hdmlnYXRlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogXHJcbiAgICogSW5pdGlhdGUgdGhlIGxvZ2luIHByb2Nlc3MgYnkgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIFNUUyBhdXRob3JpemF0aW9uIGVuZHBvaW50LlxyXG4gICAqIFRPRE86IFJlZmFjdG9yIHJlbW92aW5nIGV4dHJhUXVlcnlQYXJhbXNcclxuICAgKiBcclxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBzY29wZXMgLSBQZXJtaXNzaW9ucyB5b3Ugd2FudCBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBOb3QgYWxsIHNjb3BlcyBhcmUgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBhdXRoZW50aWNhdGlvbiBzZXJ2ZXIgZHVyaW5nIHRoZSBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqL1xyXG4gIGxvZ2luUmVkaXJlY3ROZXcoYXV0aFBhcmFtczogQXV0aGVudGljYXRpb25QYXJhbWV0ZXJzKTogdm9pZCB7XHJcbiAgICAvKlxyXG4gICAgMS4gQ3JlYXRlIG5hdmlnYXRlIHVybFxyXG4gICAgMi4gc2F2ZXMgdmFsdWUgaW4gY2FjaGVcclxuICAgIDMuIHJlZGlyZWN0IHVzZXIgdG8gQUFEXHJcbiAgICAgKi9cclxuICAgIGlmICh0aGlzLnBMb2dpbkluUHJvZ3Jlc3MpIHtcclxuICAgICAgaWYgKHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjayhFcnJvckRlc2NyaXB0aW9uLmxvZ2luUHJvZ3Jlc3NFcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy5sb2dpblByb2dyZXNzRXJyb3IsIENvbnN0YW50cy5pZFRva2VuLCB0aGlzLmdldEFjY291bnRTdGF0ZSh0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGF1dGhQYXJhbXMuc2NvcGVzKSB7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKGF1dGhQYXJhbXMuc2NvcGVzKTtcclxuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yLCBDb25zdGFudHMuaWRUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBhdXRoUGFyYW1zLnNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKGF1dGhQYXJhbXMuc2NvcGVzKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaWRUb2tlbk9iamVjdDtcclxuICAgIGlkVG9rZW5PYmplY3QgPSB0aGlzLmV4dHJhY3RBREFMSWRUb2tlbigpO1xyXG4gICAgLy8gY29uc3RydWN0IGV4dHJhUXVlcnlQYXJhbXMgc3RyaW5nXHJcbiAgICBsZXQgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBVdGlscy5jb25zdHJ1Y3RFeHRyYVF1ZXJ5UGFyYW1ldGVyc1N0cmluZyhhdXRoUGFyYW1zLmV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuXHJcbiAgICBpZiAoaWRUb2tlbk9iamVjdCAmJiAhYXV0aFBhcmFtcy5zY29wZXMpIHtcclxuXHJcbiAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJBREFMJ3MgaWRUb2tlbiBleGlzdHMuIEV4dHJhY3RpbmcgbG9naW4gaW5mb3JtYXRpb24gZnJvbSBBREFMJ3MgaWRUb2tlbiBcIik7XHJcbiAgICAgXHJcbiAgICAgIGlmIChhdXRoUGFyYW1zLmxvZ2luX2hpbnQpIHtcclxuICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFV0aWxzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIoaWRUb2tlbk9iamVjdCwgYXV0aFBhcmFtcy5sb2dpbl9oaW50LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KFt0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZF0sIHRoaXMuYXV0aG9yaXR5LCB0aGlzLmdldEFjY291bnQoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgLnRoZW4oKGlkVG9rZW4pID0+IHtcclxuICAgICAgICAgIHRoaXMucFNpbGVudExvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVW5pZmllZCBjYWNoZSBjYWxsIGlzIHN1Y2Nlc3NmdWxcIik7XHJcbiAgICAgICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjay5jYWxsKHRoaXMsIG51bGwsIGlkVG9rZW4sIG51bGwsIENvbnN0YW50cy5pZFRva2VuLCB0aGlzLmdldEFjY291bnRTdGF0ZSh0aGlzLnBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XHJcbiAgICAgICAgICB0aGlzLmxvZ2luUmVkaXJlY3RIZWxwZXJOZXcoYXV0aFBhcmFtcy5zY29wZXMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmxvZ2luUmVkaXJlY3RIZWxwZXIoYXV0aFBhcmFtcy5zY29wZXMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBoaWRkZW5cclxuICAgKiBUT0RPOiBleHRyYVF1ZXJ5UGFyYW1zIC0gcmVmYWN0b3JcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2NvcGVzIFxyXG4gICAqIEBwYXJhbSBleHRyYVF1ZXJ5UGFyYW1ldGVycyBcclxuICAgKi9cclxuICBwcml2YXRlIGxvZ2luUmVkaXJlY3RIZWxwZXJOZXcoc2NvcGVzPzogQXJyYXk8c3RyaW5nPiwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMucExvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyh0aGlzLmF1dGhvcml0eUluc3RhbmNlLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxvZ2luU3RhcnRQYWdlID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmFuZ3VsYXJMb2dpblJlcXVlc3QpO1xyXG4gICAgICAgIGlmICghbG9naW5TdGFydFBhZ2UgfHwgbG9naW5TdGFydFBhZ2UgPT09IFwiXCIpIHtcclxuICAgICAgICAgIGxvZ2luU3RhcnRQYWdlID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmFuZ3VsYXJMb2dpblJlcXVlc3QsIFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgbG9naW5TdGFydFBhZ2UsIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJcIik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiXCIpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgXCJcIik7XHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgY29uc3QgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xyXG4gICAgICAgIHRoaXMucHJvbXB0VXNlcih1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKiBcclxuICAgKiBJbml0aWF0ZSB0aGUgbG9naW4gcHJvY2VzcyBieSBvcGVuaW5nIGEgcG9wdXAgd2luZG93LlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBTVFMgZHVyaW5nIHRoZSBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxzdHJpbmc+fSAtIEEgUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmV0dXJucyB0aGUgdG9rZW4gb3IgZXJyb3IuXHJcbiAgICovXHJcbiAgbG9naW5Qb3B1cChzY29wZXM/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAvKlxyXG4gICAgMS4gQ3JlYXRlIG5hdmlnYXRlIHVybFxyXG4gICAgMi4gc2F2ZXMgdmFsdWUgaW4gY2FjaGVcclxuICAgIDMuIHJlZGlyZWN0IHVzZXIgdG8gQUFEXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKHRoaXMucExvZ2luSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmxvZ2luUHJvZ3Jlc3NFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24ubG9naW5Qcm9ncmVzc0Vycm9yKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShzY29wZXMpO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgaWRUb2tlbk9iamVjdDtcclxuICAgICAgaWRUb2tlbk9iamVjdCA9IHRoaXMuZXh0cmFjdEFEQUxJZFRva2VuKCk7XHJcbiAgICAgIGlmIChpZFRva2VuT2JqZWN0ICYmICFzY29wZXMpIHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiQURBTCdzIGlkVG9rZW4gZXhpc3RzLiBFeHRyYWN0aW5nIGxvZ2luIGluZm9ybWF0aW9uIGZyb20gQURBTCdzIGlkVG9rZW4gXCIpO1xyXG4gICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KFt0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZF0sIHRoaXMuYXV0aG9yaXR5LCB0aGlzLmdldEFjY291bnQoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgICAudGhlbigoaWRUb2tlbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVW5pZmllZCBjYWNoZSBjYWxsIGlzIHN1Y2Nlc3NmdWxcIik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWRUb2tlbik7XHJcbiAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XHJcbiAgICAgICAgICAgIHRoaXMubG9naW5Qb3B1cEhlbHBlcihyZXNvbHZlLCByZWplY3QsIHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sb2dpblBvcHVwSGVscGVyKHJlc29sdmUsIHJlamVjdCwgc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogXHJcbiAgICogQGhpZGRlblxyXG4gICAqIFRPRE86IGV4dHJhUXVlcnlQYXJhbXMgLSByZWZhY3RvclxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSByZXNvbHZlIFxyXG4gICAqIEBwYXJhbSByZWplY3QgXHJcbiAgICogQHBhcmFtIHNjb3BlcyBcclxuICAgKiBAcGFyYW0gZXh0cmFRdWVyeVBhcmFtZXRlcnMgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2dpblBvcHVwSGVscGVyKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnksIHNjb3BlczogQXJyYXk8c3RyaW5nPiwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpIHtcclxuICAgIC8vVE9ETyB3aHkgdGhpcyBpcyBuZWVkZWQgb25seSBmb3IgbG9naW5wb3B1cFxyXG4gICAgaWYgKCFzY29wZXMpIHtcclxuICAgICAgc2NvcGVzID0gW3RoaXMucENvbmZpZy5hdXRoLmNsaWVudElkXTtcclxuICAgIH1cclxuICAgIGNvbnN0IHNjb3BlID0gc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB2YXIgcG9wVXBXaW5kb3cgPSB0aGlzLm9wZW5XaW5kb3coXCJhYm91dDpibGFua1wiLCBcIl9ibGFua1wiLCAxLCB0aGlzLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgaWYgKCFwb3BVcFdpbmRvdykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyh0aGlzLmF1dGhvcml0eUluc3RhbmNlLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIHdpbmRvdy5sb2NhdGlvbi5ocmVmLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIlwiKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiXCIpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiXCIpO1xyXG4gICAgICBjb25zdCBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIGNvbnN0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcclxuICAgICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLmxvZ2luO1xyXG4gICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlZCBQb3B1cCB3aW5kb3cgdG86XCIgKyB1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgICAgcG9wVXBXaW5kb3cubG9jYXRpb24uaHJlZiA9IHVybE5hdmlnYXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgXCI6XCIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgcG9wVXBXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci53YXJuaW5nKFwiY291bGQgbm90IHJlc29sdmUgZW5kcG9pbnRzXCIpO1xyXG4gICAgICByZWplY3QoZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIFxyXG4gICAgICogSW5pdGlhdGUgdGhlIGxvZ2luIHByb2Nlc3MgYnkgb3BlbmluZyBhIHBvcHVwIHdpbmRvdy5cclxuICAgICAqIFRPRE86IGV4dHJhUXVlcnlQYXJhbXMgLSByZWZhY3RvclxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0F1dGhlbnRpY2F0aW9uUGFyYW1ldGVyc30gXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHRva2VuIG9yIGVycm9yLlxyXG4gICAgICovXHJcbiAgbG9naW5Qb3B1cE5ldyhhdXRoUGFyYW1zOiBBdXRoZW50aWNhdGlvblBhcmFtZXRlcnMpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgLypcclxuICAgIDEuIENyZWF0ZSBuYXZpZ2F0ZSB1cmxcclxuICAgIDIuIHNhdmVzIHZhbHVlIGluIGNhY2hlXHJcbiAgICAzLiByZWRpcmVjdCB1c2VyIHRvIEFBRFxyXG4gICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnBMb2dpbkluUHJvZ3Jlc3MpIHtcclxuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5sb2dpblByb2dyZXNzRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckNvZGVzLmxvZ2luUHJvZ3Jlc3NFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYXV0aFBhcmFtcy5zY29wZXMpIHtcclxuICAgICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShhdXRoUGFyYW1zLnNjb3Blcyk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF1dGhQYXJhbXMuc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoYXV0aFBhcmFtcy5zY29wZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgaWRUb2tlbk9iamVjdDtcclxuICAgICAgaWRUb2tlbk9iamVjdCA9IHRoaXMuZXh0cmFjdEFEQUxJZFRva2VuKCk7XHJcblxyXG4gICAgICAvLyBjb25zdHJ1Y3QgZXh0cmFRdWVyeVBhcmFtcyBzdHJpbmdcclxuICAgICAgbGV0IGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0RXh0cmFRdWVyeVBhcmFtZXRlcnNTdHJpbmcoYXV0aFBhcmFtcy5leHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcblxyXG4gICAgICBpZiAoaWRUb2tlbk9iamVjdCAmJiAhYXV0aFBhcmFtcy5zY29wZXMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETyBleHRyYVBhcmFtZXRlcnMgLSByZXdyaXRlIHRoZSB1dGlscyBmdW5jdGlvbiB3aXRoIHRoZSBuZXcgc3RydWN0dXJlIGFuZCBjb25zaWRlcmluZyBsb2dpbl9oaW50IGlzIG5vIGxvbmdlciBpbiBleHRyYVF1ZXJ5UGFyYW1ldGVyc1xyXG4gICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBhdXRoUGFyYW1zLmxvZ2luX2hpbnQsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBUb2RvIC0gQ29uc3RydWN0IGEgcmVxdWVzdCBhbmQgYWRkIHRoZSBjYWxsIHRvIG5ldyBhY3F1aXJlVG9rZW5TaWxlbnRcclxuICAgICAgICBsZXQgYXV0aFJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycyA9IHsgc2NvcGVzOiBbdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWRdLCBhdXRob3JpdHk6IHRoaXMuYXV0aG9yaXR5LCBhY2NvdW50OiB0aGlzLmdldEFjY291bnQoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnM6IGF1dGhQYXJhbXMuZXh0cmFRdWVyeVBhcmFtZXRlcnN9O1xyXG5cclxuICAgICAgICB0aGlzLmFjcXVpcmVUb2tlblNpbGVudE5ldyhhdXRoUmVxdWVzdClcclxuICAgICAgICAgIC50aGVuKChpZFRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucFNpbGVudExvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJVbmlmaWVkIGNhY2hlIGNhbGwgaXMgc3VjY2Vzc2Z1bFwiKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShpZFRva2VuKTtcclxuICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkIGR1cmluZyB1bmlmaWVkIGNhY2hlIEFUU1wiKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dpblBvcHVwSGVscGVyTmV3KHJlc29sdmUsIHJlamVjdCwgYXV0aFBhcmFtcy5zY29wZXMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICB0aGlzLmFjcXVpcmVUb2tlblNpbGVudChbdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWRdLCB0aGlzLmF1dGhvcml0eSwgdGhpcy5nZXRBY2NvdW50KCksIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgLnRoZW4oKGlkVG9rZW4pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlVuaWZpZWQgY2FjaGUgY2FsbCBpcyBzdWNjZXNzZnVsXCIpO1xyXG4gICAgICAgICAgICByZXNvbHZlKGlkVG9rZW4pO1xyXG4gICAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucFNpbGVudExvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmVycm9yKFwiRXJyb3Igb2NjdXJyZWQgZHVyaW5nIHVuaWZpZWQgY2FjaGUgQVRTXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2luUG9wdXBIZWxwZXIocmVzb2x2ZSwgcmVqZWN0LCBhdXRoUGFyYW1zLnNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAqL1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMubG9naW5Qb3B1cEhlbHBlck5ldyhyZXNvbHZlLCByZWplY3QsIGF1dGhQYXJhbXMuc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGhpZGRlblxyXG4gICAqIFRPRE86IGV4dHJhUXVlcnlQYXJhbXMgLSByZWZhY3RvclxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSByZXNvbHZlIFxyXG4gICAqIEBwYXJhbSByZWplY3QgXHJcbiAgICogQHBhcmFtIHNjb3BlcyBcclxuICAgKiBAcGFyYW0gZXh0cmFRdWVyeVBhcmFtZXRlcnMgXHJcbiAgICovXHJcbiAgbG9naW5Qb3B1cEhlbHBlck5ldyhyZXNvbHZlOiBhbnksIHJlamVjdDogYW55LCBzY29wZXM6IEFycmF5PHN0cmluZz4sIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKSB7XHJcbiAgICAvL1RPRE8gd2h5IHRoaXMgaXMgbmVlZGVkIG9ubHkgZm9yIGxvZ2lucG9wdXBcclxuICAgIGlmICghc2NvcGVzKSB7XHJcbiAgICAgIHNjb3BlcyA9IFt0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZF07XHJcbiAgICB9XHJcbiAgICBjb25zdCBzY29wZSA9IHNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdmFyIHBvcFVwV2luZG93ID0gdGhpcy5vcGVuV2luZG93KFwiYWJvdXQ6YmxhbmtcIiwgXCJfYmxhbmtcIiwgMSwgdGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgIGlmICghcG9wVXBXaW5kb3cpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucExvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKS50aGVuKCgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnModGhpcy5hdXRob3JpdHlJbnN0YW5jZSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5SZXF1ZXN0LCB3aW5kb3cubG9jYXRpb24uaHJlZiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJcIik7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBcIlwiKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIlwiKTtcclxuICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYXV0aG9yaXR5S2V5LCB0aGlzLmF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICBjb25zdCB1cmxOYXZpZ2F0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChzY29wZXMpICsgQ29uc3RhbnRzLnJlc3BvbnNlX21vZGVfZnJhZ21lbnQ7XHJcbiAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5sb2dpbjtcclxuICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgIGlmIChwb3BVcFdpbmRvdykge1xyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm9QaWkoXCJOYXZpZ2F0ZWQgUG9wdXAgd2luZG93IHRvOlwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgICAgIHBvcFVwV2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxOYXZpZ2F0ZTtcclxuICAgICAgfVxyXG5cclxuICAgIH0sICgpID0+IHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgXCI6XCIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgIGlmIChyZWplY3QpIHtcclxuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciArIFwiOlwiICsgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwb3BVcFdpbmRvdykge1xyXG4gICAgICAgIHBvcFVwV2luZG93LmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcImNvdWxkIG5vdCByZXNvbHZlIGVuZHBvaW50c1wiKTtcclxuICAgICAgcmVqZWN0KGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKiogXHJcbiAgICogVXNlZCB0byBhY3F1aXJlIGFuIGFjY2VzcyB0b2tlbiBmb3IgYSBuZXcgdXNlciB1c2luZyBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiB2aWEgYSBwb3B1cCBXaW5kb3cuXHJcbiAgICogVG8gcmVxdWVzdCBhbiBpZF90b2tlbiwgcGFzcyB0aGUgY2xpZW50SWQgYXMgdGhlIG9ubHkgc2NvcGUgaW4gdGhlIHNjb3BlcyBhcnJheS5cclxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBTY29wZXMgbGlrZSBcIm9wZW5pZFwiIGFuZCBcInByb2ZpbGVcIiBhcmUgc2VudCB3aXRoIGV2ZXJ5IHJlcXVlc3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cclxuICAgKiAtIEluIEF6dXJlIEFELCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDt0ZW5hbnQmZ3Q7LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIi5cclxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdGhlIHNjb3BlcyBhcmUgcmVxdWVzdGVkLlRoZSBkZWZhdWx0IHVzZXIgaXMgdGhlIGxvZ2dlZCBpbiB1c2VyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBTVFMgZHVyaW5nIHRoZSAgYXV0aGVudGljYXRpb24gZmxvdy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHRva2VuIG9yIGVycm9yLlxyXG4gICAqL1xyXG4gIGFjcXVpcmVUb2tlblBvcHVwKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IFByb21pc2U8c3RyaW5nPjtcclxuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xyXG4gIGFjcXVpcmVUb2tlblBvcHVwKHNjb3BlczogQXJyYXk8c3RyaW5nPiwgYXV0aG9yaXR5OiBzdHJpbmcsIGFjY291bnQ6IEFjY291bnQpOiBQcm9taXNlPHN0cmluZz47XHJcbiAgYWNxdWlyZVRva2VuUG9wdXAoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCwgZXh0cmFRdWVyeVBhcmFtZXRlcnM6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPjtcclxuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eT86IHN0cmluZywgYWNjb3VudD86IEFjY291bnQsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcclxuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGlzVmFsaWRTY29wZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhY2NvdW50T2JqZWN0ID0gYWNjb3VudCA/IGFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgICAgaWYgKHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MpIHtcclxuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5hY3F1aXJlVG9rZW5Qcm9ncmVzc0Vycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi5hY3F1aXJlVG9rZW5Qcm9ncmVzc0Vycm9yKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIC8vaWYgdXNlciBpcyBub3QgY3VycmVudGx5IGxvZ2dlZCBpbiBhbmQgbm8gbG9naW5faGludCBpcyBwYXNzZWRcclxuICAgICAgaWYgKCFhY2NvdW50T2JqZWN0ICYmICEoZXh0cmFRdWVyeVBhcmFtZXRlcnMgJiYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzLmluZGV4T2YoQ29uc3RhbnRzLmxvZ2luX2hpbnQpICE9PSAtMSkpKSB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnVzZXJMb2dpbkVycm9yKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xyXG4gICAgICBsZXQgYWNxdWlyZVRva2VuQXV0aG9yaXR5ID0gYXV0aG9yaXR5ID8gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSA6IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XHJcbiAgICAgIHZhciBwb3BVcFdpbmRvdyA9IHRoaXMub3BlbldpbmRvdyhcImFib3V0OmJsYW5rXCIsIFwiX2JsYW5rXCIsIDEsIHRoaXMsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgIGlmICghcG9wVXBXaW5kb3cpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHMoYWNjb3VudE9iamVjdCwgdGhpcy5nZXRBY2NvdW50KCkpKSB7XHJcbiAgICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMudG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW5fdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlKTtcclxuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgdmFyIGFjcXVpcmVUb2tlblVzZXJLZXk7XHJcbiAgICAgICAgaWYgKGFjY291bnRPYmplY3QpIHtcclxuICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGFjY291bnRPYmplY3QuaG9tZUFjY291bnRJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkoYWNjb3VudE9iamVjdCkpO1xyXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYXV0aG9yaXR5S2V5LCBhY3F1aXJlVG9rZW5BdXRob3JpdHkuQ2Fub25pY2FsQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcblxyXG4gICAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xyXG4gICAgICAgIHVybE5hdmlnYXRlID0gdGhpcy5hZGRIaW50UGFyYW1ldGVycyh1cmxOYXZpZ2F0ZSwgYWNjb3VudE9iamVjdCk7XHJcbiAgICAgICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICBpZiAocG9wVXBXaW5kb3cpIHtcclxuICAgICAgICAgIHBvcFVwV2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxOYXZpZ2F0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgXCI6XCIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICAgIGlmIChyZWplY3QpIHtcclxuICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb3BVcFdpbmRvdykge1xyXG4gICAgICAgICAgcG9wVXBXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci53YXJuaW5nKFwiY291bGQgbm90IHJlc29sdmUgZW5kcG9pbnRzXCIpO1xyXG4gICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKiBcclxuICAgKiBVc2VkIHRvIGFjcXVpcmUgYW4gYWNjZXNzIHRva2VuIGZvciBhIG5ldyB1c2VyIHVzaW5nIGludGVyYWN0aXZlIGF1dGhlbnRpY2F0aW9uIHZpYSBhIHBvcHVwIFdpbmRvdy5cclxuICAgKiBUbyByZXF1ZXN0IGFuIGlkX3Rva2VuLCBwYXNzIHRoZSBjbGllbnRJZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIFxyXG4gICAqIFRPRE86IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gcmVmYWN0b3JcclxuICAgKiBcclxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBTY29wZXMgbGlrZSBcIm9wZW5pZFwiIGFuZCBcInByb2ZpbGVcIiBhcmUgc2VudCB3aXRoIGV2ZXJ5IHJlcXVlc3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cclxuICAgKiAtIEluIEF6dXJlIEFELCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDt0ZW5hbnQmZ3Q7LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIi5cclxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdGhlIHNjb3BlcyBhcmUgcmVxdWVzdGVkLlRoZSBkZWZhdWx0IHVzZXIgaXMgdGhlIGxvZ2dlZCBpbiB1c2VyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBTVFMgZHVyaW5nIHRoZSAgYXV0aGVudGljYXRpb24gZmxvdy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJldHVybnMgdGhlIHRva2VuIG9yIGVycm9yLlxyXG4gICAqL1xyXG4gIGFjcXVpcmVUb2tlblBvcHVwTmV3KGF1dGhQYXJhbXM6IEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycyk6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShhdXRoUGFyYW1zLnNjb3Blcyk7XHJcbiAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmlucHV0U2NvcGVzRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBpc1ZhbGlkU2NvcGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYXV0aFBhcmFtcy5zY29wZXMpIHtcclxuICAgICAgICBhdXRoUGFyYW1zLnNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKGF1dGhQYXJhbXMuc2NvcGVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVE9ETyBjaGVjayB3aHkgYWNjb3VudCBpcyBub3QgaWRlbnRpZmllZFxyXG4gICAgICBjb25zdCBhY2NvdW50T2JqZWN0ID0gYXV0aFBhcmFtcy5hY2NvdW50ID8gYXV0aFBhcmFtcy5hY2NvdW50IDogdGhpcy5nZXRBY2NvdW50KCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLmFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc2NvcGUgPSBhdXRoUGFyYW1zLnNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBsZXQgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBVdGlscy5jb25zdHJ1Y3RFeHRyYVF1ZXJ5UGFyYW1ldGVyc1N0cmluZyhhdXRoUGFyYW1zLmV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuXHJcbiAgICAgIC8vaWYgdXNlciBpcyBub3QgY3VycmVudGx5IGxvZ2dlZCBpbiBhbmQgbm8gbG9naW5faGludCBpcyBwYXNzZWQgXHJcbiAgICAgIC8vIFRPRE86IGF1dGhQYXJhbXMgbm93IHBhc3MgbG9naW5faGludFxyXG4gICAgICAvL2lmICghYWNjb3VudE9iamVjdCAmJiAhKGV4dHJhUXVlcnlQYXJhbWV0ZXJzICYmIChleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5sb2dpbl9oaW50KSAhPT0gLTEpKSkge1xyXG4gICAgICAgIGlmICghYWNjb3VudE9iamVjdCAmJiAhKGF1dGhQYXJhbXMubG9naW5faGludCkpIHtcclxuICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2luIGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnVzZXJMb2dpbkVycm9yKTtcclxuICAgICAgICBcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnM7XHJcbiAgICAgIGxldCBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSBhdXRoUGFyYW1zLmF1dGhvcml0eSA/IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aFBhcmFtcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSA6IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XHJcbiAgICAgIHZhciBwb3BVcFdpbmRvdyA9IHRoaXMub3BlbldpbmRvdyhcImFib3V0OmJsYW5rXCIsIFwiX2JsYW5rXCIsIDEsIHRoaXMsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgIGlmICghcG9wVXBXaW5kb3cpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHMoYWNjb3VudE9iamVjdCwgdGhpcy5nZXRBY2NvdW50KCkpKSB7XHJcbiAgICAgICAgICBpZiAoYXV0aFBhcmFtcy5zY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhdXRoUGFyYW1zLnNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgYXV0aFBhcmFtcy5zY29wZXMsIFJlc3BvbnNlVHlwZXMudG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhdXRoUGFyYW1zLnNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UpO1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTtcclxuICAgICAgICBpZiAoYWNjb3VudE9iamVjdCkge1xyXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYWNjb3VudE9iamVjdC5ob21lQWNjb3VudElkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX2FjY291bnQgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhY3F1aXJlVG9rZW5Vc2VyS2V5LCBKU09OLnN0cmluZ2lmeShhY2NvdW50T2JqZWN0KSk7XHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5DYW5vbmljYWxBdXRob3JpdHksIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuXHJcbiAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB1cmxOYXZpZ2F0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChhdXRoUGFyYW1zLnNjb3BlcykgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcclxuICAgICAgICB1cmxOYXZpZ2F0ZSA9IHRoaXMuYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGUsIGFjY291bnRPYmplY3QpO1xyXG4gICAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgICBwb3BVcFdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsTmF2aWdhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciArIFwiOlwiICsgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgICBpZiAocmVqZWN0KSB7XHJcbiAgICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocG9wVXBXaW5kb3cpIHtcclxuICAgICAgICAgIHBvcFVwV2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcImNvdWxkIG5vdCByZXNvbHZlIGVuZHBvaW50c1wiKTtcclxuICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBVc2VkIHRvIGdldCB0aGUgdG9rZW4gZnJvbSBjYWNoZS5cclxuICAgKiBNU0FMIHdpbGwgcmV0dXJuIHRoZSBjYWNoZWQgdG9rZW4gaWYgaXQgaXMgbm90IGV4cGlyZWQuXHJcbiAgICogT3IgaXQgd2lsbCBzZW5kIGEgcmVxdWVzdCB0byB0aGUgU1RTIHRvIG9idGFpbiBhbiBhY2Nlc3NfdG9rZW4gdXNpbmcgYSBoaWRkZW4gaWZyYW1lLiBUbyByZW5ldyBpZFRva2VuLCBjbGllbnRJZCBzaG91bGQgYmUgcGFzc2VkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBzY29wZXMgYXJyYXkuXHJcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBzY29wZXMgLSBQZXJtaXNzaW9ucyB5b3Ugd2FudCBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBOb3QgYWxsIHNjb3BlcyBhcmUgIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gU2NvcGVzIGxpa2UgXCJvcGVuaWRcIiBhbmQgXCJwcm9maWxlXCIgYXJlIHNlbnQgd2l0aCBldmVyeSByZXF1ZXN0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXHJcbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7dGVuYW50Jmd0Oy8mbHQ7dGVuYW50Jmd0Oywgd2hlcmUgJmx0O3RlbmFudCZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXHJcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O2luc3RhbmNlJmd0Oy90ZnAvJmx0O3RlbmFudCZndDsvPHBvbGljeU5hbWU+L1xyXG4gICAqIC0gRGVmYXVsdCB2YWx1ZSBpczogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCJcclxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdGhlIHNjb3BlcyBhcmUgcmVxdWVzdGVkLlRoZSBkZWZhdWx0IHVzZXIgaXMgdGhlIGxvZ2dlZCBpbiB1c2VyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBTVFMgZHVyaW5nIHRoZSAgYXV0aGVudGljYXRpb24gZmxvdy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48c3RyaW5nPn0gLSBBIFByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGlzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIHJlamVjdGVkIGlmIGFuIGVycm9yIHdhcyByYWlzZWQuIFJlc29sdmVkIHdpdGggdG9rZW4gb3IgcmVqZWN0ZWQgd2l0aCBlcnJvci5cclxuICAgKi9cclxuICBAcmVzb2x2ZVRva2VuT25seUlmT3V0T2ZJZnJhbWVcclxuICBhY3F1aXJlVG9rZW5TaWxlbnQoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk/OiBzdHJpbmcsIGFjY291bnQ/OiBBY2NvdW50LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKHNjb3Blcyk7XHJcbiAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmlucHV0U2NvcGVzRXJyb3IgKyBcInxcIiArIGlzVmFsaWRTY29wZSk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNjb3Blcykge1xyXG4gICAgICAgICAgc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoc2NvcGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudE9iamVjdCA9IGFjY291bnQgPyBhY2NvdW50IDogdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICAgICAgY29uc3QgYWRhbElkVG9rZW4gPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuYWRhbElkVG9rZW4pO1xyXG4gICAgICAgIC8vaWYgdXNlciBpcyBub3QgY3VycmVudGx5IGxvZ2dlZCBpbiBhbmQgbm8gbG9naW5faGludC9zaWQgaXMgcGFzc2VkIGFzIGFuIGV4dHJhUXVlcnlQYXJhbWF0ZXJcclxuICAgICAgICBpZiAoIWFjY291bnRPYmplY3QgJiYgVXRpbHMuY2hlY2tTU08oZXh0cmFRdWVyeVBhcmFtZXRlcnMpICYmIFV0aWxzLmlzRW1wdHkoYWRhbElkVG9rZW4pKSB7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcclxuICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLnVzZXJMb2dpbkVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi51c2VyTG9naW5FcnJvcik7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9pZiB1c2VyIGRpZG4ndCBwYXNzZXMgdGhlIGxvZ2luX2hpbnQgYW5kIGFkYWwncyBpZHRva2VuIGlzIHByZXNlbnQgYW5kIG5vIHVzZXJvYmplY3QsIHVzZSB0aGUgbG9naW5faGludCBmcm9tIGFkYWwncyBpZFRva2VuXHJcbiAgICAgICAgZWxzZSBpZiAoIWFjY291bnRPYmplY3QgJiYgIVV0aWxzLmlzRW1wdHkoYWRhbElkVG9rZW4pKSB7XHJcbiAgICAgICAgICBjb25zdCBpZFRva2VuT2JqZWN0ID0gVXRpbHMuZXh0cmFjdElkVG9rZW4oYWRhbElkVG9rZW4pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJBREFMJ3MgaWRUb2tlbiBleGlzdHMuIEV4dHJhY3RpbmcgbG9naW4gaW5mb3JtYXRpb24gZnJvbSBBREFMJ3MgaWRUb2tlbiBcIik7XHJcbiAgICAgICAgICBleHRyYVF1ZXJ5UGFyYW1ldGVycyA9IFV0aWxzLmNvbnN0cnVjdFVuaWZpZWRDYWNoZUV4dHJhUXVlcnlQYXJhbWV0ZXIoaWRUb2tlbk9iamVjdCwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycztcclxuICAgICAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHMoYWNjb3VudE9iamVjdCwgdGhpcy5nZXRBY2NvdW50KCkpKSB7XHJcbiAgICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy50b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNhY2hlUmVzdWx0ID0gdGhpcy5nZXRDYWNoZWRUb2tlbihhdXRoZW50aWNhdGlvblJlcXVlc3QsIGFjY291bnRPYmplY3QpO1xyXG4gICAgICAgIGlmIChjYWNoZVJlc3VsdCkge1xyXG4gICAgICAgICAgaWYgKGNhY2hlUmVzdWx0LnRva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJUb2tlbiBpcyBhbHJlYWR5IGluIGNhY2hlIGZvciBzY29wZTpcIiArIHNjb3BlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShjYWNoZVJlc3VsdC50b2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoY2FjaGVSZXN1bHQuZXJyb3JEZXNjIHx8IGNhY2hlUmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm9QaWkoY2FjaGVSZXN1bHQuZXJyb3JEZXNjICsgXCI6XCIgKyBjYWNoZVJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgIHJlamVjdChjYWNoZVJlc3VsdC5lcnJvckRlc2MgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBjYWNoZVJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJUb2tlbiBpcyBub3QgaW4gY2FjaGUgZm9yIHNjb3BlOlwiICsgc2NvcGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5SW5zdGFuY2UpIHsvL0NhY2hlIHJlc3VsdCBjYW4gcmV0dXJuIG51bGwgaWYgY2FjaGUgaXMgZW1wdHkuIEluIHRoYXQgY2FzZSwgc2V0IGF1dGhvcml0eSB0byBkZWZhdWx0IHZhbHVlIGlmIG5vIGF1dGhvcml0eSBpcyBwYXNzZWQgdG8gdGhlIGFwaS5cclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHlJbnN0YW5jZSA9IGF1dGhvcml0eSA/IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSkgOiB0aGlzLmF1dGhvcml0eUluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjYWNoZSBtaXNzXHJcbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHlJbnN0YW5jZS5SZXNvbHZlRW5kcG9pbnRzQXN5bmMoKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyByZWZyZXNoIGF0dGVwdCB3aXRoIGlmcmFtZVxyXG4gICAgICAgICAgICAvL0FscmVhZHkgcmVuZXdpbmcgZm9yIHRoaXMgc2NvcGUsIGNhbGxiYWNrIHdoZW4gd2UgZ2V0IHRoZSB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0pIHtcclxuICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwiUmVuZXcgdG9rZW4gZm9yIHNjb3BlOiBcIiArIHNjb3BlICsgXCIgaXMgaW4gcHJvZ3Jlc3MuIFJlZ2lzdGVyaW5nIGNhbGxiYWNrXCIpO1xyXG4gICAgICAgICAgICAgIC8vQWN0aXZlIHJlbmV3YWxzIGNvbnRhaW5zIHRoZSBzdGF0ZSBmb3IgZWFjaCByZW5ld2FsLlxyXG4gICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayh3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoc2NvcGVzICYmIHNjb3Blcy5pbmRleE9mKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKSA+IC0xICYmIHNjb3Blcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcCB1c2VzIGlkVG9rZW4gdG8gc2VuZCB0byBhcGkgZW5kcG9pbnRzXHJcbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHNjb3BlIGlzIHRyYWNrZWQgYXMgY2xpZW50SWQgdG8gc3RvcmUgdGhpcyB0b2tlblxyXG4gICAgICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcInJlbmV3aW5nIGlkVG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmV3SWRUb2tlbihzY29wZXMsIHJlc29sdmUsIHJlamVjdCwgYWNjb3VudE9iamVjdCwgYXV0aGVudGljYXRpb25SZXF1ZXN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJyZW5ld2luZyBhY2Nlc3N0b2tlblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZXdUb2tlbihzY29wZXMsIHJlc29sdmUsIHJlamVjdCwgYWNjb3VudE9iamVjdCwgYXV0aGVudGljYXRpb25SZXF1ZXN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKiogXHJcbiAgICogVXNlZCB0byBnZXQgdGhlIHRva2VuIGZyb20gY2FjaGUuXHJcbiAgICogXHJcbiAgICogVE9ETzogZXh0cmFRdWVyeVBhcmFtcyAtIHJlZmFjdG9yXHJcbiAgICogXHJcbiAgICogTVNBTCB3aWxsIHJldHVybiB0aGUgY2FjaGVkIHRva2VuIGlmIGl0IGlzIG5vdCBleHBpcmVkLlxyXG4gICAqIE9yIGl0IHdpbGwgc2VuZCBhIHJlcXVlc3QgdG8gdGhlIFNUUyB0byBvYnRhaW4gYW4gYWNjZXNzX3Rva2VuIHVzaW5nIGEgaGlkZGVuIGlmcmFtZS4gVG8gcmVuZXcgaWRUb2tlbiwgY2xpZW50SWQgc2hvdWxkIGJlIHBhc3NlZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXR5IC0gQSBVUkwgaW5kaWNhdGluZyBhIGRpcmVjdG9yeSB0aGF0IE1TQUwgY2FuIHVzZSB0byBvYnRhaW4gdG9rZW5zLlxyXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O3RlbmFudCZndDsvJmx0O3RlbmFudCZndDssIHdoZXJlICZsdDt0ZW5hbnQmZ3Q7IGlzIHRoZSBkaXJlY3RvcnkgaG9zdCAoZS5nLiBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20pIGFuZCAmbHQ7dGVuYW50Jmd0OyBpcyBhIGlkZW50aWZpZXIgd2l0aGluIHRoZSBkaXJlY3RvcnkgaXRzZWxmIChlLmcuIGEgZG9tYWluIGFzc29jaWF0ZWQgdG8gdGhlIHRlbmFudCwgc3VjaCBhcyBjb250b3NvLm9ubWljcm9zb2Z0LmNvbSwgb3IgdGhlIEdVSUQgcmVwcmVzZW50aW5nIHRoZSBUZW5hbnRJRCBwcm9wZXJ0eSBvZiB0aGUgZGlyZWN0b3J5KVxyXG4gICAqIC0gSW4gQXp1cmUgQjJDLCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDtpbnN0YW5jZSZndDsvdGZwLyZsdDt0ZW5hbnQmZ3Q7Lzxwb2xpY3lOYW1lPi9cclxuICAgKiAtIERlZmF1bHQgdmFsdWUgaXM6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vblwiXHJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgYXJlIHJlcXVlc3RlZC5UaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXh0cmFRdWVyeVBhcmFtZXRlcnMgLSBLZXktdmFsdWUgcGFpcnMgdG8gcGFzcyB0byB0aGUgU1RTIGR1cmluZyB0aGUgIGF1dGhlbnRpY2F0aW9uIGZsb3cuXHJcbiAgICogQHJldHVybnMge1Byb21pc2UuPHN0cmluZz59IC0gQSBQcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gdGhpcyBmdW5jdGlvbiBoYXMgY29tcGxldGVkLCBvciByZWplY3RlZCBpZiBhbiBlcnJvciB3YXMgcmFpc2VkLiBSZXNvbHZlZCB3aXRoIHRva2VuIG9yIHJlamVjdGVkIHdpdGggZXJyb3IuXHJcbiAgICovXHJcbiAgQHJlc29sdmVUb2tlbk9ubHlJZk91dE9mSWZyYW1lXHJcbiAgYWNxdWlyZVRva2VuU2lsZW50TmV3KGF1dGhQYXJhbXM6IEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWRTY29wZSA9IHRoaXMudmFsaWRhdGVJbnB1dFNjb3BlKGF1dGhQYXJhbXMuc2NvcGVzKTtcclxuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIFwifFwiICsgaXNWYWxpZFNjb3BlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoYXV0aFBhcmFtcy5zY29wZXMpIHtcclxuICAgICAgICAgIGF1dGhQYXJhbXMuc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoYXV0aFBhcmFtcy5zY29wZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2NvcGUgPSBhdXRoUGFyYW1zLnNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGFjY291bnRPYmplY3QgPSBhdXRoUGFyYW1zLmFjY291bnQgPyBhdXRoUGFyYW1zLmFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgICAgICBjb25zdCBhZGFsSWRUb2tlbiA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5hZGFsSWRUb2tlbik7XHJcbiAgICAgICAgbGV0IGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0RXh0cmFRdWVyeVBhcmFtZXRlcnNTdHJpbmcoYXV0aFBhcmFtcy5leHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcblxyXG5cclxuICAgICAgICAvL2lmIHVzZXIgaXMgbm90IGN1cnJlbnRseSBsb2dnZWQgaW4gYW5kIG5vIGxvZ2luX2hpbnQvc2lkIGlzIHBhc3NlZCBhcyBhbiBleHRyYVF1ZXJ5UGFyYW1hdGVyXHJcbiAgICAgICAgLy8gY2hlY2tTU08gY29kZSBjaGFuZ2VzIG5vdyB0aGF0IFwic2lkXCIgb3IgXCJsb2dpbl9oaW50XCIgY2FuIGJlIHNlbnQgYXMgYXV0aGVudGljYXRpb24gcGFyYW1ldGVyc1xyXG5cclxuICAgICAgICAvLyBpZiAoIWFjY291bnRPYmplY3QgJiYgVXRpbHMuY2hlY2tTU08oZXh0cmFRdWVyeVBhcmFtZXRlcnMpICYmIFV0aWxzLmlzRW1wdHkoYWRhbElkVG9rZW4pKSB7XHJcbiAgICAgICAgaWYgKCFhY2NvdW50T2JqZWN0ICYmICEoYXV0aFBhcmFtcy5sb2dpbl9oaW50KSAmJiAhKGF1dGhQYXJhbXMuc2lkKSAmJiBVdGlscy5pc0VtcHR5KGFkYWxJZFRva2VuKSkge1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy51c2VyTG9naW5FcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24udXNlckxvZ2luRXJyb3IpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2lmIHVzZXIgZGlkbid0IHBhc3NlcyB0aGUgbG9naW5faGludCBhbmQgYWRhbCdzIGlkdG9rZW4gaXMgcHJlc2VudCBhbmQgbm8gdXNlcm9iamVjdCwgdXNlIHRoZSBsb2dpbl9oaW50IGZyb20gYWRhbCdzIGlkVG9rZW5cclxuICAgICAgICBlbHNlIGlmICghYWNjb3VudE9iamVjdCAmJiAhVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgICAgIGNvbnN0IGlkVG9rZW5PYmplY3QgPSBVdGlscy5leHRyYWN0SWRUb2tlbihhZGFsSWRUb2tlbik7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcclxuICAgICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xyXG4gICAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICAgIGlmIChhdXRoUGFyYW1zLnNjb3Blcy5pbmRleE9mKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aFBhcmFtcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIGF1dGhQYXJhbXMuc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhQYXJhbXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhdXRoUGFyYW1zLnNjb3BlcywgUmVzcG9uc2VUeXBlcy50b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChhdXRoUGFyYW1zLnNjb3Blcy5pbmRleE9mKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aFBhcmFtcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIGF1dGhQYXJhbXMuc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhQYXJhbXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhdXRoUGFyYW1zLnNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjYWNoZVJlc3VsdCA9IHRoaXMuZ2V0Q2FjaGVkVG9rZW4oYXV0aGVudGljYXRpb25SZXF1ZXN0LCBhY2NvdW50T2JqZWN0KTtcclxuICAgICAgICBpZiAoY2FjaGVSZXN1bHQpIHtcclxuICAgICAgICAgIGlmIChjYWNoZVJlc3VsdC50b2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVG9rZW4gaXMgYWxyZWFkeSBpbiBjYWNoZSBmb3Igc2NvcGU6XCIgKyBzY29wZSk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoY2FjaGVSZXN1bHQudG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKGNhY2hlUmVzdWx0LmVycm9yRGVzYyB8fCBjYWNoZVJlc3VsdC5lcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvUGlpKGNhY2hlUmVzdWx0LmVycm9yRGVzYyArIFwiOlwiICsgY2FjaGVSZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICByZWplY3QoY2FjaGVSZXN1bHQuZXJyb3JEZXNjICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgY2FjaGVSZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwiVG9rZW4gaXMgbm90IGluIGNhY2hlIGZvciBzY29wZTpcIiArIHNjb3BlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlKSB7Ly9DYWNoZSByZXN1bHQgY2FuIHJldHVybiBudWxsIGlmIGNhY2hlIGlzIGVtcHR5LiBJbiB0aGF0IGNhc2UsIHNldCBhdXRob3JpdHkgdG8gZGVmYXVsdCB2YWx1ZSBpZiBubyBhdXRob3JpdHkgaXMgcGFzc2VkIHRvIHRoZSBhcGkuXHJcbiAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5SW5zdGFuY2UgPSBhdXRoUGFyYW1zLmF1dGhvcml0eSA/IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aFBhcmFtcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSA6IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNhY2hlIG1pc3NcclxuICAgICAgICByZXR1cm4gYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggYXR0ZXB0IHdpdGggaWZyYW1lXHJcbiAgICAgICAgICAgIC8vQWxyZWFkeSByZW5ld2luZyBmb3IgdGhpcyBzY29wZSwgY2FsbGJhY2sgd2hlbiB3ZSBnZXQgdGhlIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAod2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJSZW5ldyB0b2tlbiBmb3Igc2NvcGU6IFwiICsgc2NvcGUgKyBcIiBpcyBpbiBwcm9ncmVzcy4gUmVnaXN0ZXJpbmcgY2FsbGJhY2tcIik7XHJcbiAgICAgICAgICAgICAgLy9BY3RpdmUgcmVuZXdhbHMgY29udGFpbnMgdGhlIHN0YXRlIGZvciBlYWNoIHJlbmV3YWwuXHJcbiAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0sIHNjb3BlLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChhdXRoUGFyYW1zLnNjb3BlcyAmJiBhdXRoUGFyYW1zLnNjb3Blcy5pbmRleE9mKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKSA+IC0xICYmIGF1dGhQYXJhbXMuc2NvcGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwIHVzZXMgaWRUb2tlbiB0byBzZW5kIHRvIGFwaSBlbmRwb2ludHNcclxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgc2NvcGUgaXMgdHJhY2tlZCBhcyBjbGllbnRJZCB0byBzdG9yZSB0aGlzIHRva2VuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwicmVuZXdpbmcgaWRUb2tlblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZXdJZFRva2VuKGF1dGhQYXJhbXMuc2NvcGVzLCByZXNvbHZlLCByZWplY3QsIGFjY291bnRPYmplY3QsIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwicmVuZXdpbmcgYWNjZXNzdG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmV3VG9rZW4oYXV0aFBhcmFtcy5zY29wZXMsIHJlc29sdmUsIHJlamVjdCwgYWNjb3VudE9iamVjdCwgYXV0aGVudGljYXRpb25SZXF1ZXN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBVc2VkIHRvIG9idGFpbiBhbiBhY2Nlc3NfdG9rZW4gYnkgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQuXHJcbiAgICogVG8gcmVuZXcgaWRUb2tlbiwgY2xpZW50SWQgc2hvdWxkIGJlIHBhc3NlZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXR5IC0gQSBVUkwgaW5kaWNhdGluZyBhIGRpcmVjdG9yeSB0aGF0IE1TQUwgY2FuIHVzZSB0byBvYnRhaW4gdG9rZW5zLlxyXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8ve2luc3RhbmNlfS8mbHQ7dGVuYW50Jmd0Oywgd2hlcmUgJmx0O3RlbmFudCZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXHJcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8ve2luc3RhbmNlfS90ZnAvJmx0O3RlbmFudCZndDsvPHBvbGljeU5hbWU+XHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0aGUgc2NvcGVzIGFyZSByZXF1ZXN0ZWQuVGhlIGRlZmF1bHQgdXNlciBpcyB0aGUgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqL1xyXG4gIGFjcXVpcmVUb2tlblJlZGlyZWN0KHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZyk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCwgZXh0cmFRdWVyeVBhcmFtZXRlcnM6IHN0cmluZyk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk/OiBzdHJpbmcsIGFjY291bnQ/OiBBY2NvdW50LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcclxuICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yLCBDb25zdGFudHMuYWNjZXNzVG9rZW4sIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgIHNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKHNjb3Blcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudE9iamVjdCA9IGFjY291bnQgPyBhY2NvdW50IDogdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICBpZiAodGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICghYWNjb3VudE9iamVjdCAmJiAhKGV4dHJhUXVlcnlQYXJhbWV0ZXJzICYmIChleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5sb2dpbl9oaW50KSAhPT0gLTEpKSkge1xyXG4gICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24udXNlckxvZ2luRXJyb3IsIG51bGwsIEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IsIENvbnN0YW50cy5hY2Nlc3NUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgbGV0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycztcclxuICAgIGxldCBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSBhdXRob3JpdHkgPyBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpIDogdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcclxuXHJcbiAgICBhY3F1aXJlVG9rZW5BdXRob3JpdHkuUmVzb2x2ZUVuZHBvaW50c0FzeW5jKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xyXG4gICAgICBpZiAoYWNjb3VudE9iamVjdCkge1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGFjY291bnRPYmplY3QuaG9tZUFjY291bnRJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhY3F1aXJlVG9rZW5Vc2VyS2V5LCBKU09OLnN0cmluZ2lmeShhY2NvdW50T2JqZWN0KSk7XHJcbiAgICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgYWNxdWlyZVRva2VuQXV0aG9yaXR5LkNhbm9uaWNhbEF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcclxuICAgICAgdXJsTmF2aWdhdGUgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlLCBhY2NvdW50T2JqZWN0KTtcclxuICAgICAgaWYgKHVybE5hdmlnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gb2J0YWluIGFuIGFjY2Vzc190b2tlbiBieSByZWRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUgYXV0aG9yaXphdGlvbiBlbmRwb2ludC5cclxuICAgKiBUbyByZW5ldyBpZFRva2VuLCBjbGllbnRJZCBzaG91bGQgYmUgcGFzc2VkIGFzIHRoZSBvbmx5IHNjb3BlIGluIHRoZSBzY29wZXMgYXJyYXkuXHJcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBzY29wZXMgLSBQZXJtaXNzaW9ucyB5b3Ugd2FudCBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBOb3QgYWxsIHNjb3BlcyBhcmUgIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gU2NvcGVzIGxpa2UgXCJvcGVuaWRcIiBhbmQgXCJwcm9maWxlXCIgYXJlIHNlbnQgd2l0aCBldmVyeSByZXF1ZXN0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXHJcbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly97aW5zdGFuY2V9LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly97aW5zdGFuY2V9L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT5cclxuICAgKiAtIERlZmF1bHQgdmFsdWUgaXM6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vblwiXHJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgYXJlIHJlcXVlc3RlZC5UaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXh0cmFRdWVyeVBhcmFtZXRlcnMgLSBLZXktdmFsdWUgcGFpcnMgdG8gcGFzcyB0byB0aGUgU1RTIGR1cmluZyB0aGUgIGF1dGhlbnRpY2F0aW9uIGZsb3cuXHJcbiAgICovXHJcbiAgXHJcbiAgIGFjcXVpcmVUb2tlblJlZGlyZWN0TmV3KGF1dGhQYXJhbXM6IEF1dGhlbnRpY2F0aW9uUGFyYW1ldGVycyk6IHZvaWQge1xyXG4gICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoYXV0aFBhcmFtcy5zY29wZXMpO1xyXG4gICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2soRXJyb3JEZXNjcmlwdGlvbi5pbnB1dFNjb3Blc0Vycm9yLCBudWxsLCBFcnJvckNvZGVzLmlucHV0U2NvcGVzRXJyb3IsIENvbnN0YW50cy5hY2Nlc3NUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhdXRoUGFyYW1zLnNjb3Blcykge1xyXG4gICAgICAgIGF1dGhQYXJhbXMuc2NvcGVzID0gdGhpcy5maWx0ZXJTY29wZXMoYXV0aFBhcmFtcy5zY29wZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjY291bnRPYmplY3QgPSBhdXRoUGFyYW1zLmFjY291bnQgPyBhdXRoUGFyYW1zLmFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgIGlmICh0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzY29wZSA9IGF1dGhQYXJhbXMuc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBsZXQgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBVdGlscy5jb25zdHJ1Y3RFeHRyYVF1ZXJ5UGFyYW1ldGVyc1N0cmluZyhhdXRoUGFyYW1zLmV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuXHJcbiAgICAvLyBsb2dpbl9oaW50IG5vdyBpcyBhIHBhcnQgb2YgQXV0aFBhcmFtc1xyXG4gICAgLy8gaWYgKCFhY2NvdW50T2JqZWN0ICYmICEoZXh0cmFRdWVyeVBhcmFtZXRlcnMgJiYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzLmluZGV4T2YoQ29uc3RhbnRzLmxvZ2luX2hpbnQpICE9PSAtMSkpKSB7XHJcbiAgICBpZiAoIWFjY291bnRPYmplY3QgJiYgIShhdXRoUGFyYW1zLmxvZ2luX2hpbnQpKSB7XHJcbiAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcclxuICAgICAgICB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2soRXJyb3JEZXNjcmlwdGlvbi51c2VyTG9naW5FcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy51c2VyTG9naW5FcnJvciwgQ29uc3RhbnRzLmFjY2Vzc1Rva2VuLCB0aGlzLmdldEFjY291bnRTdGF0ZSh0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xyXG4gICAgbGV0IGFjcXVpcmVUb2tlbkF1dGhvcml0eSA9IGF1dGhQYXJhbXMuYXV0aG9yaXR5ID8gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRoUGFyYW1zLmF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpIDogdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcclxuXHJcbiAgICBhY3F1aXJlVG9rZW5BdXRob3JpdHkuUmVzb2x2ZUVuZHBvaW50c0FzeW5jKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICBpZiAoYXV0aFBhcmFtcy5zY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgYXV0aFBhcmFtcy5zY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIGF1dGhQYXJhbXMuc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgYXV0aFBhcmFtcy5zY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW5fdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UsIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgdmFyIGFjcXVpcmVUb2tlblVzZXJLZXk7XHJcbiAgICAgIGlmIChhY2NvdW50T2JqZWN0KSB7XHJcbiAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYWNjb3VudE9iamVjdC5ob21lQWNjb3VudElkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX2FjY291bnQgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGFjcXVpcmVUb2tlblVzZXJLZXksIEpTT04uc3RyaW5naWZ5KGFjY291bnRPYmplY3QpKTtcclxuICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYXV0aG9yaXR5S2V5LCBhY3F1aXJlVG9rZW5BdXRob3JpdHkuQ2Fub25pY2FsQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoYXV0aFBhcmFtcy5zY29wZXMpICsgQ29uc3RhbnRzLnJlc3BvbnNlX21vZGVfZnJhZ21lbnQ7XHJcbiAgICAgIHVybE5hdmlnYXRlID0gdGhpcy5hZGRIaW50UGFyYW1ldGVycyh1cmxOYXZpZ2F0ZSwgYWNjb3VudE9iamVjdCk7XHJcbiAgICAgIGlmICh1cmxOYXZpZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsTmF2aWdhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICAqIFVzZWQgdG8gcmVkaXJlY3QgdGhlIGJyb3dzZXIgdG8gdGhlIFNUUyBhdXRob3JpemF0aW9uIGVuZHBvaW50XHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxOYXZpZ2F0ZSAtIFVSTCBvZiB0aGUgYXV0aG9yaXphdGlvbiBlbmRwb2ludFxyXG4gICAgKiBAaGlkZGVuXHJcbiAgICAqL1xyXG4gIHByaXZhdGUgcHJvbXB0VXNlcih1cmxOYXZpZ2F0ZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodXJsTmF2aWdhdGUgJiYgIVV0aWxzLmlzRW1wdHkodXJsTmF2aWdhdGUpKSB7XHJcbiAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm9QaWkoXCJOYXZpZ2F0ZSB0bzpcIiArIHVybE5hdmlnYXRlKTtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsTmF2aWdhdGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIk5hdmlnYXRlIHVybCBpcyBlbXB0eVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBzZW5kIHRoZSB1c2VyIHRvIHRoZSByZWRpcmVjdF91cmkgYWZ0ZXIgYXV0aGVudGljYXRpb24gaXMgY29tcGxldGUuIFRoZSB1c2VyXCJzIGJlYXJlciB0b2tlbiBpcyBhdHRhY2hlZCB0byB0aGUgVVJJIGZyYWdtZW50IGFzIGFuIGlkX3Rva2VuL2FjY2Vzc190b2tlbiBmaWVsZC5cclxuICAgKiBUaGlzIGZ1bmN0aW9uIGFsc28gY2xvc2VzIHRoZSBwb3B1cCB3aW5kb3cgYWZ0ZXIgcmVkaXJlY3Rpb24uXHJcbiAgICogQGhpZGRlblxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwcml2YXRlIG9wZW5XaW5kb3codXJsTmF2aWdhdGU6IHN0cmluZywgdGl0bGU6IHN0cmluZywgaW50ZXJ2YWw6IG51bWJlciwgaW5zdGFuY2U6IHRoaXMsIHJlc29sdmU/OiBGdW5jdGlvbiwgcmVqZWN0PzogRnVuY3Rpb24pOiBXaW5kb3cge1xyXG4gICAgdmFyIHBvcHVwV2luZG93ID0gdGhpcy5vcGVuUG9wdXAodXJsTmF2aWdhdGUsIHRpdGxlLCBDb25zdGFudHMucG9wVXBXaWR0aCwgQ29uc3RhbnRzLnBvcFVwSGVpZ2h0KTtcclxuICAgIGlmIChwb3B1cFdpbmRvdyA9PSBudWxsKSB7XHJcbiAgICAgIGluc3RhbmNlLnBMb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgaW5zdGFuY2UucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhFcnJvckNvZGVzLnBvcFVwV2luZG93RXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24ucG9wVXBXaW5kb3dFcnJvcik7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIEVycm9yQ29kZXMucG9wVXBXaW5kb3dFcnJvcik7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgRXJyb3JEZXNjcmlwdGlvbi5wb3BVcFdpbmRvd0Vycm9yKTtcclxuICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLnBvcFVwV2luZG93RXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnBvcFVwV2luZG93RXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzLnB1c2gocG9wdXBXaW5kb3cpO1xyXG4gICAgdmFyIHBvbGxUaW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGlmIChwb3B1cFdpbmRvdyAmJiBwb3B1cFdpbmRvdy5jbG9zZWQgJiYgaW5zdGFuY2UucExvZ2luSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIGlmIChyZWplY3QpIHtcclxuICAgICAgICAgIHJlamVjdChFcnJvckNvZGVzLnVzZXJDYW5jZWxsZWRFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24udXNlckNhbmNlbGxlZEVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcclxuICAgICAgICBpZiAodGhpcy5wQ29uZmlnLmZyYW1ld29yay5pc0FuZ3VsYXIpIHtcclxuICAgICAgICAgIHRoaXMuYnJvYWRjYXN0KFwibXNhbDpwb3BVcENsb3NlZFwiLCBFcnJvckNvZGVzLnVzZXJDYW5jZWxsZWRFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24udXNlckNhbmNlbGxlZEVycm9yKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5zdGFuY2UucExvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgIGluc3RhbmNlLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIHBvcFVwV2luZG93TG9jYXRpb24gPSBwb3B1cFdpbmRvdy5sb2NhdGlvbjtcclxuICAgICAgICBpZiAocG9wVXBXaW5kb3dMb2NhdGlvbi5ocmVmLmluZGV4T2YodGhpcy5nZXRSZWRpcmVjdFVyaSgpKSAhPT0gLTEpIHtcclxuICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHBvbGxUaW1lcik7XHJcbiAgICAgICAgICBpbnN0YW5jZS5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICBpbnN0YW5jZS5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIkNsb3NpbmcgcG9wdXAgd2luZG93XCIpO1xyXG4gICAgICAgICAgaWYgKHRoaXMucENvbmZpZy5mcmFtZXdvcmsuaXNBbmd1bGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0KFwibXNhbDpwb3BVcEhhc2hDaGFuZ2VkXCIsIHBvcFVwV2luZG93TG9jYXRpb24uaGFzaCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2luZG93Lm9wZW5lZFdpbmRvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICB3aW5kb3cub3BlbmVkV2luZG93c1tpXS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy9Dcm9zcyBEb21haW4gdXJsIGNoZWNrIGVycm9yLiBXaWxsIGJlIHRocm93biB1bnRpbCBBQUQgcmVkaXJlY3RzIHRoZSB1c2VyIGJhY2sgdG8gdGhlIGFwcFwicyByb290IHBhZ2Ugd2l0aCB0aGUgdG9rZW4uIE5vIG5lZWQgdG8gbG9nIG9yIHRocm93IHRoaXMgZXJyb3IgYXMgaXQgd2lsbCBjcmVhdGUgdW5uZWNlc3NhcnkgdHJhZmZpYy5cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgICAgaW50ZXJ2YWwpO1xyXG5cclxuICAgIHJldHVybiBwb3B1cFdpbmRvdztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYnJvYWRjYXN0KGV2ZW50TmFtZTogc3RyaW5nLCBkYXRhOiBzdHJpbmcpIHtcclxuICAgIHZhciBldnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7IGRldGFpbDogZGF0YSB9KTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2dCk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gbG9nIG91dCB0aGUgY3VycmVudCB1c2VyLCBhbmQgcmVkaXJlY3QgdGhlIHVzZXIgdG8gdGhlIHBvc3RMb2dvdXRSZWRpcmVjdFVyaS5cclxuICAgKiBEZWZhdWx0cyBiZWhhdmlvdXIgaXMgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cclxuICAgKi9cclxuICBsb2dvdXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcclxuICAgIHRoaXMucEFjY291bnQgPSBudWxsO1xyXG4gICAgbGV0IGxvZ291dCA9IFwiXCI7XHJcbiAgICBpZiAodGhpcy5nZXRQb3N0TG9nb3V0UmVkaXJlY3RVcmkoKSkge1xyXG4gICAgICBsb2dvdXQgPSBcInBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmxOYXZpZ2F0ZSA9IHRoaXMuYXV0aG9yaXR5ICsgXCIvb2F1dGgyL3YyLjAvbG9nb3V0P1wiICsgbG9nb3V0O1xyXG4gICAgdGhpcy5wcm9tcHRVc2VyKHVybE5hdmlnYXRlKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBjb25maWd1cmUgdGhlIHBvcHVwIHdpbmRvdyBmb3IgbG9naW4uXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY2xlYXJDYWNoZSgpOiB2b2lkIHtcclxuICAgIHdpbmRvdy5yZW5ld1N0YXRlcyA9IFtdO1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW5JdGVtcyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnMoQ29uc3RhbnRzLmNsaWVudElkLCBDb25zdGFudHMudXNlcklkZW50aWZpZXIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY2Nlc3NUb2tlbkl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuSXRlbXNbaV0ua2V5KSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UucmVzZXRDYWNoZUl0ZW1zKCk7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UuY2xlYXJDb29raWUoKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBjbGVhckNhY2hlRm9yU2NvcGUoYWNjZXNzVG9rZW46IHN0cmluZykge1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW5JdGVtcyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnMoQ29uc3RhbnRzLmNsaWVudElkLCBDb25zdGFudHMudXNlcklkZW50aWZpZXIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2Nlc3NUb2tlbkl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciB0b2tlbiA9IGFjY2Vzc1Rva2VuSXRlbXNbaV07XHJcbiAgICAgIGlmICh0b2tlbi52YWx1ZS5hY2Nlc3NUb2tlbiA9PT0gYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeSh0b2tlbi5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qXHJcbiAgICogQ29uZmlndXJlcyBwb3B1cCB3aW5kb3cgZm9yIGxvZ2luLlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBvcGVuUG9wdXAodXJsTmF2aWdhdGU6IHN0cmluZywgdGl0bGU6IHN0cmluZywgcG9wVXBXaWR0aDogbnVtYmVyLCBwb3BVcEhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvKlxyXG4gICAgICAgKiBhZGRpbmcgd2luTGVmdCBhbmQgd2luVG9wIHRvIGFjY291bnQgZm9yIGR1YWwgbW9uaXRvclxyXG4gICAgICAgKiB1c2luZyBzY3JlZW5MZWZ0IGFuZCBzY3JlZW5Ub3AgZm9yIElFOCBhbmQgZWFybGllclxyXG4gICAgICAgKi9cclxuICAgICAgY29uc3Qgd2luTGVmdCA9IHdpbmRvdy5zY3JlZW5MZWZ0ID8gd2luZG93LnNjcmVlbkxlZnQgOiB3aW5kb3cuc2NyZWVuWDtcclxuICAgICAgY29uc3Qgd2luVG9wID0gd2luZG93LnNjcmVlblRvcCA/IHdpbmRvdy5zY3JlZW5Ub3AgOiB3aW5kb3cuc2NyZWVuWTtcclxuICAgICAgLypcclxuICAgICAgICogd2luZG93LmlubmVyV2lkdGggZGlzcGxheXMgYnJvd3NlciB3aW5kb3dcInMgaGVpZ2h0IGFuZCB3aWR0aCBleGNsdWRpbmcgdG9vbGJhcnNcclxuICAgICAgICogdXNpbmcgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIGZvciBJRTggYW5kIGVhcmxpZXJcclxuICAgICAgICovXHJcbiAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICAgIGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xyXG4gICAgICBjb25zdCBsZWZ0ID0gKCh3aWR0aCAvIDIpIC0gKHBvcFVwV2lkdGggLyAyKSkgKyB3aW5MZWZ0O1xyXG4gICAgICBjb25zdCB0b3AgPSAoKGhlaWdodCAvIDIpIC0gKHBvcFVwSGVpZ2h0IC8gMikpICsgd2luVG9wO1xyXG5cclxuICAgICAgY29uc3QgcG9wdXBXaW5kb3cgPSB3aW5kb3cub3Blbih1cmxOYXZpZ2F0ZSwgdGl0bGUsIFwid2lkdGg9XCIgKyBwb3BVcFdpZHRoICsgXCIsIGhlaWdodD1cIiArIHBvcFVwSGVpZ2h0ICsgXCIsIHRvcD1cIiArIHRvcCArIFwiLCBsZWZ0PVwiICsgbGVmdCk7XHJcbiAgICAgIGlmIChwb3B1cFdpbmRvdy5mb2N1cykge1xyXG4gICAgICAgIHBvcHVwV2luZG93LmZvY3VzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwb3B1cFdpbmRvdztcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJlcnJvciBvcGVuaW5nIHBvcHVwIFwiICsgZS5tZXNzYWdlKTtcclxuICAgICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gdmFsaWRhdGUgdGhlIHNjb3BlcyBpbnB1dCBwYXJhbWV0ZXIgcmVxdWVzdGVkICBieSB0aGUgZGV2ZWxvcGVyLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gRGV2ZWxvcGVyIHJlcXVlc3RlZCBwZXJtaXNzaW9ucy4gTm90IGFsbCBzY29wZXMgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbiByZXR1cm5lZC5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgdmFsaWRhdGVJbnB1dFNjb3BlKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XHJcbiAgICBpZiAoIXNjb3BlcyB8fCBzY29wZXMubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm4gXCJTY29wZXMgY2Fubm90IGJlIHBhc3NlZCBhcyBhbiBlbXB0eSBhcnJheVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShzY29wZXMpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBkb2VzIG5vdCBhY2NlcHQgbm9uLWFycmF5IHNjb3Blc1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgaWYgKHNjb3Blcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2xpZW50SWQgY2FuIG9ubHkgYmUgcHJvdmlkZWQgYXMgYSBzaW5nbGUgc2NvcGVcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAgKiBVc2VkIHRvIHJlbW92ZSBvcGVuaWQgYW5kIHByb2ZpbGUgZnJvbSB0aGUgbGlzdCBvZiBzY29wZXMgcGFzc2VkIGJ5IHRoZSBkZXZlbG9wZXIuVGhlc2Ugc2NvcGVzIGFyZSBhZGRlZCBieSBkZWZhdWx0XHJcbiAgICAqIEBoaWRkZW5cclxuICAgICovXHJcbiAgcHJpdmF0ZSBmaWx0ZXJTY29wZXMoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBzY29wZXMgPSBzY29wZXMuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50ICE9PSBcIm9wZW5pZFwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2NvcGVzID0gc2NvcGVzLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudCAhPT0gXCJwcm9maWxlXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2NvcGVzO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIGFkZCB0aGUgZGV2ZWxvcGVyIHJlcXVlc3RlZCBjYWxsYmFjayB0byB0aGUgYXJyYXkgb2YgY2FsbGJhY2tzIGZvciB0aGUgc3BlY2lmaWVkIHNjb3Blcy4gVGhlIHVwZGF0ZWQgYXJyYXkgaXMgc3RvcmVkIG9uIHRoZSB3aW5kb3cgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNjb3BlIC0gRGV2ZWxvcGVyIHJlcXVlc3RlZCBwZXJtaXNzaW9ucy4gTm90IGFsbCBzY29wZXMgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbiByZXR1cm5lZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwZWN0ZWRTdGF0ZSAtIFVuaXF1ZSBzdGF0ZSBpZGVudGlmaWVyIChndWlkKS5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIC0gVGhlIHJlc29sdmUgZnVuY3Rpb24gb2YgdGhlIHByb21pc2Ugb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCAtIFRoZSByZWplY3QgZnVuY3Rpb24gb2YgdGhlIHByb21pc2Ugb2JqZWN0LlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZWdpc3RlckNhbGxiYWNrKGV4cGVjdGVkU3RhdGU6IHN0cmluZywgc2NvcGU6IHN0cmluZywgcmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgIHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0gPSBleHBlY3RlZFN0YXRlO1xyXG4gICAgaWYgKCF3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSkge1xyXG4gICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IFtdO1xyXG4gICAgfVxyXG4gICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0ucHVzaCh7IHJlc29sdmU6IHJlc29sdmUsIHJlamVjdDogcmVqZWN0IH0pO1xyXG4gICAgaWYgKCF3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKSB7XHJcbiAgICAgIHdpbmRvdy5jYWxsQmFja01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0gPVxyXG4gICAgICAgIChlcnJvckRlc2M6IHN0cmluZywgdG9rZW46IHN0cmluZywgZXJyb3I6IHN0cmluZywgdG9rZW5UeXBlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgIHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0gPSBudWxsO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmIChlcnJvckRlc2MgfHwgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdW2ldLnJlamVjdChlcnJvckRlc2MgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBlcnJvcik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXVtpXS5yZXNvbHZlKHRva2VuKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci53YXJuaW5nKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IG51bGw7XHJcbiAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHByb3RlY3RlZCBnZXRDYWNoZWRUb2tlbkludGVybmFsKHNjb3BlczogQXJyYXk8c3RyaW5nPiwgYWNjb3VudDogQWNjb3VudCk6IENhY2hlUmVzdWx0IHtcclxuICAgIGNvbnN0IHVzZXJPYmplY3QgPSBhY2NvdW50ID8gYWNjb3VudCA6IHRoaXMuZ2V0QWNjb3VudCgpO1xyXG4gICAgaWYgKCF1c2VyT2JqZWN0KSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycztcclxuICAgIGxldCBuZXdBdXRob3JpdHkgPSB0aGlzLmF1dGhvcml0eUluc3RhbmNlID8gdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA6IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UodGhpcy5hdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KTtcclxuXHJcbiAgICBpZiAoVXRpbHMuY29tcGFyZU9iamVjdHModXNlck9iamVjdCwgdGhpcy5nZXRBY2NvdW50KCkpKSB7XHJcbiAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMobmV3QXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMobmV3QXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXRDYWNoZWRUb2tlbihhdXRoZW50aWNhdGlvblJlcXVlc3QsIGFjY291bnQpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIGdldCB0b2tlbiBmb3IgdGhlIHNwZWNpZmllZCBzZXQgb2Ygc2NvcGVzIGZyb20gdGhlIGNhY2hlXHJcbiAgICogQHBhcmFtIHtBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzfSBhdXRoZW50aWNhdGlvblJlcXVlc3QgLSBSZXF1ZXN0IHNlbnQgdG8gdGhlIFNUUyB0byBvYnRhaW4gYW4gaWRfdG9rZW4vYWNjZXNzX3Rva2VuXHJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVXNlciBmb3Igd2hpY2ggdGhlIHNjb3BlcyB3ZXJlIHJlcXVlc3RlZFxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENhY2hlZFRva2VuKGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycywgYWNjb3VudDogQWNjb3VudCk6IENhY2hlUmVzdWx0IHtcclxuICAgIGxldCBhY2Nlc3NUb2tlbkNhY2hlSXRlbTogQWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBudWxsO1xyXG4gICAgY29uc3Qgc2NvcGVzID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LnNjb3BlcztcclxuICAgIGNvbnN0IHRva2VuQ2FjaGVJdGVtcyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRBbGxBY2Nlc3NUb2tlbnModGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIGFjY291bnQgPyBhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllciA6IG51bGwpOyAvL2ZpbHRlciBieSBjbGllbnRJZCBhbmQgdXNlclxyXG4gICAgaWYgKHRva2VuQ2FjaGVJdGVtcy5sZW5ndGggPT09IDApIHsgLy8gTm8gbWF0Y2ggZm91bmQgYWZ0ZXIgaW5pdGlhbCBmaWx0ZXJpbmdcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsdGVyZWRJdGVtczogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+ID0gW107XHJcbiAgICAvL2lmIG5vIGF1dGhvcml0eSBwYXNzZWRcclxuICAgIGlmICghYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eSkge1xyXG4gICAgICAvL2ZpbHRlciBieSBzY29wZVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlSXRlbSA9IHRva2VuQ2FjaGVJdGVtc1tpXTtcclxuICAgICAgICBjb25zdCBjYWNoZWRTY29wZXMgPSBjYWNoZUl0ZW0ua2V5LnNjb3Blcy5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgaWYgKFV0aWxzLmNvbnRhaW5zU2NvcGUoY2FjaGVkU2NvcGVzLCBzY29wZXMpKSB7XHJcbiAgICAgICAgICBmaWx0ZXJlZEl0ZW1zLnB1c2goY2FjaGVJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vaWYgb25seSBvbmUgY2FjaGVkIHRva2VuIGZvdW5kXHJcbiAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gZmlsdGVyZWRJdGVtc1swXTtcclxuXHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGVycm9yRGVzYzogXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zIHNhdGlzZnlpbmcgdGhlIHJlcXVpcmVtZW50cy4gQ2FsbCBBY3F1aXJlVG9rZW4gYWdhaW4gcHJvdmlkaW5nIG1vcmUgcmVxdWlyZW1lbnRzIGxpa2UgYXV0aG9yaXR5XCIsXHJcbiAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgIGVycm9yOiBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc19kZXRlY3RlZFwiXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAvL25vIG1hdGNoIGZvdW5kLiBjaGVjayBpZiB0aGVyZSB3YXMgYSBzaW5nbGUgYXV0aG9yaXR5IHVzZWRcclxuICAgICAgICBjb25zdCBhdXRob3JpdHlMaXN0ID0gdGhpcy5nZXRVbmlxdWVBdXRob3JpdHkodG9rZW5DYWNoZUl0ZW1zLCBcImF1dGhvcml0eVwiKTtcclxuICAgICAgICBpZiAoYXV0aG9yaXR5TGlzdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlcnJvckRlc2M6IFwiTXVsdGlwbGUgYXV0aG9yaXRpZXMgZm91bmQgaW4gdGhlIGNhY2hlLiBQYXNzIGF1dGhvcml0eSBpbiB0aGUgQVBJIG92ZXJsb2FkLlwiLFxyXG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgICAgZXJyb3I6IFwibXVsdGlwbGVfbWF0Y2hpbmdfdG9rZW5zX2RldGVjdGVkXCJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuYXV0aG9yaXR5SW5zdGFuY2UgPSBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eUxpc3RbMF0sIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vYXV0aG9yaXR5IHdhcyBwYXNzZWQgaW4gdGhlIEFQSSwgZmlsdGVyIGJ5IGF1dGhvcml0eSBhbmQgc2NvcGVcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbkNhY2hlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0b2tlbkNhY2hlSXRlbXNbaV07XHJcbiAgICAgICAgY29uc3QgY2FjaGVkU2NvcGVzID0gY2FjaGVJdGVtLmtleS5zY29wZXMuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5jb250YWluc1Njb3BlKGNhY2hlZFNjb3Blcywgc2NvcGVzKSAmJiBjYWNoZUl0ZW0ua2V5LmF1dGhvcml0eSA9PT0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eSkge1xyXG4gICAgICAgICAgZmlsdGVyZWRJdGVtcy5wdXNoKGNhY2hlSXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL25vIG1hdGNoXHJcbiAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIC8vb25seSBvbmUgY2FjaGVkVG9rZW4gRm91bmRcclxuICAgICAgZWxzZSBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGZpbHRlcmVkSXRlbXNbMF07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgLy9tb3JlIHRoYW4gb25lIG1hdGNoIGZvdW5kLlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBlcnJvckRlc2M6IFwiVGhlIGNhY2hlIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucyBzYXRpc2Z5aW5nIHRoZSByZXF1aXJlbWVudHMuQ2FsbCBBY3F1aXJlVG9rZW4gYWdhaW4gcHJvdmlkaW5nIG1vcmUgcmVxdWlyZW1lbnRzIGxpa2UgYXV0aG9yaXR5XCIsXHJcbiAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgIGVycm9yOiBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc19kZXRlY3RlZFwiXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhY2Nlc3NUb2tlbkNhY2hlSXRlbSAhPSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IGV4cGlyZWQgPSBOdW1iZXIoYWNjZXNzVG9rZW5DYWNoZUl0ZW0udmFsdWUuZXhwaXJlc0luKTtcclxuICAgICAgLy8gSWYgZXhwaXJhdGlvbiBpcyB3aXRoaW4gb2Zmc2V0LCBpdCB3aWxsIGZvcmNlIHJlbmV3XHJcbiAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMucENvbmZpZy5zeXN0ZW0udG9rZW5SZW5ld2FsT2Zmc2V0U2Vjb25kcyB8fCAzMDA7XHJcbiAgICAgIGlmIChleHBpcmVkICYmIChleHBpcmVkID4gVXRpbHMubm93KCkgKyBvZmZzZXQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGVycm9yRGVzYzogbnVsbCxcclxuICAgICAgICAgIHRva2VuOiBhY2Nlc3NUb2tlbkNhY2hlSXRlbS52YWx1ZS5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeShmaWx0ZXJlZEl0ZW1zWzBdLmtleSkpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBmaWx0ZXIgYWxsIGNhY2hlZCBpdGVtcyBhbmQgcmV0dXJuIGEgbGlzdCBvZiB1bmlxdWUgdXNlcnMgYmFzZWQgb24gdXNlcklkZW50aWZpZXIuXHJcbiAgICogQHBhcmFtIHtBcnJheTxVc2VyPn0gVXNlcnMgLSB1c2VycyBzYXZlZCBpbiB0aGUgY2FjaGUuXHJcbiAgICovXHJcbiAgZ2V0QWxsQWNjb3VudHMoKTogQXJyYXk8QWNjb3VudD4ge1xyXG4gICAgY29uc3QgYWNjb3VudHM6IEFycmF5PEFjY291bnQ+ID0gW107XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKENvbnN0YW50cy5jbGllbnRJZCwgQ29uc3RhbnRzLnVzZXJJZGVudGlmaWVyKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGlkVG9rZW4gPSBuZXcgSWRUb2tlbihhY2Nlc3NUb2tlbkNhY2hlSXRlbXNbaV0udmFsdWUuaWRUb2tlbik7XHJcbiAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBuZXcgSG9tZUFjY291bnRJZGVudGlmaWVyKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXS52YWx1ZS5jbGllbnRJbmZvKTtcclxuICAgICAgY29uc3QgYWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBjbGllbnRJbmZvKTtcclxuICAgICAgYWNjb3VudHMucHVzaChhY2NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXRVbmlxdWVBY2NvdW50cyhhY2NvdW50cyk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gZmlsdGVyIHVzZXJzIGJhc2VkIG9uIHVzZXJJZGVudGlmaWVyXHJcbiAgICogQHBhcmFtIHtBcnJheTxVc2VyPn0gIFVzZXJzIC0gdXNlcnMgc2F2ZWQgaW4gdGhlIGNhY2hlXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFVuaXF1ZUFjY291bnRzKGFjY291bnRzOiBBcnJheTxBY2NvdW50Pik6IEFycmF5PEFjY291bnQ+IHtcclxuICAgIGlmICghYWNjb3VudHMgfHwgYWNjb3VudHMubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgcmV0dXJuIGFjY291bnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZsYWdzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICBjb25zdCB1bmlxdWVVc2VyczogQXJyYXk8QWNjb3VudD4gPSBbXTtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhY2NvdW50cy5sZW5ndGg7ICsraW5kZXgpIHtcclxuICAgICAgaWYgKGFjY291bnRzW2luZGV4XS5ob21lQWNjb3VudElkZW50aWZpZXIgJiYgZmxhZ3MuaW5kZXhPZihhY2NvdW50c1tpbmRleF0uaG9tZUFjY291bnRJZGVudGlmaWVyKSA9PT0gLTEpIHtcclxuICAgICAgICBmbGFncy5wdXNoKGFjY291bnRzW2luZGV4XS5ob21lQWNjb3VudElkZW50aWZpZXIpO1xyXG4gICAgICAgIHVuaXF1ZVVzZXJzLnB1c2goYWNjb3VudHNbaW5kZXhdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmlxdWVVc2VycztcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgKiBVc2VkIHRvIGdldCBhIHVuaXF1ZSBsaXN0IG9mIGF1dGhvcml0dWVzIGZyb20gdGhlIGNhY2hlXHJcbiAgKiBAcGFyYW0ge0FycmF5PEFjY2Vzc1Rva2VuQ2FjaGVJdGVtPn0gIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyAtIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyBzYXZlZCBpbiB0aGUgY2FjaGVcclxuICAqIEBpZ25vcmVcclxuICAqIEBoaWRkZW5cclxuICAqL1xyXG4gIHByaXZhdGUgZ2V0VW5pcXVlQXV0aG9yaXR5KGFjY2Vzc1Rva2VuQ2FjaGVJdGVtczogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+LCBwcm9wZXJ0eTogc3RyaW5nKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBhdXRob3JpdHlMaXN0OiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICBjb25zdCBmbGFnczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIGlmIChlbGVtZW50LmtleS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgJiYgKGZsYWdzLmluZGV4T2YoZWxlbWVudC5rZXlbcHJvcGVydHldKSA9PT0gLTEpKSB7XHJcbiAgICAgICAgZmxhZ3MucHVzaChlbGVtZW50LmtleVtwcm9wZXJ0eV0pO1xyXG4gICAgICAgIGF1dGhvcml0eUxpc3QucHVzaChlbGVtZW50LmtleVtwcm9wZXJ0eV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhdXRob3JpdHlMaXN0O1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBBZGRzIGxvZ2luX2hpbnQgdG8gYXV0aG9yaXphdGlvbiBVUkwgd2hpY2ggaXMgdXNlZCB0byBwcmUtZmlsbCB0aGUgdXNlcm5hbWUgZmllbGQgb2Ygc2lnbiBpbiBwYWdlIGZvciB0aGUgdXNlciBpZiBrbm93biBhaGVhZCBvZiB0aW1lXHJcbiAgICogZG9tYWluX2hpbnQgY2FuIGJlIG9uZSBvZiB1c2Vycy9vcmdhbmlzYXRpb25zIHdoaWNoIHdoZW4gYWRkZWQgc2tpcHMgdGhlIGVtYWlsIGJhc2VkIGRpc2NvdmVyeSBwcm9jZXNzIG9mIHRoZSB1c2VyXHJcbiAgICogZG9tYWluX3JlcSB1dGlkIHJlY2VpdmVkIGFzIHBhcnQgb2YgdGhlIGNsaWVudEluZm9cclxuICAgKiBsb2dpbl9yZXEgdWlkIHJlY2VpdmVkIGFzIHBhcnQgb2YgY2xpZW50SW5mb1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxOYXZpZ2F0ZSAtIEF1dGhlbnRpY2F0aW9uIHJlcXVlc3QgdXJsXHJcbiAgICogQHBhcmFtIHtVc2VyfSB1c2VyIC0gVXNlciBmb3Igd2hpY2ggdGhlIHRva2VuIGlzIHJlcXVlc3RlZFxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRIaW50UGFyYW1ldGVycyh1cmxOYXZpZ2F0ZTogc3RyaW5nLCBhY2NvdW50OiBBY2NvdW50KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGFjY291bnRPYmogPSBhY2NvdW50ID8gYWNjb3VudCA6IHRoaXMuZ2V0QWNjb3VudCgpO1xyXG4gICAgaWYgKGFjY291bnRPYmopIHtcclxuICAgICAgY29uc3QgZGVjb2RlZENsaWVudEluZm8gPSBhY2NvdW50T2JqLmhvbWVBY2NvdW50SWRlbnRpZmllci5zcGxpdChcIi5cIik7XHJcbiAgICAgIGNvbnN0IHVpZCA9IFV0aWxzLmJhc2U2NERlY29kZVN0cmluZ1VybFNhZmUoZGVjb2RlZENsaWVudEluZm9bMF0pO1xyXG4gICAgICBjb25zdCB1dGlkID0gVXRpbHMuYmFzZTY0RGVjb2RlU3RyaW5nVXJsU2FmZShkZWNvZGVkQ2xpZW50SW5mb1sxXSk7XHJcblxyXG4gICAgICBpZiAoYWNjb3VudE9iai5zaWQgJiYgdXJsTmF2aWdhdGUuaW5kZXhPZihDb25zdGFudHMucHJvbXB0X25vbmUpICE9PSAtMSkge1xyXG4gICAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKENvbnN0YW50cy5zaWQsIHVybE5hdmlnYXRlKSAmJiAhdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKENvbnN0YW50cy5sb2dpbl9oaW50LCB1cmxOYXZpZ2F0ZSkpIHtcclxuICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJlwiICsgQ29uc3RhbnRzLnNpZCArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGFjY291bnRPYmouc2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoQ29uc3RhbnRzLmxvZ2luX2hpbnQsIHVybE5hdmlnYXRlKSAmJiBhY2NvdW50T2JqLnVzZXJOYW1lICYmICFVdGlscy5pc0VtcHR5KGFjY291bnRPYmoudXNlck5hbWUpKSB7XHJcbiAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoYWNjb3VudE9iai51c2VyTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHkodWlkKSAmJiAhVXRpbHMuaXNFbXB0eSh1dGlkKSkge1xyXG4gICAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKFwiZG9tYWluX3JlcVwiLCB1cmxOYXZpZ2F0ZSkgJiYgIVV0aWxzLmlzRW1wdHkodXRpZCkpIHtcclxuICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJmRvbWFpbl9yZXE9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodXRpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudXJsQ29udGFpbnNRdWVyeVN0cmluZ1BhcmFtZXRlcihcImxvZ2luX3JlcVwiLCB1cmxOYXZpZ2F0ZSkgJiYgIVV0aWxzLmlzRW1wdHkodWlkKSkge1xyXG4gICAgICAgICAgdXJsTmF2aWdhdGUgKz0gXCImbG9naW5fcmVxPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHVpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKENvbnN0YW50cy5kb21haW5faGludCwgdXJsTmF2aWdhdGUpICYmICFVdGlscy5pc0VtcHR5KHV0aWQpKSB7XHJcbiAgICAgICAgaWYgKHV0aWQgPT09IENvbnN0YW50cy5jb25zdW1lcnNVdGlkKSB7XHJcbiAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KENvbnN0YW50cy5jb25zdW1lcnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KENvbnN0YW50cy5vcmdhbml6YXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVybE5hdmlnYXRlO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBDaGVja3MgaWYgdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgVVJMIGNvbnRhaW5zIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIobmFtZTogc3RyaW5nLCB1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgLy8gcmVnZXggdG8gZGV0ZWN0IHBhdHRlcm4gb2YgYSA/IG9yICYgZm9sbG93ZWQgYnkgdGhlIG5hbWUgcGFyYW1ldGVyIGFuZCBhbiBlcXVhbHMgY2hhcmFjdGVyXHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPVwiKTtcclxuICAgIHJldHVybiByZWdleC50ZXN0KHVybCk7XHJcbiAgfVxyXG5cclxuICBcclxuICBwcml2YXRlIGV4dHJhY3RBREFMSWRUb2tlbigpOiBhbnkge1xyXG4gICAgY29uc3QgYWRhbElkVG9rZW4gPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuYWRhbElkVG9rZW4pO1xyXG4gICAgaWYgKCFVdGlscy5pc0VtcHR5KGFkYWxJZFRva2VuKSkge1xyXG4gICAgICByZXR1cm4gVXRpbHMuZXh0cmFjdElkVG9rZW4oYWRhbElkVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIENhbGxpbmcgX2xvYWRGcmFtZSBidXQgd2l0aCBhIHRpbWVvdXQgdG8gc2lnbmFsIGZhaWx1cmUgaW4gbG9hZGZyYW1lU3RhdHVzLiBDYWxsYmFja3MgYXJlIGxlZnQuXHJcbiAgICogcmVnaXN0ZXJlZCB3aGVuIG5ldHdvcmsgZXJyb3JzIG9jY3VyIGFuZCBzdWJzZXF1ZW50IHRva2VuIHJlcXVlc3RzIGZvciBzYW1lIHJlc291cmNlIGFyZSByZWdpc3RlcmVkIHRvIHRoZSBwZW5kaW5nIHJlcXVlc3QuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlOiBzdHJpbmcsIGZyYW1lTmFtZTogc3RyaW5nLCBzY29wZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAvL3NldCBpZnJhbWUgc2Vzc2lvbiB0byBwZW5kaW5nXHJcbiAgICBjb25zdCBleHBlY3RlZFN0YXRlID0gd2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXTtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJTZXQgbG9hZGluZyBzdGF0ZSB0byBwZW5kaW5nIGZvcjogXCIgKyBzY29wZSArIFwiOlwiICsgZXhwZWN0ZWRTdGF0ZSk7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMucmVuZXdTdGF0dXMgKyBleHBlY3RlZFN0YXRlLCBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MpO1xyXG4gICAgdGhpcy5sb2FkRnJhbWUodXJsTmF2aWdhdGUsIGZyYW1lTmFtZSk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIGV4cGVjdGVkU3RhdGUpID09PSBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MpIHtcclxuICAgICAgICAvLyBmYWlsIHRoZSBpZnJhbWUgc2Vzc2lvbiBpZiBpdFwicyBpbiBwZW5kaW5nIHN0YXRlXHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcIkxvYWRpbmcgZnJhbWUgaGFzIHRpbWVkIG91dCBhZnRlcjogXCIgKyAodGhpcy5wQ29uZmlnLnN5c3RlbS5sb2FkRnJhbWVUaW1lb3V0IC8gMTAwMCkgKyBcIiBzZWNvbmRzIGZvciBzY29wZSBcIiArIHNjb3BlICsgXCI6XCIgKyBleHBlY3RlZFN0YXRlKTtcclxuICAgICAgICBpZiAoZXhwZWN0ZWRTdGF0ZSAmJiB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKSB7XHJcbiAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdKFwiVG9rZW4gcmVuZXdhbCBvcGVyYXRpb24gZmFpbGVkIGR1ZSB0byB0aW1lb3V0XCIsIG51bGwsIFwiVG9rZW4gUmVuZXdhbCBGYWlsZWRcIiwgQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIGV4cGVjdGVkU3RhdGUsIENvbnN0YW50cy50b2tlblJlbmV3U3RhdHVzQ2FuY2VsbGVkKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2FkRnJhbWVUaW1lb3V0KTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogTG9hZHMgaWZyYW1lIHdpdGggYXV0aG9yaXphdGlvbiBlbmRwb2ludCBVUkxcclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgbG9hZEZyYW1lKHVybE5hdmlnYXRlOiBzdHJpbmcsIGZyYW1lTmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAvLyBUaGlzIHRyaWNrIG92ZXJjb21lcyBpZnJhbWUgbmF2aWdhdGlvbiBpbiBJRVxyXG4gICAgLy8gSUUgZG9lcyBub3QgbG9hZCB0aGUgcGFnZSBjb25zaXN0ZW50bHkgaW4gaWZyYW1lXHJcbiAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiTG9hZEZyYW1lOiBcIiArIGZyYW1lTmFtZSk7XHJcbiAgICB2YXIgZnJhbWVDaGVjayA9IGZyYW1lTmFtZTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB2YXIgZnJhbWVIYW5kbGUgPSB0aGlzLmFkZEFkYWxGcmFtZShmcmFtZUNoZWNrKTtcclxuICAgICAgaWYgKGZyYW1lSGFuZGxlLnNyYyA9PT0gXCJcIiB8fCBmcmFtZUhhbmRsZS5zcmMgPT09IFwiYWJvdXQ6YmxhbmtcIikge1xyXG4gICAgICAgIGZyYW1lSGFuZGxlLnNyYyA9IHVybE5hdmlnYXRlO1xyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm9QaWkoXCJGcmFtZSBOYW1lIDogXCIgKyBmcmFtZU5hbWUgKyBcIiBOYXZpZ2F0ZWQgdG86IFwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgICA1MDApO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBBZGRzIHRoZSBoaWRkZW4gaWZyYW1lIGZvciBzaWxlbnQgdG9rZW4gcmVuZXdhbC5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRkQWRhbEZyYW1lKGlmcmFtZUlkOiBzdHJpbmcpOiBIVE1MSUZyYW1lRWxlbWVudCB7XHJcbiAgICBpZiAodHlwZW9mIGlmcmFtZUlkID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJBZGQgbXNhbCBmcmFtZSB0byBkb2N1bWVudDpcIiArIGlmcmFtZUlkKTtcclxuICAgIGxldCBhZGFsRnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZnJhbWVJZCkgYXMgSFRNTElGcmFtZUVsZW1lbnQ7XHJcbiAgICBpZiAoIWFkYWxGcmFtZSkge1xyXG4gICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAmJlxyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJlxyXG4gICAgICAgICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSA1LjBcIikgPT09IC0xKSkge1xyXG4gICAgICAgIGNvbnN0IGlmciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XHJcbiAgICAgICAgaWZyLnNldEF0dHJpYnV0ZShcImlkXCIsIGlmcmFtZUlkKTtcclxuICAgICAgICBpZnIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgaWZyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIGlmci5zdHlsZS53aWR0aCA9IGlmci5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuICAgICAgICBpZnIuc3R5bGUuYm9yZGVyID0gXCIwXCI7XHJcbiAgICAgICAgYWRhbEZyYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmRDaGlsZChpZnIpIGFzIEhUTUxJRnJhbWVFbGVtZW50KTtcclxuICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8aWZyYW1lIG5hbWU9J1wiICsgaWZyYW1lSWQgKyBcIicgaWQ9J1wiICsgaWZyYW1lSWQgKyBcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZSc+PC9pZnJhbWU+XCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAod2luZG93LmZyYW1lcyAmJiB3aW5kb3cuZnJhbWVzW2lmcmFtZUlkXSkge1xyXG4gICAgICAgIGFkYWxGcmFtZSA9IHdpbmRvdy5mcmFtZXNbaWZyYW1lSWRdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFkYWxGcmFtZTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogQWNxdWlyZXMgYWNjZXNzIHRva2VuIHVzaW5nIGEgaGlkZGVuIGlmcmFtZS5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVuZXdUb2tlbihzY29wZXM6IEFycmF5PHN0cmluZz4sIHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uLCBhY2NvdW50OiBBY2NvdW50LCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBzY29wZSA9IHNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcInJlbmV3VG9rZW4gaXMgY2FsbGVkIGZvciBzY29wZTpcIiArIHNjb3BlKTtcclxuICAgIGNvbnN0IGZyYW1lSGFuZGxlID0gdGhpcy5hZGRBZGFsRnJhbWUoXCJtc2FsUmVuZXdGcmFtZVwiICsgc2NvcGUpO1xyXG4gICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xyXG4gICAgaWYgKGFjY291bnQpIHtcclxuICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX2FjY291bnQgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkoYWNjb3VudCkpO1xyXG4gICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eSk7XHJcbiAgICAvLyByZW5ldyBoYXBwZW5zIGluIGlmcmFtZSwgc28gaXQga2VlcHMgamF2YXNjcmlwdCBjb250ZXh0XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcIlJlbmV3IHRva2VuIEV4cGVjdGVkIHN0YXRlOiBcIiArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICBsZXQgdXJsTmF2aWdhdGUgPSBVdGlscy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcihhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSwgQ29uc3RhbnRzLnByb21wdCkgKyBDb25zdGFudHMucHJvbXB0X25vbmU7XHJcbiAgICB1cmxOYXZpZ2F0ZSA9IHRoaXMuYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGUsIGFjY291bnQpO1xyXG4gICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5yZW5ld1Rva2VuO1xyXG4gICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvUGlpKFwiTmF2aWdhdGUgdG86XCIgKyB1cmxOYXZpZ2F0ZSk7XHJcbiAgICBmcmFtZUhhbmRsZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XHJcbiAgICB0aGlzLmxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlLCBcIm1zYWxSZW5ld0ZyYW1lXCIgKyBzY29wZSwgc2NvcGUpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBSZW5ld3MgaWR0b2tlbiBmb3IgYXBwXCJzIG93biBiYWNrZW5kIHdoZW4gY2xpZW50SWQgaXMgcGFzc2VkIGFzIGEgc2luZ2xlIHNjb3BlIGluIHRoZSBzY29wZXMgYXJyYXkuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHJlbmV3SWRUb2tlbihzY29wZXM6IEFycmF5PHN0cmluZz4sIHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uLCBhY2NvdW50OiBBY2NvdW50LCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBzY29wZSA9IHNjb3Blcy5qb2luKFwiIFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcInJlbmV3aWRUb2tlbiBpcyBjYWxsZWRcIik7XHJcbiAgICBjb25zdCBmcmFtZUhhbmRsZSA9IHRoaXMuYWRkQWRhbEZyYW1lKFwibXNhbElkVG9rZW5GcmFtZVwiKTtcclxuICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTtcclxuICAgIGlmIChhY2NvdW50KSB7XHJcbiAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSwgSlNPTi5zdHJpbmdpZnkoYWNjb3VudCkpO1xyXG4gICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eSk7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcIlJlbmV3IElkdG9rZW4gRXhwZWN0ZWQgc3RhdGU6IFwiICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgIGxldCB1cmxOYXZpZ2F0ZSA9IFV0aWxzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChzY29wZXMpLCBDb25zdGFudHMucHJvbXB0KSArIENvbnN0YW50cy5wcm9tcHRfbm9uZTtcclxuICAgIHVybE5hdmlnYXRlID0gdGhpcy5hZGRIaW50UGFyYW1ldGVycyh1cmxOYXZpZ2F0ZSwgYWNjb3VudCk7XHJcbiAgICBpZiAodGhpcy5wU2lsZW50TG9naW4pIHtcclxuICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLmxvZ2luO1xyXG4gICAgICB0aGlzLnBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLnJlbmV3VG9rZW47XHJcbiAgICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvUGlpKFwiTmF2aWdhdGUgdG86XCIgKyB1cmxOYXZpZ2F0ZSk7XHJcbiAgICBmcmFtZUhhbmRsZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XHJcbiAgICB0aGlzLmxvYWRJZnJhbWVUaW1lb3V0KHVybE5hdmlnYXRlLCBcIm1zYWxJZFRva2VuRnJhbWVcIiwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgICogUmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgKHJlY2VpdmVkIGZyb20gYSB1c2VyIG9iamVjdCBjcmVhdGVkIGF0IHRoZSB0aW1lIG9mIGxvZ2luKSBvciBudWxsLlxyXG4gICAgKi9cclxuICBnZXRBY2NvdW50KCk6IEFjY291bnQge1xyXG4gICAgLy8gaWRUb2tlbiBpcyBmaXJzdCBjYWxsXHJcbiAgICBpZiAodGhpcy5wQWNjb3VudCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5wQWNjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmcmFtZSBpcyB1c2VkIHRvIGdldCBpZFRva2VuXHJcbiAgICBjb25zdCByYXdJZFRva2VuID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmlkVG9rZW5LZXkpO1xyXG4gICAgY29uc3QgcmF3Q2xpZW50SW5mbyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5tc2FsQ2xpZW50SW5mbyk7XHJcbiAgICBpZiAoIVV0aWxzLmlzRW1wdHkocmF3SWRUb2tlbikgJiYgIVV0aWxzLmlzRW1wdHkocmF3Q2xpZW50SW5mbykpIHtcclxuICAgICAgY29uc3QgaWRUb2tlbiA9IG5ldyBJZFRva2VuKHJhd0lkVG9rZW4pO1xyXG4gICAgICBjb25zdCBjbGllbnRJbmZvID0gbmV3IEhvbWVBY2NvdW50SWRlbnRpZmllcihyYXdDbGllbnRJbmZvKTtcclxuICAgICAgdGhpcy5wQWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBjbGllbnRJbmZvKTtcclxuICAgICAgcmV0dXJuIHRoaXMucEFjY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGZvciBwcm9jZXNzaW5nIHRoZSByZXNwb25zZSByZWNlaXZlZCBmcm9tIHRoZSBTVFMuIEl0IGV4dHJhY3RzIHRoZSBoYXNoLCBwcm9jZXNzZXMgdGhlIHRva2VuIG9yIGVycm9yIGluZm9ybWF0aW9uIGFuZCBzYXZlcyBpdCBpbiB0aGUgY2FjaGUuIEl0IHRoZW5cclxuICAgKiBjYWxscyB0aGUgcmVnaXN0ZXJlZCBjYWxsYmFja3MgaW4gY2FzZSBvZiByZWRpcmVjdCBvciByZXNvbHZlcyB0aGUgcHJvbWlzZXMgd2l0aCB0aGUgcmVzdWx0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbaGFzaD13aW5kb3cubG9jYXRpb24uaGFzaF0gLSBIYXNoIGZyYWdtZW50IG9mIFVybC5cclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVBdXRoZW50aWNhdGlvblJlc3BvbnNlKGhhc2g6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKGhhc2ggPT0gbnVsbCkge1xyXG4gICAgICBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNlbGYgPSBudWxsO1xyXG4gICAgdmFyIGlzUG9wdXA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHZhciBpc1dpbmRvd09wZW5lck1zYWwgPSBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBpc1dpbmRvd09wZW5lck1zYWwgPSB3aW5kb3cub3BlbmVyICYmIHdpbmRvdy5vcGVuZXIubXNhbCAmJiB3aW5kb3cub3BlbmVyLm1zYWwgIT09IHdpbmRvdy5tc2FsO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIC8vIGVyciA9IFNlY3VyaXR5RXJyb3I6IEJsb2NrZWQgYSBmcmFtZSB3aXRoIG9yaWdpbiBcIlt1cmxdXCIgZnJvbSBhY2Nlc3NpbmcgYSBjcm9zcy1vcmlnaW4gZnJhbWUuXHJcbiAgICAgIGlzV2luZG93T3BlbmVyTXNhbCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1dpbmRvd09wZW5lck1zYWwpIHtcclxuICAgICAgc2VsZiA9IHdpbmRvdy5vcGVuZXIubXNhbDtcclxuICAgICAgaXNQb3B1cCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh3aW5kb3cucGFyZW50ICYmIHdpbmRvdy5wYXJlbnQubXNhbCkge1xyXG4gICAgICBzZWxmID0gd2luZG93LnBhcmVudC5tc2FsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gc2VsZi5nZXRSZXF1ZXN0SW5mbyhoYXNoKTsgLy9pZih3aW5kb3cucGFyZW50IT09d2luZG93KSwgYnkgdXNpbmcgc2VsZiwgd2luZG93LnBhcmVudCBiZWNvbWVzIGVxdWFsIHRvIHdpbmRvdyBpbiBnZXRSZXF1ZXN0SW5mbyBtZXRob2Qgc3BlY2lmaWNhbGx5XHJcbiAgICBsZXQgdG9rZW46IHN0cmluZyA9IG51bGwsIHRva2VuUmVjZWl2ZWRDYWxsYmFjazogKGVycm9yRGVzYzogc3RyaW5nLCB0b2tlbjogc3RyaW5nLCBlcnJvcjogc3RyaW5nLCB0b2tlblR5cGU6IHN0cmluZykgPT4gdm9pZCA9IG51bGwsIHRva2VuVHlwZTogc3RyaW5nLCBzYXZlVG9rZW46IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgc2VsZi5wTG9nZ2VyLmluZm8oXCJSZXR1cm5lZCBmcm9tIHJlZGlyZWN0IHVybFwiKTtcclxuICAgIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cgJiYgd2luZG93LnBhcmVudC5tc2FsKSB7XHJcbiAgICAgIHRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IHdpbmRvdy5wYXJlbnQuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW3JlcXVlc3RJbmZvLnN0YXRlUmVzcG9uc2VdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNXaW5kb3dPcGVuZXJNc2FsKSB7XHJcbiAgICAgIHRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IHdpbmRvdy5vcGVuZXIuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW3JlcXVlc3RJbmZvLnN0YXRlUmVzcG9uc2VdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmIChzZWxmLl9uYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsKSB7XHJcbiAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICBzZWxmLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMudXJsSGFzaCwgaGFzaCk7XHJcbiAgICAgICAgc2F2ZVRva2VuID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5wYXJlbnQgPT09IHdpbmRvdyAmJiAhaXNQb3B1cCkge1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzZWxmLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubG9naW5SZXF1ZXN0LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSBzZWxmLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2s7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBcIlwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNlbGYuc2F2ZVRva2VuRnJvbUhhc2gocmVxdWVzdEluZm8pO1xyXG5cclxuICAgIGlmICgocmVxdWVzdEluZm8ucmVxdWVzdFR5cGUgPT09IENvbnN0YW50cy5yZW5ld1Rva2VuKSAmJiB3aW5kb3cucGFyZW50KSB7XHJcbiAgICAgIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpIHtcclxuICAgICAgICBzZWxmLnBMb2dnZXIudmVyYm9zZShcIldpbmRvdyBpcyBpbiBpZnJhbWUsIGFjcXVpcmluZyB0b2tlbiBzaWxlbnRseVwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxmLnBMb2dnZXIudmVyYm9zZShcImFjcXVpcmluZyB0b2tlbiBpbnRlcmFjdGl2ZSBpbiBwcm9ncmVzc1wiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdG9rZW4gPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5hY2Nlc3NUb2tlbl0gfHwgcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl07XHJcbiAgICAgIHRva2VuVHlwZSA9IENvbnN0YW50cy5hY2Nlc3NUb2tlbjtcclxuICAgIH0gZWxzZSBpZiAocmVxdWVzdEluZm8ucmVxdWVzdFR5cGUgPT09IENvbnN0YW50cy5sb2dpbikge1xyXG4gICAgICB0b2tlbiA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xyXG4gICAgICB0b2tlblR5cGUgPSBDb25zdGFudHMuaWRUb2tlbjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZXJyb3JEZXNjID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl07XHJcbiAgICB2YXIgZXJyb3IgPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl07XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgLy9XZSBzaG91bGQgb25seSBzZW5kIHRoZSBzdGFlIGJhY2sgdG8gdGhlIGRldmVsb3BlciBpZiBpdCBtYXRjaGVzIHdpdGggd2hhdCB3ZSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICBpZiAocmVxdWVzdEluZm8uc3RhdGVNYXRjaCkge1xyXG4gICAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrLmNhbGwoc2VsZiwgZXJyb3JEZXNjLCB0b2tlbiwgZXJyb3IsIHRva2VuVHlwZSwgdGhpcy5nZXRBY2NvdW50U3RhdGUocmVxdWVzdEluZm8uc3RhdGVSZXNwb25zZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRva2VuUmVjZWl2ZWRDYWxsYmFjay5jYWxsKHNlbGYsIGVycm9yRGVzYywgdG9rZW4sIGVycm9yLCB0b2tlblR5cGUsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBzZWxmLnBMb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBpbiB0b2tlbiByZWNlaXZlZCBjYWxsYmFjayBmdW5jdGlvbjogXCIgKyBlcnIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzV2luZG93T3BlbmVyTXNhbCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpbmRvdy5vcGVuZXIub3BlbmVkV2luZG93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuZXIub3BlbmVkV2luZG93c1tpXS5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGZvciBwcm9jZXNzaW5nIHRoZSByZXNwb25zZSByZWNlaXZlZCBmcm9tIEFBRC4gSXQgZXh0cmFjdHMgdGhlIGhhc2gsIHByb2Nlc3NlcyB0aGUgdG9rZW4gb3IgZXJyb3IsIHNhdmVzIGl0IGluIHRoZSBjYWNoZSBhbmQgY2FsbHMgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIHdpdGggdGhlIHJlc3VsdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXR5IGF1dGhvcml0eSByZWNlaXZlZCBpbiB0aGUgcmVkaXJlY3QgcmVzcG9uc2UgZnJvbSBBQUQuXHJcbiAgICogQHBhcmFtIHtUb2tlblJlc3BvbnNlfSByZXF1ZXN0SW5mbyBhbiBvYmplY3QgY3JlYXRlZCBmcm9tIHRoZSByZWRpcmVjdCByZXNwb25zZSBmcm9tIEFBRCBjb21wcmlzaW5nIG9mIHRoZSBrZXlzIC0gcGFyYW1ldGVycywgcmVxdWVzdFR5cGUsIHN0YXRlTWF0Y2gsIHN0YXRlUmVzcG9uc2UgYW5kIHZhbGlkLlxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciB1c2VyIG9iamVjdCBmb3Igd2hpY2ggc2NvcGVzIGFyZSBjb25zZW50ZWQgZm9yLiBUaGUgZGVmYXVsdCB1c2VyIGlzIHRoZSBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBAcGFyYW0ge0NsaWVudEluZm99IGNsaWVudEluZm8gY2xpZW50SW5mbyByZWNlaXZlZCBhcyBwYXJ0IG9mIHRoZSByZXNwb25zZSBjb21wcmlzaW5nIG9mIGZpZWxkcyB1aWQgYW5kIHV0aWQuXHJcbiAgICogQHBhcmFtIHtJZFRva2VufSBpZFRva2VuIGlkVG9rZW4gcmVjZWl2ZWQgYXMgcGFydCBvZiB0aGUgcmVzcG9uc2UuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIC8qIHRzbGludDpkaXNhYmxlOm5vLXN0cmluZy1saXRlcmFsICovXHJcbiAgcHJpdmF0ZSBzYXZlQWNjZXNzVG9rZW4oYXV0aG9yaXR5OiBzdHJpbmcsIHRva2VuUmVzcG9uc2U6IFRva2VuUmVzcG9uc2UsIGFjY291bnQ6IEFjY291bnQsIGNsaWVudEluZm86IHN0cmluZywgaWRUb2tlbjogSWRUb2tlbik6IHZvaWQge1xyXG4gICAgbGV0IHNjb3BlOiBzdHJpbmc7XHJcbiAgICBsZXQgY2xpZW50T2JqOiBIb21lQWNjb3VudElkZW50aWZpZXIgPSBuZXcgSG9tZUFjY291bnRJZGVudGlmaWVyKGNsaWVudEluZm8pO1xyXG4gICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShcInNjb3BlXCIpKSB7XHJcbiAgICAgIHNjb3BlID0gdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wic2NvcGVcIl07XHJcbiAgICAgIGNvbnN0IGNvbnNlbnRlZFNjb3BlcyA9IHNjb3BlLnNwbGl0KFwiIFwiKTtcclxuICAgICAgY29uc3QgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zID1cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhdXRob3JpdHkpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gYWNjZXNzVG9rZW5DYWNoZUl0ZW1zW2ldO1xyXG4gICAgICAgIC8vIFRPRE9cIiBDaGVjayB3aGVyZSB0byBjaGFuZ2UgdGhpc1xyXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkudXNlcklkZW50aWZpZXIgPT09IGFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICBjb25zdCBjYWNoZWRTY29wZXMgPSBhY2Nlc3NUb2tlbkNhY2hlSXRlbS5rZXkuc2NvcGVzLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgIGlmIChVdGlscy5pc0ludGVyc2VjdGluZ1Njb3BlcyhjYWNoZWRTY29wZXMsIGNvbnNlbnRlZFNjb3BlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5KSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuS2V5ID0gbmV3IEFjY2Vzc1Rva2VuS2V5KGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlLCBjbGllbnRPYmoudWlkLCBjbGllbnRPYmoudXRpZCk7XHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuVmFsdWUgPSBuZXcgQWNjZXNzVG9rZW5WYWx1ZSh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmFjY2Vzc1Rva2VuXSwgaWRUb2tlbi5yYXdJZFRva2VuLCBVdGlscy5leHBpcmVzSW4odG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5leHBpcmVzSW5dKS50b1N0cmluZygpLCBjbGllbnRJbmZvKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5LZXkpLCBKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlblZhbHVlKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzY29wZSA9IHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkO1xyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbktleSA9IG5ldyBBY2Nlc3NUb2tlbktleShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZSwgY2xpZW50T2JqLnVpZCwgY2xpZW50T2JqLnV0aWQpO1xyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlblZhbHVlID0gbmV3IEFjY2Vzc1Rva2VuVmFsdWUodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSwgaWRUb2tlbi5leHBpcmF0aW9uLCBjbGllbnRJbmZvKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5LZXkpLCBKU09OLnN0cmluZ2lmeShhY2Nlc3NUb2tlblZhbHVlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFNhdmVzIHRva2VuIG9yIGVycm9yIHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBmcm9tIEFBRCBpbiB0aGUgY2FjaGUuIEluIGNhc2Ugb2YgaWRfdG9rZW4sIGl0IGFsc28gY3JlYXRlcyB0aGUgdXNlciBvYmplY3QuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc2F2ZVRva2VuRnJvbUhhc2godG9rZW5SZXNwb25zZTogVG9rZW5SZXNwb25zZSk6IHZvaWQge1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlN0YXRlIHN0YXR1czpcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVNYXRjaCArIFwiOyBSZXF1ZXN0IHR5cGU6XCIgKyB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlKTtcclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiXCIpO1xyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIlwiKTtcclxuICAgIHZhciBzY29wZTogc3RyaW5nID0gXCJcIjtcclxuICAgIHZhciBhdXRob3JpdHlLZXk6IHN0cmluZyA9IFwiXCI7XHJcbiAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTogc3RyaW5nID0gXCJcIjtcclxuICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoXCJzY29wZVwiKSkge1xyXG4gICAgICBzY29wZSA9IHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcInNjb3BlXCJdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2NvcGUgPSB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWNvcmQgZXJyb3JcclxuICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb24pIHx8IHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3IpKSB7XHJcbiAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm9QaWkoXCJFcnJvciA6XCIgKyB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yXSArIFwiOyBFcnJvciBkZXNjcmlwdGlvbjpcIiArIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl0pO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbXCJlcnJvclwiXSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXSk7XHJcbiAgICAgIGlmICh0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMubG9naW4pIHtcclxuICAgICAgICB0aGlzLnBMb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uXSArIFwiOlwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl0pO1xyXG4gICAgICAgIGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMucmVuZXdUb2tlbikge1xyXG4gICAgICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgIHZhciB1c2VyS2V5ID0gdGhpcy5nZXRBY2NvdW50KCkgIT09IG51bGwgPyB0aGlzLmdldEFjY291bnQoKS5ob21lQWNjb3VudElkZW50aWZpZXIgOiBcIlwiO1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHVzZXJLZXkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJdCBtdXN0IHZlcmlmeSB0aGUgc3RhdGUgZnJvbSByZWRpcmVjdFxyXG4gICAgICBpZiAodG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgLy8gcmVjb3JkIHRva2VucyB0byBzdG9yYWdlIGlmIGV4aXN0c1xyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJTdGF0ZSBpcyByaWdodFwiKTtcclxuICAgICAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5zZXNzaW9uU3RhdGUpKSB7XHJcbiAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbFNlc3Npb25TdGF0ZSwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5zZXNzaW9uU3RhdGVdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkVG9rZW46IElkVG9rZW47XHJcbiAgICAgICAgdmFyIGNsaWVudEluZm86IHN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuYWNjZXNzVG9rZW4pKSB7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiRnJhZ21lbnQgaGFzIGFjY2VzcyB0b2tlblwiKTtcclxuICAgICAgICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgIGxldCBhY2NvdW50OiBBY2NvdW50O1xyXG4gICAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuaWRUb2tlbikpIHtcclxuICAgICAgICAgICAgaWRUb2tlbiA9IG5ldyBJZFRva2VuKHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWRUb2tlbiA9IG5ldyBJZFRva2VuKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5pZFRva2VuS2V5KSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAgIGxldCBhdXRob3JpdHk6IHN0cmluZyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5KGF1dGhvcml0eSkpIHtcclxuICAgICAgICAgICAgYXV0aG9yaXR5ID0gVXRpbHMucmVwbGFjZUZpcnN0UGF0aChhdXRob3JpdHksIGlkVG9rZW4udGVuYW50SWQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmNsaWVudEluZm8pKSB7XHJcbiAgICAgICAgICAgIGNsaWVudEluZm8gPSB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmNsaWVudEluZm9dO1xyXG4gICAgICAgICAgICBhY2NvdW50ID0gQWNjb3VudC5jcmVhdGVBY2NvdW50KGlkVG9rZW4sIG5ldyBIb21lQWNjb3VudElkZW50aWZpZXIoY2xpZW50SW5mbykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcIkNsaWVudEluZm8gbm90IHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBmcm9tIEFBRFwiKTtcclxuICAgICAgICAgICAgYWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBuZXcgSG9tZUFjY291bnRJZGVudGlmaWVyKGNsaWVudEluZm8pKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5X25vdXNlciA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX2FjY291bnQgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgICBsZXQgY2FjaGVkVXNlcjogc3RyaW5nID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleSk7XHJcbiAgICAgICAgICBsZXQgYWNxdWlyZVRva2VuVXNlcjogQWNjb3VudDtcclxuICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eShjYWNoZWRVc2VyKSkge1xyXG4gICAgICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyID0gSlNPTi5wYXJzZShjYWNoZWRVc2VyKTtcclxuICAgICAgICAgICAgaWYgKGFjY291bnQgJiYgYWNxdWlyZVRva2VuVXNlciAmJiBVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50LCBhY3F1aXJlVG9rZW5Vc2VyKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2F2ZUFjY2Vzc1Rva2VuKGF1dGhvcml0eSwgdG9rZW5SZXNwb25zZSwgYWNjb3VudCwgY2xpZW50SW5mbywgaWRUb2tlbik7XHJcbiAgICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcclxuICAgICAgICAgICAgICAgIFwiVGhlIHVzZXIgb2JqZWN0IHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBpcyB0aGUgc2FtZSBhcyB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYWNxdWlyZVRva2VuIHJlcXVlc3RcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcclxuICAgICAgICAgICAgICAgIFwiVGhlIHVzZXIgb2JqZWN0IGNyZWF0ZWQgZnJvbSB0aGUgcmVzcG9uc2UgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBvbmUgcGFzc2VkIGluIHRoZSBhY3F1aXJlVG9rZW4gcmVxdWVzdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoIVV0aWxzLmlzRW1wdHkodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oYWNxdWlyZVRva2VuVXNlcktleV9ub3VzZXIpKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihhdXRob3JpdHksIHRva2VuUmVzcG9uc2UsIGFjY291bnQsIGNsaWVudEluZm8sIGlkVG9rZW4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuaWRUb2tlbikpIHtcclxuICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJGcmFnbWVudCBoYXMgaWQgdG9rZW5cIik7XHJcbiAgICAgICAgICB0aGlzLnBMb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgIGlkVG9rZW4gPSBuZXcgSWRUb2tlbih0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcclxuICAgICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmNsaWVudEluZm8pKSB7XHJcbiAgICAgICAgICAgIGNsaWVudEluZm8gPSB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmNsaWVudEluZm9dO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcIkNsaWVudEluZm8gbm90IHJlY2VpdmVkIGluIHRoZSByZXNwb25zZSBmcm9tIEFBRFwiKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgICAgbGV0IGF1dGhvcml0eTogc3RyaW5nID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oYXV0aG9yaXR5S2V5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHkoYXV0aG9yaXR5KSkge1xyXG4gICAgICAgICAgICBhdXRob3JpdHkgPSBVdGlscy5yZXBsYWNlRmlyc3RQYXRoKGF1dGhvcml0eSwgaWRUb2tlbi50ZW5hbnRJZCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5wQWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBuZXcgSG9tZUFjY291bnRJZGVudGlmaWVyKGNsaWVudEluZm8pKTtcclxuICAgICAgICAgIGlmIChpZFRva2VuICYmIGlkVG9rZW4ubm9uY2UpIHtcclxuICAgICAgICAgICAgaWYgKGlkVG9rZW4ubm9uY2UgIT09IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucEFjY291bnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIk5vbmNlIE1pc21hdGNoLiBFeHBlY3RlZCBOb25jZTogXCIgKyB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkgKyBcIixcIiArIFwiQWN0dWFsIE5vbmNlOiBcIiArIGlkVG9rZW4ubm9uY2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmVycm9yKFwiTm9uY2UgTWlzbWF0Y2guRXhwZWN0ZWQgTm9uY2U6IFwiICsgdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpICsgXCIsXCIgKyBcIkFjdHVhbCBOb25jZTogXCIgKyBpZFRva2VuLm5vbmNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMuaWRUb2tlbktleSwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxDbGllbnRJbmZvLCBjbGllbnRJbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gU2F2ZSBpZFRva2VuIGFzIGFjY2VzcyB0b2tlbiBmb3IgYXBwIGl0c2VsZlxyXG4gICAgICAgICAgICAgIHRoaXMuc2F2ZUFjY2Vzc1Rva2VuKGF1dGhvcml0eSwgdG9rZW5SZXNwb25zZSwgdGhpcy5wQWNjb3VudCwgY2xpZW50SW5mbywgaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF1dGhvcml0eUtleSA9IHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGlkX3Rva2VuIHJlY2VpdmVkIGluIHRoZSByZXNwb25zZVwiKTtcclxuICAgICAgICAgICAgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wiZXJyb3JcIl0gPSBcImludmFsaWQgaWRUb2tlblwiO1xyXG4gICAgICAgICAgICB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbXCJlcnJvcl9kZXNjcmlwdGlvblwiXSA9IFwiSW52YWxpZCBpZFRva2VuLiBpZFRva2VuOiBcIiArIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl07XHJcbiAgICAgICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiaW52YWxpZCBpZFRva2VuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiSW52YWxpZCBpZFRva2VuLiBpZFRva2VuOiBcIiArIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhdXRob3JpdHlLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcIlN0YXRlIE1pc21hdGNoLkV4cGVjdGVkIFN0YXRlOiBcIiArIHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkgKyBcIixcIiArIFwiQWN0dWFsIFN0YXRlOiBcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSk7XHJcbiAgICAgICAgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wiZXJyb3JcIl0gPSBcIkludmFsaWRfc3RhdGVcIjtcclxuICAgICAgICB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbXCJlcnJvcl9kZXNjcmlwdGlvblwiXSA9IFwiSW52YWxpZF9zdGF0ZS4gc3RhdGU6IFwiICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiSW52YWxpZF9zdGF0ZVwiKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiSW52YWxpZF9zdGF0ZS4gc3RhdGU6IFwiICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlLCBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0NvbXBsZXRlZCk7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UucmVtb3ZlQWNxdWlyZVRva2VuRW50cmllcyhhdXRob3JpdHlLZXksIGFjcXVpcmVUb2tlblVzZXJLZXkpO1xyXG4gICAgLy90aGlzIGlzIHJlcXVpcmVkIGlmIG5hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmw9ZmFsc2VcclxuICAgIGlmICh0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkge1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbUNvb2tpZShhdXRob3JpdHlLZXksIFwiXCIsIC0xKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLmNsZWFyQ29va2llKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qIHRzbGludDplbmFibGU6bm8tc3RyaW5nLWxpdGVyYWwgKi9cclxuXHJcbiAgLypcclxuICAgKiBDaGVja3MgaWYgdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGlzIHJlY2VpdmVkIGZyb20gdGhlIFNUUy4gSW4gY2FzZSBvZiByZWRpcmVjdCwgdGhlIHVybCBmcmFnbWVudCBoYXMgZWl0aGVyIGlkX3Rva2VuLCBhY2Nlc3NfdG9rZW4gb3IgZXJyb3IuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggLSBIYXNoIHBhc3NlZCBmcm9tIHJlZGlyZWN0IHBhZ2UuXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiByZXNwb25zZSBjb250YWlucyBpZF90b2tlbiwgYWNjZXNzX3Rva2VuIG9yIGVycm9yLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIGlzQ2FsbGJhY2soaGFzaDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICBoYXNoID0gdGhpcy5nZXRIYXNoKGhhc2gpO1xyXG4gICAgY29uc3QgcGFyYW1ldGVycyA9IFV0aWxzLmRlc2VyaWFsaXplKGhhc2gpO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHxcclxuICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3IpIHx8XHJcbiAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKSB8fFxyXG4gICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKVxyXG5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybnMgdGhlIGFuY2hvciBwYXJ0KCMpIG9mIHRoZSBVUkxcclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0SGFzaChoYXNoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKGhhc2guaW5kZXhPZihcIiMvXCIpID4gLTEpIHtcclxuICAgICAgaGFzaCA9IGhhc2guc3Vic3RyaW5nKGhhc2guaW5kZXhPZihcIiMvXCIpICsgMik7XHJcbiAgICB9IGVsc2UgaWYgKGhhc2guaW5kZXhPZihcIiNcIikgPiAtMSkge1xyXG4gICAgICBoYXNoID0gaGFzaC5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhhc2g7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAgKiBDcmVhdGVzIGEgcmVxdWVzdEluZm8gb2JqZWN0IGZyb20gdGhlIFVSTCBmcmFnbWVudCBhbmQgcmV0dXJucyBpdC5cclxuICAgICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggIC0gIEhhc2ggcGFzc2VkIGZyb20gcmVkaXJlY3QgcGFnZVxyXG4gICAgKiBAcmV0dXJucyB7VG9rZW5SZXNwb25zZX0gYW4gb2JqZWN0IGNyZWF0ZWQgZnJvbSB0aGUgcmVkaXJlY3QgcmVzcG9uc2UgZnJvbSBBQUQgY29tcHJpc2luZyBvZiB0aGUga2V5cyAtIHBhcmFtZXRlcnMsIHJlcXVlc3RUeXBlLCBzdGF0ZU1hdGNoLCBzdGF0ZVJlc3BvbnNlIGFuZCB2YWxpZC5cclxuICAgICogQGlnbm9yZVxyXG4gICAgKiBAaGlkZGVuXHJcbiAgICAqL1xyXG4gIHByb3RlY3RlZCBnZXRSZXF1ZXN0SW5mbyhoYXNoOiBzdHJpbmcpOiBUb2tlblJlc3BvbnNlIHtcclxuICAgIGhhc2ggPSB0aGlzLmdldEhhc2goaGFzaCk7XHJcbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gVXRpbHMuZGVzZXJpYWxpemUoaGFzaCk7XHJcbiAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gbmV3IFRva2VuUmVzcG9uc2UoKTtcclxuICAgIGlmIChwYXJhbWV0ZXJzKSB7XHJcbiAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XHJcbiAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uKSB8fFxyXG4gICAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yKSB8fFxyXG4gICAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKSB8fFxyXG4gICAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgdG9rZW5SZXNwb25zZS52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgLy8gd2hpY2ggY2FsbFxyXG4gICAgICAgIGxldCBzdGF0ZVJlc3BvbnNlOiBzdHJpbmc7XHJcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoXCJzdGF0ZVwiKSkge1xyXG4gICAgICAgICAgc3RhdGVSZXNwb25zZSA9IHBhcmFtZXRlcnMuc3RhdGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlID0gc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAvLyBhc3luYyBjYWxscyBjYW4gZmlyZSBpZnJhbWUgYW5kIGxvZ2luIHJlcXVlc3QgYXQgdGhlIHNhbWUgdGltZSBpZiBkZXZlbG9wZXIgZG9lcyBub3QgdXNlIHRoZSBBUEkgYXMgZXhwZWN0ZWRcclxuICAgICAgICAvLyBpbmNvbWluZyBjYWxsYmFjayBuZWVkcyB0byBiZSBsb29rZWQgdXAgdG8gZmluZCB0aGUgcmVxdWVzdCB0eXBlXHJcbiAgICAgICAgaWYgKHN0YXRlUmVzcG9uc2UgPT09IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkgfHwgc3RhdGVSZXNwb25zZSA9PT0gdGhpcy5wU2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSkgeyAvLyBsb2dpblJlZGlyZWN0XHJcbiAgICAgICAgICB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLmxvZ2luO1xyXG4gICAgICAgICAgdG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGVSZXNwb25zZSA9PT0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpIHsgLy9hY3F1aXJlVG9rZW5SZWRpcmVjdFxyXG4gICAgICAgICAgdG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5yZW5ld1Rva2VuO1xyXG4gICAgICAgICAgdG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZXh0ZXJuYWwgYXBpIHJlcXVlc3RzIG1heSBoYXZlIG1hbnkgcmVuZXd0b2tlbiByZXF1ZXN0cyBmb3IgZGlmZmVyZW50IHJlc291cmNlXHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2gpIHtcclxuICAgICAgICAgIHRva2VuUmVzcG9uc2UucmVxdWVzdFR5cGUgPSB3aW5kb3cucmVxdWVzdFR5cGU7XHJcbiAgICAgICAgICBjb25zdCBzdGF0ZXNJblBhcmVudENvbnRleHQgPSB3aW5kb3cucmVuZXdTdGF0ZXM7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlc0luUGFyZW50Q29udGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGVzSW5QYXJlbnRDb250ZXh0W2ldID09PSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICB0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICAqIEV4dHJhY3RzIHNjb3BlIHZhbHVlIGZyb20gdGhlIHN0YXRlIHNlbnQgd2l0aCB0aGUgYXV0aGVudGljYXRpb24gcmVxdWVzdC5cclxuICAgICogQHJldHVybnMge3N0cmluZ30gc2NvcGUuXHJcbiAgICAqIEBpZ25vcmVcclxuICAgICogQGhpZGRlblxyXG4gICAgKi9cclxuICBwcml2YXRlIGdldFNjb3BlRnJvbVN0YXRlKHN0YXRlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIGNvbnN0IHNwbGl0SW5kZXggPSBzdGF0ZS5pbmRleE9mKFwifFwiKTtcclxuICAgICAgaWYgKHNwbGl0SW5kZXggPiAtMSAmJiBzcGxpdEluZGV4ICsgMSA8IHN0YXRlLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBzdGF0ZS5zdWJzdHJpbmcoc3BsaXRJbmRleCArIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgKiBFeHRyYWN0cyBzdGF0ZSB2YWx1ZSBmcm9tIHRoZSB1c2VyU3RhdGUgc2VudCB3aXRoIHRoZSBhdXRoZW50aWNhdGlvbiByZXF1ZXN0LlxyXG4gICogQHJldHVybnMge3N0cmluZ30gc2NvcGUuXHJcbiAgKiBAaWdub3JlXHJcbiAgKiBAaGlkZGVuXHJcbiAgKi9cclxuICBnZXRBY2NvdW50U3RhdGUoc3RhdGU6IHN0cmluZykge1xyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIGNvbnN0IHNwbGl0SW5kZXggPSBzdGF0ZS5pbmRleE9mKFwifFwiKTtcclxuICAgICAgaWYgKHNwbGl0SW5kZXggPiAtMSAmJiBzcGxpdEluZGV4ICsgMSA8IHN0YXRlLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBzdGF0ZS5zdWJzdHJpbmcoc3BsaXRJbmRleCArIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcblxyXG5cclxuICAvKlxyXG4gICAgKiBSZXR1cm5zIHdoZXRoZXIgY3VycmVudCB3aW5kb3cgaXMgaW4gaWZyYW0gZm9yIHRva2VuIHJlbmV3YWxcclxuICAgICogQGlnbm9yZVxyXG4gICAgKiBAaGlkZGVuXHJcbiAgICAqL1xyXG4gIHByaXZhdGUgaXNJbklmcmFtZSgpIHtcclxuICAgIHJldHVybiB3aW5kb3cucGFyZW50ICE9PSB3aW5kb3c7XHJcbiAgfVxyXG5cclxuICBsb2dpbkluUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XHJcbiAgICB2YXIgcGVuZGluZ0NhbGxiYWNrID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnVybEhhc2gpO1xyXG4gICAgaWYgKHBlbmRpbmdDYWxsYmFjaykge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnBMb2dpbkluUHJvZ3Jlc3M7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEhvc3RGcm9tVXJpKHVyaTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIHJlbW92ZSBodHRwOi8vIG9yIGh0dHBzOi8vIGZyb20gdXJpXHJcbiAgICB2YXIgZXh0cmFjdGVkVXJpID0gU3RyaW5nKHVyaSkucmVwbGFjZSgvXihodHRwcz86KVxcL1xcLy8sIFwiXCIpO1xyXG4gICAgZXh0cmFjdGVkVXJpID0gZXh0cmFjdGVkVXJpLnNwbGl0KFwiL1wiKVswXTtcclxuICAgIHJldHVybiBleHRyYWN0ZWRVcmk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0U2NvcGVzRm9yRW5kcG9pbnQoZW5kcG9pbnQ6IHN0cmluZyk6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgLy8gaWYgdXNlciBzcGVjaWZpZWQgbGlzdCBvZiB1bnByb3RlY3RlZFJlc291cmNlcywgbm8gbmVlZCB0byBzZW5kIHRva2VuIHRvIHRoZXNlIGVuZHBvaW50cywgcmV0dXJuIG51bGwuXHJcbiAgICBpZiAodGhpcy5wQ29uZmlnLmZyYW1ld29yay51bnByb3RlY3RlZFJlc291cmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wQ29uZmlnLmZyYW1ld29yay51bnByb3RlY3RlZFJlc291cmNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKHRoaXMucENvbmZpZy5mcmFtZXdvcmsudW5wcm90ZWN0ZWRSZXNvdXJjZXNbaV0pID4gLTEpIHtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBDb25maWcuZnJhbWV3b3JrLnByb3RlY3RlZFJlc291cmNlTWFwLnNpemUgPiAwKSB7XHJcbiAgICAgIGZvciAobGV0IGtleSBvZiBBcnJheS5mcm9tKHRoaXMucENvbmZpZy5mcmFtZXdvcmsucHJvdGVjdGVkUmVzb3VyY2VNYXAua2V5cygpKSkge1xyXG4gICAgICAgIC8vIGNvbmZpZ0VuZHBvaW50IGlzIGxpa2UgL2FwaS9Ub2RvIHJlcXVlc3RlZCBlbmRwb2ludCBjYW4gYmUgL2FwaS9Ub2RvLzFcclxuICAgICAgICBpZiAoZW5kcG9pbnQuaW5kZXhPZihrZXkpID4gLTEpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnBDb25maWcuZnJhbWV3b3JrLnByb3RlY3RlZFJlc291cmNlTWFwLmdldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGRlZmF1bHQgcmVzb3VyY2Ugd2lsbCBiZSBjbGllbnRpZCBpZiBub3RoaW5nIHNwZWNpZmllZFxyXG4gICAgLy8gQXBwIHdpbGwgdXNlIGlkdG9rZW4gZm9yIGNhbGxzIHRvIGl0c2VsZlxyXG4gICAgLy8gY2hlY2sgaWYgaXQncyBzdGFyaW5nIGZyb20gaHR0cCBvciBodHRwcywgbmVlZHMgdG8gbWF0Y2ggd2l0aCBhcHAgaG9zdFxyXG4gICAgaWYgKGVuZHBvaW50LmluZGV4T2YoXCJodHRwOi8vXCIpID4gLTEgfHwgZW5kcG9pbnQuaW5kZXhPZihcImh0dHBzOi8vXCIpID4gLTEpIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0SG9zdEZyb21VcmkoZW5kcG9pbnQpID09PSB0aGlzLmdldEhvc3RGcm9tVXJpKHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5PHN0cmluZz4odGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBpbiBhbmd1bGFyIGxldmVsLCB0aGUgdXJsIGZvciAkaHR0cCBpbnRlcmNlcHRvciBjYWxsIGNvdWxkIGJlIHJlbGF0aXZlIHVybCxcclxuICAgICAgLy8gaWYgaXQncyByZWxhdGl2ZSBjYWxsLCB3ZSdsbCB0cmVhdCBpdCBhcyBhcHAgYmFja2VuZCBjYWxsLlxyXG4gICAgICByZXR1cm4gbmV3IEFycmF5PHN0cmluZz4odGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG5vdCB0aGUgYXBwJ3Mgb3duIGJhY2tlbmQgb3Igbm90IGEgZG9tYWluIGxpc3RlZCBpbiB0aGUgZW5kcG9pbnRzIHN0cnVjdHVyZVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvL1RoZXNlIEFQSVMgYXJlIGV4cG9zZWQgZm9yIG1zYWxBbmd1bGFyIHdyYXBwZXIgb25seVxyXG4gIHByb3RlY3RlZCBzZXRsb2dpbkluUHJvZ3Jlc3MobG9naW5JblByb2dyZXNzOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLnBMb2dpbkluUHJvZ3Jlc3MgPSBsb2dpbkluUHJvZ3Jlc3M7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0QWNxdWlyZVRva2VuSW5Qcm9ncmVzcygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MoYWNxdWlyZVRva2VuSW5Qcm9ncmVzczogYm9vbGVhbikge1xyXG4gICAgdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0TG9nZ2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyO1xyXG4gIH1cclxufVxyXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VuUmVzcG9uc2Uge1xuICB2YWxpZDogYm9vbGVhbjtcbiAgcGFyYW1ldGVyczogT2JqZWN0O1xuICBzdGF0ZU1hdGNoOiBib29sZWFuO1xuICBzdGF0ZVJlc3BvbnNlOiBzdHJpbmc7XG4gIHJlcXVlc3RUeXBlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy52YWxpZCA9IGZhbHNlO1xuICAgIHRoaXMucGFyYW1ldGVycyA9IHt9O1xuICAgIHRoaXMuc3RhdGVNYXRjaCA9IGZhbHNlO1xuICAgIHRoaXMuc3RhdGVSZXNwb25zZSA9IFwiXCI7XG4gICAgdGhpcy5yZXF1ZXN0VHlwZSA9IFwidW5rbm93blwiO1xuICB9XG59XG4iLCIvKipcclxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cclxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcclxuICogIE1JVCBMaWNlbnNlXHJcbiAqXHJcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xyXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXHJcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcclxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xyXG4gKiBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXHJcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXHJcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcclxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxyXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEhvbWVBY2NvdW50SWRlbnRpZmllciB9IGZyb20gXCIuL0hvbWVBY2NvdW50SWRlbnRpZmllclwiO1xyXG5pbXBvcnQgeyBJZFRva2VuIH0gZnJvbSBcIi4vSWRUb2tlblwiO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XHJcblxyXG4vKlxyXG5leHBvcnQgdHlwZSBBY2NvdW50IHtcclxuICAgIGFjY291bnRJZGVudGlmaWVyOiBzdHJpbmc7IFxyXG4gICAgaG9tZUFjY291bnRJZGVudGlmaWVyOiBzdHJpbmc7ICAvLyB1c2VySWRlbnRpZmllciByZW5hbWVkXHJcbiAgICB1c2VyTmFtZTogc3RyaW5nOyAvLyBkaXNwbGF5YWJsZUlEIHJlbmFtZWRcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGlkVG9rZW46IE9iamVjdDtcclxuICAgIHNpZDogc3RyaW5nOyBcclxuICAgIGVudmlyb25tZW50OiBzdHJpbmc7ICAgLy8gaWRlbnRpdHlQcm92aWRlciByZW5hbWVkXHJcbn1cclxuKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBBY2NvdW50IHtcclxuXHJcbiAgICBhY2NvdW50SWRlbnRpZmllcjogc3RyaW5nOyBcclxuICAgIGhvbWVBY2NvdW50SWRlbnRpZmllcjogc3RyaW5nOyAgLy8gdXNlcklkZW50aWZpZXIgcmVuYW1lZFxyXG4gICAgdXNlck5hbWU6IHN0cmluZzsgLy8gZGlzcGxheWFibGVJRCByZW5hbWVkXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBpZFRva2VuOiBPYmplY3Q7XHJcbiAgICBzaWQ6IHN0cmluZzsgXHJcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nOyAgIC8vIGlkZW50aXR5UHJvdmlkZXIgcmVuYW1lZFxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFjY291bnRJZGVudGlmaWVyOiBzdHJpbmcsIGhvbWVBY2NvdW50SWRlbnRpZmllcjogc3RyaW5nLCB1c2VyTmFtZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGlkVG9rZW46IE9iamVjdCwgc2lkOiBzdHJpbmcsIGVudmlyb25tZW50OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFjY291bnRJZGVudGlmaWVyID0gYWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgdGhpcy5ob21lQWNjb3VudElkZW50aWZpZXIgPSBob21lQWNjb3VudElkZW50aWZpZXI7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICB0aGlzLnNpZCA9IHNpZDtcclxuICAgICAgICB0aGlzLmVudmlyb25tZW50ID0gZW52aXJvbm1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUFjY291bnQoaWRUb2tlbjogSWRUb2tlbiwgY2xpZW50SW5mbzogSG9tZUFjY291bnRJZGVudGlmaWVyKTogQWNjb3VudCB7XHJcbiAgICAgICAgLy8gQ29uc3RydWN0IGFjY291bnRJZGVudGlmaWVyXHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50VWlkOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGFjY291bnRVdGlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGlmICghaWRUb2tlbikge1xyXG4gICAgICAgICAgICBhY2NvdW50VWlkID0gXCJcIjtcclxuICAgICAgICAgICAgYWNjb3VudFV0aWQgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWNjb3VudFVpZCA9IGlkVG9rZW4udWlkO1xyXG4gICAgICAgICAgICBhY2NvdW50VXRpZCA9IGlkVG9rZW4udXRpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnN0cnVjdCBIb21lQWNjb3VudElkZW50aWZpZXJcclxuICAgICAgICBsZXQgdWlkOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IHV0aWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgaWYgKCFjbGllbnRJbmZvKSB7XHJcbiAgICAgICAgICAgIHVpZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHV0aWQgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdWlkID0gY2xpZW50SW5mby51aWQ7XHJcbiAgICAgICAgICAgIHV0aWQgPSBjbGllbnRJbmZvLnV0aWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhY2NvdW50SWRlbnRpZmllciA9IFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUoYWNjb3VudFVpZCkgKyBcIi5cIiArIFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUoYWNjb3VudFV0aWQpO1xyXG4gICAgICAgIGNvbnN0IGhvbWVBY2NvdW50SWRlbnRpZmllciA9IFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUodWlkKSArIFwiLlwiICsgVXRpbHMuYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZSh1dGlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBBY2NvdW50KGFjY291bnRJZGVudGlmaWVyLCBob21lQWNjb3VudElkZW50aWZpZXIsIGlkVG9rZW4ucHJlZmVycmVkTmFtZSwgaWRUb2tlbi5uYW1lLCBpZFRva2VuLmRlY29kZWRJZFRva2VuLCBpZFRva2VuLnNpZCwgaWRUb2tlbi5pc3N1ZXIpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHksIEF1dGhvcml0eVR5cGUgfSBmcm9tIFwiLi9BdXRob3JpdHlcIjtcbmltcG9ydCB7IFhockNsaWVudCB9IGZyb20gXCIuL1hIUkNsaWVudFwiO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEFhZEF1dGhvcml0eSBleHRlbmRzIEF1dGhvcml0eSB7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnQ6IHN0cmluZyA9IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vbi9kaXNjb3ZlcnkvaW5zdGFuY2VcIjtcblxuICBwcml2YXRlIGdldCBBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50VXJsKCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gYCR7QWFkQXV0aG9yaXR5LkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnR9P2FwaS12ZXJzaW9uPTEuMCZhdXRob3JpemF0aW9uX2VuZHBvaW50PSR7dGhpcy5DYW5vbmljYWxBdXRob3JpdHl9b2F1dGgyL3YyLjAvYXV0aG9yaXplYDtcbiAgfVxuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihhdXRob3JpdHk6IHN0cmluZywgdmFsaWRhdGVBdXRob3JpdHk6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihhdXRob3JpdHksIHZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgQXV0aG9yaXR5VHlwZSgpOiBBdXRob3JpdHlUeXBlIHtcbiAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5BYWQ7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBUcnVzdGVkSG9zdExpc3Q6IGFueSA9IHtcbiAgICBcImxvZ2luLndpbmRvd3MubmV0XCI6IFwibG9naW4ud2luZG93cy5uZXRcIixcbiAgICBcImxvZ2luLmNoaW5hY2xvdWRhcGkuY25cIjogXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXG4gICAgXCJsb2dpbi5jbG91ZGdvdmFwaS51c1wiOiBcImxvZ2luLmNsb3VkZ292YXBpLnVzXCIsXG4gICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tXCI6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCI6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCIsXG4gICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUudXNcIjogXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUudXNcIlxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byB0aGUgT0lEQyBlbmRwb2ludFxuICAgKiBPbmx5IHJlc3BvbmRzIHdpdGggdGhlIGVuZHBvaW50XG4gICAqL1xuICBwdWJsaWMgR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgIHZhciByZXN1bHRQcm9taXNlOiBQcm9taXNlPHN0cmluZz4gPSBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+XG4gICAgICByZXNvbHZlKHRoaXMuRGVmYXVsdE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCkpO1xuXG4gICAgaWYgKCF0aGlzLklzVmFsaWRhdGlvbkVuYWJsZWQpIHtcbiAgICAgIHJldHVybiByZXN1bHRQcm9taXNlO1xuICAgIH1cblxuICAgIGxldCBob3N0OiBzdHJpbmcgPSB0aGlzLkNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0O1xuICAgIGlmICh0aGlzLklzSW5UcnVzdGVkSG9zdExpc3QoaG9zdCkpIHtcbiAgICAgIHJldHVybiByZXN1bHRQcm9taXNlO1xuICAgIH1cblxuICAgIGxldCBjbGllbnQ6IFhockNsaWVudCA9IG5ldyBYaHJDbGllbnQoKTtcblxuICAgIHJldHVybiBjbGllbnQuc2VuZFJlcXVlc3RBc3luYyh0aGlzLkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnRVcmwsIFwiR0VUXCIsIHRydWUpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnQ7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBob3N0IGlzIGluIGEgbGlzdCBvZiB0cnVzdGVkIGhvc3RzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBUaGUgaG9zdCB0byBsb29rIHVwXG4gICAqL1xuICBwdWJsaWMgSXNJblRydXN0ZWRIb3N0TGlzdChob3N0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQWFkQXV0aG9yaXR5LlRydXN0ZWRIb3N0TGlzdFtob3N0LnRvTG93ZXJDYXNlKCldO1xuICB9XG59XG4iLCIvKipcclxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cclxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcclxuICogIE1JVCBMaWNlbnNlXHJcbiAqXHJcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xyXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXHJcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcclxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xyXG4gKiBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXHJcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXHJcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcclxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxyXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gKi9cclxuXHJcbi8qXHJcbiAqIFhIUiBjbGllbnQgZm9yIEpTT04gZW5kcG9pbnRzXHJcbiAqIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2FzeW5jLXByb21pc2VcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFhockNsaWVudCB7XHJcbiAgICBwdWJsaWMgc2VuZFJlcXVlc3RBc3luYyh1cmw6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIGVuYWJsZUNhY2hpbmc/OiBib29sZWFuKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgLyphc3luYzogKi8gdHJ1ZSk7XHJcbiAgICAgICAgaWYgKGVuYWJsZUNhY2hpbmcpIHtcclxuICAgICAgICAgIC8vIFRPRE86IChzaGl2YikgZW5zdXJlIHRoYXQgdGhpcyBjYW4gYmUgY2FjaGVkXHJcbiAgICAgICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiwgXCJQdWJsaWNcIik7XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIHhoci5vbmxvYWQgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+PSAzMDApIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLmhhbmRsZUVycm9yKHhoci5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLmhhbmRsZUVycm9yKHhoci5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICByZXNvbHZlKGpzb25SZXNwb25zZSk7XHJcbiAgICAgICAgfTtcclxuICBcclxuICAgICAgICB4aHIub25lcnJvciA9IChldikgPT4ge1xyXG4gICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXMpO1xyXG4gICAgICAgIH07XHJcbiAgXHJcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIikge1xyXG4gICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBcIm5vdCBpbXBsZW1lbnRlZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlRXJyb3IocmVzcG9uc2VUZXh0OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICB2YXIganNvblJlc3BvbnNlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcclxuICAgICAgICBpZiAoanNvblJlc3BvbnNlLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UuZXJyb3I7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVzcG9uc2VUZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZVRleHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlckNhbGxiYWNrIHtcbiAgKGxldmVsOiBMb2dMZXZlbCwgbWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbik6IHZvaWQ7XG59XG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgRXJyb3IsXG4gIFdhcm5pbmcsXG4gIEluZm8sXG4gIFZlcmJvc2Vcbn1cblxuZXhwb3J0IGNsYXNzIExvZ2dlciB7Ly8gU2luZ2xldG9uIENsYXNzXG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBMb2dnZXI7XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2xldmVsOiBMb2dMZXZlbCA9IExvZ0xldmVsLkluZm87XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfcGlpTG9nZ2luZ0VuYWJsZWQ6IGJvb2xlYW47XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBfbG9jYWxDYWxsYmFjazogSUxvZ2dlckNhbGxiYWNrO1xuXG4gIGNvbnN0cnVjdG9yKGxvY2FsQ2FsbGJhY2s6IElMb2dnZXJDYWxsYmFjayxcbiAgICAgIG9wdGlvbnM6XG4gICAgICB7XG4gICAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgICBsZXZlbD86IExvZ0xldmVsLFxuICAgICAgICAgIHBpaUxvZ2dpbmdFbmFibGVkPzogYm9vbGVhbixcbiAgICAgIH0gPSB7fSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICAgIGNvcnJlbGF0aW9uSWQgPSBcIlwiLFxuICAgICAgICAgIGxldmVsID0gTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZCA9IGZhbHNlXG4gICAgICB9ID0gb3B0aW9ucztcblxuICAgICAgdGhpcy5fbG9jYWxDYWxsYmFjayA9IGxvY2FsQ2FsbGJhY2s7XG4gICAgICB0aGlzLl9jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZDtcbiAgICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7XG4gICAgICB0aGlzLl9waWlMb2dnaW5nRW5hYmxlZCA9IHBpaUxvZ2dpbmdFbmFibGVkO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgcHJpdmF0ZSBsb2dNZXNzYWdlKGxvZ0xldmVsOiBMb2dMZXZlbCwgbG9nTWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICgobG9nTGV2ZWwgPiB0aGlzLl9sZXZlbCkgfHwgKCF0aGlzLl9waWlMb2dnaW5nRW5hYmxlZCAmJiBjb250YWluc1BpaSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKTtcbiAgICB2YXIgbG9nOiBzdHJpbmc7XG4gICAgaWYgKCFVdGlscy5pc0VtcHR5KHRoaXMuX2NvcnJlbGF0aW9uSWQpKSB7XG4gICAgICBsb2cgPSB0aW1lc3RhbXAgKyBcIjpcIiArIHRoaXMuX2NvcnJlbGF0aW9uSWQgKyBcIi1cIiArIFV0aWxzLmdldExpYnJhcnlWZXJzaW9uKCkgKyBcIi1cIiArIExvZ0xldmVsW2xvZ0xldmVsXSArIFwiIFwiICsgbG9nTWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb2cgPSB0aW1lc3RhbXAgKyBcIjpcIiArIFV0aWxzLmdldExpYnJhcnlWZXJzaW9uKCkgKyBcIi1cIiArIExvZ0xldmVsW2xvZ0xldmVsXSArIFwiIFwiICsgbG9nTWVzc2FnZTtcbiAgICB9XG4gICAgdGhpcy5leGVjdXRlQ2FsbGJhY2sobG9nTGV2ZWwsIGxvZywgY29udGFpbnNQaWkpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgZXhlY3V0ZUNhbGxiYWNrKGxldmVsOiBMb2dMZXZlbCwgbWVzc2FnZTogc3RyaW5nLCBjb250YWluc1BpaTogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLl9sb2NhbENhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9sb2NhbENhbGxiYWNrKGxldmVsLCBtZXNzYWdlLCBjb250YWluc1BpaSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLkVycm9yLCBtZXNzYWdlLCBmYWxzZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBlcnJvclBpaShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuRXJyb3IsIG1lc3NhZ2UsIHRydWUpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgd2FybmluZyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuV2FybmluZywgbWVzc2FnZSwgZmFsc2UpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgd2FybmluZ1BpaShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuV2FybmluZywgbWVzc2FnZSwgdHJ1ZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBpbmZvKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5JbmZvLCBtZXNzYWdlLCBmYWxzZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBpbmZvUGlpKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5JbmZvLCBtZXNzYWdlLCB0cnVlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHZlcmJvc2UobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLlZlcmJvc2UsIG1lc3NhZ2UsIGZhbHNlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHZlcmJvc2VQaWkobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLlZlcmJvc2UsIG1lc3NhZ2UsIHRydWUpO1xuICB9XG59XG4iLCJleHBvcnQgeyBVc2VyQWdlbnRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL1VzZXJBZ2VudEFwcGxpY2F0aW9uXCI7XHJcbmV4cG9ydCB7IExvZ2dlciB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5leHBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5leHBvcnQgeyBBY2NvdW50IH0gZnJvbSBcIi4vQWNjb3VudFwiO1xyXG5leHBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiLi9Db25zdGFudHNcIjtcclxuZXhwb3J0IHsgVG9rZW5SZXNwb25zZX0gZnJvbSBcIi4vUmVxdWVzdEluZm9cIjtcclxuZXhwb3J0IHtBdXRob3JpdHl9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5leHBvcnQge0NhY2hlUmVzdWx0fSBmcm9tIFwiLi9Vc2VyQWdlbnRBcHBsaWNhdGlvblwiO1xyXG5leHBvcnQge1RDb25maWd1cmF0aW9ufSBmcm9tIFwiLi9Db25maWd1cmF0aW9uXCI7XHJcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlbktleSB7XG5cbiAgYXV0aG9yaXR5OiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIHVzZXJJZGVudGlmaWVyOiBzdHJpbmc7XG4gIHNjb3Blczogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGF1dGhvcml0eTogc3RyaW5nLCBjbGllbnRJZDogc3RyaW5nLCBzY29wZXM6IHN0cmluZywgdWlkOiBzdHJpbmcsIHV0aWQ6IHN0cmluZykge1xuICAgIHRoaXMuYXV0aG9yaXR5ID0gYXV0aG9yaXR5O1xuICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICB0aGlzLnNjb3BlcyA9IHNjb3BlcztcbiAgICB0aGlzLnVzZXJJZGVudGlmaWVyID0gVXRpbHMuYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZSh1aWQpICsgXCIuXCIgKyBVdGlscy5iYXNlNjRFbmNvZGVTdHJpbmdVcmxTYWZlKHV0aWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc1Rva2VuVmFsdWUge1xuXG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIGlkVG9rZW46IHN0cmluZztcbiAgZXhwaXJlc0luOiBzdHJpbmc7XG4gIGNsaWVudEluZm86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhY2Nlc3NUb2tlbjogc3RyaW5nLCBpZFRva2VuOiBzdHJpbmcsIGV4cGlyZXNJbjogc3RyaW5nLCBjbGllbnRJbmZvOiBzdHJpbmcpIHtcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XG4gICAgdGhpcy5pZFRva2VuID0gaWRUb2tlbjtcbiAgICB0aGlzLmV4cGlyZXNJbiA9IGV4cGlyZXNJbjtcbiAgICB0aGlzLmNsaWVudEluZm8gPSBjbGllbnRJbmZvO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQXV0aG9yaXR5IH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiLi9Db25zdGFudHNcIjtcblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMge1xuICBhdXRob3JpdHlJbnN0YW5jZTogQXV0aG9yaXR5O1xuICBjbGllbnRJZDogc3RyaW5nO1xuICBub25jZTogc3RyaW5nO1xuICBzdGF0ZTogc3RyaW5nO1xuICBjb3JyZWxhdGlvbklkOiBzdHJpbmc7XG4gIHhDbGllbnRWZXI6IHN0cmluZztcbiAgeENsaWVudFNrdTogc3RyaW5nO1xuICBzY29wZXM6IEFycmF5PHN0cmluZz47XG4gIHJlc3BvbnNlVHlwZTogc3RyaW5nO1xuICBwcm9tcHRWYWx1ZTogc3RyaW5nO1xuICBleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nO1xuICBsb2dpbkhpbnQ6IHN0cmluZztcbiAgZG9tYWluSGludDogc3RyaW5nO1xuICByZWRpcmVjdFVyaTogc3RyaW5nO1xuICAgIHB1YmxpYyBnZXQgYXV0aG9yaXR5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml0eUluc3RhbmNlID8gdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5DYW5vbmljYWxBdXRob3JpdHkgOiBudWxsO1xuICB9XG5cbiAgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBBdXRob3JpdHksIGNsaWVudElkOiBzdHJpbmcsIHNjb3BlOiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGU6IHN0cmluZywgcmVkaXJlY3RVcmk6IHN0cmluZywgc3RhdGU6IHN0cmluZyApIHtcbiAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlID0gYXV0aG9yaXR5O1xuICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICB0aGlzLnNjb3BlcyA9IHNjb3BlO1xuICAgIHRoaXMucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgIHRoaXMucmVkaXJlY3RVcmkgPSByZWRpcmVjdFVyaTtcbiAgICAvLyByYW5kb21seSBnZW5lcmF0ZWQgdmFsdWVzXG4gICAgdGhpcy5jb3JyZWxhdGlvbklkID0gVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSAmJiAhVXRpbHMuaXNFbXB0eShzdGF0ZSkgPyAgVXRpbHMuY3JlYXRlTmV3R3VpZCgpICsgXCJ8XCIgKyBzdGF0ZSAgIDogVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xuICAgIHRoaXMubm9uY2UgPSBVdGlscy5jcmVhdGVOZXdHdWlkKCk7XG4gICAgLy8gdGVsZW1ldHJ5IGluZm9ybWF0aW9uXG4gICAgdGhpcy54Q2xpZW50U2t1ID0gXCJNU0FMLkpTXCI7XG4gICAgdGhpcy54Q2xpZW50VmVyID0gVXRpbHMuZ2V0TGlicmFyeVZlcnNpb24oKTtcbiAgfVxuXG4gICAgY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogc3RyaW5nIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXMuY3JlYXRlTmF2aWdhdGlvblVybFN0cmluZyhzY29wZXMpO1xuICAgICAgICBsZXQgYXV0aEVuZHBvaW50OiBzdHJpbmcgPSB0aGlzLmF1dGhvcml0eUluc3RhbmNlLkF1dGhvcml6YXRpb25FbmRwb2ludDtcbiAgICAgICAgLy8gaWYgdGhlIGVuZHBvaW50IGFscmVhZHkgaGFzIHF1ZXJ5cGFyYW1zLCBsZXRzIGFkZCB0byBpdCwgb3RoZXJ3aXNlIGFkZCB0aGUgZmlyc3Qgb25lXG4gICAgICAgIGlmIChhdXRoRW5kcG9pbnQuaW5kZXhPZihcIj9cIikgPCAwKSB7XG4gICAgICAgICAgICBhdXRoRW5kcG9pbnQgKz0gXCI/XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdXRoRW5kcG9pbnQgKz0gXCImXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlcXVlc3RVcmw6IHN0cmluZyA9IGAke2F1dGhFbmRwb2ludH0ke3N0ci5qb2luKFwiJlwiKX1gO1xuICAgICAgICByZXR1cm4gcmVxdWVzdFVybDtcbiAgICB9XG5cbiAgICBjcmVhdGVOYXZpZ2F0aW9uVXJsU3RyaW5nKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IEFycmF5PHN0cmluZz4ge1xuICAgICAgICBpZiAoIXNjb3Blcykge1xuICAgICAgICAgICAgc2NvcGVzID0gW3RoaXMuY2xpZW50SWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpID09PSAtMSkge1xuICAgICAgICAgICAgc2NvcGVzLnB1c2godGhpcy5jbGllbnRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHI6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgc3RyLnB1c2goXCJyZXNwb25zZV90eXBlPVwiICsgdGhpcy5yZXNwb25zZVR5cGUpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZWNsaWVudElkVXNlZEluU2NvcGUoc2NvcGVzKTtcbiAgICAgICAgc3RyLnB1c2goXCJzY29wZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnBhcnNlU2NvcGUoc2NvcGVzKSkpO1xuICAgICAgICBzdHIucHVzaChcImNsaWVudF9pZD1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIHN0ci5wdXNoKFwicmVkaXJlY3RfdXJpPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucmVkaXJlY3RVcmkpKTtcbiAgICAgICAgc3RyLnB1c2goXCJzdGF0ZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnN0YXRlKSk7XG4gICAgICAgIHN0ci5wdXNoKFwibm9uY2U9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5ub25jZSkpO1xuICAgICAgICBzdHIucHVzaChcImNsaWVudF9pbmZvPTFcIik7XG4gICAgICAgIHN0ci5wdXNoKGB4LWNsaWVudC1TS1U9JHt0aGlzLnhDbGllbnRTa3V9YCk7XG4gICAgICAgIHN0ci5wdXNoKGB4LWNsaWVudC1WZXI9JHt0aGlzLnhDbGllbnRWZXJ9YCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHN0ci5wdXNoKHRoaXMuZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyLnB1c2goXCJjbGllbnQtcmVxdWVzdC1pZD1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvcnJlbGF0aW9uSWQpKTtcblxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICB0cmFuc2xhdGVjbGllbnRJZFVzZWRJblNjb3BlKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHZvaWQge1xuICAgIGNvbnN0IGNsaWVudElkSW5kZXg6IG51bWJlciA9IHNjb3Blcy5pbmRleE9mKHRoaXMuY2xpZW50SWQpO1xuICAgIGlmIChjbGllbnRJZEluZGV4ID49IDApIHtcbiAgICAgIHNjb3Blcy5zcGxpY2UoY2xpZW50SWRJbmRleCwgMSk7XG4gICAgICBpZiAoc2NvcGVzLmluZGV4T2YoXCJvcGVuaWRcIikgPT09IC0xKSB7XG4gICAgICAgIHNjb3Blcy5wdXNoKFwib3BlbmlkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKFwicHJvZmlsZVwiKSA9PT0gLTEpIHtcbiAgICAgICAgc2NvcGVzLnB1c2goXCJwcm9maWxlXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlU2NvcGUoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogc3RyaW5nIHtcbiAgICBsZXQgc2NvcGVMaXN0OiBzdHJpbmcgPSBcIlwiO1xuICAgIGlmIChzY29wZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHNjb3Blcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBzY29wZUxpc3QgKz0gKGkgIT09IHNjb3Blcy5sZW5ndGggLSAxKSA/IHNjb3Blc1tpXSArIFwiIFwiIDogc2NvcGVzW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzY29wZUxpc3Q7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBIb21lQWNjb3VudElkZW50aWZpZXIge1xuXG4gIHByaXZhdGUgX3VpZDogc3RyaW5nO1xuICBnZXQgdWlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3VpZCA/IHRoaXMuX3VpZCA6IFwiXCI7XG4gIH1cblxuICBzZXQgdWlkKHVpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5fdWlkID0gdWlkO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXRpZDogc3RyaW5nO1xuICBnZXQgdXRpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl91dGlkID8gdGhpcy5fdXRpZCA6IFwiXCI7XG4gIH1cblxuICBzZXQgdXRpZCh1dGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLl91dGlkID0gdXRpZDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHJhd0FjY291bnRJZGVudGlmaWVyOiBzdHJpbmcpIHtcbiAgICBpZiAoIXJhd0FjY291bnRJZGVudGlmaWVyIHx8IFV0aWxzLmlzRW1wdHkocmF3QWNjb3VudElkZW50aWZpZXIpKSB7XG4gICAgICB0aGlzLnVpZCA9IFwiXCI7XG4gICAgICB0aGlzLnV0aWQgPSBcIlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZWNvZGVkQWNjb3VudElkZW50aWZpZXI6IHN0cmluZyA9IFV0aWxzLmJhc2U2NERlY29kZVN0cmluZ1VybFNhZmUocmF3QWNjb3VudElkZW50aWZpZXIpO1xuICAgICAgY29uc3QgaG9tZUFjY291bnRJZGVudGlmaWVyOiBIb21lQWNjb3VudElkZW50aWZpZXIgPSA8SG9tZUFjY291bnRJZGVudGlmaWVyPkpTT04ucGFyc2UoZGVjb2RlZEFjY291bnRJZGVudGlmaWVyKTtcbiAgICAgIGlmIChob21lQWNjb3VudElkZW50aWZpZXIpIHtcbiAgICAgICAgaWYgKGhvbWVBY2NvdW50SWRlbnRpZmllci5oYXNPd25Qcm9wZXJ0eShcInVpZFwiKSkge1xuICAgICAgICAgIHRoaXMudWlkID0gaG9tZUFjY291bnRJZGVudGlmaWVyLnVpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChob21lQWNjb3VudElkZW50aWZpZXIuaGFzT3duUHJvcGVydHkoXCJ1dGlkXCIpKSB7XG4gICAgICAgICAgdGhpcy51dGlkID0gaG9tZUFjY291bnRJZGVudGlmaWVyLnV0aWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZSk7XG4gICAgfVxuICB9XG59XG4iLCIvKlxyXG4gICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cclxuICAqICBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbiAgKiAgTUlUIExpY2Vuc2VcclxuICAqXHJcbiAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcclxuICAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxyXG4gICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxyXG4gICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4gICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcclxuICAqIGNvbmRpdGlvbnM6XHJcbiAgKlxyXG4gICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcclxuICAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4gICpcclxuICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXHJcbiAgKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcclxuICAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcclxuICAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcclxuICAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAgKi9cclxuXHJcbiBpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XHJcblxyXG4gLypcclxuICAqIEBoaWRkZW5cclxuICAqL1xyXG4gZXhwb3J0IGNsYXNzIElkVG9rZW4ge1xyXG4gXHJcbiAgIGlzc3Vlcjogc3RyaW5nO1xyXG4gICBvYmplY3RJZDogc3RyaW5nO1xyXG4gICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgIHRlbmFudElkOiBzdHJpbmc7XHJcbiAgIHZlcnNpb246IHN0cmluZztcclxuICAgcHJlZmVycmVkTmFtZTogc3RyaW5nO1xyXG4gICBuYW1lOiBzdHJpbmc7XHJcbiAgIGhvbWVPYmplY3RJZDogc3RyaW5nO1xyXG4gICBub25jZTogc3RyaW5nO1xyXG4gICBleHBpcmF0aW9uOiBzdHJpbmc7XHJcbiAgIHJhd0lkVG9rZW46IHN0cmluZztcclxuICAgZGVjb2RlZElkVG9rZW46IE9iamVjdDtcclxuICAgc2lkOiBzdHJpbmc7XHJcbiAgIHVpZDogc3RyaW5nO1xyXG4gICB1dGlkOiBzdHJpbmc7XHJcbiAgIC8qIHRzbGludDpkaXNhYmxlOm5vLXN0cmluZy1saXRlcmFsICovXHJcbiAgIGNvbnN0cnVjdG9yKHJhd0lkVG9rZW46IHN0cmluZykge1xyXG4gICAgIGlmIChVdGlscy5pc0VtcHR5KHJhd0lkVG9rZW4pKSB7XHJcbiAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJudWxsIG9yIGVtcHR5IHJhdyBpZHRva2VuXCIpO1xyXG4gICAgIH1cclxuICAgICB0cnkge1xyXG4gICAgICAgdGhpcy5yYXdJZFRva2VuID0gcmF3SWRUb2tlbjtcclxuICAgICAgIHRoaXMuZGVjb2RlZElkVG9rZW4gPSBVdGlscy5leHRyYWN0SWRUb2tlbihyYXdJZFRva2VuKTtcclxuICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuKSB7XHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwiaXNzXCIpKSB7XHJcbiAgICAgICAgICAgdGhpcy5pc3N1ZXIgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wiaXNzXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJvaWRcIikpIHtcclxuICAgICAgICAgICAgIHRoaXMub2JqZWN0SWQgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wib2lkXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJzdWJcIikpIHtcclxuICAgICAgICAgICB0aGlzLnN1YmplY3QgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wic3ViXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJ0aWRcIikpIHtcclxuICAgICAgICAgICB0aGlzLnRlbmFudElkID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInRpZFwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwidmVyXCIpKSB7XHJcbiAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInZlclwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwicHJlZmVycmVkX3VzZXJuYW1lXCIpKSB7XHJcbiAgICAgICAgICAgdGhpcy5wcmVmZXJyZWROYW1lID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInByZWZlcnJlZF91c2VybmFtZVwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwibmFtZVwiKSkge1xyXG4gICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJuYW1lXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJub25jZVwiKSkge1xyXG4gICAgICAgICAgIHRoaXMubm9uY2UgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wibm9uY2VcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcImV4cFwiKSkge1xyXG4gICAgICAgICAgIHRoaXMuZXhwaXJhdGlvbiA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJleHBcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcImhvbWVfb2lkXCIpKSB7XHJcbiAgICAgICAgICAgICB0aGlzLmhvbWVPYmplY3RJZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJob21lX29pZFwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwic2lkXCIpKSB7XHJcbiAgICAgICAgICAgICB0aGlzLnNpZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJzaWRcIl07XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwidWlkXCIpKSB7XHJcbiAgICAgICAgICB0aGlzLnVpZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ1aWRcIl07XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwidXRpZFwiKSkge1xyXG4gICAgICAgICAgdGhpcy51dGlkID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInV0aWRcIl07XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXN0cmluZy1saXRlcmFsICovXHJcbiAgICAgICB9XHJcbiAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHRoZSByZXR1cm5lZCBpZCB0b2tlblwiKTtcclxuICAgICB9XHJcbiAgIH1cclxuIFxyXG4gfVxyXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBBY2Nlc3NUb2tlbkNhY2hlSXRlbSB9IGZyb20gXCIuL0FjY2Vzc1Rva2VuQ2FjaGVJdGVtXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdG9yYWdlIHsvLyBTaW5nbGV0b25cblxuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFN0b3JhZ2U7XG4gIHByaXZhdGUgX2xvY2FsU3RvcmFnZVN1cHBvcnRlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX2NhY2hlTG9jYXRpb246IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihjYWNoZUxvY2F0aW9uOiBzdHJpbmcpIHtcbiAgICBpZiAoU3RvcmFnZS5faW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBTdG9yYWdlLl9pbnN0YW5jZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWNoZUxvY2F0aW9uID0gY2FjaGVMb2NhdGlvbjtcbiAgICB0aGlzLl9sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQgPSB0eXBlb2Ygd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSAhPSBudWxsO1xuICAgIHRoaXMuX3Nlc3Npb25TdG9yYWdlU3VwcG9ydGVkID0gdHlwZW9mIHdpbmRvd1tjYWNoZUxvY2F0aW9uXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dbY2FjaGVMb2NhdGlvbl0gIT0gbnVsbDtcbiAgICBTdG9yYWdlLl9pbnN0YW5jZSA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLl9sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQgJiYgIXRoaXMuX3Nlc3Npb25TdG9yYWdlU3VwcG9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJsb2NhbFN0b3JhZ2UgYW5kIHNlc3Npb25TdG9yYWdlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0b3JhZ2UuX2luc3RhbmNlO1xuICB9XG5cbiAgICAvLyBhZGQgdmFsdWUgdG8gc3RvcmFnZVxuICAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGVuYWJsZUNvb2tpZVN0b3JhZ2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICh3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0pIHtcbiAgICAgICAgICAgIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmFibGVDb29raWVTdG9yYWdlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnZXQgb25lIGl0ZW0gYnkga2V5IGZyb20gc3RvcmFnZVxuICAgIGdldEl0ZW0oa2V5OiBzdHJpbmcsIGVuYWJsZUNvb2tpZVN0b3JhZ2U/OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVuYWJsZUNvb2tpZVN0b3JhZ2UgJiYgdGhpcy5nZXRJdGVtQ29va2llKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEl0ZW1Db29raWUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgdmFsdWUgZnJvbSBzdG9yYWdlXG4gICAgcmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAod2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNsZWFyIHN0b3JhZ2UgKHJlbW92ZSBhbGwgaXRlbXMgZnJvbSBpdClcbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QWxsQWNjZXNzVG9rZW5zKGNsaWVudElkOiBzdHJpbmcsIHVzZXJJZGVudGlmaWVyOiBzdHJpbmcpOiBBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT4ge1xuICAgICAgICBjb25zdCByZXN1bHRzOiBBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT4gPSBbXTtcbiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtOiBBY2Nlc3NUb2tlbkNhY2hlSXRlbTtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXTtcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGxldCBrZXk6IHN0cmluZztcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goY2xpZW50SWQpICYmIGtleS5tYXRjaCh1c2VySWRlbnRpZmllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2V0SXRlbShrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBuZXcgQWNjZXNzVG9rZW5DYWNoZUl0ZW0oSlNPTi5wYXJzZShrZXkpLCBKU09OLnBhcnNlKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIHJlbW92ZUFjcXVpcmVUb2tlbkVudHJpZXMoYXV0aG9yaXR5S2V5OiBzdHJpbmcsIGFjcXVpcmVUb2tlblVzZXJLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dO1xuICAgICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgICAgbGV0IGtleTogc3RyaW5nO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChhdXRob3JpdHlLZXkgIT09IFwiXCIgJiYga2V5LmluZGV4T2YoYXV0aG9yaXR5S2V5KSA+IC0xKSB8fCAoYWNxdWlyZVRva2VuVXNlcktleSAhPT0gXCJcIiAmJiBrZXkuaW5kZXhPZihhY3F1aXJlVG9rZW5Vc2VyS2V5KSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldENhY2hlSXRlbXMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl07XG4gICAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICAgICBsZXQga2V5OiBzdHJpbmc7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBzdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YoQ29uc3RhbnRzLm1zYWwpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJdGVtKGtleSwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKENvbnN0YW50cy5yZW5ld1N0YXR1cykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEl0ZW1Db29raWUoY05hbWU6IHN0cmluZywgY1ZhbHVlOiBzdHJpbmcsIGV4cGlyZXM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdmFyIGNvb2tpZVN0ciA9IGNOYW1lICsgXCI9XCIgKyBjVmFsdWUgKyBcIjtcIjtcbiAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgIHZhciBleHBpcmVUaW1lID0gdGhpcy5zZXRFeHBpcmF0aW9uQ29va2llKGV4cGlyZXMpO1xuICAgICAgICAgICAgY29va2llU3RyICs9IFwiZXhwaXJlcz1cIiArIGV4cGlyZVRpbWUgKyBcIjtcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVN0cjtcbiAgICB9XG5cbiAgICBnZXRJdGVtQ29va2llKGNOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICB2YXIgbmFtZSA9IGNOYW1lICsgXCI9XCI7XG4gICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIHNldEV4cGlyYXRpb25Db29raWUoY29va2llTGlmZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIGV4cHIgPSBuZXcgRGF0ZSh0b2RheS5nZXRUaW1lKCkgKyBjb29raWVMaWZlICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIHJldHVybiBleHByLnRvVVRDU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY2xlYXJDb29raWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0SXRlbUNvb2tpZShDb25zdGFudHMubm9uY2VJZFRva2VuLCBcIlwiLCAtMSk7XG4gICAgICAgIHRoaXMuc2V0SXRlbUNvb2tpZShDb25zdGFudHMuc3RhdGVMb2dpbiwgXCJcIiwgLTEpO1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgXCJcIiwgLTEpO1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCBcIlwiLCAtMSk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IEFjY2Vzc1Rva2VuS2V5IH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5LZXlcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuVmFsdWUgfSBmcm9tIFwiLi9BY2Nlc3NUb2tlblZhbHVlXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlbkNhY2hlSXRlbSB7XG5cbiAga2V5OiBBY2Nlc3NUb2tlbktleTtcbiAgdmFsdWU6IEFjY2Vzc1Rva2VuVmFsdWU7XG5cbiAgY29uc3RydWN0b3Ioa2V5OiBBY2Nlc3NUb2tlbktleSwgdmFsdWU6IEFjY2Vzc1Rva2VuVmFsdWUpIHtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKlxuICogQGhpZGRlblxuICovXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5pbXBvcnQgeyBBYWRBdXRob3JpdHkgfSBmcm9tIFwiLi9BYWRBdXRob3JpdHlcIjtcbmltcG9ydCB7IEIyY0F1dGhvcml0eSB9IGZyb20gXCIuL0IyY0F1dGhvcml0eVwiO1xuaW1wb3J0IHsgQXV0aG9yaXR5LCBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tIFwiLi9FcnJvck1lc3NhZ2VcIjtcblxuZXhwb3J0IGNsYXNzIEF1dGhvcml0eUZhY3Rvcnkge1xuICAgIC8qXG4gICAgKiBQYXJzZSB0aGUgdXJsIGFuZCBkZXRlcm1pbmUgdGhlIHR5cGUgb2YgYXV0aG9yaXR5XG4gICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBEZXRlY3RBdXRob3JpdHlGcm9tVXJsKGF1dGhvcml0eVVybDogc3RyaW5nKTogQXV0aG9yaXR5VHlwZSB7XG4gICAgICAgIGF1dGhvcml0eVVybCA9IFV0aWxzLkNhbm9uaWNhbGl6ZVVyaShhdXRob3JpdHlVcmwpO1xuICAgICAgICBsZXQgY29tcG9uZW50cyA9IFV0aWxzLkdldFVybENvbXBvbmVudHMoYXV0aG9yaXR5VXJsKTtcbiAgICAgICAgbGV0IHBhdGhTZWdtZW50cyA9IGNvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xuICAgICAgICBzd2l0Y2ggKHBhdGhTZWdtZW50c1swXSkge1xuICAgICAgICAgICAgY2FzZSBcInRmcFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkIyQztcbiAgICAgICAgICAgIGNhc2UgXCJhZGZzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWRmcztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWFkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAqIENyZWF0ZSBhbiBhdXRob3JpdHkgb2JqZWN0IG9mIHRoZSBjb3JyZWN0IHR5cGUgYmFzZWQgb24gdGhlIHVybFxuICAgICogUGVyZm9ybXMgYmFzaWMgYXV0aG9yaXR5IHZhbGlkYXRpb24gLSBjaGVja3MgdG8gc2VlIGlmIHRoZSBhdXRob3JpdHkgaXMgb2YgYSB2YWxpZCB0eXBlIChlZyBhYWQsIGIyYylcbiAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgQ3JlYXRlSW5zdGFuY2UoYXV0aG9yaXR5VXJsOiBzdHJpbmcsIHZhbGlkYXRlQXV0aG9yaXR5OiBib29sZWFuKTogQXV0aG9yaXR5IHtcbiAgICAgICAgaWYgKFV0aWxzLmlzRW1wdHkoYXV0aG9yaXR5VXJsKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHR5cGUgPSBBdXRob3JpdHlGYWN0b3J5LkRldGVjdEF1dGhvcml0eUZyb21VcmwoYXV0aG9yaXR5VXJsKTtcbiAgICAgICAgLy8gRGVwZW5kaW5nIG9uIGFib3ZlIGRldGVjdGlvbiwgY3JlYXRlIHRoZSByaWdodCB0eXBlLlxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQXV0aG9yaXR5VHlwZS5CMkM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCMmNBdXRob3JpdHkoYXV0aG9yaXR5VXJsLCB2YWxpZGF0ZUF1dGhvcml0eSk7XG4gICAgICAgICAgICBjYXNlIEF1dGhvcml0eVR5cGUuQWFkOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWFkQXV0aG9yaXR5KGF1dGhvcml0eVVybCwgdmFsaWRhdGVBdXRob3JpdHkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuaW52YWxpZEF1dGhvcml0eVR5cGU7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBBYWRBdXRob3JpdHkgfSBmcm9tIFwiLi9BYWRBdXRob3JpdHlcIjtcbmltcG9ydCB7IEF1dGhvcml0eSwgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vRXJyb3JNZXNzYWdlXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBCMmNBdXRob3JpdHkgZXh0ZW5kcyBBYWRBdXRob3JpdHkge1xuICBwdWJsaWMgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBzdHJpbmcsIHZhbGlkYXRlQXV0aG9yaXR5OiBib29sZWFuKSB7XG4gICAgc3VwZXIoYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSk7XG4gICAgbGV0IHVybENvbXBvbmVudHMgPSBVdGlscy5HZXRVcmxDb21wb25lbnRzKGF1dGhvcml0eSk7XG5cbiAgICBsZXQgcGF0aFNlZ21lbnRzID0gdXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHM7XG4gICAgaWYgKHBhdGhTZWdtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICAgIHRocm93IEVycm9yTWVzc2FnZS5iMmNBdXRob3JpdHlVcmlJbnZhbGlkUGF0aDtcbiAgICB9XG5cbiAgICB0aGlzLkNhbm9uaWNhbEF1dGhvcml0eSA9IGBodHRwczovLyR7dXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnR9LyR7cGF0aFNlZ21lbnRzWzBdfS8ke3BhdGhTZWdtZW50c1sxXX0vJHtwYXRoU2VnbWVudHNbMl19L2A7XG4gIH1cblxuICBwdWJsaWMgZ2V0IEF1dGhvcml0eVR5cGUoKTogQXV0aG9yaXR5VHlwZSB7XG4gICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQjJDO1xuICB9XG5cbiAgLypcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgVGVuYW50RGlzY292ZXJ5RW5kcG9pbnRcbiAgICovXG4gIHB1YmxpYyBHZXRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRBc3luYygpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHZhciByZXN1bHRQcm9taXNlID0gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgcmVzb2x2ZSh0aGlzLkRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQpKTtcblxuICAgIGlmICghdGhpcy5Jc1ZhbGlkYXRpb25FbmFibGVkKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5Jc0luVHJ1c3RlZEhvc3RMaXN0KHRoaXMuQ2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgcmVqZWN0KEVycm9yTWVzc2FnZS51bnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb24pKTtcbiAgfVxufVxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbiAqICBNSVQgTGljZW5zZVxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcclxuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxyXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXHJcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcclxuICogY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcclxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xyXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcclxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi9Mb2dnZXJcIjtcclxuXHJcbi8vIG1ha2UgQ2FjaGVTdG9yYWdlIGEgZml4ZWQgdHlwZSB0byBsaW1pdCBpdCB0byBzcGVjaWZpYyBpbnB1dHNcclxudHlwZSBzdG9yYWdlID0gXCJsb2NhbFN0b3JhZ2VcIiB8IFwic2Vzc2lvblN0b3JhZ2VcIjtcclxuXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGlvbiBPcHRpb25zXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUQXV0aE9wdGlvbnMgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIENsaWVudCBJRCBhc3NpZ25lZCB0byB5b3VyIGFwcCBieSBBenVyZSBBY3RpdmUgRGlyZWN0b3J5LlxyXG4gICAqL1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvbGxvdyB1cCB3aXRoIHRoZSBhdXRob3JpdHkgZGlzY3Vzc2lvbiB3aXRoIHRoZSBQTXNcclxuICAgKiBVbnRpbCB0aGVuIHRoaXMgaXMgYSBwbGFjZWhvbGRlclxyXG4gICAqL1xyXG4gIGF1dGhvcml0eT86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogVXNlZCB0byB0dXJuIGF1dGhvcml0eSB2YWxpZGF0aW9uIG9uL29mZi5cclxuICAgKiBXaGVuIHNldCB0byB0cnVlIChkZWZhdWx0KSwgTVNBTCB3aWxsIGNvbXBhcmUgdGhlIGFwcGxpY2F0aW9uXCJzIGF1dGhvcml0eSBhZ2FpbnN0IHdlbGwta25vd24gVVJMcyB0ZW1wbGF0ZXMgcmVwcmVzZW50aW5nIHdlbGwtZm9ybWVkIGF1dGhvcml0aWVzLiBJdCBpcyB1c2VmdWwgd2hlbiB0aGUgYXV0aG9yaXR5IGlzIG9idGFpbmVkIGF0IHJ1biB0aW1lIHRvIHByZXZlbnQgTVNBTCBmcm9tIGRpc3BsYXlpbmcgYXV0aGVudGljYXRpb24gcHJvbXB0cyBmcm9tIG1hbGljaW91cyBwYWdlcy5cclxuICAgKi9cclxuICB2YWxpZGF0ZUF1dGhvcml0eT86IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSByZWRpcmVjdCBVUkkgb2YgdGhlIGFwcGxpY2F0aW9uLCB0aGlzIHNob3VsZCBiZSBzYW1lIGFzIHRoZSB2YWx1ZSBpbiB0aGUgYXBwbGljYXRpb24gcmVnaXN0cmF0aW9uIHBvcnRhbC5cclxuICAgKiBEZWZhdWx0cyB0byBgd2luZG93LmxvY2F0aW9uLmhyZWZgLlxyXG4gICAqL1xyXG4gIHJlZGlyZWN0VXJpPzogc3RyaW5nIHwgKCgpID0+IHN0cmluZyk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gdGhpcyBsb2NhdGlvbiBhZnRlciBsb2dvdXQuXHJcbiAgICogRGVmYXVsdHMgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cclxuICAgKi9cclxuICBwb3N0TG9nb3V0UmVkaXJlY3RVcmk/OiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXNlIHRvIHNlbmQgdGhlIHN0YXRlIHBhcmFtZXRlciB3aXRoIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3RcclxuICAgKi9cclxuICBzdGF0ZT86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogVXNlZCB0byB0dXJuIG9mZiBkZWZhdWx0IG5hdmlnYXRpb24gdG8gc3RhcnQgcGFnZSBhZnRlciBsb2dpbi4gRGVmYXVsdCBpcyB0cnVlLiBUaGlzIGlzIHVzZWQgb25seSBmb3IgcmVkaXJlY3QgZmxvd3MuXHJcbiAgICovXHJcbiAgbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybD86IGJvb2xlYW47XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FjaGUgT3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgVENhY2hlT3B0aW9ucyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gc3BlY2lmeSB0aGUgY2FjaGVMb2NhdGlvbiB1c2VyIHdhbnRzIHRvIHNldDogVmFsaWQgdmFsdWVzIGFyZSBcImxvY2FsU3RvcmFnZVwiIGFuZCBcInNlc3Npb25TdG9yYWdlXCJcclxuICAgICAqL1xyXG4gICAgY2FjaGVMb2NhdGlvbj86IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHNldCwgdGhlIGxpYnJhcnkgd2lsbCBzdG9yZSB0aGUgYXV0aCByZXF1ZXN0IHN0YXRlIHJlcXVpcmVkIGZvciB2YWxpZGF0aW9uIG9mIHRoZSBhdXRoIGZsb3dzIGluIHRoZSBicm93c2VyIGNvb2tpZXMuIEJ5IGRlZmF1bHQgdGhpcyBmbGFnIGlzIHNldCB0byBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgc3RvcmVBdXRoU3RhdGVJbkNvb2tpZT86IGJvb2xlYW47XHJcbn07XHJcblxyXG4vKipcclxuICogTGlicmFyeSBTcGVjaWZpYyBPcHRpb25zXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUU3lzdGVtT3B0aW9ucyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgTG9nZ2VyIG9iamVjdDtcclxuICAgICAqIFRPRE86IEV4cGFuZCBvbiBsb2dnZXIgZGV0YWlsc1xyXG4gICAgICovXHJcbiAgICBsb2dnZXI/OiBMb2dnZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtYXhpbXVtIHRpbWUgdGhlIGxpYnJhcnkgc2hvdWxkIHdhaXQgZm9yIGEgZnJhbWUgdG8gbG9hZFxyXG4gICAgICovXHJcbiAgICBsb2FkRnJhbWVUaW1lb3V0PzogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2V0cyB0aGUgd2luZG93IG9mIG9mZnNldCBuZWVkZWQgdG8gcmVuZXcgdGhlIHRva2VuIGJlZm9yZSBleHBpcnk/XHJcbiAgICAgKiBUT0RPOiBHZXQgdGhlIGV4YWN0IGRlc2NyaXB0aW9uIGZvciB0aGlzIHZhcmlhYmxlXHJcbiAgICAgKiBUT0RPOiBDbGFyaWZ5IGNsb2NrU2tldywgd2UgbWF5IG5lZWQgY2xvY2tTa2V3IHRvbyB3aGljaCBzZXJ2ZXMgYSBkaWZmZXJlbnQgcHVycG9zZSAocmVmOiBBYXNoaW1hJ3MgZGlzY3Vzc2lvbilcclxuICAgICAqL1xyXG4gICAgdG9rZW5SZW5ld2FsT2Zmc2V0U2Vjb25kcz86IG51bWJlcjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBcHAvRnJhbWV3b3JrIHNwZWNpZmljIGVudmlyb25tZW50IFN1cHBvcnRcclxuICovXHJcbmV4cG9ydCB0eXBlIFRGcmFtZXdvcmtPcHRpb25zID0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZmxhZyBzZXQgdG8gZGV0ZXJtaW5lIGlmIGl0IGlzIEFuZ3VsYXIgRnJhbWV3b3JrXHJcbiAgICAgKi9cclxuICAgIGlzQW5ndWxhcj86IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcnJheSBvZiBVUkkncyB3aGljaCBhcmUgdW5wcm90ZWN0ZWQgcmVzb3VyY2VzLiBNU0FMIHdpbGwgbm90IGF0dGFjaCBhIHRva2VuIHRvIG91dGdvaW5nIHJlcXVlc3RzIHRoYXQgaGF2ZSB0aGVzZSBVUkkuIERlZmF1bHRzIHRvICdudWxsJy5cclxuICAgICAqL1xyXG4gICAgdW5wcm90ZWN0ZWRSZXNvdXJjZXM/OiBBcnJheTxzdHJpbmc+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBpcyBtYXBwaW5nIG9mIHJlc291cmNlcyB0byBzY29wZXMgdXNlZCBieSBNU0FMIGZvciBhdXRvbWF0aWNhbGx5IGF0dGFjaGluZyBhY2Nlc3MgdG9rZW5zIGluIHdlYiBBUEkgY2FsbHMuXHJcbiAgICAgKiBBIHNpbmdsZSBhY2Nlc3MgdG9rZW4gaXMgb2J0YWluZWQgZm9yIHRoZSByZXNvdXJjZS4gU28geW91IGNhbiBtYXAgYSBzcGVjaWZpYyByZXNvdXJjZSBwYXRoIGFzIGZvbGxvd3M6XHJcbiAgICAgKiB7XCJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vdjEuMC9tZVwiLCBbXCJ1c2VyLnJlYWRcIl19LCBvciB0aGUgYXBwIFVSTCBvZiB0aGUgcmVzb3VyY2UgYXM6IHtcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS9cIiwgW1widXNlci5yZWFkXCIsIFwibWFpbC5zZW5kXCJdfS5cclxuICAgICAqIFRoaXMgaXMgcmVxdWlyZWQgZm9yIENPUlMgY2FsbHMuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZFJlc291cmNlTWFwPzogTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj47XHJcbn07XHJcblxyXG4vKipcclxuICogQ29uZmlndXJhdGlvbiBPYmplY3RcclxuICovXHJcbmV4cG9ydCB0eXBlIFRDb25maWd1cmF0aW9uID0ge1xyXG4gICAgYXV0aDogVEF1dGhPcHRpb25zLFxyXG4gICAgY2FjaGU/OiBUQ2FjaGVPcHRpb25zLFxyXG4gICAgc3lzdGVtPzogVFN5c3RlbU9wdGlvbnMsXHJcbiAgICBmcmFtZXdvcms/OiBURnJhbWV3b3JrT3B0aW9uc1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZ1bmN0aW9uIHRvIHNldCB0aGUgZGVmYXVsdCBvcHRpb25zIHdoZW4gbm90IGV4cGxpY2l0bHkgc2V0XHJcbiAqXHJcbiAqIEBwYXJhbSBUQXV0aE9wdGlvbnNcclxuICogQHBhcmFtIFRDYWNoZU9wdGlvbnNcclxuICogQHBhcmFtIFRTeXN0ZW1PcHRpb25zXHJcbiAqIEBwYXJhbSBURnJhbWV3b3JrT3B0aW9uc1xyXG4gKlxyXG4gKiBAcmV0dXJucyBUQ29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBDb25maWd1cmF0aW9uKFxyXG4gICAgLy8gZGVzdHJ1Y3R1cmUgd2l0aCBkZWZhdWx0IHNldHRpbmdcclxuICAgIHsgY2xpZW50SWQgPSBcIlwiLCBhdXRob3JpdHkgPSBudWxsLCB2YWxpZGF0ZUF1dGhvcml0eSA9IHRydWUsIHJlZGlyZWN0VXJpID0gKCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoXCI/XCIpWzBdLnNwbGl0KFwiI1wiKVswXSwgcG9zdExvZ291dFJlZGlyZWN0VXJpID0gKCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoXCI/XCIpWzBdLnNwbGl0KFwiI1wiKVswXSwgc3RhdGUgPSBcIlwiLCBuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsID0gdHJ1ZSB9OiBUQXV0aE9wdGlvbnMgPSB7Y2xpZW50SWR9LFxyXG4gICAgeyBjYWNoZUxvY2F0aW9uID0gXCJsb2NhbFN0b3JhZ2VcIiwgc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSA9IGZhbHNlIH06IFRDYWNoZU9wdGlvbnMgPSB7fSxcclxuICAgIHsgbG9hZEZyYW1lVGltZW91dCA9IDYwMDAsIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMgPSAzMDAgfTogVFN5c3RlbU9wdGlvbnM9IHt9LFxyXG4gICAgeyBpc0FuZ3VsYXIgPSBmYWxzZSwgdW5wcm90ZWN0ZWRSZXNvdXJjZXMgPSBuZXcgQXJyYXk8c3RyaW5nPigpLCBwcm90ZWN0ZWRSZXNvdXJjZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PigpIH06IFRGcmFtZXdvcmtPcHRpb25zID0ge31cclxuKSB7XHJcbiAgICAvLyByZXN0cnVjdHVyZVxyXG4gICAgbGV0IGNvbmZpZyA9IHtcclxuICAgICAgICBhdXRoOiB7IGNsaWVudElkLCBhdXRob3JpdHksIHZhbGlkYXRlQXV0aG9yaXR5LCByZWRpcmVjdFVyaSwgcG9zdExvZ291dFJlZGlyZWN0VXJpLCBzdGF0ZSwgbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCB9LFxyXG4gICAgICAgIGNhY2hlOiB7IGNhY2hlTG9jYXRpb24sIHN0b3JlQXV0aFN0YXRlSW5Db29raWUgfSxcclxuICAgICAgICBzeXN0ZW06IHsgbG9hZEZyYW1lVGltZW91dCwgdG9rZW5SZW5ld2FsT2Zmc2V0U2Vjb25kcyB9LFxyXG4gICAgICAgIGZyYW1ld29yazogeyBpc0FuZ3VsYXIsIHVucHJvdGVjdGVkUmVzb3VyY2VzLCBwcm90ZWN0ZWRSZXNvdXJjZU1hcCB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBjb25maWc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUZXN0IENvZGVcclxuICogdmFyIGM6VENvbmZpZ3VyYXRpb24gPSBDb25maWd1cmF0aW9uKHtjbGllbnRJZDogXCJUZXN0Q2xpZW50IFwifSwge30sIHt9LCB7aXNBbmd1bGFyOiB0cnVlfSk7XHJcbiAqIGNvbnNvbGUubG9nKGMpO1xyXG4qL1xyXG4iXSwic291cmNlUm9vdCI6IiJ9