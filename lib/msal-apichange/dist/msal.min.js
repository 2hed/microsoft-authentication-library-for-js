/*! msal v0.2.4 2019-02-03 */

'use strict';
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Msal",[],t):"object"==typeof exports?exports.Msal=t():e.Msal=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=function(){function e(){}return e.compareObjects=function(e,t){return!(!e||!t)&&!(!e.homeAccountIdentifier||!t.homeAccountIdentifier||e.homeAccountIdentifier!==t.homeAccountIdentifier)},e.expiresIn=function(e){return e||(e="3599"),this.now()+parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,o=this.base64DecodeStringUrlSafe(n);return o?JSON.parse(o):null}catch(e){}return null},e.base64EncodeStringUrlSafe=function(e){return window.btoa?window.btoa(e):this.encode(e)},e.base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(encodeURIComponent(window.atob(e))):decodeURIComponent(encodeURIComponent(this.decode(e)))},e.encode=function(e){var t,n,o,r,i,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=this.utf8Encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(o=e.charCodeAt(l++))>>6,a=63&o,isNaN(n)?s=a=64:isNaN(o)&&(a=64),u=u+c.charAt(r)+c.charAt(i)+c.charAt(s)+c.charAt(a);return u.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},e.decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var o,r,i,s,a,c,u,l,p="",d=0;d<n;d+=4){if(o=t.indexOf(e.charAt(d)),r=t.indexOf(e.charAt(d+1)),i=t.indexOf(e.charAt(d+2)),s=t.indexOf(e.charAt(d+3)),d+2===n-1){c=(a=o<<18|r<<12|i<<6)>>16&255,u=a>>8&255,p+=String.fromCharCode(c,u);break}if(d+1===n-1){c=(a=o<<18|r<<12)>>16&255,p+=String.fromCharCode(c);break}c=(a=o<<18|r<<12|i<<6|s)>>16&255,u=a>>8&255,l=255&a,p+=String.fromCharCode(c,u,l)}return p},e.decodeJwt=function(e){if(this.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.deserialize=function(e){var t,n=/\+/g,o=/([^&=]+)=([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},i={};for(t=o.exec(e);t;)i[r(t[1])]=r(t[2]),t=o.exec(e);return i},e.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every(function(t){return e.indexOf(t.toString().toLowerCase())>=0})},e.convertToLowerCase=function(e){return e.map(function(e){return e.toLowerCase()})},e.removeElement=function(e,t){return e.filter(function(e){return e!==t})},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.getLibraryVersion=function(){return"0.2.4"},e.replaceFirstPath=function(e,t){if(!t)return e;var n=this.GetUrlComponents(e),r=n.PathSegments;return 0===r.length||r[0]!==o.Constants.common&&r[0]!==o.Constants.organizations||(r[0]=t,e=n.Protocol+"//"+n.HostNameAndPort+"/"+r.join("/")),e},e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);return t.getRandomValues(n),n[6]|=64,n[6]&=79,n[8]|=128,n[8]&=191,e.decimalToHex(n[0])+e.decimalToHex(n[1])+e.decimalToHex(n[2])+e.decimalToHex(n[3])+"-"+e.decimalToHex(n[4])+e.decimalToHex(n[5])+"-"+e.decimalToHex(n[6])+e.decimalToHex(n[7])+"-"+e.decimalToHex(n[8])+e.decimalToHex(n[9])+"-"+e.decimalToHex(n[10])+e.decimalToHex(n[11])+e.decimalToHex(n[12])+e.decimalToHex(n[13])+e.decimalToHex(n[14])+e.decimalToHex(n[15])}for(var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",i=0,s="",a=0;a<36;a++)"-"!==o[a]&&"4"!==o[a]&&(i=16*Math.random()|0),"x"===o[a]?s+=r[i]:"y"===o[a]?(i&=3,s+=r[i|=8]):s+=o[a];return s},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var o={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5]},r=o.AbsolutePath.split("/");return r=r.filter(function(e){return e&&e.length>0}),o.PathSegments=r,o},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.checkSSO=function(e){return!(e&&(-1!==e.indexOf(o.Constants.login_hint)||-1!==e.indexOf(o.Constants.sid)))},e.constructUnifiedCacheExtraQueryParameter=function(e,t){return e?e.hasOwnProperty(o.Constants.upn)?(t=this.urlRemoveQueryStringParameter(t,o.Constants.login_hint),(t=this.urlRemoveQueryStringParameter(t,o.Constants.domain_hint))?t+"&"+o.Constants.login_hint+"="+e.upn+"&"+o.Constants.domain_hint+"="+o.Constants.organizations:"&"+o.Constants.login_hint+"="+e.upn+"&"+o.Constants.domain_hint+"="+o.Constants.organizations):(t=this.urlRemoveQueryStringParameter(t,o.Constants.domain_hint))?t+"&"+o.Constants.domain_hint+"="+o.Constants.organizations:"&"+o.Constants.domain_hint+"="+o.Constants.organizations:t},e.urlRemoveQueryStringParameter=function(e,t){if(this.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},e}();t.Utils=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"errorDescription",{get:function(){return"error_description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"error",{get:function(){return"error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scope",{get:function(){return"scope"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenUser",{get:function(){return"msal.acquireTokenUser"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientInfo",{get:function(){return"client_info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authority",{get:function(){return"msal.authority"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idToken",{get:function(){return"id_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessToken",{get:function(){return"access_token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expiresIn",{get:function(){return"expires_in"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sessionState",{get:function(){return"session_state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalClientInfo",{get:function(){return"msal.client.info"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalError",{get:function(){return"msal.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalErrorDescription",{get:function(){return"msal.error.description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msalSessionState",{get:function(){return"msal.session.state"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenKeys",{get:function(){return"msal.token.keys"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessTokenKey",{get:function(){return"msal.access.token.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expirationKey",{get:function(){return"msal.expiration.key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateLogin",{get:function(){return"msal.state.login"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateAcquireToken",{get:function(){return"msal.state.acquireToken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stateRenew",{get:function(){return"msal.state.renew"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nonceIdToken",{get:function(){return"msal.nonce.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userName",{get:function(){return"msal.username"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"idTokenKey",{get:function(){return"msal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginRequest",{get:function(){return"msal.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginError",{get:function(){return"msal.login.error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewStatus",{get:function(){return"msal.token.renew.status"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"msal",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login_hint",{get:function(){return"login_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"domain_hint",{get:function(){return"domain_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"organizations",{get:function(){return"organizations"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumers",{get:function(){return"consumers"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumersUtid",{get:function(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sid",{get:function(){return"sid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimeter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCancelled",{get:function(){return"Canceled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusCompleted",{get:function(){return"Completed"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenRenewStatusInProgress",{get:function(){return"In Progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"urlHash",{get:function(){return"msal.urlHash"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"angularLoginRequest",{get:function(){return"msal.angular.login.request"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userIdentifier",{get:function(){return"userIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}();t.Constants=o;var r=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"login_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"acquiretoken_progress_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"input_scopes_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"endpoints_resolution_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"popup_window_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"user_login_error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"user_cancelled"},enumerable:!0,configurable:!0}),e}();t.ErrorCodes=r;var i=function(){function e(){}return Object.defineProperty(e,"loginProgressError",{get:function(){return"Login is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"acquireTokenProgressError",{get:function(){return"Acquire token is in progress"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inputScopesError",{get:function(){return"Invalid value of input scopes provided"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"endpointResolutionError",{get:function(){return"Endpoints cannot be resolved"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWindowError",{get:function(){return"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userLoginError",{get:function(){return"User login is required"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userCancelledError",{get:function(){return"User closed the popup window and cancelled the flow"},enumerable:!0,configurable:!0}),e}();t.ErrorDescription=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(4),i=n(9);!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}(t.AuthorityType||(t.AuthorityType={}));var s=function(){function e(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=o.Utils.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=o.Utils.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw r.ErrorMessage.invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw r.ErrorMessage.authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw r.ErrorMessage.authorityUriInvalidPath},e.prototype.DiscoverEndpoints=function(e){return(new i.XhrClient).sendRequestAsync(e,"GET",!0).then(function(e){return{AuthorizationEndpoint:e.authorization_endpoint,EndSessionEndpoint:e.end_session_endpoint,Issuer:e.issuer}})},e.prototype.ResolveEndpointsAsync=function(){var e=this,t="";return this.GetOpenIdConfigurationEndpointAsync().then(function(n){return t=n,e.DiscoverEndpoints(t)}).then(function(t){return e.tenantDiscoveryResponse=t,e})},e}();t.Authority=s},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */Object.defineProperty(t,"__esModule",{value:!0});var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function s(e){return this instanceof s?(this.v=e,this):new s(e)}t.__extends=function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t.__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.__rest=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},t.__decorate=function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},t.__param=function(e,t){return function(n,o){t(n,o,e)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},t.__generator=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=r,t.__read=i,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},t.__await=s,t.__asyncGenerator=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){r[e]&&(o[e]=function(t){return new Promise(function(n,o){i.push([e,t,n,o])>1||c(e,t)})})}function c(e,t){try{(n=r[e](t)).value instanceof s?Promise.resolve(n.value.v).then(u,l):p(i[0][2],n)}catch(e){p(i[0][3],e)}var n}function u(e){c("next",e)}function l(e){c("throw",e)}function p(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},t.__asyncDelegator=function(e){var t,n;return t={},o("next"),o("throw",function(e){throw e}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){e[o]&&(t[o]=function(t){return(n=!n)?{value:s(e[o](t)),done:"return"===o}:r?r(t):t})}},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"authorityUriInvalidPath",{get:function(){return"AuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"authorityUriInsecure",{get:function(){return"AuthorityUriInsecure"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"invalidAuthorityType",{get:function(){return"InvalidAuthorityType"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unsupportedAuthorityValidation",{get:function(){return"UnsupportedAuthorityValidation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"b2cAuthorityUriInvalidPath",{get:function(){return"B2cAuthorityUriInvalidPath"},enumerable:!0,configurable:!0}),e}();t.ErrorMessage=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(13),i=n(14),s=n(15),a=n(16),c=n(1),u=n(17),l=n(18),p=n(6),d=n(7),h=n(0),f=n(20),g="id_token",m="token",C="id_token token",y=function(e,t,n){var o=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.isInIframe()?new Promise(function(){}):o.apply(this,e)},n},w=function(){function e(e,t){if(this.pTokenReceivedCallback=null,this.cacheLocations={localStorage:"localStorage",sessionStorage:"sessionStorage"},this.pConfig=e,this.pTokenReceivedCallback=t,this.pLoginInProgress=!1,this.pAcquireTokenInProgress=!1,!this.cacheLocations[this.pConfig.cache.cacheLocation])throw new Error("Cache Location is not valid. Provided value:"+this.pConfig.cache.cacheLocation+".Possible values are: "+this.cacheLocations.localStorage+", "+this.cacheLocations.sessionStorage);this.pCacheStorage=new l.Storage(this.pConfig.cache.cacheLocation),window.openedWindows=[],window.activeRenewals={},window.renewStates=[],window.callBackMappedToRenewStates={},window.callBacksMappedToRenewStates={},window.msal=this;var n=window.location.hash,o=this.isCallback(n);if(!this.pConfig.framework.isAngular)if(o)this.handleAuthenticationResponse.call(this,n);else{var r=this.pCacheStorage.getItem(c.Constants.urlHash);r&&this.processCallBack(r)}}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=f.AuthorityFactory.CreateInstance(e,this.pConfig.auth.validateAuthority)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cacheLocation",{get:function(){return this.pConfig.cache.cacheLocation},enumerable:!0,configurable:!0}),e.prototype.getRedirectUri=function(){return"function"==typeof this.pConfig.auth.redirectUri?this.pConfig.auth.redirectUri():this.pConfig.auth.redirectUri},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.pConfig.auth.postLogoutRedirectUri?this.pConfig.auth.postLogoutRedirectUri():this.pConfig.auth.postLogoutRedirectUri},e.prototype.processCallBack=function(e){this.pConfig.system.logger.info("Processing the callback from redirect response");var t=this.getRequestInfo(e);this.saveTokenFromHash(t);var n,o=t.parameters[c.Constants.accessToken]||t.parameters[c.Constants.idToken],r=t.parameters[c.Constants.errorDescription],i=t.parameters[c.Constants.error];n=t.parameters[c.Constants.accessToken]?c.Constants.accessToken:c.Constants.idToken,this.pCacheStorage.removeItem(c.Constants.urlHash);try{this.pTokenReceivedCallback&&(this.pCacheStorage.clearCookie(),this.pTokenReceivedCallback.call(this,r,o,i,n,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie))))}catch(e){this.pConfig.system.logger.error("Error occurred in token received callback function: "+e)}},e.prototype.loginRedirect=function(e,t){var n=this;if(this.pLoginInProgress&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.loginProgressError,null,c.ErrorCodes.loginProgressError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{if(e){var o=this.validateInputScope(e);if(o&&!h.Utils.isEmpty(o)&&this.pTokenReceivedCallback)return void this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.idToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));e=this.filterScopes(e)}var r;(r=this.extractADALIdToken())&&!e?(this.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=h.Utils.constructUnifiedCacheExtraQueryParameter(r,t),this.pSilentLogin=!0,this.acquireTokenSilent([this.pConfig.auth.clientId],this.authority,this.getAccount(),t).then(function(e){n.pSilentLogin=!1,n.pConfig.system.logger.info("Unified cache call is successful"),n.pTokenReceivedCallback&&n.pTokenReceivedCallback.call(n,null,e,null,c.Constants.idToken,n.getAccountState(n.pSilentAuthenticationState))},function(o){n.pSilentLogin=!1,n.pConfig.system.logger.error("Error occurred during unified cache ATS"),n.loginRedirectHelper(e,t)})):this.loginRedirectHelper(e,t)}},e.prototype.loginRedirectHelper=function(e,t){var n=this;this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var o=new s.AuthenticationRequestParameters(n.authorityInstance,n.pConfig.auth.clientId,e,g,n.getRedirectUri(),n.pConfig.auth.state);t&&(o.extraQueryParameters=t);var r=n.pCacheStorage.getItem(c.Constants.angularLoginRequest);r&&""!==r?n.pCacheStorage.setItem(c.Constants.angularLoginRequest,""):r=window.location.href,n.pCacheStorage.setItem(c.Constants.loginRequest,r,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.loginError,""),n.pCacheStorage.setItem(c.Constants.stateLogin,o.state,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.nonceIdToken,o.nonce,n.pConfig.cache.storeAuthStateInCookie),n.pCacheStorage.setItem(c.Constants.msalError,""),n.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var i=c.Constants.authority+c.Constants.resourceDelimeter+o.state;n.pCacheStorage.setItem(i,n.authority,n.pConfig.cache.storeAuthStateInCookie);var a=o.createNavigateUrl(e)+c.Constants.response_mode_fragment;n.promptUser(a)})},e.prototype.loginPopup=function(e,t){var n=this;return new Promise(function(o,r){if(n.pLoginInProgress)r(c.ErrorCodes.loginProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.loginProgressError);else{if(e){var i=n.validateInputScope(e);if(i&&!h.Utils.isEmpty(i))return void r(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+c.ErrorDescription.inputScopesError);e=n.filterScopes(e)}var s;(s=n.extractADALIdToken())&&!e?(n.pConfig.system.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=h.Utils.constructUnifiedCacheExtraQueryParameter(s,t),n.pSilentLogin=!0,n.acquireTokenSilent([n.pConfig.auth.clientId],n.authority,n.getAccount(),t).then(function(e){n.pSilentLogin=!1,n.pConfig.system.logger.info("Unified cache call is successful"),o(e)},function(i){n.pSilentLogin=!1,n.pConfig.system.logger.error("Error occurred during unified cache ATS"),n.loginPopupHelper(o,r,e,t)})):n.loginPopupHelper(o,r,e,t)}})},e.prototype.loginPopupHelper=function(e,t,n,o){var r=this;n||(n=[this.pConfig.auth.clientId]);var i=n.join(" ").toLowerCase(),a=this.openWindow("about:blank","_blank",1,this,e,t);a&&(this.pLoginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var u=new s.AuthenticationRequestParameters(r.authorityInstance,r.pConfig.auth.clientId,n,g,r.getRedirectUri(),r.pConfig.auth.state);o&&(u.extraQueryParameters=o),r.pCacheStorage.setItem(c.Constants.loginRequest,window.location.href,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.loginError,""),r.pCacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,r.pConfig.cache.storeAuthStateInCookie),r.pCacheStorage.setItem(c.Constants.msalError,""),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var l=c.Constants.authority+c.Constants.resourceDelimeter+u.state;r.pCacheStorage.setItem(l,r.authority,r.pConfig.cache.storeAuthStateInCookie);var p=u.createNavigateUrl(n)+c.Constants.response_mode_fragment;window.renewStates.push(u.state),window.requestType=c.Constants.login,r.registerCallback(u.state,i,e,t),a&&(r.pConfig.system.logger.infoPii("Navigated Popup window to:"+p),a.location.href=p)},function(){r.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),t&&t(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),a&&a.close()}).catch(function(e){r.pConfig.system.logger.warning("could not resolve endpoints"),t(e)}))},e.prototype.promptUser=function(e){e&&!h.Utils.isEmpty(e)?(this.pConfig.system.logger.infoPii("Navigate to:"+e),window.location.replace(e)):this.pConfig.system.logger.info("Navigate url is empty")},e.prototype.openWindow=function(e,t,n,o,r,i){var s=this,a=this.openPopup(e,t,c.Constants.popUpWidth,c.Constants.popUpHeight);if(null==a)return o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1,this.pConfig.system.logger.info(c.ErrorCodes.popUpWindowError+":"+c.ErrorDescription.popUpWindowError),this.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.popUpWindowError),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.popUpWindowError),i&&i(c.ErrorCodes.popUpWindowError+c.Constants.resourceDelimeter+c.ErrorDescription.popUpWindowError),null;window.openedWindows.push(a);var u=window.setInterval(function(){if(a&&a.closed&&o.pLoginInProgress){if(i&&i(c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError),window.clearInterval(u),s.pConfig.framework.isAngular)return void s.broadcast("msal:popUpClosed",c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError);o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1}try{var e=a.location;if(-1!==e.href.indexOf(s.getRedirectUri())&&(window.clearInterval(u),o.pLoginInProgress=!1,o.pAcquireTokenInProgress=!1,s.pConfig.system.logger.info("Closing popup window"),s.pConfig.framework.isAngular)){s.broadcast("msal:popUpHashChanged",e.hash);for(var t=0;t<window.openedWindows.length;t++)window.openedWindows[t].close()}}catch(e){}},n);return a},e.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},e.prototype.logout=function(){this.clearCache(),this.pAccount=null;var e="";this.getPostLogoutRedirectUri()&&(e="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()));var t=this.authority+"/oauth2/v2.0/logout?"+e;this.promptUser(t)},e.prototype.clearCache=function(){window.renewStates=[];for(var e=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),t=0;t<e.length;t++)this.pCacheStorage.removeItem(JSON.stringify(e[t].key));this.pCacheStorage.resetCacheItems(),this.pCacheStorage.clearCookie()},e.prototype.clearCacheForScope=function(e){for(var t=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var o=t[n];o.value.accessToken===e&&this.pCacheStorage.removeItem(JSON.stringify(o.key))}},e.prototype.openPopup=function(e,t,n,o){try{var r=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=s/2-n/2+r,u=a/2-o/2+i,l=window.open(e,t,"width="+n+", height="+o+", top="+u+", left="+c);return l.focus&&l.focus(),l}catch(e){return this.pConfig.system.logger.error("error opening popup "+e.message),this.pLoginInProgress=!1,this.pAcquireTokenInProgress=!1,null}},e.prototype.validateInputScope=function(e){if(!e||e.length<1)return"Scopes cannot be passed as an empty array";if(!Array.isArray(e))throw new Error("API does not accept non-array scopes");return e.indexOf(this.pConfig.auth.clientId)>-1&&e.length>1?"ClientId can only be provided as a single scope":""},e.prototype.filterScopes=function(e){return e=(e=e.filter(function(e){return"openid"!==e})).filter(function(e){return"profile"!==e})},e.prototype.registerCallback=function(e,t,n,o){var r=this;window.activeRenewals[t]=e,window.callBacksMappedToRenewStates[e]||(window.callBacksMappedToRenewStates[e]=[]),window.callBacksMappedToRenewStates[e].push({resolve:n,reject:o}),window.callBackMappedToRenewStates[e]||(window.callBackMappedToRenewStates[e]=function(n,o,i,s){window.activeRenewals[t]=null;for(var a=0;a<window.callBacksMappedToRenewStates[e].length;++a)try{n||i?window.callBacksMappedToRenewStates[e][a].reject(n+c.Constants.resourceDelimeter+i):o&&window.callBacksMappedToRenewStates[e][a].resolve(o)}catch(e){r.pConfig.system.logger.warning(e)}window.callBacksMappedToRenewStates[e]=null,window.callBackMappedToRenewStates[e]=null})},e.prototype.getCachedTokenInternal=function(e,t){var n,o=t||this.getAccount();if(!o)return null;var r=this.authorityInstance?this.authorityInstance:f.AuthorityFactory.CreateInstance(this.authority,this.pConfig.auth.validateAuthority);return n=h.Utils.compareObjects(o,this.getAccount())?e.indexOf(this.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,g,this.getRedirectUri(),this.pConfig.auth.state):new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,m,this.getRedirectUri(),this.pConfig.auth.state):new s.AuthenticationRequestParameters(r,this.pConfig.auth.clientId,e,C,this.getRedirectUri(),this.pConfig.auth.state),this.getCachedToken(n,t)},e.prototype.getCachedToken=function(e,t){var n=null,o=e.scopes,r=this.pCacheStorage.getAllAccessTokens(this.pConfig.auth.clientId,t?t.homeAccountIdentifier:null);if(0===r.length)return null;var i=[];if(e.authority){for(s=0;s<r.length;s++){c=(a=r[s]).key.scopes.split(" ");h.Utils.containsScope(c,o)&&a.key.authority===e.authority&&i.push(a)}if(0===i.length)return null;if(1!==i.length)return{errorDesc:"The cache contains multiple tokens satisfying the requirements.Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};n=i[0]}else{for(var s=0;s<r.length;s++){var a,c=(a=r[s]).key.scopes.split(" ");h.Utils.containsScope(c,o)&&i.push(a)}if(1===i.length)n=i[0],e.authorityInstance=f.AuthorityFactory.CreateInstance(n.key.authority,this.pConfig.auth.validateAuthority);else{if(i.length>1)return{errorDesc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority",token:null,error:"multiple_matching_tokens_detected"};var u=this.getUniqueAuthority(r,"authority");if(u.length>1)return{errorDesc:"Multiple authorities found in the cache. Pass authority in the API overload.",token:null,error:"multiple_matching_tokens_detected"};e.authorityInstance=f.AuthorityFactory.CreateInstance(u[0],this.pConfig.auth.validateAuthority)}}if(null!=n){var l=Number(n.value.expiresIn),p=this.pConfig.system.tokenRenewalOffsetSeconds||300;return l&&l>h.Utils.now()+p?{errorDesc:null,token:n.value.accessToken,error:null}:(this.pCacheStorage.removeItem(JSON.stringify(i[0].key)),null)}return null},e.prototype.getAllAccounts=function(){for(var e=[],t=this.pCacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var o=new u.IdToken(t[n].value.idToken),r=new a.HomeAccountIdentifier(t[n].value.clientInfo),i=d.Account.createAccount(o,r);e.push(i)}return this.getUniqueAccounts(e)},e.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],o=0;o<e.length;++o)e[o].homeAccountIdentifier&&-1===t.indexOf(e[o].homeAccountIdentifier)&&(t.push(e[o].homeAccountIdentifier),n.push(e[o]));return n},e.prototype.getUniqueAuthority=function(e,t){var n=[],o=[];return e.forEach(function(e){e.key.hasOwnProperty(t)&&-1===o.indexOf(e.key[t])&&(o.push(e.key[t]),n.push(e.key[t]))}),n},e.prototype.addHintParameters=function(e,t){var n=t||this.getAccount();if(n){var o=n.homeAccountIdentifier.split("."),r=h.Utils.base64DecodeStringUrlSafe(o[0]),i=h.Utils.base64DecodeStringUrlSafe(o[1]);n.sid&&-1!==e.indexOf(c.Constants.prompt_none)?this.urlContainsQueryStringParameter(c.Constants.sid,e)||this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||(e+="&"+c.Constants.sid+"="+encodeURIComponent(n.sid)):this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||!n.userName||h.Utils.isEmpty(n.userName)||(e+="&"+c.Constants.login_hint+"="+encodeURIComponent(n.userName)),h.Utils.isEmpty(r)||h.Utils.isEmpty(i)||(this.urlContainsQueryStringParameter("domain_req",e)||h.Utils.isEmpty(i)||(e+="&domain_req="+encodeURIComponent(i)),this.urlContainsQueryStringParameter("login_req",e)||h.Utils.isEmpty(r)||(e+="&login_req="+encodeURIComponent(r))),this.urlContainsQueryStringParameter(c.Constants.domain_hint,e)||h.Utils.isEmpty(i)||(i===c.Constants.consumersUtid?e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.consumers):e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.organizations))}return e},e.prototype.urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},e.prototype.acquireTokenRedirect=function(e,t,n,o){var r=this,i=this.validateInputScope(e);if(i&&!h.Utils.isEmpty(i)&&this.pTokenReceivedCallback)this.pTokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));else{e&&(e=this.filterScopes(e));var a=n||this.getAccount();if(!this.pAcquireTokenInProgress){var u;e.join(" ").toLowerCase();if(!(a||o&&-1!==o.indexOf(c.Constants.login_hint))&&this.pTokenReceivedCallback)return this.pConfig.system.logger.info("User login is required"),void this.pTokenReceivedCallback(c.ErrorDescription.userLoginError,null,c.ErrorCodes.userLoginError,c.Constants.accessToken,this.getAccountState(this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)));this.pAcquireTokenInProgress=!0;var l=t?f.AuthorityFactory.CreateInstance(t,this.pConfig.auth.validateAuthority):this.authorityInstance;l.ResolveEndpointsAsync().then(function(){var t;u=h.Utils.compareObjects(a,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,g,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(l,r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state),r.pCacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,r.pConfig.cache.storeAuthStateInCookie),t=a?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+a.homeAccountIdentifier+c.Constants.resourceDelimeter+u.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+u.state,r.pCacheStorage.setItem(t,JSON.stringify(a));var n=c.Constants.authority+c.Constants.resourceDelimeter+u.state;r.pCacheStorage.setItem(n,l.CanonicalAuthority,r.pConfig.cache.storeAuthStateInCookie),o&&(u.extraQueryParameters=o);var i=u.createNavigateUrl(e)+c.Constants.response_mode_fragment;(i=r.addHintParameters(i,a))&&(r.pCacheStorage.setItem(c.Constants.stateAcquireToken,u.state,r.pConfig.cache.storeAuthStateInCookie),window.location.replace(i))})}}},e.prototype.acquireTokenPopup=function(e,t,n,o){var r=this;return new Promise(function(i,a){var u=r.validateInputScope(e);u&&!h.Utils.isEmpty(u)&&a(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+u),e&&(e=r.filterScopes(e));var l=n||r.getAccount();if(r.pAcquireTokenInProgress)a(c.ErrorCodes.acquireTokenProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.acquireTokenProgressError);else{var p,d=e.join(" ").toLowerCase();if(!(l||o&&-1!==o.indexOf(c.Constants.login_hint)))return r.pConfig.system.logger.info("User login is required"),void a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError);r.pAcquireTokenInProgress=!0;var y=t?f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority):r.authorityInstance,w=r.openWindow("about:blank","_blank",1,r,i,a);w&&y.ResolveEndpointsAsync().then(function(){var t;p=h.Utils.compareObjects(l,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,g,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(y,r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state),r.pCacheStorage.setItem(c.Constants.nonceIdToken,p.nonce),p.state=p.state,t=l?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+l.homeAccountIdentifier+c.Constants.resourceDelimeter+p.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+p.state,r.pCacheStorage.setItem(t,JSON.stringify(l));var n=c.Constants.authority+c.Constants.resourceDelimeter+p.state;r.pCacheStorage.setItem(n,y.CanonicalAuthority,r.pConfig.cache.storeAuthStateInCookie),o&&(p.extraQueryParameters=o);var u=p.createNavigateUrl(e)+c.Constants.response_mode_fragment;u=r.addHintParameters(u,l),window.renewStates.push(p.state),window.requestType=c.Constants.renewToken,r.registerCallback(p.state,d,i,a),w&&(w.location.href=u)},function(){r.pConfig.system.logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),r.pCacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),a&&a(c.ErrorCodes.endpointResolutionError+c.Constants.resourceDelimeter+c.ErrorDescription.endpointResolutionError),w&&w.close()}).catch(function(e){r.pConfig.system.logger.warning("could not resolve endpoints"),a(e)})}})},e.prototype.acquireTokenSilent=function(e,t,n,o){var r=this;return new Promise(function(i,a){var u=r.validateInputScope(e);if(u&&!h.Utils.isEmpty(u))return a(c.ErrorCodes.inputScopesError+"|"+u),null;e&&(e=r.filterScopes(e));var l,p=e.join(" ").toLowerCase(),d=n||r.getAccount(),y=r.pCacheStorage.getItem(c.Constants.adalIdToken);if(!d&&h.Utils.checkSSO(o)&&h.Utils.isEmpty(y))return r.pConfig.system.logger.info("User login is required"),a(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError),null;if(!d&&!h.Utils.isEmpty(y)){var w=h.Utils.extractIdToken(y);console.log("ADAL's idToken exists. Extracting login information from ADAL's idToken "),o=h.Utils.constructUnifiedCacheExtraQueryParameter(w,o)}l=h.Utils.compareObjects(d,r.getAccount())?e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,g,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,m,r.getRedirectUri(),r.pConfig.auth.state):e.indexOf(r.pConfig.auth.clientId)>-1?new s.AuthenticationRequestParameters(f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,g,r.getRedirectUri(),r.pConfig.auth.state):new s.AuthenticationRequestParameters(f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority),r.pConfig.auth.clientId,e,C,r.getRedirectUri(),r.pConfig.auth.state);var v=r.getCachedToken(l,d);if(v){if(v.token)return r.pConfig.system.logger.info("Token is already in cache for scope:"+p),i(v.token),null;if(v.errorDesc||v.error)return r.pConfig.system.logger.infoPii(v.errorDesc+":"+v.error),a(v.errorDesc+c.Constants.resourceDelimeter+v.error),null}else r.pConfig.system.logger.verbose("Token is not in cache for scope:"+p);return l.authorityInstance||(l.authorityInstance=t?f.AuthorityFactory.CreateInstance(t,r.pConfig.auth.validateAuthority):r.authorityInstance),l.authorityInstance.ResolveEndpointsAsync().then(function(){window.activeRenewals[p]?(r.pConfig.system.logger.verbose("Renew token for scope: "+p+" is in progress. Registering callback"),r.registerCallback(window.activeRenewals[p],p,i,a)):e&&e.indexOf(r.pConfig.auth.clientId)>-1&&1===e.length?(r.pConfig.system.logger.verbose("renewing idToken"),r.renewIdToken(e,i,a,d,l,o)):(r.pConfig.system.logger.verbose("renewing accesstoken"),r.renewToken(e,i,a,d,l,o))}).catch(function(e){return r.pConfig.system.logger.warning("could not resolve endpoints"),a(e),null})})},e.prototype.extractADALIdToken=function(){var e=this.pCacheStorage.getItem(c.Constants.adalIdToken);return h.Utils.isEmpty(e)?null:h.Utils.extractIdToken(e)},e.prototype.loadIframeTimeout=function(e,t,n){var o=this,r=window.activeRenewals[n];this.pConfig.system.logger.verbose("Set loading state to pending for: "+n+":"+r),this.pCacheStorage.setItem(c.Constants.renewStatus+r,c.Constants.tokenRenewStatusInProgress),this.loadFrame(e,t),setTimeout(function(){o.pCacheStorage.getItem(c.Constants.renewStatus+r)===c.Constants.tokenRenewStatusInProgress&&(o.pConfig.system.logger.verbose("Loading frame has timed out after: "+o.pConfig.system.loadFrameTimeout/1e3+" seconds for scope "+n+":"+r),r&&window.callBackMappedToRenewStates[r]&&window.callBackMappedToRenewStates[r]("Token renewal operation failed due to timeout",null,"Token Renewal Failed",c.Constants.accessToken),o.pCacheStorage.setItem(c.Constants.renewStatus+r,c.Constants.tokenRenewStatusCancelled))},this.pConfig.system.loadFrameTimeout)},e.prototype.loadFrame=function(e,t){var n=this;this.pConfig.system.logger.info("LoadFrame: "+t);var o=t;setTimeout(function(){var r=n.addAdalFrame(o);""!==r.src&&"about:blank"!==r.src||(r.src=e,n.pConfig.system.logger.infoPii("Frame Name : "+t+" Navigated to: "+e))},500)},e.prototype.addAdalFrame=function(e){if(void 0===e)return null;this.pConfig.system.logger.info("Add msal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(t=window.frames[e])}return t},e.prototype.renewToken=function(e,t,n,o,r,i){var s=e.join(" ").toLowerCase();this.pConfig.system.logger.verbose("renewToken is called for scope:"+s);var a,u=this.addAdalFrame("msalRenewFrame"+s);i&&(r.extraQueryParameters=i),a=o?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o.homeAccountIdentifier+c.Constants.resourceDelimeter+r.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+r.state,this.pCacheStorage.setItem(a,JSON.stringify(o));var l=c.Constants.authority+c.Constants.resourceDelimeter+r.state;this.pCacheStorage.setItem(l,r.authority),this.pCacheStorage.setItem(c.Constants.nonceIdToken,r.nonce),this.pConfig.system.logger.verbose("Renew token Expected state: "+r.state);var p=h.Utils.urlRemoveQueryStringParameter(r.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;p=this.addHintParameters(p,o),window.renewStates.push(r.state),window.requestType=c.Constants.renewToken,this.registerCallback(r.state,s,t,n),this.pConfig.system.logger.infoPii("Navigate to:"+p),u.src="about:blank",this.loadIframeTimeout(p,"msalRenewFrame"+s,s)},e.prototype.renewIdToken=function(e,t,n,o,r,i){e.join(" ").toLowerCase();this.pConfig.system.logger.info("renewidToken is called");var s,a=this.addAdalFrame("msalIdTokenFrame");i&&(r.extraQueryParameters=i),s=o?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o.homeAccountIdentifier+c.Constants.resourceDelimeter+r.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+r.state,this.pCacheStorage.setItem(s,JSON.stringify(o));var u=c.Constants.authority+c.Constants.resourceDelimeter+r.state;this.pCacheStorage.setItem(u,r.authority),this.pCacheStorage.setItem(c.Constants.nonceIdToken,r.nonce),this.pConfig.system.logger.verbose("Renew Idtoken Expected state: "+r.state);var l=h.Utils.urlRemoveQueryStringParameter(r.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;l=this.addHintParameters(l,o),this.pSilentLogin?(window.requestType=c.Constants.login,this.pSilentAuthenticationState=r.state):(window.requestType=c.Constants.renewToken,window.renewStates.push(r.state)),this.registerCallback(r.state,this.pConfig.auth.clientId,t,n),this.pConfig.system.logger.infoPii("Navigate to:"+l),a.src="about:blank",this.loadIframeTimeout(l,"msalIdTokenFrame",this.pConfig.auth.clientId)},e.prototype.getAccount=function(){if(this.pAccount)return this.pAccount;var e=this.pCacheStorage.getItem(c.Constants.idTokenKey),t=this.pCacheStorage.getItem(c.Constants.msalClientInfo);if(!h.Utils.isEmpty(e)&&!h.Utils.isEmpty(t)){var n=new u.IdToken(e),o=new a.HomeAccountIdentifier(t);return this.pAccount=d.Account.createAccount(n,o),this.pAccount}return null},e.prototype.handleAuthenticationResponse=function(e){null==e&&(e=window.location.hash);var t=null,n=!1,o=!1;try{o=window.opener&&window.opener.msal&&window.opener.msal!==window.msal}catch(e){o=!1}o?(t=window.opener.msal,n=!0):window.parent&&window.parent.msal&&(t=window.parent.msal);var r,i=t.getRequestInfo(e),s=null,a=null;if(t.pLogger.info("Returned from redirect url"),window.parent!==window&&window.parent.msal)a=window.parent.callBackMappedToRenewStates[i.stateResponse];else if(o)a=window.opener.callBackMappedToRenewStates[i.stateResponse];else{if(t._navigateToLoginRequestUrl)return a=null,t.pCacheStorage.setItem(c.Constants.urlHash,e),!1,void(window.parent!==window||n||(window.location.href=t.pCacheStorage.getItem(c.Constants.loginRequest,this.pConfig.cache.storeAuthStateInCookie)));a=t.pTokenReceivedCallback,window.location.hash=""}t.saveTokenFromHash(i),i.requestType===c.Constants.renewToken&&window.parent?(window.parent!==window?t.pLogger.verbose("Window is in iframe, acquiring token silently"):t.pLogger.verbose("acquiring token interactive in progress"),s=i.parameters[c.Constants.accessToken]||i.parameters[c.Constants.idToken],r=c.Constants.accessToken):i.requestType===c.Constants.login&&(s=i.parameters[c.Constants.idToken],r=c.Constants.idToken);var u=i.parameters[c.Constants.errorDescription],l=i.parameters[c.Constants.error];try{a&&(i.stateMatch?a.call(t,u,s,l,r,this.getAccountState(i.stateResponse)):a.call(t,u,s,l,r,null))}catch(e){t.pLogger.error("Error occurred in token received callback function: "+e)}if(o)for(var p=0;p<window.opener.openedWindows.length;p++)window.opener.openedWindows[p].close()},e.prototype.saveAccessToken=function(e,t,n,o,s){var u,l=new a.HomeAccountIdentifier(o);if(t.parameters.hasOwnProperty("scope")){for(var p=(u=t.parameters.scope).split(" "),d=this.pCacheStorage.getAllAccessTokens(this.pConfig.auth.clientId,e),f=0;f<d.length;f++){var g=d[f];if(g.key.userIdentifier===n.homeAccountIdentifier){var m=g.key.scopes.split(" ");h.Utils.isIntersectingScopes(m,p)&&this.pCacheStorage.removeItem(JSON.stringify(g.key))}}var C=new r.AccessTokenKey(e,this.pConfig.auth.clientId,u,l.uid,l.utid),y=new i.AccessTokenValue(t.parameters[c.Constants.accessToken],s.rawIdToken,h.Utils.expiresIn(t.parameters[c.Constants.expiresIn]).toString(),o);this.pCacheStorage.setItem(JSON.stringify(C),JSON.stringify(y))}else{u=this.pConfig.auth.clientId;C=new r.AccessTokenKey(e,this.pConfig.auth.clientId,u,l.uid,l.utid),y=new i.AccessTokenValue(t.parameters[c.Constants.idToken],t.parameters[c.Constants.idToken],s.expiration,o);this.pCacheStorage.setItem(JSON.stringify(C),JSON.stringify(y))}},e.prototype.saveTokenFromHash=function(e){this.pConfig.system.logger.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this.pCacheStorage.setItem(c.Constants.msalError,""),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"");var t="",n="";if(e.parameters.hasOwnProperty("scope")?e.parameters.scope.toLowerCase():this.pConfig.auth.clientId,e.parameters.hasOwnProperty(c.Constants.errorDescription)||e.parameters.hasOwnProperty(c.Constants.error)){if(this.pConfig.system.logger.infoPii("Error :"+e.parameters[c.Constants.error]+"; Error description:"+e.parameters[c.Constants.errorDescription]),this.pCacheStorage.setItem(c.Constants.msalError,e.parameters.error),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,e.parameters[c.Constants.errorDescription]),e.requestType===c.Constants.login&&(this.pLoginInProgress=!1,this.pCacheStorage.setItem(c.Constants.loginError,e.parameters[c.Constants.errorDescription]+":"+e.parameters[c.Constants.error]),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse),e.requestType===c.Constants.renewToken){this.pAcquireTokenInProgress=!1,t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var o=null!==this.getAccount()?this.getAccount().homeAccountIdentifier:"";n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+o+c.Constants.resourceDelimeter+e.stateResponse}}else if(e.stateMatch){var r;this.pConfig.system.logger.info("State is right"),e.parameters.hasOwnProperty(c.Constants.sessionState)&&this.pCacheStorage.setItem(c.Constants.msalSessionState,e.parameters[c.Constants.sessionState]);var i="";if(e.parameters.hasOwnProperty(c.Constants.accessToken)){this.pConfig.system.logger.info("Fragment has access token"),this.pAcquireTokenInProgress=!1;var s=void 0;r=e.parameters.hasOwnProperty(c.Constants.idToken)?new u.IdToken(e.parameters[c.Constants.idToken]):new u.IdToken(this.pCacheStorage.getItem(c.Constants.idTokenKey)),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var l=this.pCacheStorage.getItem(t,this.pConfig.cache.storeAuthStateInCookie);h.Utils.isEmpty(l)||(l=h.Utils.replaceFirstPath(l,r.tenantId)),e.parameters.hasOwnProperty(c.Constants.clientInfo)?(i=e.parameters[c.Constants.clientInfo],s=d.Account.createAccount(r,new a.HomeAccountIdentifier(i))):(this.pConfig.system.logger.warning("ClientInfo not received in the response from AAD"),s=d.Account.createAccount(r,new a.HomeAccountIdentifier(i))),n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+s.homeAccountIdentifier+c.Constants.resourceDelimeter+e.stateResponse;var p=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_account+c.Constants.resourceDelimeter+e.stateResponse,f=this.pCacheStorage.getItem(n),g=void 0;h.Utils.isEmpty(f)?h.Utils.isEmpty(this.pCacheStorage.getItem(p))||this.saveAccessToken(l,e,s,i,r):(g=JSON.parse(f),s&&g&&h.Utils.compareObjects(s,g)?(this.saveAccessToken(l,e,s,i,r),this.pConfig.system.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.pConfig.system.logger.warning("The user object created from the response is not the same as the one passed in the acquireToken request"))}if(e.parameters.hasOwnProperty(c.Constants.idToken)){this.pConfig.system.logger.info("Fragment has id token"),this.pLoginInProgress=!1,r=new u.IdToken(e.parameters[c.Constants.idToken]),e.parameters.hasOwnProperty(c.Constants.clientInfo)?i=e.parameters[c.Constants.clientInfo]:this.pConfig.system.logger.warning("ClientInfo not received in the response from AAD"),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;l=this.pCacheStorage.getItem(t,this.pConfig.cache.storeAuthStateInCookie);h.Utils.isEmpty(l)||(l=h.Utils.replaceFirstPath(l,r.tenantId)),this.pAccount=d.Account.createAccount(r,new a.HomeAccountIdentifier(i)),r&&r.nonce?r.nonce!==this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)?(this.pAccount=null,this.pCacheStorage.setItem(c.Constants.loginError,"Nonce Mismatch. Expected Nonce: "+this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)+",Actual Nonce: "+r.nonce),this.pConfig.system.logger.error("Nonce Mismatch.Expected Nonce: "+this.pCacheStorage.getItem(c.Constants.nonceIdToken,this.pConfig.cache.storeAuthStateInCookie)+",Actual Nonce: "+r.nonce)):(this.pCacheStorage.setItem(c.Constants.idTokenKey,e.parameters[c.Constants.idToken]),this.pCacheStorage.setItem(c.Constants.msalClientInfo,i),this.saveAccessToken(l,e,this.pAccount,i,r)):(t=e.stateResponse,n=e.stateResponse,this.pConfig.system.logger.error("Invalid id_token received in the response"),e.parameters.error="invalid idToken",e.parameters.error_description="Invalid idToken. idToken: "+e.parameters[c.Constants.idToken],this.pCacheStorage.setItem(c.Constants.msalError,"invalid idToken"),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid idToken. idToken: "+e.parameters[c.Constants.idToken]))}}else t=e.stateResponse,n=e.stateResponse,this.pConfig.system.logger.error("State Mismatch.Expected State: "+this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)+",Actual State: "+e.stateResponse),e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this.pCacheStorage.setItem(c.Constants.msalError,"Invalid_state"),this.pCacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid_state. state: "+e.stateResponse);this.pCacheStorage.setItem(c.Constants.renewStatus+e.stateResponse,c.Constants.tokenRenewStatusCompleted),this.pCacheStorage.removeAcquireTokenEntries(t,n),this.pConfig.cache.storeAuthStateInCookie&&(this.pCacheStorage.setItemCookie(t,"",-1),this.pCacheStorage.clearCookie())},e.prototype.isCallback=function(e){e=this.getHash(e);var t=h.Utils.deserialize(e);return t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken)},e.prototype.getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},e.prototype.getRequestInfo=function(e){e=this.getHash(e);var t=h.Utils.deserialize(e),n=new p.TokenResponse;if(t&&(n.parameters=t,t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken))){n.valid=!0;var o=void 0;if(!t.hasOwnProperty("state"))return n;if(o=t.state,n.stateResponse=o,o===this.pCacheStorage.getItem(c.Constants.stateLogin,this.pConfig.cache.storeAuthStateInCookie)||o===this.pSilentAuthenticationState)return n.requestType=c.Constants.login,n.stateMatch=!0,n;if(o===this.pCacheStorage.getItem(c.Constants.stateAcquireToken,this.pConfig.cache.storeAuthStateInCookie))return n.requestType=c.Constants.renewToken,n.stateMatch=!0,n;if(!n.stateMatch){n.requestType=window.requestType;for(var r=window.renewStates,i=0;i<r.length;i++)if(r[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},e.prototype.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.getAccountState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.prototype.isInIframe=function(){return window.parent!==window},e.prototype.loginInProgress=function(){return!!this.pCacheStorage.getItem(c.Constants.urlHash)||this.pLoginInProgress},e.prototype.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},e.prototype.getScopesForEndpoint=function(e){if(this.pConfig.framework.unprotectedResources.length>0)for(var t=0;t<this.pConfig.framework.unprotectedResources.length;t++)if(e.indexOf(this.pConfig.framework.unprotectedResources[t])>-1)return null;if(this.pConfig.framework.protectedResourceMap.size>0)for(var n=0,o=Array.from(this.pConfig.framework.protectedResourceMap.keys());n<o.length;n++){var r=o[n];if(e.indexOf(r)>-1)return this.pConfig.framework.protectedResourceMap.get(r)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this.getHostFromUri(e)===this.getHostFromUri(this.getRedirectUri())?new Array(this.pConfig.auth.clientId):null:new Array(this.pConfig.auth.clientId)},e.prototype.setloginInProgress=function(e){this.pLoginInProgress=e},e.prototype.getAcquireTokenInProgress=function(){return this.pAcquireTokenInProgress},e.prototype.setAcquireTokenInProgress=function(e){this.pAcquireTokenInProgress=e},e.prototype.getLogger=function(){return this.pConfig.system.logger},o.__decorate([y],e.prototype,"acquireTokenSilent",null),e}();t.UserAgentApplication=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){this.valid=!1,this.parameters={},this.stateMatch=!1,this.stateResponse="",this.requestType="unknown"}}();t.TokenResponse=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e,t,n,o,r,i,s){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=n,this.name=o,this.idToken=r,this.sid=i,this.environment=s}return e.createAccount=function(t,n){var r,i,s,a;return t?(r=t.uid,i=t.utid):(r="",i=""),n?(s=n.uid,a=n.utid):(s="",a=""),new e(o.Utils.base64EncodeStringUrlSafe(r)+"."+o.Utils.base64EncodeStringUrlSafe(i),o.Utils.base64EncodeStringUrlSafe(s)+"."+o.Utils.base64EncodeStringUrlSafe(a),t.preferredName,t.name,t.decodedIdToken,t.sid,t.issuer)},e}();t.Account=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(2),i=n(9),s=function(e){function t(t,n){return e.call(this,t,n)||this}return o.__extends(t,e),Object.defineProperty(t.prototype,"AadInstanceDiscoveryEndpointUrl",{get:function(){return t.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return r.AuthorityType.Aad},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});if(!this.IsValidationEnabled)return t;var n=this.CanonicalAuthorityUrlComponents.HostNameAndPort;return this.IsInTrustedHostList(n)?t:(new i.XhrClient).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then(function(e){return e.tenant_discovery_endpoint})},t.prototype.IsInTrustedHostList=function(e){return t.TrustedHostList[e.toLowerCase()]},t.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",t.TrustedHostList={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"},t}(r.Authority);t.AadAuthority=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,n){var o=this;return new Promise(function(n,r){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(e){(i.status<200||i.status>=300)&&r(o.handleError(i.responseText));try{var t=JSON.parse(i.responseText)}catch(e){r(o.handleError(i.responseText))}n(t)},i.onerror=function(e){r(i.status)},"GET"!==t)throw"not implemented";i.send()})},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},e}();t.XhrClient=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(0);!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(o=t.LogLevel||(t.LogLevel={}));var i=function(){function e(e,t){void 0===t&&(t={}),this._level=o.Info;var n=t.correlationId,r=void 0===n?"":n,i=t.level,s=void 0===i?o.Info:i,a=t.piiLoggingEnabled,c=void 0!==a&&a;this._localCallback=e,this._correlationId=r,this._level=s,this._piiLoggingEnabled=c}return e.prototype.logMessage=function(e,t,n){if(!(e>this._level||!this._piiLoggingEnabled&&n)){var i,s=(new Date).toUTCString();i=r.Utils.isEmpty(this._correlationId)?s+":"+r.Utils.getLibraryVersion()+"-"+o[e]+" "+t:s+":"+this._correlationId+"-"+r.Utils.getLibraryVersion()+"-"+o[e]+" "+t,this.executeCallback(e,i,n)}},e.prototype.executeCallback=function(e,t,n){this._localCallback&&this._localCallback(e,t,n)},e.prototype.error=function(e){this.logMessage(o.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(o.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(o.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(o.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(o.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(o.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(o.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(o.Verbose,e,!0)},e}();t.Logger=i},function(e,t,n){e.exports=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.UserAgentApplication=o.UserAgentApplication;var r=n(10);t.Logger=r.Logger;var i=n(10);t.LogLevel=i.LogLevel;var s=n(7);t.Account=s.Account;var a=n(1);t.Constants=a.Constants;var c=n(6);t.TokenResponse=c.TokenResponse;var u=n(2);t.Authority=u.Authority;var l=n(5);t.CacheResult=l.CacheResult;var p=n(22);t.TConfiguration=p.TConfiguration},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){return function(e,t,n,r,i){this.authority=e,this.clientId=t,this.scopes=n,this.userIdentifier=o.Utils.base64EncodeStringUrlSafe(r)+"."+o.Utils.base64EncodeStringUrlSafe(i)}}();t.AccessTokenKey=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,n,o){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.clientInfo=o}}();t.AccessTokenValue=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e,t,n,r,i,s){this.authorityInstance=e,this.clientId=t,this.scopes=n,this.responseType=r,this.redirectUri=i,this.correlationId=o.Utils.createNewGuid(),this.state=s&&!o.Utils.isEmpty(s)?o.Utils.createNewGuid()+"|"+s:o.Utils.createNewGuid(),this.nonce=o.Utils.createNewGuid(),this.xClientSku="MSAL.JS",this.xClientVer=o.Utils.getLibraryVersion()}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=this.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},e.prototype.createNavigationUrlString=function(e){e||(e=[this.clientId]),-1===e.indexOf(this.clientId)&&e.push(this.clientId);var t=[];return t.push("response_type="+this.responseType),this.translateclientIdUsedInScope(e),t.push("scope="+encodeURIComponent(this.parseScope(e))),t.push("client_id="+encodeURIComponent(this.clientId)),t.push("redirect_uri="+encodeURIComponent(this.redirectUri)),t.push("state="+encodeURIComponent(this.state)),t.push("nonce="+encodeURIComponent(this.nonce)),t.push("client_info=1"),t.push("x-client-SKU="+this.xClientSku),t.push("x-client-Ver="+this.xClientVer),this.extraQueryParameters&&t.push(this.extraQueryParameters),t.push("client-request-id="+encodeURIComponent(this.correlationId)),t},e.prototype.translateclientIdUsedInScope=function(e){var t=e.indexOf(this.clientId);t>=0&&(e.splice(t,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},e.prototype.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},e}();t.AuthenticationRequestParameters=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e){if(!e||o.Utils.isEmpty(e))return this.uid="",void(this.utid="");try{var t=o.Utils.base64DecodeStringUrlSafe(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(e){throw new Error(e)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e}();t.HomeAccountIdentifier=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){return function(e){if(o.Utils.isEmpty(e))throw new Error("null or empty raw idtoken");try{this.rawIdToken=e,this.decodedIdToken=o.Utils.extractIdToken(e),this.decodedIdToken&&(this.decodedIdToken.hasOwnProperty("iss")&&(this.issuer=this.decodedIdToken.iss),this.decodedIdToken.hasOwnProperty("oid")&&(this.objectId=this.decodedIdToken.oid),this.decodedIdToken.hasOwnProperty("sub")&&(this.subject=this.decodedIdToken.sub),this.decodedIdToken.hasOwnProperty("tid")&&(this.tenantId=this.decodedIdToken.tid),this.decodedIdToken.hasOwnProperty("ver")&&(this.version=this.decodedIdToken.ver),this.decodedIdToken.hasOwnProperty("preferred_username")&&(this.preferredName=this.decodedIdToken.preferred_username),this.decodedIdToken.hasOwnProperty("name")&&(this.name=this.decodedIdToken.name),this.decodedIdToken.hasOwnProperty("nonce")&&(this.nonce=this.decodedIdToken.nonce),this.decodedIdToken.hasOwnProperty("exp")&&(this.expiration=this.decodedIdToken.exp),this.decodedIdToken.hasOwnProperty("home_oid")&&(this.homeObjectId=this.decodedIdToken.home_oid),this.decodedIdToken.hasOwnProperty("sid")&&(this.sid=this.decodedIdToken.sid),this.decodedIdToken.hasOwnProperty("uid")&&(this.uid=this.decodedIdToken.uid),this.decodedIdToken.hasOwnProperty("utid")&&(this.utid=this.decodedIdToken.utid))}catch(e){throw new Error("Failed to parse the returned id token")}}}();t.IdToken=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(19),i=function(){function e(t){if(e._instance)return e._instance;if(this._cacheLocation=t,this._localStorageSupported=void 0!==window[this._cacheLocation]&&null!=window[this._cacheLocation],this._sessionStorageSupported=void 0!==window[t]&&null!=window[t],e._instance=this,!this._localStorageSupported&&!this._sessionStorageSupported)throw new Error("localStorage and sessionStorage not supported");return e._instance}return e.prototype.setItem=function(e,t,n){window[this._cacheLocation]&&window[this._cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this._cacheLocation]?window[this._cacheLocation].getItem(e):null},e.prototype.removeItem=function(e){if(window[this._cacheLocation])return window[this._cacheLocation].removeItem(e)},e.prototype.clear=function(){if(window[this._cacheLocation])return window[this._cacheLocation].clear()},e.prototype.getAllAccessTokens=function(e,t){var n,o=[],i=window[this._cacheLocation];if(i){var s=void 0;for(s in i)if(i.hasOwnProperty(s)&&s.match(e)&&s.match(t)){var a=this.getItem(s);a&&(n=new r.AccessTokenCacheItem(JSON.parse(s),JSON.parse(a)),o.push(n))}}return o},e.prototype.removeAcquireTokenEntries=function(e,t){var n=window[this._cacheLocation];if(n){var o=void 0;for(o in n)n.hasOwnProperty(o)&&(""!==e&&o.indexOf(e)>-1||""!==t&&o.indexOf(t)>-1)&&this.removeItem(o)}},e.prototype.resetCacheItems=function(){var e=window[this._cacheLocation];if(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(-1!==t.indexOf(o.Constants.msal)&&this.setItem(t,""),-1!==t.indexOf(o.Constants.renewStatus)&&this.removeItem(t))}},e.prototype.setItemCookie=function(e,t,n){var o=e+"="+t+";";n&&(o+="expires="+this.setExpirationCookie(n)+";");document.cookie=o},e.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},e.prototype.setExpirationCookie=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e.prototype.clearCookie=function(){this.setItemCookie(o.Constants.nonceIdToken,"",-1),this.setItemCookie(o.Constants.stateLogin,"",-1),this.setItemCookie(o.Constants.loginRequest,"",-1),this.setItemCookie(o.Constants.stateAcquireToken,"",-1)},e}();t.Storage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){this.key=e,this.value=t}}();t.AccessTokenCacheItem=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(21),s=n(2),a=n(4),c=function(){function e(){}return e.DetectAuthorityFromUrl=function(e){switch(e=o.Utils.CanonicalizeUri(e),o.Utils.GetUrlComponents(e).PathSegments[0]){case"tfp":return s.AuthorityType.B2C;case"adfs":return s.AuthorityType.Adfs;default:return s.AuthorityType.Aad}},e.CreateInstance=function(t,n){if(o.Utils.isEmpty(t))return null;switch(e.DetectAuthorityFromUrl(t)){case s.AuthorityType.B2C:return new i.B2cAuthority(t,n);case s.AuthorityType.Aad:return new r.AadAuthority(t,n);default:throw a.ErrorMessage.invalidAuthorityType}},e}();t.AuthorityFactory=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(8),i=n(2),s=n(4),a=n(0),c=function(e){function t(t,n){var o=e.call(this,t,n)||this,r=a.Utils.GetUrlComponents(t),i=r.PathSegments;if(i.length<3)throw s.ErrorMessage.b2cAuthorityUriInvalidPath;return o.CanonicalAuthority="https://"+r.HostNameAndPort+"/"+i[0]+"/"+i[1]+"/"+i[2]+"/",o}return o.__extends(t,e),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return i.AuthorityType.B2C},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});return this.IsValidationEnabled?this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?t:new Promise(function(e,t){return t(s.ErrorMessage.unsupportedAuthorityValidation)}):t},t}(r.AadAuthority);t.B2cAuthority=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=function(e,t,n,o){var r=void 0===e?{clientId:s}:e,i=r.clientId,s=void 0===i?"":i,a=r.authority,c=void 0===a?null:a,u=r.validateAuthority,l=void 0===u||u,p=r.redirectUri,d=void 0===p?function(){return window.location.href.split("?")[0].split("#")[0]}:p,h=r.postLogoutRedirectUri,f=void 0===h?function(){return window.location.href.split("?")[0].split("#")[0]}:h,g=r.state,m=void 0===g?"":g,C=r.navigateToLoginRequestUrl,y=void 0===C||C,w=void 0===t?{}:t,v=w.cacheLocation,b=void 0===v?"localStorage":v,I=w.storeAuthStateInCookie,k=void 0!==I&&I,S=void 0===n?{}:n,A=S.loadFrameTimeout,T=void 0===A?6e3:A,P=S.tokenRenewalOffsetSeconds,E=void 0===P?300:P,O=void 0===o?{}:o,_=O.isAngular,U=void 0!==_&&_,R=O.unprotectedResources,x=void 0===R?new Array:R,j=O.protectedResourceMap;return{auth:{clientId:s,authority:c,validateAuthority:l,redirectUri:d,postLogoutRedirectUri:f,state:m,navigateToLoginRequestUrl:y},cache:{cacheLocation:b,storeAuthStateInCookie:k},system:{loadFrameTimeout:T,tokenRenewalOffsetSeconds:E},framework:{isAngular:U,unprotectedResources:x,protectedResourceMap:void 0===j?new Map:j}}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9Nc2FsL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL01zYWwvLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BdXRob3JpdHkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9FcnJvck1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9Vc2VyQWdlbnRBcHBsaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1JlcXVlc3RJbmZvLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjb3VudC50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0FhZEF1dGhvcml0eS50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL1hIUkNsaWVudC50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjZXNzVG9rZW5LZXkudHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BY2Nlc3NUb2tlblZhbHVlLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycy50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0hvbWVBY2NvdW50SWRlbnRpZmllci50cyIsIndlYnBhY2s6Ly9Nc2FsLy4vc3JjL0lkVG9rZW4udHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9TdG9yYWdlLnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQWNjZXNzVG9rZW5DYWNoZUl0ZW0udHMiLCJ3ZWJwYWNrOi8vTXNhbC8uL3NyYy9BdXRob3JpdHlGYWN0b3J5LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQjJjQXV0aG9yaXR5LnRzIiwid2VicGFjazovL01zYWwvLi9zcmMvQ29uZmlndXJhdGlvbi50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29uc3RhbnRzXzEiLCJVdGlscyIsImNvbXBhcmVPYmplY3RzIiwidTEiLCJ1MiIsImhvbWVBY2NvdW50SWRlbnRpZmllciIsImV4cGlyZXNJbiIsImV4cGlyZXMiLCJ0aGlzIiwibm93IiwicGFyc2VJbnQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImlzRW1wdHkiLCJzdHIiLCJsZW5ndGgiLCJleHRyYWN0SWRUb2tlbiIsImVuY29kZWRJZFRva2VuIiwiZGVjb2RlZFRva2VuIiwiZGVjb2RlSnd0IiwiYmFzZTY0SWRUb2tlbiIsIkpXU1BheWxvYWQiLCJiYXNlNjREZWNvZGVkIiwiYmFzZTY0RGVjb2RlU3RyaW5nVXJsU2FmZSIsIkpTT04iLCJwYXJzZSIsImVyciIsImJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUiLCJpbnB1dCIsImJ0b2EiLCJlbmNvZGUiLCJyZXBsYWNlIiwiYXRvYiIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImRlY29kZSIsImNocjEiLCJjaHIyIiwiY2hyMyIsImVuYzEiLCJlbmMyIiwiZW5jMyIsImVuYzQiLCJrZXlTdHIiLCJvdXRwdXQiLCJ1dGY4RW5jb2RlIiwiY2hhckNvZGVBdCIsImlzTmFOIiwiY2hhckF0IiwidXRmdGV4dCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNvZGVzIiwiRXJyb3IiLCJoMSIsImgyIiwiaDMiLCJoNCIsImJpdHMiLCJjMSIsImMyIiwiYzMiLCJkZWNvZGVkIiwiaW5kZXhPZiIsImp3dFRva2VuIiwibWF0Y2hlcyIsImV4ZWMiLCJoZWFkZXIiLCJKV1NTaWciLCJkZXNlcmlhbGl6ZSIsInF1ZXJ5IiwibWF0Y2giLCJwbCIsInNlYXJjaCIsIm9iaiIsImlzSW50ZXJzZWN0aW5nU2NvcGVzIiwiY2FjaGVkU2NvcGVzIiwic2NvcGVzIiwiY29udmVydFRvTG93ZXJDYXNlIiwidG9Mb3dlckNhc2UiLCJjb250YWluc1Njb3BlIiwiZXZlcnkiLCJ0b1N0cmluZyIsIm1hcCIsInNjb3BlIiwicmVtb3ZlRWxlbWVudCIsImZpbHRlciIsImRlY2ltYWxUb0hleCIsIm51bSIsImhleCIsImdldExpYnJhcnlWZXJzaW9uIiwicmVwbGFjZUZpcnN0UGF0aCIsInVybCIsInRlbmFudElkIiwidXJsT2JqZWN0IiwiR2V0VXJsQ29tcG9uZW50cyIsInBhdGhBcnJheSIsIlBhdGhTZWdtZW50cyIsIkNvbnN0YW50cyIsImNvbW1vbiIsIm9yZ2FuaXphdGlvbnMiLCJQcm90b2NvbCIsIkhvc3ROYW1lQW5kUG9ydCIsImpvaW4iLCJjcmVhdGVOZXdHdWlkIiwiY3J5cHRvT2JqIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiYnVmZmVyIiwiVWludDhBcnJheSIsImd1aWRIb2xkZXIiLCJndWlkUmVzcG9uc2UiLCJyYW5kb20iLCJyZWdFeCIsIlJlZ0V4cCIsInVybENvbXBvbmVudHMiLCJBYnNvbHV0ZVBhdGgiLCJwYXRoU2VnbWVudHMiLCJzcGxpdCIsInZhbCIsIkNhbm9uaWNhbGl6ZVVyaSIsImVuZHNXaXRoIiwic3VmZml4IiwiY2hlY2tTU08iLCJleHRyYVF1ZXJ5UGFyYW1ldGVycyIsImxvZ2luX2hpbnQiLCJzaWQiLCJjb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyIiwiaWRUb2tlbk9iamVjdCIsInVwbiIsInVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyIiwiZG9tYWluX2hpbnQiLCJyZWdleCIsIl9wb3BVcFdpZHRoIiwid2lkdGgiLCJfcG9wVXBIZWlnaHQiLCJoZWlnaHQiLCJFcnJvckNvZGVzIiwiRXJyb3JEZXNjcmlwdGlvbiIsIlV0aWxzXzEiLCJFcnJvck1lc3NhZ2VfMSIsIlhIUkNsaWVudF8xIiwiQXV0aG9yaXR5VHlwZSIsIkF1dGhvcml0eSIsImF1dGhvcml0eSIsInZhbGlkYXRlQXV0aG9yaXR5IiwiSXNWYWxpZGF0aW9uRW5hYmxlZCIsIkNhbm9uaWNhbEF1dGhvcml0eSIsInZhbGlkYXRlQXNVcmkiLCJDYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzIiwidmFsaWRhdGVSZXNvbHZlZCIsInRlbmFudERpc2NvdmVyeVJlc3BvbnNlIiwiQXV0aG9yaXphdGlvbkVuZHBvaW50IiwiVGVuYW50IiwiRW5kU2Vzc2lvbkVuZHBvaW50IiwiSXNzdWVyIiwiY2Fub25pY2FsQXV0aG9yaXR5IiwiY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyIsImNvbXBvbmVudHMiLCJlIiwiRXJyb3JNZXNzYWdlIiwiaW52YWxpZEF1dGhvcml0eVR5cGUiLCJhdXRob3JpdHlVcmlJbnNlY3VyZSIsImF1dGhvcml0eVVyaUludmFsaWRQYXRoIiwiRGlzY292ZXJFbmRwb2ludHMiLCJvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQiLCJYaHJDbGllbnQiLCJzZW5kUmVxdWVzdEFzeW5jIiwidGhlbiIsInJlc3BvbnNlIiwiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIsImVuZF9zZXNzaW9uX2VuZHBvaW50IiwiaXNzdWVyIiwiUmVzb2x2ZUVuZHBvaW50c0FzeW5jIiwiX3RoaXMiLCJHZXRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRBc3luYyIsIm9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJiIiwiX192YWx1ZXMiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiX19yZWFkIiwiYXIiLCJwdXNoIiwiZXJyb3IiLCJfX2F3YWl0IiwidiIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsIl9fcmVzdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsIl9fcGFyYW0iLCJwYXJhbUluZGV4IiwiZGVjb3JhdG9yIiwiX19tZXRhZGF0YSIsIm1ldGFkYXRhS2V5IiwibWV0YWRhdGFWYWx1ZSIsIm1ldGFkYXRhIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwicmVqZWN0ZWQiLCJ0aHJvdyIsInJlc3VsdCIsImFwcGx5IiwiX19nZW5lcmF0b3IiLCJib2R5IiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJ2ZXJiIiwicmV0dXJuIiwib3AiLCJUeXBlRXJyb3IiLCJwb3AiLCJfX2V4cG9ydFN0YXIiLCJfX3NwcmVhZCIsImNvbmNhdCIsIl9fYXN5bmNHZW5lcmF0b3IiLCJhc3luY0l0ZXJhdG9yIiwicSIsImEiLCJyZXN1bWUiLCJmdWxmaWxsIiwic2V0dGxlIiwic2hpZnQiLCJfX2FzeW5jRGVsZWdhdG9yIiwiX19hc3luY1ZhbHVlcyIsIkFjY2Vzc1Rva2VuS2V5XzEiLCJBY2Nlc3NUb2tlblZhbHVlXzEiLCJBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzXzEiLCJIb21lQWNjb3VudElkZW50aWZpZXJfMSIsIklkVG9rZW5fMSIsIlN0b3JhZ2VfMSIsIlJlcXVlc3RJbmZvXzEiLCJBY2NvdW50XzEiLCJBdXRob3JpdHlGYWN0b3J5XzEiLCJSZXNwb25zZVR5cGVzIiwicmVzb2x2ZVRva2VuT25seUlmT3V0T2ZJZnJhbWUiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJ0b2tlbkFjcXVpc2l0aW9uTWV0aG9kIiwiYXJncyIsIl9pIiwiaXNJbklmcmFtZSIsIlVzZXJBZ2VudEFwcGxpY2F0aW9uIiwiY29uZmlnIiwiY2FsbGJhY2siLCJwVG9rZW5SZWNlaXZlZENhbGxiYWNrIiwiY2FjaGVMb2NhdGlvbnMiLCJsb2NhbFN0b3JhZ2UiLCJzZXNzaW9uU3RvcmFnZSIsInBDb25maWciLCJwTG9naW5JblByb2dyZXNzIiwicEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MiLCJjYWNoZSIsImNhY2hlTG9jYXRpb24iLCJwQ2FjaGVTdG9yYWdlIiwiU3RvcmFnZSIsIm9wZW5lZFdpbmRvd3MiLCJhY3RpdmVSZW5ld2FscyIsInJlbmV3U3RhdGVzIiwiY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzIiwiY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlcyIsIm1zYWwiLCJ1cmxIYXNoIiwibG9jYXRpb24iLCJoYXNoIiwiaXNDYWxsYmFjayIsImZyYW1ld29yayIsImlzQW5ndWxhciIsImhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UiLCJwZW5kaW5nQ2FsbGJhY2siLCJnZXRJdGVtIiwicHJvY2Vzc0NhbGxCYWNrIiwiYXV0aG9yaXR5SW5zdGFuY2UiLCJBdXRob3JpdHlGYWN0b3J5IiwiQ3JlYXRlSW5zdGFuY2UiLCJhdXRoIiwiZ2V0UmVkaXJlY3RVcmkiLCJyZWRpcmVjdFVyaSIsImdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsInBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsInN5c3RlbSIsImxvZ2dlciIsImluZm8iLCJyZXF1ZXN0SW5mbyIsImdldFJlcXVlc3RJbmZvIiwic2F2ZVRva2VuRnJvbUhhc2giLCJ0b2tlblR5cGUiLCJ0b2tlbiIsInBhcmFtZXRlcnMiLCJhY2Nlc3NUb2tlbiIsImlkVG9rZW4iLCJlcnJvckRlc2MiLCJlcnJvckRlc2NyaXB0aW9uIiwicmVtb3ZlSXRlbSIsImNsZWFyQ29va2llIiwiZ2V0QWNjb3VudFN0YXRlIiwic3RhdGVMb2dpbiIsInN0b3JlQXV0aFN0YXRlSW5Db29raWUiLCJsb2dpblJlZGlyZWN0IiwibG9naW5Qcm9ncmVzc0Vycm9yIiwiaXNWYWxpZFNjb3BlIiwidmFsaWRhdGVJbnB1dFNjb3BlIiwiaW5wdXRTY29wZXNFcnJvciIsImZpbHRlclNjb3BlcyIsImV4dHJhY3RBREFMSWRUb2tlbiIsInBTaWxlbnRMb2dpbiIsImFjcXVpcmVUb2tlblNpbGVudCIsImNsaWVudElkIiwiZ2V0QWNjb3VudCIsInBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlIiwibG9naW5SZWRpcmVjdEhlbHBlciIsImF1dGhlbnRpY2F0aW9uUmVxdWVzdCIsIkF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMiLCJzdGF0ZSIsImxvZ2luU3RhcnRQYWdlIiwiYW5ndWxhckxvZ2luUmVxdWVzdCIsInNldEl0ZW0iLCJocmVmIiwibG9naW5SZXF1ZXN0IiwibG9naW5FcnJvciIsIm5vbmNlSWRUb2tlbiIsIm5vbmNlIiwibXNhbEVycm9yIiwibXNhbEVycm9yRGVzY3JpcHRpb24iLCJhdXRob3JpdHlLZXkiLCJyZXNvdXJjZURlbGltZXRlciIsInVybE5hdmlnYXRlIiwiY3JlYXRlTmF2aWdhdGVVcmwiLCJyZXNwb25zZV9tb2RlX2ZyYWdtZW50IiwicHJvbXB0VXNlciIsImxvZ2luUG9wdXAiLCJsb2dpblBvcHVwSGVscGVyIiwicG9wVXBXaW5kb3ciLCJvcGVuV2luZG93IiwicmVxdWVzdFR5cGUiLCJsb2dpbiIsInJlZ2lzdGVyQ2FsbGJhY2siLCJpbmZvUGlpIiwiZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IiLCJjbG9zZSIsImNhdGNoIiwid2FybmluZyIsInRpdGxlIiwiaW50ZXJ2YWwiLCJpbnN0YW5jZSIsInBvcHVwV2luZG93Iiwib3BlblBvcHVwIiwicG9wVXBXaWR0aCIsInBvcFVwSGVpZ2h0IiwicG9wVXBXaW5kb3dFcnJvciIsInBvbGxUaW1lciIsInNldEludGVydmFsIiwiY2xvc2VkIiwidXNlckNhbmNlbGxlZEVycm9yIiwiY2xlYXJJbnRlcnZhbCIsImJyb2FkY2FzdCIsInBvcFVwV2luZG93TG9jYXRpb24iLCJldmVudE5hbWUiLCJkYXRhIiwiZXZ0IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwibG9nb3V0IiwiY2xlYXJDYWNoZSIsInBBY2NvdW50IiwiYWNjZXNzVG9rZW5JdGVtcyIsImdldEFsbEFjY2Vzc1Rva2VucyIsInVzZXJJZGVudGlmaWVyIiwic3RyaW5naWZ5IiwicmVzZXRDYWNoZUl0ZW1zIiwiY2xlYXJDYWNoZUZvclNjb3BlIiwid2luTGVmdCIsInNjcmVlbkxlZnQiLCJzY3JlZW5YIiwid2luVG9wIiwic2NyZWVuVG9wIiwic2NyZWVuWSIsImlubmVyV2lkdGgiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJsZWZ0IiwidG9wIiwib3BlbiIsImZvY3VzIiwibWVzc2FnZSIsImlzQXJyYXkiLCJlbGVtZW50IiwiZXhwZWN0ZWRTdGF0ZSIsImdldENhY2hlZFRva2VuSW50ZXJuYWwiLCJhY2NvdW50IiwidXNlck9iamVjdCIsIm5ld0F1dGhvcml0eSIsImdldENhY2hlZFRva2VuIiwiYWNjZXNzVG9rZW5DYWNoZUl0ZW0iLCJ0b2tlbkNhY2hlSXRlbXMiLCJmaWx0ZXJlZEl0ZW1zIiwiY2FjaGVJdGVtIiwiYXV0aG9yaXR5TGlzdCIsImdldFVuaXF1ZUF1dGhvcml0eSIsImV4cGlyZWQiLCJOdW1iZXIiLCJvZmZzZXQiLCJ0b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzIiwiZ2V0QWxsQWNjb3VudHMiLCJhY2NvdW50cyIsImFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyIsIklkVG9rZW4iLCJjbGllbnRJbmZvIiwiSG9tZUFjY291bnRJZGVudGlmaWVyIiwiQWNjb3VudCIsImNyZWF0ZUFjY291bnQiLCJnZXRVbmlxdWVBY2NvdW50cyIsImZsYWdzIiwidW5pcXVlVXNlcnMiLCJpbmRleCIsImZvckVhY2giLCJhZGRIaW50UGFyYW1ldGVycyIsImFjY291bnRPYmoiLCJkZWNvZGVkQ2xpZW50SW5mbyIsInVpZCIsInV0aWQiLCJwcm9tcHRfbm9uZSIsInVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIiLCJ1c2VyTmFtZSIsImNvbnN1bWVyc1V0aWQiLCJjb25zdW1lcnMiLCJ0ZXN0IiwiYWNxdWlyZVRva2VuUmVkaXJlY3QiLCJhY2NvdW50T2JqZWN0IiwidXNlckxvZ2luRXJyb3IiLCJhY3F1aXJlVG9rZW5BdXRob3JpdHkiLCJhY3F1aXJlVG9rZW5Vc2VyS2V5IiwiYWNxdWlyZVRva2VuVXNlciIsIm5vX2FjY291bnQiLCJzdGF0ZUFjcXVpcmVUb2tlbiIsImFjcXVpcmVUb2tlblBvcHVwIiwiYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvciIsInJlbmV3VG9rZW4iLCJhdXRoZW50aWNhdGlvblJlcXVlc3RfMSIsInNjb3BlXzEiLCJhY2NvdW50T2JqZWN0XzEiLCJhZGFsSWRUb2tlbiIsImNvbnNvbGUiLCJsb2ciLCJjYWNoZVJlc3VsdCIsInZlcmJvc2UiLCJyZW5ld0lkVG9rZW4iLCJsb2FkSWZyYW1lVGltZW91dCIsImZyYW1lTmFtZSIsInJlbmV3U3RhdHVzIiwidG9rZW5SZW5ld1N0YXR1c0luUHJvZ3Jlc3MiLCJsb2FkRnJhbWUiLCJzZXRUaW1lb3V0IiwibG9hZEZyYW1lVGltZW91dCIsInRva2VuUmVuZXdTdGF0dXNDYW5jZWxsZWQiLCJmcmFtZUNoZWNrIiwiZnJhbWVIYW5kbGUiLCJhZGRBZGFsRnJhbWUiLCJzcmMiLCJpZnJhbWVJZCIsImFkYWxGcmFtZSIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlmciIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsInBvc2l0aW9uIiwiYm9yZGVyIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsImluc2VydEFkamFjZW50SFRNTCIsImZyYW1lcyIsInByb21wdCIsInJhd0lkVG9rZW4iLCJpZFRva2VuS2V5IiwicmF3Q2xpZW50SW5mbyIsIm1zYWxDbGllbnRJbmZvIiwic2VsZiIsImlzUG9wdXAiLCJpc1dpbmRvd09wZW5lck1zYWwiLCJvcGVuZXIiLCJwYXJlbnQiLCJ0b2tlblJlY2VpdmVkQ2FsbGJhY2siLCJwTG9nZ2VyIiwic3RhdGVSZXNwb25zZSIsIl9uYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsIiwic3RhdGVNYXRjaCIsInNhdmVBY2Nlc3NUb2tlbiIsInRva2VuUmVzcG9uc2UiLCJjbGllbnRPYmoiLCJjb25zZW50ZWRTY29wZXMiLCJhY2Nlc3NUb2tlbktleSIsIkFjY2Vzc1Rva2VuS2V5IiwiYWNjZXNzVG9rZW5WYWx1ZSIsIkFjY2Vzc1Rva2VuVmFsdWUiLCJleHBpcmF0aW9uIiwidXNlcktleSIsInNlc3Npb25TdGF0ZSIsIm1zYWxTZXNzaW9uU3RhdGUiLCJhY3F1aXJlVG9rZW5Vc2VyS2V5X25vdXNlciIsImNhY2hlZFVzZXIiLCJ0b2tlblJlbmV3U3RhdHVzQ29tcGxldGVkIiwicmVtb3ZlQWNxdWlyZVRva2VuRW50cmllcyIsInNldEl0ZW1Db29raWUiLCJnZXRIYXNoIiwic3Vic3RyaW5nIiwiVG9rZW5SZXNwb25zZSIsInZhbGlkIiwic3RhdGVzSW5QYXJlbnRDb250ZXh0IiwiZ2V0U2NvcGVGcm9tU3RhdGUiLCJzcGxpdEluZGV4IiwibG9naW5JblByb2dyZXNzIiwiZ2V0SG9zdEZyb21VcmkiLCJ1cmkiLCJleHRyYWN0ZWRVcmkiLCJnZXRTY29wZXNGb3JFbmRwb2ludCIsImVuZHBvaW50IiwidW5wcm90ZWN0ZWRSZXNvdXJjZXMiLCJwcm90ZWN0ZWRSZXNvdXJjZU1hcCIsInNpemUiLCJfYSIsImZyb20iLCJrZXlzIiwic2V0bG9naW5JblByb2dyZXNzIiwiZ2V0QWNxdWlyZVRva2VuSW5Qcm9ncmVzcyIsInNldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MiLCJhY3F1aXJlVG9rZW5JblByb2dyZXNzIiwiZ2V0TG9nZ2VyIiwidHNsaWJfMSIsImFjY291bnRJZGVudGlmaWVyIiwiZW52aXJvbm1lbnQiLCJhY2NvdW50VWlkIiwiYWNjb3VudFV0aWQiLCJwcmVmZXJyZWROYW1lIiwiZGVjb2RlZElkVG9rZW4iLCJBdXRob3JpdHlfMSIsIkFhZEF1dGhvcml0eSIsIl9zdXBlciIsIkFhZEluc3RhbmNlRGlzY292ZXJ5RW5kcG9pbnQiLCJBYWQiLCJyZXN1bHRQcm9taXNlIiwiRGVmYXVsdE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCIsImhvc3QiLCJJc0luVHJ1c3RlZEhvc3RMaXN0IiwiQWFkSW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludFVybCIsInRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnQiLCJUcnVzdGVkSG9zdExpc3QiLCJsb2dpbi53aW5kb3dzLm5ldCIsImxvZ2luLmNoaW5hY2xvdWRhcGkuY24iLCJsb2dpbi5jbG91ZGdvdmFwaS51cyIsImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20iLCJsb2dpbi5taWNyb3NvZnRvbmxpbmUuZGUiLCJsb2dpbi5taWNyb3NvZnRvbmxpbmUudXMiLCJtZXRob2QiLCJlbmFibGVDYWNoaW5nIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbmxvYWQiLCJldiIsInN0YXR1cyIsImhhbmRsZUVycm9yIiwicmVzcG9uc2VUZXh0IiwianNvblJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJMb2dMZXZlbCIsIkxvZ2dlciIsImxvY2FsQ2FsbGJhY2siLCJvcHRpb25zIiwiX2xldmVsIiwiSW5mbyIsImNvcnJlbGF0aW9uSWQiLCJfYiIsImxldmVsIiwiX2MiLCJwaWlMb2dnaW5nRW5hYmxlZCIsIl9sb2NhbENhbGxiYWNrIiwiX2NvcnJlbGF0aW9uSWQiLCJfcGlpTG9nZ2luZ0VuYWJsZWQiLCJsb2dNZXNzYWdlIiwibG9nTGV2ZWwiLCJjb250YWluc1BpaSIsInRpbWVzdGFtcCIsInRvVVRDU3RyaW5nIiwiZXhlY3V0ZUNhbGxiYWNrIiwiZXJyb3JQaWkiLCJXYXJuaW5nIiwid2FybmluZ1BpaSIsIlZlcmJvc2UiLCJ2ZXJib3NlUGlpIiwiVXNlckFnZW50QXBwbGljYXRpb25fMSIsIkxvZ2dlcl8xIiwiTG9nZ2VyXzIiLCJVc2VyQWdlbnRBcHBsaWNhdGlvbl8yIiwiQ2FjaGVSZXN1bHQiLCJDb25maWd1cmF0aW9uXzEiLCJUQ29uZmlndXJhdGlvbiIsInJlc3BvbnNlVHlwZSIsInhDbGllbnRTa3UiLCJ4Q2xpZW50VmVyIiwiY3JlYXRlTmF2aWdhdGlvblVybFN0cmluZyIsImF1dGhFbmRwb2ludCIsInRyYW5zbGF0ZWNsaWVudElkVXNlZEluU2NvcGUiLCJwYXJzZVNjb3BlIiwiY2xpZW50SWRJbmRleCIsInNwbGljZSIsInNjb3BlTGlzdCIsInJhd0FjY291bnRJZGVudGlmaWVyIiwiZGVjb2RlZEFjY291bnRJZGVudGlmaWVyIiwiX3VpZCIsIl91dGlkIiwib2JqZWN0SWQiLCJzdWJqZWN0IiwidmVyc2lvbiIsImhvbWVPYmplY3RJZCIsIkFjY2Vzc1Rva2VuQ2FjaGVJdGVtXzEiLCJfaW5zdGFuY2UiLCJfY2FjaGVMb2NhdGlvbiIsIl9sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQiLCJfc2Vzc2lvblN0b3JhZ2VTdXBwb3J0ZWQiLCJlbmFibGVDb29raWVTdG9yYWdlIiwiZ2V0SXRlbUNvb2tpZSIsImNsZWFyIiwicmVzdWx0cyIsInN0b3JhZ2UiLCJBY2Nlc3NUb2tlbkNhY2hlSXRlbSIsImNOYW1lIiwiY1ZhbHVlIiwiY29va2llU3RyIiwic2V0RXhwaXJhdGlvbkNvb2tpZSIsImNvb2tpZSIsImNhIiwiY29va2llTGlmZSIsInRvZGF5IiwiQWFkQXV0aG9yaXR5XzEiLCJCMmNBdXRob3JpdHlfMSIsIkRldGVjdEF1dGhvcml0eUZyb21VcmwiLCJhdXRob3JpdHlVcmwiLCJCMkMiLCJBZGZzIiwiQjJjQXV0aG9yaXR5IiwiYjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGgiLCJ1bnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb24iLCJDb25maWd1cmF0aW9uIiwiX2QiLCJfZSIsIl9mIiwiX2ciLCJfaCIsIl9qIiwiX2siLCJfbCIsIl9tIiwibmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCIsIl9vIiwiX3AiLCJfcSIsIl9yIiwiX3MiLCJfdCIsIl91IiwiX3YiLCJfdyIsIl94IiwiTWFwIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsS0FBQUQsSUFFQUQsRUFBQSxLQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FULFFBQUEsSUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMERBLE9BckRBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsRUFB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LEtBQUF0TyxNQUFBLFFBQUFBLE1BQUEsU0FBQTBqQixFQUFnRkMsRUFBQU4sRUFBQW5WLGFBQUEsSUFBQXlWLEVBQUEsR0FBQUEsRUFBWUMsRUFBQVAsRUFBQVEsaUNBQUEsSUFBQUQsS0FDL05FLE9BQUEsSUFBQWxGLEVBQUEsR0FBQUEsRUFBRW1GLEVBQUFELEVBQUF4WixxQkFBQSxJQUFBeVosRUFBQSxlQUFBQSxFQUFnQ0MsRUFBQUYsRUFBQTVXLDhCQUFBLElBQUE4VyxLQUNsQ0MsT0FBQSxJQUFBbkYsRUFBQSxHQUFBQSxFQUFFb0YsRUFBQUQsRUFBQS9NLHdCQUFBLElBQUFnTixFQUFBLElBQUFBLEVBQXlCQyxFQUFBRixFQUFBbFEsaUNBQUEsSUFBQW9RLEVBQUEsSUFBQUEsRUFDM0JDLE9BQUEsSUFBQWhCLEVBQUEsR0FBQUEsRUFBRWlCLEVBQUFELEVBQUFoWixpQkFBQSxJQUFBaVosS0FBbUJDLEVBQUFGLEVBQUEvSSw0QkFBQSxJQUFBaUosRUFBQSxJQUFBeGdCLE1BQUF3Z0IsRUFBNENDLEVBQUFILEVBQUE5SSxxQkFVakUsTUFQYSxDQUNUMVAsS0FBTSxDQUFFZ0MsU0FBUUEsRUFBRWxNLFVBQVNBLEVBQUVDLGtCQUFpQkEsRUFBRW1LLFlBQVdBLEVBQUVFLHNCQUFxQkEsRUFBRWtDLE1BQUtBLEVBQUUyViwwQkFBeUJBLEdBQ3BIeFosTUFBTyxDQUFFQyxjQUFhQSxFQUFFNEMsdUJBQXNCQSxHQUM5Q2pCLE9BQVEsQ0FBRWlMLGlCQUFnQkEsRUFBRW5ELDBCQUF5QkEsR0FDckQ1SSxVQUFXLENBQUVDLFVBQVNBLEVBQUVpUSxxQkFBb0JBLEVBQUVDLDBCQVBlLElBQUFpSixFQUFBLElBQUFDLElBQUFEIiwiZmlsZSI6Im1zYWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJNc2FsXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIk1zYWxcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiTXNhbFwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBJVXJpIH0gZnJvbSBcIi4vSVVyaVwiO1xuaW1wb3J0IHsgQWNjb3VudCB9IGZyb20gXCIuL0FjY291bnRcIjtcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuICBzdGF0aWMgY29tcGFyZU9iamVjdHModTE6IEFjY291bnQsIHUyOiBBY2NvdW50KTogYm9vbGVhbiB7XG4gICBpZiAoIXUxIHx8ICF1Mikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICBpZiAodTEuaG9tZUFjY291bnRJZGVudGlmaWVyICYmIHUyLmhvbWVBY2NvdW50SWRlbnRpZmllcikge1xuICAgICAgaWYgKHUxLmhvbWVBY2NvdW50SWRlbnRpZmllciA9PT0gdTIuaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgZXhwaXJlc0luKGV4cGlyZXM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gaWYgQUFEIGRpZCBub3Qgc2VuZCBcImV4cGlyZXNfaW5cIiBwcm9wZXJ0eSwgdXNlIGRlZmF1bHQgZXhwaXJhdGlvbiBvZiAzNTk5IHNlY29uZHMsIGZvciBzb21lIHJlYXNvbiBBQUQgc2VuZHMgMzU5OSBhcyBcImV4cGlyZXNfaW5cIiB2YWx1ZSBpbnN0ZWFkIG9mIDM2MDBcbiAgICAgaWYgKCFleHBpcmVzKSB7XG4gICAgICAgICBleHBpcmVzID0gXCIzNTk5XCI7XG4gICAgICB9XG4gICAgcmV0dXJuIHRoaXMubm93KCkgKyBwYXJzZUludChleHBpcmVzLCAxMCk7XG4gIH1cblxuICBzdGF0aWMgbm93KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwLjApO1xuICB9XG5cbiAgc3RhdGljIGlzRW1wdHkoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHR5cGVvZiBzdHIgPT09IFwidW5kZWZpbmVkXCIgfHwgIXN0ciB8fCAwID09PSBzdHIubGVuZ3RoKTtcbiAgfVxuXG4gIHN0YXRpYyBleHRyYWN0SWRUb2tlbihlbmNvZGVkSWRUb2tlbjogc3RyaW5nKTogYW55IHtcbiAgICAvLyBpZCB0b2tlbiB3aWxsIGJlIGRlY29kZWQgdG8gZ2V0IHRoZSB1c2VybmFtZVxuICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IHRoaXMuZGVjb2RlSnd0KGVuY29kZWRJZFRva2VuKTtcbiAgICBpZiAoIWRlY29kZWRUb2tlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBiYXNlNjRJZFRva2VuID0gZGVjb2RlZFRva2VuLkpXU1BheWxvYWQ7XG4gICAgICBjb25zdCBiYXNlNjREZWNvZGVkID0gdGhpcy5iYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGJhc2U2NElkVG9rZW4pO1xuICAgICAgaWYgKCFiYXNlNjREZWNvZGVkKSB7XG4gICAgICAgIC8vdGhpcy5fcmVxdWVzdENvbnRleHQubG9nZ2VyLmluZm8oXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gY291bGQgbm90IGJlIGJhc2U2NCB1cmwgc2FmZSBkZWNvZGVkLlwiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICAvLyBFQ01BIHNjcmlwdCBoYXMgSlNPTiBidWlsdC1pbiBzdXBwb3J0XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShiYXNlNjREZWNvZGVkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vdGhpcy5fcmVxdWVzdENvbnRleHQubG9nZ2VyLmVycm9yKFwiVGhlIHJldHVybmVkIGlkX3Rva2VuIGNvdWxkIG5vdCBiZSBkZWNvZGVkXCIgKyBlcnIpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3RhdGljIGJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gaHRtbDUgc2hvdWxkIHN1cHBvcnQgYXRvYiBmdW5jdGlvbiBmb3IgZGVjb2RpbmdcbiAgICBpZiAod2luZG93LmJ0b2EpIHtcbiAgICAgIHJldHVybiB3aW5kb3cuYnRvYShpbnB1dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYmFzZTY0RGVjb2RlU3RyaW5nVXJsU2FmZShiYXNlNjRJZFRva2VuOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIGh0bWw1IHNob3VsZCBzdXBwb3J0IGF0b2IgZnVuY3Rpb24gZm9yIGRlY29kaW5nXG4gICAgYmFzZTY0SWRUb2tlbiA9IGJhc2U2NElkVG9rZW4ucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIik7XG4gICAgaWYgKHdpbmRvdy5hdG9iKSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKGJhc2U2NElkVG9rZW4pKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVVUklDb21wb25lbnQodGhpcy5kZWNvZGUoYmFzZTY0SWRUb2tlbikpKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGtleVN0cjogc3RyaW5nID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIGxldCBvdXRwdXQgPSBcIlwiO1xuICAgIGxldCBjaHIxOiBudW1iZXIsIGNocjI6IG51bWJlciwgY2hyMzogbnVtYmVyLCBlbmMxOiBudW1iZXIsIGVuYzI6IG51bWJlciwgZW5jMzogbnVtYmVyLCBlbmM0OiBudW1iZXI7XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgaW5wdXQgPSB0aGlzLnV0ZjhFbmNvZGUoaW5wdXQpO1xuXG4gICAgd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgIGNocjEgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICBjaHIyID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgICAgY2hyMyA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcblxuICAgICAgZW5jMSA9IGNocjEgPj4gMjtcbiAgICAgIGVuYzIgPSAoKGNocjEgJiAzKSA8PCA0KSB8IChjaHIyID4+IDQpO1xuICAgICAgZW5jMyA9ICgoY2hyMiAmIDE1KSA8PCAyKSB8IChjaHIzID4+IDYpO1xuICAgICAgZW5jNCA9IGNocjMgJiA2MztcblxuICAgICAgaWYgKGlzTmFOKGNocjIpKSB7XG4gICAgICAgIGVuYzMgPSBlbmM0ID0gNjQ7XG4gICAgICB9IGVsc2UgaWYgKGlzTmFOKGNocjMpKSB7XG4gICAgICAgIGVuYzQgPSA2NDtcbiAgICAgIH1cblxuICAgICAgb3V0cHV0ID0gb3V0cHV0ICsga2V5U3RyLmNoYXJBdChlbmMxKSArIGtleVN0ci5jaGFyQXQoZW5jMikgKyBrZXlTdHIuY2hhckF0KGVuYzMpICsga2V5U3RyLmNoYXJBdChlbmM0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0LnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89KyQvLCBcIlwiKTtcbiAgfVxuXG4gIHN0YXRpYyB1dGY4RW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICAgIHZhciB1dGZ0ZXh0ID0gXCJcIjtcblxuICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaW5wdXQubGVuZ3RoOyBuKyspIHtcbiAgICAgIHZhciBjID0gaW5wdXQuY2hhckNvZGVBdChuKTtcblxuICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKGMgPiAxMjcpICYmIChjIDwgMjA0OCkpIHtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDYpIHwgMTkyKTtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgNjMpIHwgMTI4KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gMTIpIHwgMjI0KTtcbiAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyA+PiA2KSAmIDYzKSB8IDEyOCk7XG4gICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyAmIDYzKSB8IDEyOCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHV0ZnRleHQ7XG4gIH1cblxuICBzdGF0aWMgZGVjb2RlKGJhc2U2NElkVG9rZW46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdmFyIGNvZGVzID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIGJhc2U2NElkVG9rZW4gPSBTdHJpbmcoYmFzZTY0SWRUb2tlbikucmVwbGFjZSgvPSskLywgXCJcIik7XG4gICAgdmFyIGxlbmd0aCA9IGJhc2U2NElkVG9rZW4ubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggJSA0ID09PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdG9rZW4gdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuXCIpO1xuICAgIH1cbiAgICBsZXQgaDE6IG51bWJlciwgaDI6IG51bWJlciwgaDM6IG51bWJlciwgaDQ6IG51bWJlciwgYml0czogbnVtYmVyLCBjMTogbnVtYmVyLCBjMjogbnVtYmVyLCBjMzogbnVtYmVyLCBkZWNvZGVkID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAvL0V2ZXJ5IDQgYmFzZTY0IGVuY29kZWQgY2hhcmFjdGVyIHdpbGwgYmUgY29udmVydGVkIHRvIDMgYnl0ZSBzdHJpbmcsIHdoaWNoIGlzIDI0IGJpdHNcbiAgICAgIC8vIHRoZW4gNiBiaXRzIHBlciBiYXNlNjQgZW5jb2RlZCBjaGFyYWN0ZXJcbiAgICAgIGgxID0gY29kZXMuaW5kZXhPZihiYXNlNjRJZFRva2VuLmNoYXJBdChpKSk7XG4gICAgICBoMiA9IGNvZGVzLmluZGV4T2YoYmFzZTY0SWRUb2tlbi5jaGFyQXQoaSArIDEpKTtcbiAgICAgIGgzID0gY29kZXMuaW5kZXhPZihiYXNlNjRJZFRva2VuLmNoYXJBdChpICsgMikpO1xuICAgICAgaDQgPSBjb2Rlcy5pbmRleE9mKGJhc2U2NElkVG9rZW4uY2hhckF0KGkgKyAzKSk7XG4gICAgICAvLyBGb3IgcGFkZGluZywgaWYgbGFzdCB0d28gYXJlIFwiPVwiXG4gICAgICBpZiAoaSArIDIgPT09IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgYml0cyA9IGgxIDw8IDE4IHwgaDIgPDwgMTIgfCBoMyA8PCA2O1xuICAgICAgICBjMSA9IGJpdHMgPj4gMTYgJiAyNTU7XG4gICAgICAgIGMyID0gYml0cyA+PiA4ICYgMjU1O1xuICAgICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEsIGMyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBpZiBsYXN0IG9uZSBpcyBcIj1cIlxuICAgICAgZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgYml0cyA9IGgxIDw8IDE4IHwgaDIgPDwgMTI7XG4gICAgICAgIGMxID0gYml0cyA+PiAxNiAmIDI1NTtcbiAgICAgICAgZGVjb2RlZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBiaXRzID0gaDEgPDwgMTggfCBoMiA8PCAxMiB8IGgzIDw8IDYgfCBoNDtcbiAgICAgIC8vIHRoZW4gY29udmVydCB0byAzIGJ5dGUgY2hhcnNcbiAgICAgIGMxID0gYml0cyA+PiAxNiAmIDI1NTtcbiAgICAgIGMyID0gYml0cyA+PiA4ICYgMjU1O1xuICAgICAgYzMgPSBiaXRzICYgMjU1O1xuICAgICAgZGVjb2RlZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxLCBjMiwgYzMpO1xuICAgIH1cbiAgICByZXR1cm4gZGVjb2RlZDtcbiAgfVxuXG4gIHN0YXRpYyBkZWNvZGVKd3Qoand0VG9rZW46IHN0cmluZyk6IGFueSB7XG4gICAgaWYgKHRoaXMuaXNFbXB0eShqd3RUb2tlbikpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBpZFRva2VuUGFydHNSZWdleCA9IC9eKFteXFwuXFxzXSopXFwuKFteXFwuXFxzXSspXFwuKFteXFwuXFxzXSopJC87XG4gICAgY29uc3QgbWF0Y2hlcyA9IGlkVG9rZW5QYXJ0c1JlZ2V4LmV4ZWMoand0VG9rZW4pO1xuICAgIGlmICghbWF0Y2hlcyB8fCBtYXRjaGVzLmxlbmd0aCA8IDQpIHtcbiAgICAgIC8vdGhpcy5fcmVxdWVzdENvbnRleHQubG9nZ2VyLndhcm4oXCJUaGUgcmV0dXJuZWQgaWRfdG9rZW4gaXMgbm90IHBhcnNlYWJsZS5cIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY3JhY2tlZFRva2VuID0ge1xuICAgICAgaGVhZGVyOiBtYXRjaGVzWzFdLFxuICAgICAgSldTUGF5bG9hZDogbWF0Y2hlc1syXSxcbiAgICAgIEpXU1NpZzogbWF0Y2hlc1szXVxuICAgIH07XG4gICAgcmV0dXJuIGNyYWNrZWRUb2tlbjtcbiAgfVxuXG4gIHN0YXRpYyBkZXNlcmlhbGl6ZShxdWVyeTogc3RyaW5nKTogYW55IHtcbiAgICBsZXQgbWF0Y2g6IEFycmF5PHN0cmluZz47IC8vIFJlZ2V4IGZvciByZXBsYWNpbmcgYWRkaXRpb24gc3ltYm9sIHdpdGggYSBzcGFjZVxuICAgIGNvbnN0IHBsID0gL1xcKy9nO1xuICAgIGNvbnN0IHNlYXJjaCA9IC8oW14mPV0rKT0oW14mXSopL2c7XG4gICAgY29uc3QgZGVjb2RlID0gKHM6IHN0cmluZykgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMucmVwbGFjZShwbCwgXCIgXCIpKTtcbiAgICBjb25zdCBvYmo6IHt9ID0ge307XG4gICAgbWF0Y2ggPSBzZWFyY2guZXhlYyhxdWVyeSk7XG4gICAgd2hpbGUgKG1hdGNoKSB7XG4gICAgICBvYmpbZGVjb2RlKG1hdGNoWzFdKV0gPSBkZWNvZGUobWF0Y2hbMl0pO1xuICAgICAgbWF0Y2ggPSBzZWFyY2guZXhlYyhxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBzdGF0aWMgaXNJbnRlcnNlY3RpbmdTY29wZXMoY2FjaGVkU2NvcGVzOiBBcnJheTxzdHJpbmc+LCBzY29wZXM6IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcbiAgICBjYWNoZWRTY29wZXMgPSB0aGlzLmNvbnZlcnRUb0xvd2VyQ2FzZShjYWNoZWRTY29wZXMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NvcGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjYWNoZWRTY29wZXMuaW5kZXhPZihzY29wZXNbaV0udG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIGNvbnRhaW5zU2NvcGUoY2FjaGVkU2NvcGVzOiBBcnJheTxzdHJpbmc+LCBzY29wZXM6IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcbiAgICBjYWNoZWRTY29wZXMgPSB0aGlzLmNvbnZlcnRUb0xvd2VyQ2FzZShjYWNoZWRTY29wZXMpO1xuICAgIHJldHVybiBzY29wZXMuZXZlcnkoKHZhbHVlOiBhbnkpOiBib29sZWFuID0+IGNhY2hlZFNjb3Blcy5pbmRleE9mKHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkgPj0gMCk7XG4gIH1cblxuICBzdGF0aWMgY29udmVydFRvTG93ZXJDYXNlKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IEFycmF5PHN0cmluZz4ge1xuICAgIHJldHVybiBzY29wZXMubWFwKHNjb3BlID0+IHNjb3BlLnRvTG93ZXJDYXNlKCkpO1xuICB9XG5cbiAgc3RhdGljIHJlbW92ZUVsZW1lbnQoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBzY29wZTogc3RyaW5nKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHNjb3Blcy5maWx0ZXIodmFsdWUgPT4gdmFsdWUgIT09IHNjb3BlKTtcbiAgfVxuXG4gIHN0YXRpYyBkZWNpbWFsVG9IZXgobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHZhciBoZXg6IHN0cmluZyA9IG51bS50b1N0cmluZygxNik7XG4gICAgd2hpbGUgKGhleC5sZW5ndGggPCAyKSB7XG4gICAgICBoZXggPSBcIjBcIiArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRMaWJyYXJ5VmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIjAuMi40XCI7XG4gIH1cblxuICAvKlxuICAgICogR2l2ZW4gYSB1cmwgbGlrZSBodHRwczovL2E6Yi9jb21tb24vZD9lPWYjZywgYW5kIGEgdGVuYW50SWQsIHJldHVybnMgaHR0cHM6Ly9hOmIvdGVuYW50SWQvZFxuICAgICogQHBhcmFtIGhyZWYgVGhlIHVybFxuICAgICogQHBhcmFtIHRlbmFudElkIFRoZSB0ZW5hbnQgaWQgdG8gcmVwbGFjZVxuICAgICovXG4gICAgc3RhdGljIHJlcGxhY2VGaXJzdFBhdGgodXJsOiBzdHJpbmcsIHRlbmFudElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXRlbmFudElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1cmxPYmplY3QgPSB0aGlzLkdldFVybENvbXBvbmVudHModXJsKTtcbiAgICAgICAgdmFyIHBhdGhBcnJheSA9IHVybE9iamVjdC5QYXRoU2VnbWVudHM7XG4gICAgICAgIGlmIChwYXRoQXJyYXkubGVuZ3RoICE9PSAwICYmIChwYXRoQXJyYXlbMF0gPT09IENvbnN0YW50cy5jb21tb24gfHwgcGF0aEFycmF5WzBdID09PSBDb25zdGFudHMub3JnYW5pemF0aW9ucykpIHtcbiAgICAgICAgICAgIHBhdGhBcnJheVswXSA9IHRlbmFudElkO1xuICAgICAgICAgICAgdXJsID0gdXJsT2JqZWN0LlByb3RvY29sICsgXCIvL1wiICsgdXJsT2JqZWN0Lkhvc3ROYW1lQW5kUG9ydCArIFwiL1wiICsgcGF0aEFycmF5LmpvaW4oXCIvXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gIHN0YXRpYyBjcmVhdGVOZXdHdWlkKCk6IHN0cmluZyB7XG4gICAgLy8gUkZDNDEyMjogVGhlIHZlcnNpb24gNCBVVUlEIGlzIG1lYW50IGZvciBnZW5lcmF0aW5nIFVVSURzIGZyb20gdHJ1bHktcmFuZG9tIG9yXG4gICAgLy8gcHNldWRvLXJhbmRvbSBudW1iZXJzLlxuICAgIC8vIFRoZSBhbGdvcml0aG0gaXMgYXMgZm9sbG93czpcbiAgICAvLyAgICAgU2V0IHRoZSB0d28gbW9zdCBzaWduaWZpY2FudCBiaXRzIChiaXRzIDYgYW5kIDcpIG9mIHRoZVxuICAgIC8vICAgICAgICBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkIHRvIHplcm8gYW5kIG9uZSwgcmVzcGVjdGl2ZWx5LlxuICAgIC8vICAgICBTZXQgdGhlIGZvdXIgbW9zdCBzaWduaWZpY2FudCBiaXRzIChiaXRzIDEyIHRocm91Z2ggMTUpIG9mIHRoZVxuICAgIC8vICAgICAgICB0aW1lX2hpX2FuZF92ZXJzaW9uIGZpZWxkIHRvIHRoZSA0LWJpdCB2ZXJzaW9uIG51bWJlciBmcm9tXG4gICAgLy8gICAgICAgIFNlY3Rpb24gNC4xLjMuIFZlcnNpb240XG4gICAgLy8gICAgIFNldCBhbGwgdGhlIG90aGVyIGJpdHMgdG8gcmFuZG9tbHkgKG9yIHBzZXVkby1yYW5kb21seSkgY2hvc2VuXG4gICAgLy8gICAgIHZhbHVlcy5cbiAgICAvLyBVVUlEICAgICAgICAgICAgICAgICAgID0gdGltZS1sb3cgXCItXCIgdGltZS1taWQgXCItXCJ0aW1lLWhpZ2gtYW5kLXZlcnNpb24gXCItXCJjbG9jay1zZXEtcmVzZXJ2ZWQgYW5kIGxvdygyaGV4T2N0ZXQpXCItXCIgbm9kZVxuICAgIC8vIHRpbWUtbG93ICAgICAgICAgICAgICAgPSA0aGV4T2N0ZXRcbiAgICAvLyB0aW1lLW1pZCAgICAgICAgICAgICAgID0gMmhleE9jdGV0XG4gICAgLy8gdGltZS1oaWdoLWFuZC12ZXJzaW9uICA9IDJoZXhPY3RldFxuICAgIC8vIGNsb2NrLXNlcS1hbmQtcmVzZXJ2ZWQgPSBoZXhPY3RldDpcbiAgICAvLyBjbG9jay1zZXEtbG93ICAgICAgICAgID0gaGV4T2N0ZXRcbiAgICAvLyBub2RlICAgICAgICAgICAgICAgICAgID0gNmhleE9jdGV0XG4gICAgLy8gRm9ybWF0OiB4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcbiAgICAvLyB5IGNvdWxkIGJlIDEwMDAsIDEwMDEsIDEwMTAsIDEwMTEgc2luY2UgbW9zdCBzaWduaWZpY2FudCB0d28gYml0cyBuZWVkcyB0byBiZSAxMFxuICAgIC8vIHkgdmFsdWVzIGFyZSA4LCA5LCBBLCBCXG5cbiAgICBjb25zdCBjcnlwdG9PYmo6IENyeXB0byA9IHdpbmRvdy5jcnlwdG87IC8vIGZvciBJRSAxMVxuICAgIGlmIChjcnlwdG9PYmogJiYgY3J5cHRvT2JqLmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgY29uc3QgYnVmZmVyOiBVaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgICAgY3J5cHRvT2JqLmdldFJhbmRvbVZhbHVlcyhidWZmZXIpO1xuXG4gICAgICAvL2J1ZmZlcls2XSBhbmQgYnVmZmVyWzddIHJlcHJlc2VudHMgdGhlIHRpbWVfaGlfYW5kX3ZlcnNpb24gZmllbGQuIFdlIHdpbGwgc2V0IHRoZSBmb3VyIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyAoNCB0aHJvdWdoIDcpIG9mIGJ1ZmZlcls2XSB0byByZXByZXNlbnQgZGVjaW1hbCBudW1iZXIgNCAoVVVJRCB2ZXJzaW9uIG51bWJlcikuXG4gICAgICBidWZmZXJbNl0gfD0gMHg0MDsgLy9idWZmZXJbNl0gfCAwMTAwMDAwMCB3aWxsIHNldCB0aGUgNiBiaXQgdG8gMS5cbiAgICAgIGJ1ZmZlcls2XSAmPSAweDRmOyAvL2J1ZmZlcls2XSAmIDAxMDAxMTExIHdpbGwgc2V0IHRoZSA0LCA1LCBhbmQgNyBiaXQgdG8gMCBzdWNoIHRoYXQgYml0cyA0LTcgPT0gMDEwMCA9IFwiNFwiLlxuXG4gICAgICAvL2J1ZmZlcls4XSByZXByZXNlbnRzIHRoZSBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkIGZpZWxkLiBXZSB3aWxsIHNldCB0aGUgdHdvIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyAoNiBhbmQgNykgb2YgdGhlIGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWQgdG8gemVybyBhbmQgb25lLCByZXNwZWN0aXZlbHkuXG4gICAgICBidWZmZXJbOF0gfD0gMHg4MDsgLy9idWZmZXJbOF0gfCAxMDAwMDAwMCB3aWxsIHNldCB0aGUgNyBiaXQgdG8gMS5cbiAgICAgIGJ1ZmZlcls4XSAmPSAweGJmOyAvL2J1ZmZlcls4XSAmIDEwMTExMTExIHdpbGwgc2V0IHRoZSA2IGJpdCB0byAwLlxuXG4gICAgICByZXR1cm4gVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclswXSkgKyBVdGlscy5kZWNpbWFsVG9IZXgoYnVmZmVyWzFdKVxuICAgICAgICArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMl0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlclszXSlcbiAgICAgICAgKyBcIi1cIiArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbNF0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls1XSlcbiAgICAgICAgKyBcIi1cIiArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbNl0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls3XSlcbiAgICAgICAgKyBcIi1cIiArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbOF0pICsgVXRpbHMuZGVjaW1hbFRvSGV4KGJ1ZmZlcls5XSlcbiAgICAgICAgKyBcIi1cIiArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTBdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTFdKVxuICAgICAgICArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTJdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTNdKVxuICAgICAgICArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTRdKSArIFV0aWxzLmRlY2ltYWxUb0hleChidWZmZXJbMTVdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBndWlkSG9sZGVyOiBzdHJpbmcgPSBcInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiO1xuICAgICAgY29uc3QgaGV4OiBzdHJpbmcgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIjtcbiAgICAgIGxldCByOiBudW1iZXIgPSAwO1xuICAgICAgbGV0IGd1aWRSZXNwb25zZTogc3RyaW5nID0gXCJcIjtcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAzNjsgaSsrKSB7XG4gICAgICAgIGlmIChndWlkSG9sZGVyW2ldICE9PSBcIi1cIiAmJiBndWlkSG9sZGVyW2ldICE9PSBcIjRcIikge1xuICAgICAgICAgIC8vIGVhY2ggeCBhbmQgeSBuZWVkcyB0byBiZSByYW5kb21cbiAgICAgICAgICByID0gTWF0aC5yYW5kb20oKSAgKiAxNiB8IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGd1aWRIb2xkZXJbaV0gPT09IFwieFwiKSB7XG4gICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGhleFtyXTtcbiAgICAgICAgfSBlbHNlIGlmIChndWlkSG9sZGVyW2ldID09PSBcInlcIikge1xuICAgICAgICAgIC8vIGNsb2NrLXNlcS1hbmQtcmVzZXJ2ZWQgZmlyc3QgaGV4IGlzIGZpbHRlcmVkIGFuZCByZW1haW5pbmcgaGV4IHZhbHVlcyBhcmUgcmFuZG9tXG4gICAgICAgICAgciAmPSAweDM7IC8vIGJpdCBhbmQgd2l0aCAwMDExIHRvIHNldCBwb3MgMiB0byB6ZXJvID8wPz9cbiAgICAgICAgICByIHw9IDB4ODsgLy8gc2V0IHBvcyAzIHRvIDEgYXMgMT8/P1xuICAgICAgICAgIGd1aWRSZXNwb25zZSArPSBoZXhbcl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3VpZFJlc3BvbnNlICs9IGd1aWRIb2xkZXJbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBndWlkUmVzcG9uc2U7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogUGFyc2VzIG91dCB0aGUgY29tcG9uZW50cyBmcm9tIGEgdXJsIHN0cmluZy5cbiAgICogQHJldHVybnMgQW4gb2JqZWN0IHdpdGggdGhlIHZhcmlvdXMgY29tcG9uZW50cy4gUGxlYXNlIGNhY2hlIHRoaXMgdmFsdWUgaW5zdGVkIG9mIGNhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyBvbiB0aGUgc2FtZSB1cmwuXG4gICAqL1xuICBzdGF0aWMgR2V0VXJsQ29tcG9uZW50cyh1cmw6IHN0cmluZyk6IElVcmkge1xuICAgIGlmICghdXJsKSB7XG4gICAgICB0aHJvdyBcIlVybCByZXF1aXJlZFwiO1xuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2N1cnRpc3ovMTExMzliMmNmY2FlZjRhMjYxZTBcbiAgICB2YXIgcmVnRXggPSBSZWdFeHAoXCJeKChbXjovPyNdKyk6KT8oLy8oW14vPyNdKikpPyhbXj8jXSopKFxcXFw/KFteI10qKSk/KCMoLiopKT9cIik7XG5cbiAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXgpO1xuXG4gICAgaWYgKCFtYXRjaCB8fCBtYXRjaC5sZW5ndGggPCA2KSB7XG4gICAgICB0aHJvdyBcIlZhbGlkIHVybCByZXF1aXJlZFwiO1xuICAgIH1cblxuICAgIGxldCB1cmxDb21wb25lbnRzID0gPElVcmk+e1xuICAgICAgUHJvdG9jb2w6IG1hdGNoWzFdLFxuICAgICAgSG9zdE5hbWVBbmRQb3J0OiBtYXRjaFs0XSxcbiAgICAgIEFic29sdXRlUGF0aDogbWF0Y2hbNV1cbiAgICB9O1xuXG4gICAgbGV0IHBhdGhTZWdtZW50cyA9IHVybENvbXBvbmVudHMuQWJzb2x1dGVQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICBwYXRoU2VnbWVudHMgPSBwYXRoU2VnbWVudHMuZmlsdGVyKCh2YWwpID0+IHZhbCAmJiB2YWwubGVuZ3RoID4gMCk7IC8vIHJlbW92ZSBlbXB0eSBlbGVtZW50c1xuICAgIHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzID0gcGF0aFNlZ21lbnRzO1xuICAgIHJldHVybiB1cmxDb21wb25lbnRzO1xuICB9XG5cbiAgLypcbiAgICogR2l2ZW4gYSB1cmwgb3IgcGF0aCwgYXBwZW5kIGEgdHJhaWxpbmcgc2xhc2ggaWYgb25lIGRvZXNudCBleGlzdFxuICAgKi9cbiAgc3RhdGljIENhbm9uaWNhbGl6ZVVyaSh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHVybCkge1xuICAgICAgdXJsID0gdXJsLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKHVybCAmJiAhVXRpbHMuZW5kc1dpdGgodXJsLCBcIi9cIikpIHtcbiAgICAgIHVybCArPSBcIi9cIjtcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLypcbiAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHVybCBlbmRzIHdpdGggdGhlIHN1ZmZpeFxuICAgICogUmVxdWlyZWQgYmVjYXVzZSB3ZSBhcmUgY29tcGlsaW5nIGZvciBlczUgaW5zdGVhZCBvZiBlczZcbiAgICAqIEBwYXJhbSB1cmxcbiAgICAqIEBwYXJhbSBzdHJcbiAgICAqL1xuICBzdGF0aWMgZW5kc1dpdGgodXJsOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCF1cmwgfHwgIXN1ZmZpeCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB1cmwuaW5kZXhPZihzdWZmaXgsIHVybC5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSAhPT0gLTE7XG4gIH1cblxuICAgICBzdGF0aWMgY2hlY2tTU08oZXh0cmFRdWVyeVBhcmFtZXRlcnM6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gICEoZXh0cmFRdWVyeVBhcmFtZXRlcnMgJiYgICgoZXh0cmFRdWVyeVBhcmFtZXRlcnMuaW5kZXhPZihDb25zdGFudHMubG9naW5faGludCkgIT09IC0xIHx8ICBleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5zaWQpICE9PSAtMSApKSk7XG4gICAgfVxuXG4gICAgIHN0YXRpYyBjb25zdHJ1Y3RVbmlmaWVkQ2FjaGVFeHRyYVF1ZXJ5UGFyYW1ldGVyKGlkVG9rZW5PYmplY3Q6IGFueSwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpIHtcbiAgICAgICAgIGlmIChpZFRva2VuT2JqZWN0KSB7XG4gICAgICAgICAgICAgaWYgKGlkVG9rZW5PYmplY3QuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLnVwbikpIHtcbiAgICAgICAgICAgICAgICAgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKGV4dHJhUXVlcnlQYXJhbWV0ZXJzLCBDb25zdGFudHMubG9naW5faGludCk7XG4gICAgICAgICAgICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcihleHRyYVF1ZXJ5UGFyYW1ldGVycywgQ29uc3RhbnRzLmRvbWFpbl9oaW50KTtcbiAgICAgICAgICAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnMgKz0gXCImXCIgKyBDb25zdGFudHMubG9naW5faGludCArIFwiPVwiICsgaWRUb2tlbk9iamVjdC51cG4gKyBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnM7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBcIiZcIiArIENvbnN0YW50cy5sb2dpbl9oaW50ICsgXCI9XCIgKyBpZFRva2VuT2JqZWN0LnVwbiArIFwiJlwiICsgQ29uc3RhbnRzLmRvbWFpbl9oaW50ICsgXCI9XCIgKyBDb25zdGFudHMub3JnYW5pemF0aW9ucztcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLnVybFJlbW92ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKGV4dHJhUXVlcnlQYXJhbWV0ZXJzLCBDb25zdGFudHMuZG9tYWluX2hpbnQpO1xuICAgICAgICAgICAgICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYVF1ZXJ5UGFyYW1ldGVycyArPSBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnM7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBcIiZcIiArIENvbnN0YW50cy5kb21haW5faGludCArIFwiPVwiICsgQ29uc3RhbnRzLm9yZ2FuaXphdGlvbnM7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XG4gICAgIH1cblxuICAgICBzdGF0aWMgdXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIodXJsOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgICBpZiAodGhpcy5pc0VtcHR5KHVybCkpIHtcbiAgICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICAgfVxuXG4gICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFxcXFwmXCIgKyBuYW1lICsgXCI9KVteXFwmXStcIik7XG4gICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShyZWdleCwgXCJcIik7XG4gICAgICAgICAvLyBuYW1lPXZhbHVlJlxuICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFwiICsgbmFtZSArIFwiPSlbXlxcJl0rJlwiKTtcbiAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcbiAgICAgICAgIC8vIG5hbWU9dmFsdWVcbiAgICAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIihcIiArIG5hbWUgKyBcIj0pW15cXCZdK1wiKTtcbiAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcbiAgICAgICAgIHJldHVybiB1cmw7XG4gICAgIH1cblxufVxuIiwiLypcclxuICAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAgKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gICogIE1JVCBMaWNlbnNlXHJcbiAgKlxyXG4gICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAgKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcclxuICAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAgKiBjb25kaXRpb25zOlxyXG4gICpcclxuICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICAqXHJcbiAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXHJcbiAgKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAgKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAgKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gICovXHJcblxyXG4vKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc3RhbnRzIHtcclxuICAgIHN0YXRpYyBnZXQgZXJyb3JEZXNjcmlwdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJlcnJvcl9kZXNjcmlwdGlvblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImVycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc2NvcGUoKTogc3RyaW5nIHsgcmV0dXJuIFwic2NvcGVcIjsgfVxyXG4gICAgc3RhdGljIGdldCBhY3F1aXJlVG9rZW5Vc2VyKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYWNxdWlyZVRva2VuVXNlclwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGNsaWVudEluZm8oKTogc3RyaW5nIHsgcmV0dXJuIFwiY2xpZW50X2luZm9cIjsgfVxyXG4gICAgc3RhdGljIGdldCBjbGllbnRJZCgpOiBzdHJpbmcgeyByZXR1cm4gXCJjbGllbnRJZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGF1dGhvcml0eSgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmF1dGhvcml0eVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGlkVG9rZW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiaWRfdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBhY2Nlc3NUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJhY2Nlc3NfdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBleHBpcmVzSW4oKTogc3RyaW5nIHsgcmV0dXJuIFwiZXhwaXJlc19pblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHNlc3Npb25TdGF0ZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJzZXNzaW9uX3N0YXRlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbXNhbENsaWVudEluZm8oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5jbGllbnQuaW5mb1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWxFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmVycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbXNhbEVycm9yRGVzY3JpcHRpb24oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5lcnJvci5kZXNjcmlwdGlvblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWxTZXNzaW9uU3RhdGUoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zZXNzaW9uLnN0YXRlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgdG9rZW5LZXlzKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwudG9rZW4ua2V5c1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGFjY2Vzc1Rva2VuS2V5KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYWNjZXNzLnRva2VuLmtleVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGV4cGlyYXRpb25LZXkoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5leHBpcmF0aW9uLmtleVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHN0YXRlTG9naW4oKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC5zdGF0ZS5sb2dpblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHN0YXRlQWNxdWlyZVRva2VuKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuc3RhdGUuYWNxdWlyZVRva2VuXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc3RhdGVSZW5ldygpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLnN0YXRlLnJlbmV3XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgbm9uY2VJZFRva2VuKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwubm9uY2UuaWR0b2tlblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVzZXJOYW1lKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwudXNlcm5hbWVcIjsgfVxyXG4gICAgc3RhdGljIGdldCBpZFRva2VuS2V5KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuaWR0b2tlblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luUmVxdWVzdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLmxvZ2luLnJlcXVlc3RcIjsgfVxyXG4gICAgc3RhdGljIGdldCBsb2dpbkVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwubG9naW4uZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCByZW5ld1N0YXR1cygpOiBzdHJpbmcgeyByZXR1cm4gXCJtc2FsLnRva2VuLnJlbmV3LnN0YXR1c1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG1zYWwoKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IG5vX2FjY291bnQoKTogc3RyaW5nIHsgcmV0dXJuIFwiTk9fQUNDT1VOVFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luX2hpbnQoKTogc3RyaW5nIHsgcmV0dXJuIFwibG9naW5faGludFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGRvbWFpbl9oaW50KCk6IHN0cmluZyB7IHJldHVybiBcImRvbWFpbl9oaW50XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgb3JnYW5pemF0aW9ucygpOiBzdHJpbmcgeyByZXR1cm4gXCJvcmdhbml6YXRpb25zXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgY29uc3VtZXJzKCk6IHN0cmluZyB7IHJldHVybiBcImNvbnN1bWVyc1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGNvbnN1bWVyc1V0aWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiOTE4ODA0MGQtNmM2Ny00YzViLWIxMTItMzZhMzA0YjY2ZGFkXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgc2lkKCk6IHN0cmluZyB7IHJldHVybiBcInNpZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVwbigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1cG5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBhZGFsSWRUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJhZGFsLmlkdG9rZW5cIjsgfVxyXG4gICAgc3RhdGljIGdldCBwcm9tcHRfc2VsZWN0X2FjY291bnQoKTogc3RyaW5nIHsgcmV0dXJuIFwiJnByb21wdD1zZWxlY3RfYWNjb3VudFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHByb21wdF9ub25lKCk6IHN0cmluZyB7IHJldHVybiBcIiZwcm9tcHQ9bm9uZVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHByb21wdCgpOiBzdHJpbmcgeyByZXR1cm4gXCJwcm9tcHRcIjsgfVxyXG4gICAgc3RhdGljIGdldCByZXNwb25zZV9tb2RlX2ZyYWdtZW50KCk6IHN0cmluZyB7IHJldHVybiBcIiZyZXNwb25zZV9tb2RlPWZyYWdtZW50XCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcmVzb3VyY2VEZWxpbWV0ZXIoKTogc3RyaW5nIHsgcmV0dXJuIFwifFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNDYW5jZWxsZWQoKTogc3RyaW5nIHsgcmV0dXJuIFwiQ2FuY2VsZWRcIjsgfVxyXG4gICAgc3RhdGljIGdldCB0b2tlblJlbmV3U3RhdHVzQ29tcGxldGVkKCk6IHN0cmluZyB7IHJldHVybiBcIkNvbXBsZXRlZFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzKCk6IHN0cmluZyB7IHJldHVybiBcIkluIFByb2dyZXNzXCI7IH1cclxuICAgIHByaXZhdGUgc3RhdGljIF9wb3BVcFdpZHRoOiBudW1iZXIgPSA0ODM7XHJcbiAgICBzdGF0aWMgZ2V0IHBvcFVwV2lkdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3BvcFVwV2lkdGg7IH1cclxuICAgIHN0YXRpYyBzZXQgcG9wVXBXaWR0aCh3aWR0aDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuX3BvcFVwV2lkdGggPSB3aWR0aDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIF9wb3BVcEhlaWdodDogbnVtYmVyID0gNjAwO1xyXG4gICAgc3RhdGljIGdldCBwb3BVcEhlaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcG9wVXBIZWlnaHQ7IH1cclxuICAgIHN0YXRpYyBzZXQgcG9wVXBIZWlnaHQoaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5fcG9wVXBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IGxvZ2luKCk6IHN0cmluZyB7IHJldHVybiBcIkxPR0lOXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcmVuZXdUb2tlbigpOiBzdHJpbmcgeyByZXR1cm4gXCJSRU5FV19UT0tFTlwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVua25vd24oKTogc3RyaW5nIHsgcmV0dXJuIFwiVU5LTk9XTlwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IHVybEhhc2goKTogc3RyaW5nIHsgcmV0dXJuIFwibXNhbC51cmxIYXNoXCI7IH1cclxuICAgICAgc3RhdGljIGdldCBhbmd1bGFyTG9naW5SZXF1ZXN0KCk6IHN0cmluZyB7IHJldHVybiBcIm1zYWwuYW5ndWxhci5sb2dpbi5yZXF1ZXN0XCI7IH1cclxuICAgICAgc3RhdGljIGdldCB1c2VySWRlbnRpZmllcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VySWRlbnRpZmllclwiOyB9XHJcbiAgICAgIHN0YXRpYyBnZXQgY29tbW9uKCk6IHN0cmluZyB7IHJldHVybiBcImNvbW1vblwiOyB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBFcnJvckNvZGVzIHtcclxuICAgIHN0YXRpYyBnZXQgbG9naW5Qcm9ncmVzc0Vycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImxvZ2luX3Byb2dyZXNzX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgYWNxdWlyZVRva2VuUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJhY3F1aXJldG9rZW5fcHJvZ3Jlc3NfZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCBpbnB1dFNjb3Blc0Vycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImlucHV0X3Njb3Blc19lcnJvclwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGVuZHBvaW50UmVzb2x1dGlvbkVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcImVuZHBvaW50c19yZXNvbHV0aW9uX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgcG9wVXBXaW5kb3dFcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJwb3B1cF93aW5kb3dfZXJyb3JcIjsgfVxyXG4gICAgc3RhdGljIGdldCB1c2VyTG9naW5FcnJvcigpOiBzdHJpbmcgeyByZXR1cm4gXCJ1c2VyX2xvZ2luX2Vycm9yXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgdXNlckNhbmNlbGxlZEVycm9yKCk6IHN0cmluZyB7IHJldHVybiBcInVzZXJfY2FuY2VsbGVkXCI7IH1cclxuICB9XHJcbiAgXHJcbiAgLypcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEVycm9yRGVzY3JpcHRpb24ge1xyXG4gICAgICBzdGF0aWMgZ2V0IGxvZ2luUHJvZ3Jlc3NFcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiTG9naW4gaXMgaW4gcHJvZ3Jlc3NcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCBhY3F1aXJlVG9rZW5Qcm9ncmVzc0Vycm9yKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICByZXR1cm4gXCJBY3F1aXJlIHRva2VuIGlzIGluIHByb2dyZXNzXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRpYyBnZXQgaW5wdXRTY29wZXNFcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiSW52YWxpZCB2YWx1ZSBvZiBpbnB1dCBzY29wZXMgcHJvdmlkZWRcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCBlbmRwb2ludFJlc29sdXRpb25FcnJvcigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgcmV0dXJuIFwiRW5kcG9pbnRzIGNhbm5vdCBiZSByZXNvbHZlZFwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdGF0aWMgZ2V0IHBvcFVwV2luZG93RXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIkVycm9yIG9wZW5pbmcgcG9wdXAgd2luZG93LiBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IGFyZSB1c2luZyBJRSBvciBpZiBwb3B1cHMgYXJlIGJsb2NrZWQgaW4gdGhlIGJyb3dzZXIuXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRpYyBnZXQgdXNlckxvZ2luRXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3RhdGljIGdldCB1c2VyQ2FuY2VsbGVkRXJyb3IoKTogc3RyaW5nIHtcclxuICAgICAgICAgIHJldHVybiBcIlVzZXIgY2xvc2VkIHRoZSBwb3B1cCB3aW5kb3cgYW5kIGNhbmNlbGxlZCB0aGUgZmxvd1wiO1xyXG4gICAgICB9XHJcblxyXG4gIH1cclxuIiwiaW1wb3J0IHsgSVVyaSB9IGZyb20gXCIuL0lVcmlcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcbmltcG9ydCB7IElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZSB9IGZyb20gXCIuL0lUZW5hbnREaXNjb3ZlcnlSZXNwb25zZVwiO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vRXJyb3JNZXNzYWdlXCI7XG5pbXBvcnQgeyBYaHJDbGllbnQgfSBmcm9tIFwiLi9YSFJDbGllbnRcIjtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGVudW0gQXV0aG9yaXR5VHlwZSB7XG4gIEFhZCxcbiAgQWRmcyxcbiAgQjJDXG59XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBdXRob3JpdHkge1xuICBjb25zdHJ1Y3RvcihhdXRob3JpdHk6IHN0cmluZywgdmFsaWRhdGVBdXRob3JpdHk6IGJvb2xlYW4pIHtcbiAgICB0aGlzLklzVmFsaWRhdGlvbkVuYWJsZWQgPSB2YWxpZGF0ZUF1dGhvcml0eTtcbiAgICB0aGlzLkNhbm9uaWNhbEF1dGhvcml0eSA9IGF1dGhvcml0eTtcblxuICAgIHRoaXMudmFsaWRhdGVBc1VyaSgpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGdldCBBdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGU7XG5cbiAgcHVibGljIElzVmFsaWRhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG5cbiAgcHVibGljIGdldCBUZW5hbnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLlBhdGhTZWdtZW50c1swXTtcbiAgfVxuXG4gIHByaXZhdGUgdGVuYW50RGlzY292ZXJ5UmVzcG9uc2U6IElUZW5hbnREaXNjb3ZlcnlSZXNwb25zZTtcblxuICBwdWJsaWMgZ2V0IEF1dGhvcml6YXRpb25FbmRwb2ludCgpOiBzdHJpbmcge1xuICAgIHRoaXMudmFsaWRhdGVSZXNvbHZlZCgpO1xuICAgIHJldHVybiB0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlLkF1dGhvcml6YXRpb25FbmRwb2ludC5yZXBsYWNlKFwie3RlbmFudH1cIiwgdGhpcy5UZW5hbnQpO1xuICB9XG5cbiAgcHVibGljIGdldCBFbmRTZXNzaW9uRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICB0aGlzLnZhbGlkYXRlUmVzb2x2ZWQoKTtcbiAgICByZXR1cm4gdGhpcy50ZW5hbnREaXNjb3ZlcnlSZXNwb25zZS5FbmRTZXNzaW9uRW5kcG9pbnQucmVwbGFjZShcInt0ZW5hbnR9XCIsIHRoaXMuVGVuYW50KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgU2VsZlNpZ25lZEp3dEF1ZGllbmNlKCk6IHN0cmluZyB7XG4gICAgdGhpcy52YWxpZGF0ZVJlc29sdmVkKCk7XG4gICAgcmV0dXJuIHRoaXMudGVuYW50RGlzY292ZXJ5UmVzcG9uc2UuSXNzdWVyLnJlcGxhY2UoXCJ7dGVuYW50fVwiLCB0aGlzLlRlbmFudCk7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlUmVzb2x2ZWQoKSB7XG4gICAgaWYgKCF0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBcIlBsZWFzZSBjYWxsIFJlc29sdmVFbmRwb2ludHNBc3luYyBmaXJzdFwiO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIEEgVVJMIHRoYXQgaXMgdGhlIGF1dGhvcml0eSBzZXQgYnkgdGhlIGRldmVsb3BlclxuICAgKi9cbiAgcHVibGljIGdldCBDYW5vbmljYWxBdXRob3JpdHkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxBdXRob3JpdHk7XG4gIH1cblxuICBwdWJsaWMgc2V0IENhbm9uaWNhbEF1dGhvcml0eSh1cmw6IHN0cmluZykge1xuICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5ID0gVXRpbHMuQ2Fub25pY2FsaXplVXJpKHVybCk7XG4gICAgdGhpcy5jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgY2Fub25pY2FsQXV0aG9yaXR5OiBzdHJpbmc7XG4gIHByaXZhdGUgY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50czogSVVyaTtcblxuICBwdWJsaWMgZ2V0IENhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMoKTogSVVyaSB7XG4gICAgaWYgKCF0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IFV0aWxzLkdldFVybENvbXBvbmVudHModGhpcy5DYW5vbmljYWxBdXRob3JpdHkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM7XG4gIH1cblxuICAvKlxuICAgKiAvLyBodHRwOi8vb3BlbmlkLm5ldC9zcGVjcy9vcGVuaWQtY29ubmVjdC1kaXNjb3ZlcnktMV8wLmh0bWwjUHJvdmlkZXJNZXRhZGF0YVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCBEZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuQ2Fub25pY2FsQXV0aG9yaXR5fXYyLjAvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gO1xuICB9XG5cbiAgLypcbiAgICogR2l2ZW4gYSBzdHJpbmcsIHZhbGlkYXRlIHRoYXQgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly9kb21haW4vcGF0aFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUFzVXJpKCkge1xuICAgIGxldCBjb21wb25lbnRzO1xuICAgIHRyeSB7XG4gICAgICBjb21wb25lbnRzID0gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IEVycm9yTWVzc2FnZS5pbnZhbGlkQXV0aG9yaXR5VHlwZTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbXBvbmVudHMuUHJvdG9jb2wgfHwgY29tcG9uZW50cy5Qcm90b2NvbC50b0xvd2VyQ2FzZSgpICE9PSBcImh0dHBzOlwiKSB7XG4gICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYXV0aG9yaXR5VXJpSW5zZWN1cmU7XG4gICAgfVxuXG4gICAgaWYgKCFjb21wb25lbnRzLlBhdGhTZWdtZW50cyB8fCBjb21wb25lbnRzLlBhdGhTZWdtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYXV0aG9yaXR5VXJpSW52YWxpZFBhdGg7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogQ2FsbHMgdGhlIE9JREMgZW5kcG9pbnQgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlXG4gICAqL1xuICBwcml2YXRlIERpc2NvdmVyRW5kcG9pbnRzKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludDogc3RyaW5nKTogUHJvbWlzZTxJVGVuYW50RGlzY292ZXJ5UmVzcG9uc2U+IHtcbiAgICBsZXQgY2xpZW50ID0gbmV3IFhockNsaWVudCgpO1xuICAgIHJldHVybiBjbGllbnQuc2VuZFJlcXVlc3RBc3luYyhvcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQsIFwiR0VUXCIsIC8qZW5hYmxlQ2FjaGluZzogKi8gdHJ1ZSlcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiA8SVRlbmFudERpc2NvdmVyeVJlc3BvbnNlPntcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uRW5kcG9pbnQ6IHJlc3BvbnNlLmF1dGhvcml6YXRpb25fZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgRW5kU2Vzc2lvbkVuZHBvaW50OiByZXNwb25zZS5lbmRfc2Vzc2lvbl9lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBJc3N1ZXI6IHJlc3BvbnNlLmlzc3VlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZS5cbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgYXV0aG9yaXR5IGlzIGluIHRoZSBjYWNoZVxuICAgKiBEaXNjb3ZlciBlbmRwb2ludHMgdmlhIG9wZW5pZC1jb25maWd1cmF0aW9uXG4gICAqIElmIHN1Y2Nlc3NmdWwsIGNhY2hlcyB0aGUgZW5kcG9pbnQgZm9yIGxhdGVyIHVzZSBpbiBPSURDXG4gICAqL1xuICBwdWJsaWMgUmVzb2x2ZUVuZHBvaW50c0FzeW5jKCk6IFByb21pc2U8QXV0aG9yaXR5PiB7XG4gICAgbGV0IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9IFwiXCI7XG4gICAgcmV0dXJuIHRoaXMuR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKS50aGVuKG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlID0+IHtcbiAgICAgIG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludFJlc3BvbnNlO1xuICAgICAgcmV0dXJuIHRoaXMuRGlzY292ZXJFbmRwb2ludHMob3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KTtcbiAgICB9KS50aGVuKCh0ZW5hbnREaXNjb3ZlcnlSZXNwb25zZTogSVRlbmFudERpc2NvdmVyeVJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLnRlbmFudERpc2NvdmVyeVJlc3BvbnNlID0gdGVuYW50RGlzY292ZXJ5UmVzcG9uc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIFRlbmFudERpc2NvdmVyeUVuZHBvaW50XG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0geVtvcFswXSAmIDIgPyBcInJldHVyblwiIDogb3BbMF0gPyBcInRocm93XCIgOiBcIm5leHRcIl0pICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gWzAsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7ICB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAob1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xyXG59IiwiLypcbiAgKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gICogIE1JVCBMaWNlbnNlXG4gICpcbiAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAgKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAgKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gICogY29uZGl0aW9uczpcbiAgKlxuICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gICpcbiAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAgKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gICovXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvck1lc3NhZ2Uge1xuICBzdGF0aWMgZ2V0IGF1dGhvcml0eVVyaUludmFsaWRQYXRoKCk6IHN0cmluZyB7IHJldHVybiBcIkF1dGhvcml0eVVyaUludmFsaWRQYXRoXCI7IH1cbiAgc3RhdGljIGdldCBhdXRob3JpdHlVcmlJbnNlY3VyZSgpOiBzdHJpbmcgeyByZXR1cm4gXCJBdXRob3JpdHlVcmlJbnNlY3VyZVwiOyB9XG4gIHN0YXRpYyBnZXQgaW52YWxpZEF1dGhvcml0eVR5cGUoKTogc3RyaW5nIHsgcmV0dXJuIFwiSW52YWxpZEF1dGhvcml0eVR5cGVcIjsgfVxuICBzdGF0aWMgZ2V0IHVuc3VwcG9ydGVkQXV0aG9yaXR5VmFsaWRhdGlvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJVbnN1cHBvcnRlZEF1dGhvcml0eVZhbGlkYXRpb25cIjsgfVxuICBzdGF0aWMgZ2V0IGIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoKCk6IHN0cmluZyB7IHJldHVybiBcIkIyY0F1dGhvcml0eVVyaUludmFsaWRQYXRoXCI7IH1cbn1cbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxyXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gKiAgTUlUIExpY2Vuc2VcclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxyXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXHJcbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAqIGNvbmRpdGlvbnM6XHJcbiAqXHJcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4gKlxyXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcclxuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxyXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbkNhY2hlSXRlbVwiO1xyXG5pbXBvcnQgeyBBY2Nlc3NUb2tlbktleSB9IGZyb20gXCIuL0FjY2Vzc1Rva2VuS2V5XCI7XHJcbmltcG9ydCB7IEFjY2Vzc1Rva2VuVmFsdWUgfSBmcm9tIFwiLi9BY2Nlc3NUb2tlblZhbHVlXCI7XHJcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi9BdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzXCI7XHJcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xyXG5pbXBvcnQgeyBIb21lQWNjb3VudElkZW50aWZpZXIgfSBmcm9tIFwiLi9Ib21lQWNjb3VudElkZW50aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uc3RhbnRzLCBFcnJvckNvZGVzLCBFcnJvckRlc2NyaXB0aW9uIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IElkVG9rZW4gfSBmcm9tIFwiLi9JZFRva2VuXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSBcIi4vU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBUb2tlblJlc3BvbnNlIH0gZnJvbSBcIi4vUmVxdWVzdEluZm9cIjtcclxuaW1wb3J0IHsgQWNjb3VudCB9IGZyb20gXCIuL0FjY291bnRcIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgeyBBdXRob3JpdHlGYWN0b3J5IH0gZnJvbSBcIi4vQXV0aG9yaXR5RmFjdG9yeVwiO1xyXG5pbXBvcnQgeyBUQ29uZmlndXJhdGlvbiwgQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25cIjtcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgIG1zYWw6IE9iamVjdDtcclxuICAgIEN1c3RvbUV2ZW50OiBDdXN0b21FdmVudDtcclxuICAgIEV2ZW50OiBFdmVudDtcclxuICAgIGFjdGl2ZVJlbmV3YWxzOiB7fTtcclxuICAgIHJlbmV3U3RhdGVzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzOiB7fTtcclxuICAgIGNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXM6IHt9O1xyXG4gICAgb3BlbmVkV2luZG93czogQXJyYXk8V2luZG93PjtcclxuICAgIHJlcXVlc3RUeXBlOiBzdHJpbmc7XHJcbiAgfVxyXG59XHJcblxyXG4vKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5sZXQgUmVzcG9uc2VUeXBlcyA9IHtcclxuICBpZF90b2tlbjogXCJpZF90b2tlblwiLFxyXG4gIHRva2VuOiBcInRva2VuXCIsXHJcbiAgaWRfdG9rZW5fdG9rZW46IFwiaWRfdG9rZW4gdG9rZW5cIlxyXG59O1xyXG5cclxuLypcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDYWNoZVJlc3VsdCB7XHJcbiAgZXJyb3JEZXNjOiBzdHJpbmc7XHJcbiAgdG9rZW46IHN0cmluZztcclxuICBlcnJvcjogc3RyaW5nO1xyXG59XHJcblxyXG4vKlxyXG4gKiBBIHR5cGUgYWxpYXMgb2YgZm9yIGEgdG9rZW5SZWNlaXZlZENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gKiBAcGFyYW0gdG9rZW5SZWNlaXZlZENhbGxiYWNrLmVycm9yRGVzYyBlcnJvciBkZXNjcmlwdGlvbiByZXR1cm5lZCBmcm9tIHRoZSBTVFMgaWYgQVBJIGNhbGwgZmFpbHMuXHJcbiAqIEBwYXJhbSB0b2tlblJlY2VpdmVkQ2FsbGJhY2sudG9rZW4gdG9rZW4gcmV0dXJuZWQgZnJvbSBTVFMgaWYgdG9rZW4gcmVxdWVzdCBpcyBzdWNjZXNzZnVsLlxyXG4gKiBAcGFyYW0gdG9rZW5SZWNlaXZlZENhbGxiYWNrLmVycm9yIGVycm9yIGNvZGUgcmV0dXJuZWQgZnJvbSB0aGUgU1RTIGlmIEFQSSBjYWxsIGZhaWxzLlxyXG4gKiBAcGFyYW0gdG9rZW5SZWNlaXZlZENhbGxiYWNrLnRva2VuVHlwZSB0b2tlblR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgU1RTIGlmIEFQSSBjYWxsIGlzIHN1Y2Nlc3NmdWwuIFBvc3NpYmxlIHZhbHVlcyBhcmU6IGlkX3Rva2VuIE9SIGFjY2Vzc190b2tlbi5cclxuICovXHJcbmV4cG9ydCB0eXBlIHRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IChlcnJvckRlc2M6IHN0cmluZywgdG9rZW46IHN0cmluZywgZXJyb3I6IHN0cmluZywgdG9rZW5UeXBlOiBzdHJpbmcsIHVzZXJTdGF0ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuXHJcbi8qXHJcbiAqIHdyYXBwZXIgYXJvdW5kIGFjcXVpcmVUb2tlblNpbGVudCgpIHRvIGhhbmRsZSB0b2tlbnMgb3V0IG9mIGlmcmFtZVxyXG4gKiBUT0RPOiBHZXQgbW9yZSBkZXRhaWxzIGFuZCB1c2VjYXNlcyBmcm9tIHRoZSBoaXN0b3J5XHJcbiAqL1xyXG5jb25zdCByZXNvbHZlVG9rZW5Pbmx5SWZPdXRPZklmcmFtZSA9ICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSA9PiB7XHJcbiAgY29uc3QgdG9rZW5BY3F1aXNpdGlvbk1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XHJcbiAgZGVzY3JpcHRvci52YWx1ZSA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNJbklmcmFtZSgpXHJcbiAgICAgID8gbmV3IFByb21pc2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSlcclxuICAgICAgOiB0b2tlbkFjcXVpc2l0aW9uTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gIH07XHJcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogVXNlckFnZW50QXBwbGljYXRpb24gY2xhc3NcclxuICpcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVc2VyQWdlbnRBcHBsaWNhdGlvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFsbCBDb25maWcgUGFyYW1zIGluIGEgc2luZ2xlIG9iamVjdFxyXG4gICAqL1xyXG4gIHBDb25maWc6IFRDb25maWd1cmF0aW9uO1xyXG4gIFxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuXHJcbiAgICogVE9ETzogUmVtb3ZlIHRoaXMgZnJvbSBDb25maWd1cmF0aW9uIGFuZCBhZGQgdGhpcyBhcyBhIHBhcmFtZXRlciB0byByZWRpcmVjdCgpIGNhbGxzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwVG9rZW5SZWNlaXZlZENhbGxiYWNrOiB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSBudWxsO1xyXG5cclxuICAvKiogQXV0aG9yaXR5IFN1cHBvcnQgQ29kZSAqL1xyXG5cclxuICAvKiogXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBhdXRob3JpdHlJbnN0YW5jZTogQXV0aG9yaXR5O1xyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gc2V0IHRoZSBhdXRob3JpdHkuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cclxuICAgKiAtIEluIEF6dXJlIEFELCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDt0ZW5hbnQmZ3Q7LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXQgYXV0aG9yaXR5KHZhbCkge1xyXG4gICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA9IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UodmFsLCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBhdXRob3JpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBhdXRob3JpdHkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmF1dGhvcml0eUluc3RhbmNlLkNhbm9uaWNhbEF1dGhvcml0eTtcclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBWYWxpZGF0ZSBjYWNoZSBsb2NhdGlvbiBhbmQgaW5pdGlhbGl6ZSBzdG9yYWdlIFxyXG4gICAqL1xyXG5cclxuICAvKiogXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2FjaGVMb2NhdGlvbnMgPSB7XHJcbiAgICBsb2NhbFN0b3JhZ2U6IFwibG9jYWxTdG9yYWdlXCIsXHJcbiAgICBzZXNzaW9uU3RvcmFnZTogXCJzZXNzaW9uU3RvcmFnZVwiXHJcbiAgfTtcclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBjYWNoZSBsb2NhdGlvblxyXG4gICAqL1xyXG4gIGdldCBjYWNoZUxvY2F0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmNhY2hlLmNhY2hlTG9jYXRpb247XHJcbiAgfVxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHBDYWNoZVN0b3JhZ2U6IFN0b3JhZ2U7XHJcblxyXG5cclxuICAvKiogT3RoZXIgVmFyaWFibGVzICovXHJcblxyXG4gIC8qKiBcclxuICAgKiBAaGlkZGVuIFxyXG4gICAqIFRyYWNrcyBpZiBsb2dpbiBpcyBhbHJlYWR5IGluaXRpYXRlZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcExvZ2luSW5Qcm9ncmVzczogYm9vbGVhbjtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEBoaWRkZW5cclxuICAgKiBUcmFja3MgaW4gVG9rZW4gUmVxdWVzdCBpcyBhbHJlYWR5IGluaXRpYXRlZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHBTaWxlbnRBdXRoZW50aWNhdGlvblN0YXRlOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHBTaWxlbnRMb2dpbjogYm9vbGVhbjtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEBoaWRkZW5cclxuICAgKiBBY2NvdW50IG9iamVjdCAtIEN1cnJlbnQgbG9naW4vdG9rZW4gcmVxdWVzdCBhY2NvdW50XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwQWNjb3VudDogQWNjb3VudDtcclxuXHJcbiAgLyoqIFxyXG4gICAqIEluaXRpYWxpemUgYSBVc2VyQWdlbnRBcHBsaWNhdGlvbiB3aXRoIGEgZ2l2ZW4gY2xpZW50SWQgYW5kIGF1dGhvcml0eS5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xpZW50SWQgLSBUaGUgY2xpZW50SUQgb2YgeW91ciBhcHBsaWNhdGlvbiwgeW91IHNob3VsZCBnZXQgdGhpcyBmcm9tIHRoZSBhcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpdHkgLSBBIFVSTCBpbmRpY2F0aW5nIGEgZGlyZWN0b3J5IHRoYXQgTVNBTCBjYW4gdXNlIHRvIG9idGFpbiB0b2tlbnMuXHJcbiAgICogLSBJbiBBenVyZSBBRCwgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2U+LyZsdDt0ZW5hbnQmZ3Q7LFxcIHdoZXJlICZsdDtpbnN0YW5jZSZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXHJcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O2luc3RhbmNlJmd0Oy90ZnAvJmx0O3RlbmFudElkJmd0Oy8mbHQ7cG9saWN5TmFtZSZndDsvXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqIEBwYXJhbSBwVG9rZW5SZWNlaXZlZENhbGxiYWNrIC0gIFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZ2V0IHRoZSBjYWxsIGJhY2sgb25jZSB0aGlzIEFQSSBpcyBjb21wbGV0ZWQgKGVpdGhlciBzdWNjZXNzZnVsbHkgb3Igd2l0aCBhIGZhaWx1cmUpLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsaWRhdGVBdXRob3JpdHkgLSAgYm9vbGVhbiB0byB0dXJuIGF1dGhvcml0eSB2YWxpZGF0aW9uIG9uL29mZi5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRDb25maWd1cmF0aW9uLCBjYWxsYmFjazogdG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBDb25maWd1cmF0aW9uIFxyXG4gICAgdGhpcy5wQ29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgIC8vIFNldCB0aGUgY2FsbGJhY2tcclxuICAgIHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cclxuICAgIC8vIFRPRE86IE5ldyBkZXNpZ24gZm9yIHJlZGlyZWN0IC0gYWRkIGEgbmV3IGZ1bmN0aW9uLiBQbGFjZWhvbGRlciB1bnRpbCB0aGVuXHJcbiAgICAvLyB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB0b2tlblJlY2VpdmVkQ2FsbGJhY2s7XHJcblxyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICB0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCF0aGlzLmNhY2hlTG9jYXRpb25zW3RoaXMucENvbmZpZy5jYWNoZS5jYWNoZUxvY2F0aW9uXSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWNoZSBMb2NhdGlvbiBpcyBub3QgdmFsaWQuIFByb3ZpZGVkIHZhbHVlOlwiICsgdGhpcy5wQ29uZmlnLmNhY2hlLmNhY2hlTG9jYXRpb24gKyBcIi5Qb3NzaWJsZSB2YWx1ZXMgYXJlOiBcIiArIHRoaXMuY2FjaGVMb2NhdGlvbnMubG9jYWxTdG9yYWdlICsgXCIsIFwiICsgdGhpcy5jYWNoZUxvY2F0aW9ucy5zZXNzaW9uU3RvcmFnZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2UgPSBuZXcgU3RvcmFnZSh0aGlzLnBDb25maWcuY2FjaGUuY2FjaGVMb2NhdGlvbik7IC8vY2FjaGUga2V5cyBtc2FsXHJcbiAgICBcclxuICAgIC8vIEluaXRpYWxpemUgdGhlIFdpbmRvdyBIYW5kbGluZyBjb2RlXHJcbiAgICAvLyBUT0RPOiByZWZhY3RvciAtIHdyaXRlIGEgdXRpbGl0eSBmdW5jdGlvbiBcclxuICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzID0gW107XHJcbiAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHMgPSB7fTtcclxuICAgIHdpbmRvdy5yZW5ld1N0YXRlcyA9IFtdO1xyXG4gICAgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlcyA9IHt9O1xyXG4gICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXMgPSB7fTtcclxuICAgIHdpbmRvdy5tc2FsID0gdGhpcztcclxuICAgIHZhciB1cmxIYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XHJcbiAgICB2YXIgaXNDYWxsYmFjayA9IHRoaXMuaXNDYWxsYmFjayh1cmxIYXNoKTtcclxuXHJcbiAgICAvLyBPbiB0aGUgU2VydmVyIDMwMiAtIFJlZGlyZWN0LCBoYW5kbGUgdGhpc1xyXG4gICAgaWYgKCF0aGlzLnBDb25maWcuZnJhbWV3b3JrLmlzQW5ndWxhcikge1xyXG4gICAgICBpZiAoaXNDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZS5jYWxsKHRoaXMsIHVybEhhc2gpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBwZW5kaW5nQ2FsbGJhY2sgPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMudXJsSGFzaCk7XHJcbiAgICAgICAgaWYgKHBlbmRpbmdDYWxsYmFjaykge1xyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzQ2FsbEJhY2socGVuZGluZ0NhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBVc2VkIHRvIGdldCB0aGUgcmVkaXJlY3QgdXJpLiBFdmFsdWF0ZXMgcmVkaXJlY3RVcmkgaWYgaXRzIGEgZnVuY3Rpb24sIG90aGVyd2lzZSBzaW1wbHkgcmV0dXJucyBpdHMgdmFsdWUuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFJlZGlyZWN0VXJpKCk6IHN0cmluZyB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMucENvbmZpZy5hdXRoLnJlZGlyZWN0VXJpID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucENvbmZpZy5hdXRoLnJlZGlyZWN0VXJpKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmF1dGgucmVkaXJlY3RVcmk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqIFxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSBwb3N0IGxvZ291dCByZWRpcmVjdCB1cmkuIEV2YWx1YXRlcyBwb3N0TG9nb3V0cmVkaXJlY3RVcmkgaWYgaXRzIGEgZnVuY3Rpb24sIG90aGVyd2lzZSBzaW1wbHkgcmV0dXJucyBpdHMgdmFsdWUuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSgpOiBzdHJpbmcge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLnBDb25maWcuYXV0aC5wb3N0TG9nb3V0UmVkaXJlY3RVcmkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmF1dGgucG9zdExvZ291dFJlZGlyZWN0VXJpKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmF1dGgucG9zdExvZ291dFJlZGlyZWN0VXJpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKiBcclxuICAgKiBVc2VkIHRvIGNhbGwgdGhlIGNvbnN0cnVjdG9yIGNhbGxiYWNrIHdpdGggdGhlIHRva2VuL2Vycm9yXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtoYXNoPXdpbmRvdy5sb2NhdGlvbi5oYXNoXSAtIEhhc2ggZnJhZ21lbnQgb2YgVXJsLlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHByb2Nlc3NDYWxsQmFjayhoYXNoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJQcm9jZXNzaW5nIHRoZSBjYWxsYmFjayBmcm9tIHJlZGlyZWN0IHJlc3BvbnNlXCIpO1xyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSB0aGlzLmdldFJlcXVlc3RJbmZvKGhhc2gpO1xyXG4gICAgdGhpcy5zYXZlVG9rZW5Gcm9tSGFzaChyZXF1ZXN0SW5mbyk7XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmFjY2Vzc1Rva2VuXSB8fCByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXTtcclxuICAgIGNvbnN0IGVycm9yRGVzYyA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dO1xyXG4gICAgY29uc3QgZXJyb3IgPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl07XHJcbiAgICB2YXIgdG9rZW5UeXBlOiBzdHJpbmc7XHJcblxyXG4gICAgaWYgKHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmFjY2Vzc1Rva2VuXSkge1xyXG4gICAgICB0b2tlblR5cGUgPSBDb25zdGFudHMuYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdG9rZW5UeXBlID0gQ29uc3RhbnRzLmlkVG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oQ29uc3RhbnRzLnVybEhhc2gpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2UuY2xlYXJDb29raWUoKTtcclxuICAgICAgICB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2suY2FsbCh0aGlzLCBlcnJvckRlc2MsIHRva2VuLCBlcnJvciwgdG9rZW5UeXBlLCB0aGlzLmdldEFjY291bnRTdGF0ZSh0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBpbiB0b2tlbiByZWNlaXZlZCBjYWxsYmFjayBmdW5jdGlvbjogXCIgKyBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qXHJcbiAgICogSW5pdGlhdGUgdGhlIGxvZ2luIHByb2Nlc3MgYnkgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIFNUUyBhdXRob3JpemF0aW9uIGVuZHBvaW50LlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4gcmV0dXJuZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIGF1dGhlbnRpY2F0aW9uIHNlcnZlciBkdXJpbmcgdGhlIGludGVyYWN0aXZlIGF1dGhlbnRpY2F0aW9uIGZsb3cuXHJcbiAgICovXHJcbiAgbG9naW5SZWRpcmVjdChzY29wZXM/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgLypcclxuICAgIDEuIENyZWF0ZSBuYXZpZ2F0ZSB1cmxcclxuICAgIDIuIHNhdmVzIHZhbHVlIGluIGNhY2hlXHJcbiAgICAzLiByZWRpcmVjdCB1c2VyIHRvIEFBRFxyXG4gICAgICovXHJcbiAgICBpZiAodGhpcy5wTG9naW5JblByb2dyZXNzKSB7XHJcbiAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2soRXJyb3JEZXNjcmlwdGlvbi5sb2dpblByb2dyZXNzRXJyb3IsIG51bGwsIEVycm9yQ29kZXMubG9naW5Qcm9ncmVzc0Vycm9yLCBDb25zdGFudHMuaWRUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcclxuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucFRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yLCBDb25zdGFudHMuaWRUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpZFRva2VuT2JqZWN0O1xyXG4gICAgaWRUb2tlbk9iamVjdCA9IHRoaXMuZXh0cmFjdEFEQUxJZFRva2VuKCk7XHJcbiAgICBpZiAoaWRUb2tlbk9iamVjdCAmJiAhc2NvcGVzKSB7XHJcbiAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJBREFMJ3MgaWRUb2tlbiBleGlzdHMuIEV4dHJhY3RpbmcgbG9naW4gaW5mb3JtYXRpb24gZnJvbSBBREFMJ3MgaWRUb2tlbiBcIik7XHJcbiAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgIHRoaXMucFNpbGVudExvZ2luID0gdHJ1ZTtcclxuICAgICAgdGhpcy5hY3F1aXJlVG9rZW5TaWxlbnQoW3RoaXMucENvbmZpZy5hdXRoLmNsaWVudElkXSwgdGhpcy5hdXRob3JpdHksIHRoaXMuZ2V0QWNjb3VudCgpLCBleHRyYVF1ZXJ5UGFyYW1ldGVycylcclxuICAgICAgICAudGhlbigoaWRUb2tlbikgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJVbmlmaWVkIGNhY2hlIGNhbGwgaXMgc3VjY2Vzc2Z1bFwiKTtcclxuICAgICAgICAgIGlmICh0aGlzLnBUb2tlblJlY2VpdmVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrLmNhbGwodGhpcywgbnVsbCwgaWRUb2tlbiwgbnVsbCwgQ29uc3RhbnRzLmlkVG9rZW4sIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucFNpbGVudEF1dGhlbnRpY2F0aW9uU3RhdGUpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgIHRoaXMucFNpbGVudExvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkIGR1cmluZyB1bmlmaWVkIGNhY2hlIEFUU1wiKTtcclxuICAgICAgICAgIHRoaXMubG9naW5SZWRpcmVjdEhlbHBlcihzY29wZXMsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmxvZ2luUmVkaXJlY3RIZWxwZXIoc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGxvZ2luUmVkaXJlY3RIZWxwZXIoc2NvcGVzPzogQXJyYXk8c3RyaW5nPiwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMucExvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyh0aGlzLmF1dGhvcml0eUluc3RhbmNlLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyA9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxvZ2luU3RhcnRQYWdlID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmFuZ3VsYXJMb2dpblJlcXVlc3QpO1xyXG4gICAgICAgIGlmICghbG9naW5TdGFydFBhZ2UgfHwgbG9naW5TdGFydFBhZ2UgPT09IFwiXCIpIHtcclxuICAgICAgICAgIGxvZ2luU3RhcnRQYWdlID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmFuZ3VsYXJMb2dpblJlcXVlc3QsIFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgbG9naW5TdGFydFBhZ2UsIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJcIik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5ub25jZSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiXCIpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgXCJcIik7XHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgICAgY29uc3QgdXJsTmF2aWdhdGUgPSBhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSArIENvbnN0YW50cy5yZXNwb25zZV9tb2RlX2ZyYWdtZW50O1xyXG4gICAgICAgIHRoaXMucHJvbXB0VXNlcih1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBJbml0aWF0ZSB0aGUgbG9naW4gcHJvY2VzcyBieSBvcGVuaW5nIGEgcG9wdXAgd2luZG93LlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleHRyYVF1ZXJ5UGFyYW1ldGVycyAtIEtleS12YWx1ZSBwYWlycyB0byBwYXNzIHRvIHRoZSBTVFMgZHVyaW5nIHRoZSBpbnRlcmFjdGl2ZSBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxzdHJpbmc+fSAtIEEgUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmV0dXJucyB0aGUgdG9rZW4gb3IgZXJyb3IuXHJcbiAgICovXHJcbiAgbG9naW5Qb3B1cChzY29wZXM/OiBBcnJheTxzdHJpbmc+LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAvKlxyXG4gICAgMS4gQ3JlYXRlIG5hdmlnYXRlIHVybFxyXG4gICAgMi4gc2F2ZXMgdmFsdWUgaW4gY2FjaGVcclxuICAgIDMuIHJlZGlyZWN0IHVzZXIgdG8gQUFEXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKHRoaXMucExvZ2luSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmxvZ2luUHJvZ3Jlc3NFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24ubG9naW5Qcm9ncmVzc0Vycm9yKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShzY29wZXMpO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgaWRUb2tlbk9iamVjdDtcclxuICAgICAgaWRUb2tlbk9iamVjdCA9IHRoaXMuZXh0cmFjdEFEQUxJZFRva2VuKCk7XHJcbiAgICAgIGlmIChpZFRva2VuT2JqZWN0ICYmICFzY29wZXMpIHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiQURBTCdzIGlkVG9rZW4gZXhpc3RzLiBFeHRyYWN0aW5nIGxvZ2luIGluZm9ybWF0aW9uIGZyb20gQURBTCdzIGlkVG9rZW4gXCIpO1xyXG4gICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWNxdWlyZVRva2VuU2lsZW50KFt0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZF0sIHRoaXMuYXV0aG9yaXR5LCB0aGlzLmdldEFjY291bnQoKSwgZXh0cmFRdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgICAudGhlbigoaWRUb2tlbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBTaWxlbnRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVW5pZmllZCBjYWNoZSBjYWxsIGlzIHN1Y2Nlc3NmdWxcIik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWRUb2tlbik7XHJcbiAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wU2lsZW50TG9naW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgdW5pZmllZCBjYWNoZSBBVFNcIik7XHJcbiAgICAgICAgICAgIHRoaXMubG9naW5Qb3B1cEhlbHBlcihyZXNvbHZlLCByZWplY3QsIHNjb3BlcywgZXh0cmFRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sb2dpblBvcHVwSGVscGVyKHJlc29sdmUsIHJlamVjdCwgc2NvcGVzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBsb2dpblBvcHVwSGVscGVyKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnksIHNjb3BlczogQXJyYXk8c3RyaW5nPiwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpIHtcclxuICAgIC8vVE9ETyB3aHkgdGhpcyBpcyBuZWVkZWQgb25seSBmb3IgbG9naW5wb3B1cFxyXG4gICAgaWYgKCFzY29wZXMpIHtcclxuICAgICAgc2NvcGVzID0gW3RoaXMucENvbmZpZy5hdXRoLmNsaWVudElkXTtcclxuICAgIH1cclxuICAgIGNvbnN0IHNjb3BlID0gc2NvcGVzLmpvaW4oXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB2YXIgcG9wVXBXaW5kb3cgPSB0aGlzLm9wZW5XaW5kb3coXCJhYm91dDpibGFua1wiLCBcIl9ibGFua1wiLCAxLCB0aGlzLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgaWYgKCFwb3BVcFdpbmRvdykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyh0aGlzLmF1dGhvcml0eUluc3RhbmNlLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIHdpbmRvdy5sb2NhdGlvbi5ocmVmLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5sb2dpbkVycm9yLCBcIlwiKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIFwiXCIpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIFwiXCIpO1xyXG4gICAgICBjb25zdCBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIGNvbnN0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcclxuICAgICAgd2luZG93LnJlbmV3U3RhdGVzLnB1c2goYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlKTtcclxuICAgICAgd2luZG93LnJlcXVlc3RUeXBlID0gQ29uc3RhbnRzLmxvZ2luO1xyXG4gICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlLCBzY29wZSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlZCBQb3B1cCB3aW5kb3cgdG86XCIgKyB1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgICAgcG9wVXBXaW5kb3cubG9jYXRpb24uaHJlZiA9IHVybE5hdmlnYXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yICsgXCI6XCIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgcG9wVXBXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci53YXJuaW5nKFwiY291bGQgbm90IHJlc29sdmUgZW5kcG9pbnRzXCIpO1xyXG4gICAgICByZWplY3QoZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgICogVXNlZCB0byByZWRpcmVjdCB0aGUgYnJvd3NlciB0byB0aGUgU1RTIGF1dGhvcml6YXRpb24gZW5kcG9pbnRcclxuICAgICogQHBhcmFtIHtzdHJpbmd9IHVybE5hdmlnYXRlIC0gVVJMIG9mIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50XHJcbiAgICAqIEBoaWRkZW5cclxuICAgICovXHJcbiAgcHJpdmF0ZSBwcm9tcHRVc2VyKHVybE5hdmlnYXRlOiBzdHJpbmcpIHtcclxuICAgIGlmICh1cmxOYXZpZ2F0ZSAmJiAhVXRpbHMuaXNFbXB0eSh1cmxOYXZpZ2F0ZSkpIHtcclxuICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmxOYXZpZ2F0ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiTmF2aWdhdGUgdXJsIGlzIGVtcHR5XCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIHNlbmQgdGhlIHVzZXIgdG8gdGhlIHJlZGlyZWN0X3VyaSBhZnRlciBhdXRoZW50aWNhdGlvbiBpcyBjb21wbGV0ZS4gVGhlIHVzZXJcInMgYmVhcmVyIHRva2VuIGlzIGF0dGFjaGVkIHRvIHRoZSBVUkkgZnJhZ21lbnQgYXMgYW4gaWRfdG9rZW4vYWNjZXNzX3Rva2VuIGZpZWxkLlxyXG4gICAqIFRoaXMgZnVuY3Rpb24gYWxzbyBjbG9zZXMgdGhlIHBvcHVwIHdpbmRvdyBhZnRlciByZWRpcmVjdGlvbi5cclxuICAgKiBAaGlkZGVuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgb3BlbldpbmRvdyh1cmxOYXZpZ2F0ZTogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBpbnRlcnZhbDogbnVtYmVyLCBpbnN0YW5jZTogdGhpcywgcmVzb2x2ZT86IEZ1bmN0aW9uLCByZWplY3Q/OiBGdW5jdGlvbik6IFdpbmRvdyB7XHJcbiAgICB2YXIgcG9wdXBXaW5kb3cgPSB0aGlzLm9wZW5Qb3B1cCh1cmxOYXZpZ2F0ZSwgdGl0bGUsIENvbnN0YW50cy5wb3BVcFdpZHRoLCBDb25zdGFudHMucG9wVXBIZWlnaHQpO1xyXG4gICAgaWYgKHBvcHVwV2luZG93ID09IG51bGwpIHtcclxuICAgICAgaW5zdGFuY2UucExvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICBpbnN0YW5jZS5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKEVycm9yQ29kZXMucG9wVXBXaW5kb3dFcnJvciArIFwiOlwiICsgRXJyb3JEZXNjcmlwdGlvbi5wb3BVcFdpbmRvd0Vycm9yKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgRXJyb3JDb2Rlcy5wb3BVcFdpbmRvd0Vycm9yKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBFcnJvckRlc2NyaXB0aW9uLnBvcFVwV2luZG93RXJyb3IpO1xyXG4gICAgICBpZiAocmVqZWN0KSB7XHJcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMucG9wVXBXaW5kb3dFcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24ucG9wVXBXaW5kb3dFcnJvcik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93Lm9wZW5lZFdpbmRvd3MucHVzaChwb3B1cFdpbmRvdyk7XHJcbiAgICB2YXIgcG9sbFRpbWVyID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgaWYgKHBvcHVwV2luZG93ICYmIHBvcHVwV2luZG93LmNsb3NlZCAmJiBpbnN0YW5jZS5wTG9naW5JblByb2dyZXNzKSB7XHJcbiAgICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMudXNlckNhbmNlbGxlZEVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi51c2VyQ2FuY2VsbGVkRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChwb2xsVGltZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLnBDb25maWcuZnJhbWV3b3JrLmlzQW5ndWxhcikge1xyXG4gICAgICAgICAgdGhpcy5icm9hZGNhc3QoXCJtc2FsOnBvcFVwQ2xvc2VkXCIsIEVycm9yQ29kZXMudXNlckNhbmNlbGxlZEVycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgRXJyb3JEZXNjcmlwdGlvbi51c2VyQ2FuY2VsbGVkRXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnN0YW5jZS5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgaW5zdGFuY2UucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICB2YXIgcG9wVXBXaW5kb3dMb2NhdGlvbiA9IHBvcHVwV2luZG93LmxvY2F0aW9uO1xyXG4gICAgICAgIGlmIChwb3BVcFdpbmRvd0xvY2F0aW9uLmhyZWYuaW5kZXhPZih0aGlzLmdldFJlZGlyZWN0VXJpKCkpICE9PSAtMSkge1xyXG4gICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcclxuICAgICAgICAgIGluc3RhbmNlLnBMb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgIGluc3RhbmNlLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiQ2xvc2luZyBwb3B1cCB3aW5kb3dcIik7XHJcbiAgICAgICAgICBpZiAodGhpcy5wQ29uZmlnLmZyYW1ld29yay5pc0FuZ3VsYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3QoXCJtc2FsOnBvcFVwSGFzaENoYW5nZWRcIiwgcG9wVXBXaW5kb3dMb2NhdGlvbi5oYXNoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5kb3cub3BlbmVkV2luZG93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5vcGVuZWRXaW5kb3dzW2ldLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvL0Nyb3NzIERvbWFpbiB1cmwgY2hlY2sgZXJyb3IuIFdpbGwgYmUgdGhyb3duIHVudGlsIEFBRCByZWRpcmVjdHMgdGhlIHVzZXIgYmFjayB0byB0aGUgYXBwXCJzIHJvb3QgcGFnZSB3aXRoIHRoZSB0b2tlbi4gTm8gbmVlZCB0byBsb2cgb3IgdGhyb3cgdGhpcyBlcnJvciBhcyBpdCB3aWxsIGNyZWF0ZSB1bm5lY2Vzc2FyeSB0cmFmZmljLlxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgICBpbnRlcnZhbCk7XHJcblxyXG4gICAgcmV0dXJuIHBvcHVwV2luZG93O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBicm9hZGNhc3QoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IHN0cmluZykge1xyXG4gICAgdmFyIGV2dCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsgZGV0YWlsOiBkYXRhIH0pO1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBsb2cgb3V0IHRoZSBjdXJyZW50IHVzZXIsIGFuZCByZWRpcmVjdCB0aGUgdXNlciB0byB0aGUgcG9zdExvZ291dFJlZGlyZWN0VXJpLlxyXG4gICAqIERlZmF1bHRzIGJlaGF2aW91ciBpcyB0byByZWRpcmVjdCB0aGUgdXNlciB0byBgd2luZG93LmxvY2F0aW9uLmhyZWZgLlxyXG4gICAqL1xyXG4gIGxvZ291dCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xyXG4gICAgdGhpcy5wQWNjb3VudCA9IG51bGw7XHJcbiAgICBsZXQgbG9nb3V0ID0gXCJcIjtcclxuICAgIGlmICh0aGlzLmdldFBvc3RMb2dvdXRSZWRpcmVjdFVyaSgpKSB7XHJcbiAgICAgIGxvZ291dCA9IFwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZ2V0UG9zdExvZ291dFJlZGlyZWN0VXJpKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVybE5hdmlnYXRlID0gdGhpcy5hdXRob3JpdHkgKyBcIi9vYXV0aDIvdjIuMC9sb2dvdXQ/XCIgKyBsb2dvdXQ7XHJcbiAgICB0aGlzLnByb21wdFVzZXIodXJsTmF2aWdhdGUpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIGNvbmZpZ3VyZSB0aGUgcG9wdXAgd2luZG93IGZvciBsb2dpbi5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBjbGVhckNhY2hlKCk6IHZvaWQge1xyXG4gICAgd2luZG93LnJlbmV3U3RhdGVzID0gW107XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbkl0ZW1zID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2VucyhDb25zdGFudHMuY2xpZW50SWQsIENvbnN0YW50cy51c2VySWRlbnRpZmllcik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5JdGVtc1tpXS5rZXkpKTtcclxuICAgIH1cclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5yZXNldENhY2hlSXRlbXMoKTtcclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGNsZWFyQ2FjaGVGb3JTY29wZShhY2Nlc3NUb2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbkl0ZW1zID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2VucyhDb25zdGFudHMuY2xpZW50SWQsIENvbnN0YW50cy51c2VySWRlbnRpZmllcik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHRva2VuID0gYWNjZXNzVG9rZW5JdGVtc1tpXTtcclxuICAgICAgaWYgKHRva2VuLnZhbHVlLmFjY2Vzc1Rva2VuID09PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KHRva2VuLmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLypcclxuICAgKiBDb25maWd1cmVzIHBvcHVwIHdpbmRvdyBmb3IgbG9naW4uXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIG9wZW5Qb3B1cCh1cmxOYXZpZ2F0ZTogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBwb3BVcFdpZHRoOiBudW1iZXIsIHBvcFVwSGVpZ2h0OiBudW1iZXIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8qXHJcbiAgICAgICAqIGFkZGluZyB3aW5MZWZ0IGFuZCB3aW5Ub3AgdG8gYWNjb3VudCBmb3IgZHVhbCBtb25pdG9yXHJcbiAgICAgICAqIHVzaW5nIHNjcmVlbkxlZnQgYW5kIHNjcmVlblRvcCBmb3IgSUU4IGFuZCBlYXJsaWVyXHJcbiAgICAgICAqL1xyXG4gICAgICBjb25zdCB3aW5MZWZ0ID0gd2luZG93LnNjcmVlbkxlZnQgPyB3aW5kb3cuc2NyZWVuTGVmdCA6IHdpbmRvdy5zY3JlZW5YO1xyXG4gICAgICBjb25zdCB3aW5Ub3AgPSB3aW5kb3cuc2NyZWVuVG9wID8gd2luZG93LnNjcmVlblRvcCA6IHdpbmRvdy5zY3JlZW5ZO1xyXG4gICAgICAvKlxyXG4gICAgICAgKiB3aW5kb3cuaW5uZXJXaWR0aCBkaXNwbGF5cyBicm93c2VyIHdpbmRvd1wicyBoZWlnaHQgYW5kIHdpZHRoIGV4Y2x1ZGluZyB0b29sYmFyc1xyXG4gICAgICAgKiB1c2luZyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggZm9yIElFOCBhbmQgZWFybGllclxyXG4gICAgICAgKi9cclxuICAgICAgY29uc3Qgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIGNvbnN0IGxlZnQgPSAoKHdpZHRoIC8gMikgLSAocG9wVXBXaWR0aCAvIDIpKSArIHdpbkxlZnQ7XHJcbiAgICAgIGNvbnN0IHRvcCA9ICgoaGVpZ2h0IC8gMikgLSAocG9wVXBIZWlnaHQgLyAyKSkgKyB3aW5Ub3A7XHJcblxyXG4gICAgICBjb25zdCBwb3B1cFdpbmRvdyA9IHdpbmRvdy5vcGVuKHVybE5hdmlnYXRlLCB0aXRsZSwgXCJ3aWR0aD1cIiArIHBvcFVwV2lkdGggKyBcIiwgaGVpZ2h0PVwiICsgcG9wVXBIZWlnaHQgKyBcIiwgdG9wPVwiICsgdG9wICsgXCIsIGxlZnQ9XCIgKyBsZWZ0KTtcclxuICAgICAgaWYgKHBvcHVwV2luZG93LmZvY3VzKSB7XHJcbiAgICAgICAgcG9wdXBXaW5kb3cuZm9jdXMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBvcHVwV2luZG93O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcImVycm9yIG9wZW5pbmcgcG9wdXAgXCIgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICB0aGlzLnBMb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byB2YWxpZGF0ZSB0aGUgc2NvcGVzIGlucHV0IHBhcmFtZXRlciByZXF1ZXN0ZWQgIGJ5IHRoZSBkZXZlbG9wZXIuXHJcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBzY29wZXMgLSBEZXZlbG9wZXIgcmVxdWVzdGVkIHBlcm1pc3Npb25zLiBOb3QgYWxsIHNjb3BlcyBhcmUgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuIHJldHVybmVkLlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogc3RyaW5nIHtcclxuICAgIGlmICghc2NvcGVzIHx8IHNjb3Blcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgIHJldHVybiBcIlNjb3BlcyBjYW5ub3QgYmUgcGFzc2VkIGFzIGFuIGVtcHR5IGFycmF5XCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjb3BlcykpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGRvZXMgbm90IGFjY2VwdCBub24tYXJyYXkgc2NvcGVzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICByZXR1cm4gXCJDbGllbnRJZCBjYW4gb25seSBiZSBwcm92aWRlZCBhcyBhIHNpbmdsZSBzY29wZVwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICAqIFVzZWQgdG8gcmVtb3ZlIG9wZW5pZCBhbmQgcHJvZmlsZSBmcm9tIHRoZSBsaXN0IG9mIHNjb3BlcyBwYXNzZWQgYnkgdGhlIGRldmVsb3Blci5UaGVzZSBzY29wZXMgYXJlIGFkZGVkIGJ5IGRlZmF1bHRcclxuICAgICogQGhpZGRlblxyXG4gICAgKi9cclxuICBwcml2YXRlIGZpbHRlclNjb3BlcyhzY29wZXM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcclxuICAgIHNjb3BlcyA9IHNjb3Blcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQgIT09IFwib3BlbmlkXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzY29wZXMgPSBzY29wZXMuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50ICE9PSBcInByb2ZpbGVcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBzY29wZXM7XHJcbiAgfVxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBhZGQgdGhlIGRldmVsb3BlciByZXF1ZXN0ZWQgY2FsbGJhY2sgdG8gdGhlIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCBzY29wZXMuIFRoZSB1cGRhdGVkIGFycmF5IGlzIHN0b3JlZCBvbiB0aGUgd2luZG93IG9iamVjdFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzY29wZSAtIERldmVsb3BlciByZXF1ZXN0ZWQgcGVybWlzc2lvbnMuIE5vdCBhbGwgc2NvcGVzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4gcmV0dXJuZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4cGVjdGVkU3RhdGUgLSBVbmlxdWUgc3RhdGUgaWRlbnRpZmllciAoZ3VpZCkuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSAtIFRoZSByZXNvbHZlIGZ1bmN0aW9uIG9mIHRoZSBwcm9taXNlIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgLSBUaGUgcmVqZWN0IGZ1bmN0aW9uIG9mIHRoZSBwcm9taXNlIG9iamVjdC5cclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVnaXN0ZXJDYWxsYmFjayhleHBlY3RlZFN0YXRlOiBzdHJpbmcsIHNjb3BlOiBzdHJpbmcsIHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdID0gZXhwZWN0ZWRTdGF0ZTtcclxuICAgIGlmICghd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0pIHtcclxuICAgICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0gPSBbXTtcclxuICAgIH1cclxuICAgIHdpbmRvdy5jYWxsQmFja3NNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdLnB1c2goeyByZXNvbHZlOiByZXNvbHZlLCByZWplY3Q6IHJlamVjdCB9KTtcclxuICAgIGlmICghd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSkge1xyXG4gICAgICB3aW5kb3cuY2FsbEJhY2tNYXBwZWRUb1JlbmV3U3RhdGVzW2V4cGVjdGVkU3RhdGVdID1cclxuICAgICAgICAoZXJyb3JEZXNjOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsIGVycm9yOiBzdHJpbmcsIHRva2VuVHlwZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cuYWN0aXZlUmVuZXdhbHNbc2NvcGVdID0gbnVsbDtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBpZiAoZXJyb3JEZXNjIHx8IGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2FsbEJhY2tzTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXVtpXS5yZWplY3QoZXJyb3JEZXNjICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgZXJyb3IpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV1baV0ucmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgd2luZG93LmNhbGxCYWNrc01hcHBlZFRvUmVuZXdTdGF0ZXNbZXhwZWN0ZWRTdGF0ZV0gPSBudWxsO1xyXG4gICAgICAgICAgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSA9IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0Q2FjaGVkVG9rZW5JbnRlcm5hbChzY29wZXM6IEFycmF5PHN0cmluZz4sIGFjY291bnQ6IEFjY291bnQpOiBDYWNoZVJlc3VsdCB7XHJcbiAgICBjb25zdCB1c2VyT2JqZWN0ID0gYWNjb3VudCA/IGFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgIGlmICghdXNlck9iamVjdCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnM7XHJcbiAgICBsZXQgbmV3QXV0aG9yaXR5ID0gdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA/IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UgOiBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKHRoaXMuYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcblxyXG4gICAgaWYgKFV0aWxzLmNvbXBhcmVPYmplY3RzKHVzZXJPYmplY3QsIHRoaXMuZ2V0QWNjb3VudCgpKSkge1xyXG4gICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhuZXdBdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy50b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKG5ld0F1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGVkVG9rZW4oYXV0aGVudGljYXRpb25SZXF1ZXN0LCBhY2NvdW50KTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogVXNlZCB0byBnZXQgdG9rZW4gZm9yIHRoZSBzcGVjaWZpZWQgc2V0IG9mIHNjb3BlcyBmcm9tIHRoZSBjYWNoZVxyXG4gICAqIEBwYXJhbSB7QXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVyc30gYXV0aGVudGljYXRpb25SZXF1ZXN0IC0gUmVxdWVzdCBzZW50IHRvIHRoZSBTVFMgdG8gb2J0YWluIGFuIGlkX3Rva2VuL2FjY2Vzc190b2tlblxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFVzZXIgZm9yIHdoaWNoIHRoZSBzY29wZXMgd2VyZSByZXF1ZXN0ZWRcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRDYWNoZWRUb2tlbihhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMsIGFjY291bnQ6IEFjY291bnQpOiBDYWNoZVJlc3VsdCB7XHJcbiAgICBsZXQgYWNjZXNzVG9rZW5DYWNoZUl0ZW06IEFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gbnVsbDtcclxuICAgIGNvbnN0IHNjb3BlcyA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zY29wZXM7XHJcbiAgICBjb25zdCB0b2tlbkNhY2hlSXRlbXMgPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0QWxsQWNjZXNzVG9rZW5zKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBhY2NvdW50ID8gYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXIgOiBudWxsKTsgLy9maWx0ZXIgYnkgY2xpZW50SWQgYW5kIHVzZXJcclxuICAgIGlmICh0b2tlbkNhY2hlSXRlbXMubGVuZ3RoID09PSAwKSB7IC8vIE5vIG1hdGNoIGZvdW5kIGFmdGVyIGluaXRpYWwgZmlsdGVyaW5nXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbHRlcmVkSXRlbXM6IEFycmF5PEFjY2Vzc1Rva2VuQ2FjaGVJdGVtPiA9IFtdO1xyXG4gICAgLy9pZiBubyBhdXRob3JpdHkgcGFzc2VkXHJcbiAgICBpZiAoIWF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpIHtcclxuICAgICAgLy9maWx0ZXIgYnkgc2NvcGVcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbkNhY2hlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0b2tlbkNhY2hlSXRlbXNbaV07XHJcbiAgICAgICAgY29uc3QgY2FjaGVkU2NvcGVzID0gY2FjaGVJdGVtLmtleS5zY29wZXMuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5jb250YWluc1Njb3BlKGNhY2hlZFNjb3Blcywgc2NvcGVzKSkge1xyXG4gICAgICAgICAgZmlsdGVyZWRJdGVtcy5wdXNoKGNhY2hlSXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2lmIG9ubHkgb25lIGNhY2hlZCB0b2tlbiBmb3VuZFxyXG4gICAgICBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGZpbHRlcmVkSXRlbXNbMF07XHJcblxyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHlJbnN0YW5jZSA9IEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5LmF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBlcnJvckRlc2M6IFwiVGhlIGNhY2hlIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucyBzYXRpc2Z5aW5nIHRoZSByZXF1aXJlbWVudHMuIENhbGwgQWNxdWlyZVRva2VuIGFnYWluIHByb3ZpZGluZyBtb3JlIHJlcXVpcmVtZW50cyBsaWtlIGF1dGhvcml0eVwiLFxyXG4gICAgICAgICAgdG9rZW46IG51bGwsXHJcbiAgICAgICAgICBlcnJvcjogXCJtdWx0aXBsZV9tYXRjaGluZ190b2tlbnNfZGV0ZWN0ZWRcIlxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgLy9ubyBtYXRjaCBmb3VuZC4gY2hlY2sgaWYgdGhlcmUgd2FzIGEgc2luZ2xlIGF1dGhvcml0eSB1c2VkXHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5TGlzdCA9IHRoaXMuZ2V0VW5pcXVlQXV0aG9yaXR5KHRva2VuQ2FjaGVJdGVtcywgXCJhdXRob3JpdHlcIik7XHJcbiAgICAgICAgaWYgKGF1dGhvcml0eUxpc3QubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyb3JEZXNjOiBcIk11bHRpcGxlIGF1dGhvcml0aWVzIGZvdW5kIGluIHRoZSBjYWNoZS4gUGFzcyBhdXRob3JpdHkgaW4gdGhlIEFQSSBvdmVybG9hZC5cIixcclxuICAgICAgICAgICAgdG9rZW46IG51bGwsXHJcbiAgICAgICAgICAgIGVycm9yOiBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc19kZXRlY3RlZFwiXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHlMaXN0WzBdLCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvL2F1dGhvcml0eSB3YXMgcGFzc2VkIGluIHRoZSBBUEksIGZpbHRlciBieSBhdXRob3JpdHkgYW5kIHNjb3BlXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5DYWNoZUl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2FjaGVJdGVtID0gdG9rZW5DYWNoZUl0ZW1zW2ldO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlZFNjb3BlcyA9IGNhY2hlSXRlbS5rZXkuc2NvcGVzLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICBpZiAoVXRpbHMuY29udGFpbnNTY29wZShjYWNoZWRTY29wZXMsIHNjb3BlcykgJiYgY2FjaGVJdGVtLmtleS5hdXRob3JpdHkgPT09IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpIHtcclxuICAgICAgICAgIGZpbHRlcmVkSXRlbXMucHVzaChjYWNoZUl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy9ubyBtYXRjaFxyXG4gICAgICBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICAvL29ubHkgb25lIGNhY2hlZFRva2VuIEZvdW5kXHJcbiAgICAgIGVsc2UgaWYgKGZpbHRlcmVkSXRlbXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW5DYWNoZUl0ZW0gPSBmaWx0ZXJlZEl0ZW1zWzBdO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIC8vbW9yZSB0aGFuIG9uZSBtYXRjaCBmb3VuZC5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgZXJyb3JEZXNjOiBcIlRoZSBjYWNoZSBjb250YWlucyBtdWx0aXBsZSB0b2tlbnMgc2F0aXNmeWluZyB0aGUgcmVxdWlyZW1lbnRzLkNhbGwgQWNxdWlyZVRva2VuIGFnYWluIHByb3ZpZGluZyBtb3JlIHJlcXVpcmVtZW50cyBsaWtlIGF1dGhvcml0eVwiLFxyXG4gICAgICAgICAgdG9rZW46IG51bGwsXHJcbiAgICAgICAgICBlcnJvcjogXCJtdWx0aXBsZV9tYXRjaGluZ190b2tlbnNfZGV0ZWN0ZWRcIlxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWNjZXNzVG9rZW5DYWNoZUl0ZW0gIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBleHBpcmVkID0gTnVtYmVyKGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLnZhbHVlLmV4cGlyZXNJbik7XHJcbiAgICAgIC8vIElmIGV4cGlyYXRpb24gaXMgd2l0aGluIG9mZnNldCwgaXQgd2lsbCBmb3JjZSByZW5ld1xyXG4gICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLnBDb25maWcuc3lzdGVtLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMgfHwgMzAwO1xyXG4gICAgICBpZiAoZXhwaXJlZCAmJiAoZXhwaXJlZCA+IFV0aWxzLm5vdygpICsgb2Zmc2V0KSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBlcnJvckRlc2M6IG51bGwsXHJcbiAgICAgICAgICB0b2tlbjogYWNjZXNzVG9rZW5DYWNoZUl0ZW0udmFsdWUuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnJlbW92ZUl0ZW0oSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRJdGVtc1swXS5rZXkpKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gZmlsdGVyIGFsbCBjYWNoZWQgaXRlbXMgYW5kIHJldHVybiBhIGxpc3Qgb2YgdW5pcXVlIHVzZXJzIGJhc2VkIG9uIHVzZXJJZGVudGlmaWVyLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8VXNlcj59IFVzZXJzIC0gdXNlcnMgc2F2ZWQgaW4gdGhlIGNhY2hlLlxyXG4gICAqL1xyXG4gIGdldEFsbEFjY291bnRzKCk6IEFycmF5PEFjY291bnQ+IHtcclxuICAgIGNvbnN0IGFjY291bnRzOiBBcnJheTxBY2NvdW50PiA9IFtdO1xyXG4gICAgY29uc3QgYWNjZXNzVG9rZW5DYWNoZUl0ZW1zID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2VucyhDb25zdGFudHMuY2xpZW50SWQsIENvbnN0YW50cy51c2VySWRlbnRpZmllcik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBpZFRva2VuID0gbmV3IElkVG9rZW4oYWNjZXNzVG9rZW5DYWNoZUl0ZW1zW2ldLnZhbHVlLmlkVG9rZW4pO1xyXG4gICAgICBjb25zdCBjbGllbnRJbmZvID0gbmV3IEhvbWVBY2NvdW50SWRlbnRpZmllcihhY2Nlc3NUb2tlbkNhY2hlSXRlbXNbaV0udmFsdWUuY2xpZW50SW5mbyk7XHJcbiAgICAgIGNvbnN0IGFjY291bnQgPSBBY2NvdW50LmNyZWF0ZUFjY291bnQoaWRUb2tlbiwgY2xpZW50SW5mbyk7XHJcbiAgICAgIGFjY291bnRzLnB1c2goYWNjb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0VW5pcXVlQWNjb3VudHMoYWNjb3VudHMpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIGZpbHRlciB1c2VycyBiYXNlZCBvbiB1c2VySWRlbnRpZmllclxyXG4gICAqIEBwYXJhbSB7QXJyYXk8VXNlcj59ICBVc2VycyAtIHVzZXJzIHNhdmVkIGluIHRoZSBjYWNoZVxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRVbmlxdWVBY2NvdW50cyhhY2NvdW50czogQXJyYXk8QWNjb3VudD4pOiBBcnJheTxBY2NvdW50PiB7XHJcbiAgICBpZiAoIWFjY291bnRzIHx8IGFjY291bnRzLmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgIHJldHVybiBhY2NvdW50cztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmbGFnczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgY29uc3QgdW5pcXVlVXNlcnM6IEFycmF5PEFjY291bnQ+ID0gW107XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYWNjb3VudHMubGVuZ3RoOyArK2luZGV4KSB7XHJcbiAgICAgIGlmIChhY2NvdW50c1tpbmRleF0uaG9tZUFjY291bnRJZGVudGlmaWVyICYmIGZsYWdzLmluZGV4T2YoYWNjb3VudHNbaW5kZXhdLmhvbWVBY2NvdW50SWRlbnRpZmllcikgPT09IC0xKSB7XHJcbiAgICAgICAgZmxhZ3MucHVzaChhY2NvdW50c1tpbmRleF0uaG9tZUFjY291bnRJZGVudGlmaWVyKTtcclxuICAgICAgICB1bmlxdWVVc2Vycy5wdXNoKGFjY291bnRzW2luZGV4XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5pcXVlVXNlcnM7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICogVXNlZCB0byBnZXQgYSB1bmlxdWUgbGlzdCBvZiBhdXRob3JpdHVlcyBmcm9tIHRoZSBjYWNoZVxyXG4gICogQHBhcmFtIHtBcnJheTxBY2Nlc3NUb2tlbkNhY2hlSXRlbT59ICBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgLSBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMgc2F2ZWQgaW4gdGhlIGNhY2hlXHJcbiAgKiBAaWdub3JlXHJcbiAgKiBAaGlkZGVuXHJcbiAgKi9cclxuICBwcml2YXRlIGdldFVuaXF1ZUF1dGhvcml0eShhY2Nlc3NUb2tlbkNhY2hlSXRlbXM6IEFycmF5PEFjY2Vzc1Rva2VuQ2FjaGVJdGVtPiwgcHJvcGVydHk6IHN0cmluZyk6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgY29uc3QgYXV0aG9yaXR5TGlzdDogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgY29uc3QgZmxhZ3M6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICBpZiAoZWxlbWVudC5rZXkuaGFzT3duUHJvcGVydHkocHJvcGVydHkpICYmIChmbGFncy5pbmRleE9mKGVsZW1lbnQua2V5W3Byb3BlcnR5XSkgPT09IC0xKSkge1xyXG4gICAgICAgIGZsYWdzLnB1c2goZWxlbWVudC5rZXlbcHJvcGVydHldKTtcclxuICAgICAgICBhdXRob3JpdHlMaXN0LnB1c2goZWxlbWVudC5rZXlbcHJvcGVydHldKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXV0aG9yaXR5TGlzdDtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogQWRkcyBsb2dpbl9oaW50IHRvIGF1dGhvcml6YXRpb24gVVJMIHdoaWNoIGlzIHVzZWQgdG8gcHJlLWZpbGwgdGhlIHVzZXJuYW1lIGZpZWxkIG9mIHNpZ24gaW4gcGFnZSBmb3IgdGhlIHVzZXIgaWYga25vd24gYWhlYWQgb2YgdGltZVxyXG4gICAqIGRvbWFpbl9oaW50IGNhbiBiZSBvbmUgb2YgdXNlcnMvb3JnYW5pc2F0aW9ucyB3aGljaCB3aGVuIGFkZGVkIHNraXBzIHRoZSBlbWFpbCBiYXNlZCBkaXNjb3ZlcnkgcHJvY2VzcyBvZiB0aGUgdXNlclxyXG4gICAqIGRvbWFpbl9yZXEgdXRpZCByZWNlaXZlZCBhcyBwYXJ0IG9mIHRoZSBjbGllbnRJbmZvXHJcbiAgICogbG9naW5fcmVxIHVpZCByZWNlaXZlZCBhcyBwYXJ0IG9mIGNsaWVudEluZm9cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsTmF2aWdhdGUgLSBBdXRoZW50aWNhdGlvbiByZXF1ZXN0IHVybFxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFVzZXIgZm9yIHdoaWNoIHRoZSB0b2tlbiBpcyByZXF1ZXN0ZWRcclxuICAgKiBAaWdub3JlXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGU6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBhY2NvdW50T2JqID0gYWNjb3VudCA/IGFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgIGlmIChhY2NvdW50T2JqKSB7XHJcbiAgICAgIGNvbnN0IGRlY29kZWRDbGllbnRJbmZvID0gYWNjb3VudE9iai5ob21lQWNjb3VudElkZW50aWZpZXIuc3BsaXQoXCIuXCIpO1xyXG4gICAgICBjb25zdCB1aWQgPSBVdGlscy5iYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKGRlY29kZWRDbGllbnRJbmZvWzBdKTtcclxuICAgICAgY29uc3QgdXRpZCA9IFV0aWxzLmJhc2U2NERlY29kZVN0cmluZ1VybFNhZmUoZGVjb2RlZENsaWVudEluZm9bMV0pO1xyXG5cclxuICAgICAgaWYgKGFjY291bnRPYmouc2lkICYmIHVybE5hdmlnYXRlLmluZGV4T2YoQ29uc3RhbnRzLnByb21wdF9ub25lKSAhPT0gLTEpIHtcclxuICAgICAgICBpZiAoIXRoaXMudXJsQ29udGFpbnNRdWVyeVN0cmluZ1BhcmFtZXRlcihDb25zdGFudHMuc2lkLCB1cmxOYXZpZ2F0ZSkgJiYgIXRoaXMudXJsQ29udGFpbnNRdWVyeVN0cmluZ1BhcmFtZXRlcihDb25zdGFudHMubG9naW5faGludCwgdXJsTmF2aWdhdGUpKSB7XHJcbiAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZcIiArIENvbnN0YW50cy5zaWQgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhY2NvdW50T2JqLnNpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICghdGhpcy51cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKENvbnN0YW50cy5sb2dpbl9oaW50LCB1cmxOYXZpZ2F0ZSkgJiYgYWNjb3VudE9iai51c2VyTmFtZSAmJiAhVXRpbHMuaXNFbXB0eShhY2NvdW50T2JqLnVzZXJOYW1lKSkge1xyXG4gICAgICAgICAgdXJsTmF2aWdhdGUgKz0gXCImXCIgKyBDb25zdGFudHMubG9naW5faGludCArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGFjY291bnRPYmoudXNlck5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFVdGlscy5pc0VtcHR5KHVpZCkgJiYgIVV0aWxzLmlzRW1wdHkodXRpZCkpIHtcclxuICAgICAgICBpZiAoIXRoaXMudXJsQ29udGFpbnNRdWVyeVN0cmluZ1BhcmFtZXRlcihcImRvbWFpbl9yZXFcIiwgdXJsTmF2aWdhdGUpICYmICFVdGlscy5pc0VtcHR5KHV0aWQpKSB7XHJcbiAgICAgICAgICB1cmxOYXZpZ2F0ZSArPSBcIiZkb21haW5fcmVxPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHV0aWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnVybENvbnRhaW5zUXVlcnlTdHJpbmdQYXJhbWV0ZXIoXCJsb2dpbl9yZXFcIiwgdXJsTmF2aWdhdGUpICYmICFVdGlscy5pc0VtcHR5KHVpZCkpIHtcclxuICAgICAgICAgIHVybE5hdmlnYXRlICs9IFwiJmxvZ2luX3JlcT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh1aWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMudXJsQ29udGFpbnNRdWVyeVN0cmluZ1BhcmFtZXRlcihDb25zdGFudHMuZG9tYWluX2hpbnQsIHVybE5hdmlnYXRlKSAmJiAhVXRpbHMuaXNFbXB0eSh1dGlkKSkge1xyXG4gICAgICAgIGlmICh1dGlkID09PSBDb25zdGFudHMuY29uc3VtZXJzVXRpZCkge1xyXG4gICAgICAgICAgdXJsTmF2aWdhdGUgKz0gXCImXCIgKyBDb25zdGFudHMuZG9tYWluX2hpbnQgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChDb25zdGFudHMuY29uc3VtZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdXJsTmF2aWdhdGUgKz0gXCImXCIgKyBDb25zdGFudHMuZG9tYWluX2hpbnQgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChDb25zdGFudHMub3JnYW5pemF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1cmxOYXZpZ2F0ZTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogQ2hlY2tzIGlmIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50IFVSTCBjb250YWlucyBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyc1xyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cmxDb250YWluc1F1ZXJ5U3RyaW5nUGFyYW1ldGVyKG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIC8vIHJlZ2V4IHRvIGRldGVjdCBwYXR0ZXJuIG9mIGEgPyBvciAmIGZvbGxvd2VkIGJ5IHRoZSBuYW1lIHBhcmFtZXRlciBhbmQgYW4gZXF1YWxzIGNoYXJhY3RlclxyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKFwiW1xcXFw/Jl1cIiArIG5hbWUgKyBcIj1cIik7XHJcbiAgICByZXR1cm4gcmVnZXgudGVzdCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIG9idGFpbiBhbiBhY2Nlc3NfdG9rZW4gYnkgcmVkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQuXHJcbiAgICogVG8gcmVuZXcgaWRUb2tlbiwgY2xpZW50SWQgc2hvdWxkIGJlIHBhc3NlZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXR5IC0gQSBVUkwgaW5kaWNhdGluZyBhIGRpcmVjdG9yeSB0aGF0IE1TQUwgY2FuIHVzZSB0byBvYnRhaW4gdG9rZW5zLlxyXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8ve2luc3RhbmNlfS8mbHQ7dGVuYW50Jmd0Oywgd2hlcmUgJmx0O3RlbmFudCZndDsgaXMgdGhlIGRpcmVjdG9yeSBob3N0IChlLmcuIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbSkgYW5kICZsdDt0ZW5hbnQmZ3Q7IGlzIGEgaWRlbnRpZmllciB3aXRoaW4gdGhlIGRpcmVjdG9yeSBpdHNlbGYgKGUuZy4gYSBkb21haW4gYXNzb2NpYXRlZCB0byB0aGUgdGVuYW50LCBzdWNoIGFzIGNvbnRvc28ub25taWNyb3NvZnQuY29tLCBvciB0aGUgR1VJRCByZXByZXNlbnRpbmcgdGhlIFRlbmFudElEIHByb3BlcnR5IG9mIHRoZSBkaXJlY3RvcnkpXHJcbiAgICogLSBJbiBBenVyZSBCMkMsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8ve2luc3RhbmNlfS90ZnAvJmx0O3RlbmFudCZndDsvPHBvbGljeU5hbWU+XHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0aGUgc2NvcGVzIGFyZSByZXF1ZXN0ZWQuVGhlIGRlZmF1bHQgdXNlciBpcyB0aGUgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqL1xyXG4gIGFjcXVpcmVUb2tlblJlZGlyZWN0KHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZyk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCwgZXh0cmFRdWVyeVBhcmFtZXRlcnM6IHN0cmluZyk6IHZvaWQ7XHJcbiAgYWNxdWlyZVRva2VuUmVkaXJlY3Qoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk/OiBzdHJpbmcsIGFjY291bnQ/OiBBY2NvdW50LCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcclxuICAgIGlmIChpc1ZhbGlkU2NvcGUgJiYgIVV0aWxzLmlzRW1wdHkoaXNWYWxpZFNjb3BlKSkge1xyXG4gICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24uaW5wdXRTY29wZXNFcnJvciwgbnVsbCwgRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yLCBDb25zdGFudHMuYWNjZXNzVG9rZW4sIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUxvZ2luLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgIHNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKHNjb3Blcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudE9iamVjdCA9IGFjY291bnQgPyBhY2NvdW50IDogdGhpcy5nZXRBY2NvdW50KCk7XHJcbiAgICBpZiAodGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICghYWNjb3VudE9iamVjdCAmJiAhKGV4dHJhUXVlcnlQYXJhbWV0ZXJzICYmIChleHRyYVF1ZXJ5UGFyYW1ldGVycy5pbmRleE9mKENvbnN0YW50cy5sb2dpbl9oaW50KSAhPT0gLTEpKSkge1xyXG4gICAgICBpZiAodGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlVzZXIgbG9naW4gaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgdGhpcy5wVG9rZW5SZWNlaXZlZENhbGxiYWNrKEVycm9yRGVzY3JpcHRpb24udXNlckxvZ2luRXJyb3IsIG51bGwsIEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IsIENvbnN0YW50cy5hY2Nlc3NUb2tlbiwgdGhpcy5nZXRBY2NvdW50U3RhdGUodGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLnN0YXRlTG9naW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgbGV0IGF1dGhlbnRpY2F0aW9uUmVxdWVzdDogQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycztcclxuICAgIGxldCBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSBhdXRob3JpdHkgPyBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpIDogdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcclxuXHJcbiAgICBhY3F1aXJlVG9rZW5BdXRob3JpdHkuUmVzb2x2ZUVuZHBvaW50c0FzeW5jKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICBpZiAoc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEpIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0ID0gbmV3IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMoYWNxdWlyZVRva2VuQXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSk7XHJcbiAgICAgIHZhciBhY3F1aXJlVG9rZW5Vc2VyS2V5O1xyXG4gICAgICBpZiAoYWNjb3VudE9iamVjdCkge1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGFjY291bnRPYmplY3QuaG9tZUFjY291bnRJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhY3F1aXJlVG9rZW5Vc2VyS2V5LCBKU09OLnN0cmluZ2lmeShhY2NvdW50T2JqZWN0KSk7XHJcbiAgICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGF1dGhvcml0eUtleSwgYWNxdWlyZVRva2VuQXV0aG9yaXR5LkNhbm9uaWNhbEF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHVybE5hdmlnYXRlID0gYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcykgKyBDb25zdGFudHMucmVzcG9uc2VfbW9kZV9mcmFnbWVudDtcclxuICAgICAgdXJsTmF2aWdhdGUgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlLCBhY2NvdW50T2JqZWN0KTtcclxuICAgICAgaWYgKHVybE5hdmlnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnN0YXRlQWNxdWlyZVRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmxOYXZpZ2F0ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBVc2VkIHRvIGFjcXVpcmUgYW4gYWNjZXNzIHRva2VuIGZvciBhIG5ldyB1c2VyIHVzaW5nIGludGVyYWN0aXZlIGF1dGhlbnRpY2F0aW9uIHZpYSBhIHBvcHVwIFdpbmRvdy5cclxuICAgKiBUbyByZXF1ZXN0IGFuIGlkX3Rva2VuLCBwYXNzIHRoZSBjbGllbnRJZCBhcyB0aGUgb25seSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2NvcGVzIC0gUGVybWlzc2lvbnMgeW91IHdhbnQgaW5jbHVkZWQgaW4gdGhlIGFjY2VzcyB0b2tlbi4gTm90IGFsbCBzY29wZXMgYXJlICBndWFyYW50ZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIFNjb3BlcyBsaWtlIFwib3BlbmlkXCIgYW5kIFwicHJvZmlsZVwiIGFyZSBzZW50IHdpdGggZXZlcnkgcmVxdWVzdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXR5IC0gQSBVUkwgaW5kaWNhdGluZyBhIGRpcmVjdG9yeSB0aGF0IE1TQUwgY2FuIHVzZSB0byBvYnRhaW4gdG9rZW5zLlxyXG4gICAqIC0gSW4gQXp1cmUgQUQsIGl0IGlzIG9mIHRoZSBmb3JtIGh0dHBzOi8vJmx0O3RlbmFudCZndDsvJmx0O3RlbmFudCZndDssIHdoZXJlICZsdDt0ZW5hbnQmZ3Q7IGlzIHRoZSBkaXJlY3RvcnkgaG9zdCAoZS5nLiBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20pIGFuZCAmbHQ7dGVuYW50Jmd0OyBpcyBhIGlkZW50aWZpZXIgd2l0aGluIHRoZSBkaXJlY3RvcnkgaXRzZWxmIChlLmcuIGEgZG9tYWluIGFzc29jaWF0ZWQgdG8gdGhlIHRlbmFudCwgc3VjaCBhcyBjb250b3NvLm9ubWljcm9zb2Z0LmNvbSwgb3IgdGhlIEdVSUQgcmVwcmVzZW50aW5nIHRoZSBUZW5hbnRJRCBwcm9wZXJ0eSBvZiB0aGUgZGlyZWN0b3J5KVxyXG4gICAqIC0gSW4gQXp1cmUgQjJDLCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDtpbnN0YW5jZSZndDsvdGZwLyZsdDt0ZW5hbnQmZ3Q7Lzxwb2xpY3lOYW1lPi9cclxuICAgKiAtIERlZmF1bHQgdmFsdWUgaXM6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vblwiLlxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0aGUgc2NvcGVzIGFyZSByZXF1ZXN0ZWQuVGhlIGRlZmF1bHQgdXNlciBpcyB0aGUgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxzdHJpbmc+fSAtIEEgUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmV0dXJucyB0aGUgdG9rZW4gb3IgZXJyb3IuXHJcbiAgICovXHJcbiAgYWNxdWlyZVRva2VuUG9wdXAoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+O1xyXG4gIGFjcXVpcmVUb2tlblBvcHVwKHNjb3BlczogQXJyYXk8c3RyaW5nPiwgYXV0aG9yaXR5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz47XHJcbiAgYWNxdWlyZVRva2VuUG9wdXAoc2NvcGVzOiBBcnJheTxzdHJpbmc+LCBhdXRob3JpdHk6IHN0cmluZywgYWNjb3VudDogQWNjb3VudCk6IFByb21pc2U8c3RyaW5nPjtcclxuICBhY3F1aXJlVG9rZW5Qb3B1cChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eTogc3RyaW5nLCBhY2NvdW50OiBBY2NvdW50LCBleHRyYVF1ZXJ5UGFyYW1ldGVyczogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xyXG4gIGFjcXVpcmVUb2tlblBvcHVwKHNjb3BlczogQXJyYXk8c3RyaW5nPiwgYXV0aG9yaXR5Pzogc3RyaW5nLCBhY2NvdW50PzogQWNjb3VudCwgZXh0cmFRdWVyeVBhcmFtZXRlcnM/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBpc1ZhbGlkU2NvcGUgPSB0aGlzLnZhbGlkYXRlSW5wdXRTY29wZShzY29wZXMpO1xyXG4gICAgICBpZiAoaXNWYWxpZFNjb3BlICYmICFVdGlscy5pc0VtcHR5KGlzVmFsaWRTY29wZSkpIHtcclxuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy5pbnB1dFNjb3Blc0Vycm9yICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgaXNWYWxpZFNjb3BlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNjb3Blcykge1xyXG4gICAgICAgIHNjb3BlcyA9IHRoaXMuZmlsdGVyU2NvcGVzKHNjb3Blcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFjY291bnRPYmplY3QgPSBhY2NvdW50ID8gYWNjb3VudCA6IHRoaXMuZ2V0QWNjb3VudCgpO1xyXG4gICAgICBpZiAodGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcykge1xyXG4gICAgICAgIHJlamVjdChFcnJvckNvZGVzLmFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLmFjcXVpcmVUb2tlblByb2dyZXNzRXJyb3IpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgLy9pZiB1c2VyIGlzIG5vdCBjdXJyZW50bHkgbG9nZ2VkIGluIGFuZCBubyBsb2dpbl9oaW50IGlzIHBhc3NlZFxyXG4gICAgICBpZiAoIWFjY291bnRPYmplY3QgJiYgIShleHRyYVF1ZXJ5UGFyYW1ldGVycyAmJiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMuaW5kZXhPZihDb25zdGFudHMubG9naW5faGludCkgIT09IC0xKSkpIHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiVXNlciBsb2dpbiBpcyByZXF1aXJlZFwiKTtcclxuICAgICAgICByZWplY3QoRXJyb3JDb2Rlcy51c2VyTG9naW5FcnJvciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIEVycm9yRGVzY3JpcHRpb24udXNlckxvZ2luRXJyb3IpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlcXVlc3Q6IEF1dGhlbnRpY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnM7XHJcbiAgICAgIGxldCBhY3F1aXJlVG9rZW5BdXRob3JpdHkgPSBhdXRob3JpdHkgPyBBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpIDogdGhpcy5hdXRob3JpdHlJbnN0YW5jZTtcclxuICAgICAgdmFyIHBvcFVwV2luZG93ID0gdGhpcy5vcGVuV2luZG93KFwiYWJvdXQ6YmxhbmtcIiwgXCJfYmxhbmtcIiwgMSwgdGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgaWYgKCFwb3BVcFdpbmRvdykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWNxdWlyZVRva2VuQXV0aG9yaXR5LlJlc29sdmVFbmRwb2ludHNBc3luYygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhhY3F1aXJlVG9rZW5BdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy50b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKGFjcXVpcmVUb2tlbkF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQsIHNjb3BlcywgUmVzcG9uc2VUeXBlcy5pZF90b2tlbl90b2tlbiwgdGhpcy5nZXRSZWRpcmVjdFVyaSgpLCB0aGlzLnBDb25maWcuYXV0aC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCBhdXRoZW50aWNhdGlvblJlcXVlc3Qubm9uY2UpO1xyXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTtcclxuICAgICAgICBpZiAoYWNjb3VudE9iamVjdCkge1xyXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYWNjb3VudE9iamVjdC5ob21lQWNjb3VudElkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgQ29uc3RhbnRzLm5vX2FjY291bnQgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhY3F1aXJlVG9rZW5Vc2VyS2V5LCBKU09OLnN0cmluZ2lmeShhY2NvdW50T2JqZWN0KSk7XHJcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5DYW5vbmljYWxBdXRob3JpdHksIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuXHJcbiAgICAgICAgaWYgKGV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB1cmxOYXZpZ2F0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5jcmVhdGVOYXZpZ2F0ZVVybChzY29wZXMpICsgQ29uc3RhbnRzLnJlc3BvbnNlX21vZGVfZnJhZ21lbnQ7XHJcbiAgICAgICAgdXJsTmF2aWdhdGUgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlLCBhY2NvdW50T2JqZWN0KTtcclxuICAgICAgICB3aW5kb3cucmVuZXdTdGF0ZXMucHVzaChhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5yZW5ld1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayhhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHNjb3BlLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIGlmIChwb3BVcFdpbmRvdykge1xyXG4gICAgICAgICAgcG9wVXBXaW5kb3cubG9jYXRpb24uaHJlZiA9IHVybE5hdmlnYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0sICgpID0+IHtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgKyBcIjpcIiArIEVycm9yRGVzY3JpcHRpb24uZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3IsIEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IpO1xyXG4gICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgRXJyb3JEZXNjcmlwdGlvbi5lbmRwb2ludFJlc29sdXRpb25FcnJvcik7XHJcbiAgICAgICAgaWYgKHJlamVjdCkge1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBvcFVwV2luZG93KSB7XHJcbiAgICAgICAgICBwb3BVcFdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXCJjb3VsZCBub3QgcmVzb2x2ZSBlbmRwb2ludHNcIik7XHJcbiAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFVzZWQgdG8gZ2V0IHRoZSB0b2tlbiBmcm9tIGNhY2hlLlxyXG4gICAqIE1TQUwgd2lsbCByZXR1cm4gdGhlIGNhY2hlZCB0b2tlbiBpZiBpdCBpcyBub3QgZXhwaXJlZC5cclxuICAgKiBPciBpdCB3aWxsIHNlbmQgYSByZXF1ZXN0IHRvIHRoZSBTVFMgdG8gb2J0YWluIGFuIGFjY2Vzc190b2tlbiB1c2luZyBhIGhpZGRlbiBpZnJhbWUuIFRvIHJlbmV3IGlkVG9rZW4sIGNsaWVudElkIHNob3VsZCBiZSBwYXNzZWQgYXMgdGhlIG9ubHkgc2NvcGUgaW4gdGhlIHNjb3BlcyBhcnJheS5cclxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNjb3BlcyAtIFBlcm1pc3Npb25zIHlvdSB3YW50IGluY2x1ZGVkIGluIHRoZSBhY2Nlc3MgdG9rZW4uIE5vdCBhbGwgc2NvcGVzIGFyZSAgZ3VhcmFudGVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYWNjZXNzIHRva2VuLiBTY29wZXMgbGlrZSBcIm9wZW5pZFwiIGFuZCBcInByb2ZpbGVcIiBhcmUgc2VudCB3aXRoIGV2ZXJ5IHJlcXVlc3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSAtIEEgVVJMIGluZGljYXRpbmcgYSBkaXJlY3RvcnkgdGhhdCBNU0FMIGNhbiB1c2UgdG8gb2J0YWluIHRva2Vucy5cclxuICAgKiAtIEluIEF6dXJlIEFELCBpdCBpcyBvZiB0aGUgZm9ybSBodHRwczovLyZsdDt0ZW5hbnQmZ3Q7LyZsdDt0ZW5hbnQmZ3Q7LCB3aGVyZSAmbHQ7dGVuYW50Jmd0OyBpcyB0aGUgZGlyZWN0b3J5IGhvc3QgKGUuZy4gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKSBhbmQgJmx0O3RlbmFudCZndDsgaXMgYSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgZGlyZWN0b3J5IGl0c2VsZiAoZS5nLiBhIGRvbWFpbiBhc3NvY2lhdGVkIHRvIHRoZSB0ZW5hbnQsIHN1Y2ggYXMgY29udG9zby5vbm1pY3Jvc29mdC5jb20sIG9yIHRoZSBHVUlEIHJlcHJlc2VudGluZyB0aGUgVGVuYW50SUQgcHJvcGVydHkgb2YgdGhlIGRpcmVjdG9yeSlcclxuICAgKiAtIEluIEF6dXJlIEIyQywgaXQgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly8mbHQ7aW5zdGFuY2UmZ3Q7L3RmcC8mbHQ7dGVuYW50Jmd0Oy88cG9saWN5TmFtZT4vXHJcbiAgICogLSBEZWZhdWx0IHZhbHVlIGlzOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb25cIlxyXG4gICAqIEBwYXJhbSB7VXNlcn0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0aGUgc2NvcGVzIGFyZSByZXF1ZXN0ZWQuVGhlIGRlZmF1bHQgdXNlciBpcyB0aGUgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhUXVlcnlQYXJhbWV0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIHRvIHBhc3MgdG8gdGhlIFNUUyBkdXJpbmcgdGhlICBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxzdHJpbmc+fSAtIEEgUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoaXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZCwgb3IgcmVqZWN0ZWQgaWYgYW4gZXJyb3Igd2FzIHJhaXNlZC4gUmVzb2x2ZWQgd2l0aCB0b2tlbiBvciByZWplY3RlZCB3aXRoIGVycm9yLlxyXG4gICAqL1xyXG4gIEByZXNvbHZlVG9rZW5Pbmx5SWZPdXRPZklmcmFtZVxyXG4gIGFjcXVpcmVUb2tlblNpbGVudChzY29wZXM6IEFycmF5PHN0cmluZz4sIGF1dGhvcml0eT86IHN0cmluZywgYWNjb3VudD86IEFjY291bnQsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgaXNWYWxpZFNjb3BlID0gdGhpcy52YWxpZGF0ZUlucHV0U2NvcGUoc2NvcGVzKTtcclxuICAgICAgaWYgKGlzVmFsaWRTY29wZSAmJiAhVXRpbHMuaXNFbXB0eShpc1ZhbGlkU2NvcGUpKSB7XHJcbiAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMuaW5wdXRTY29wZXNFcnJvciArIFwifFwiICsgaXNWYWxpZFNjb3BlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgICAgICBzY29wZXMgPSB0aGlzLmZpbHRlclNjb3BlcyhzY29wZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCBhY2NvdW50T2JqZWN0ID0gYWNjb3VudCA/IGFjY291bnQgOiB0aGlzLmdldEFjY291bnQoKTtcclxuICAgICAgICBjb25zdCBhZGFsSWRUb2tlbiA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5hZGFsSWRUb2tlbik7XHJcbiAgICAgICAgLy9pZiB1c2VyIGlzIG5vdCBjdXJyZW50bHkgbG9nZ2VkIGluIGFuZCBubyBsb2dpbl9oaW50L3NpZCBpcyBwYXNzZWQgYXMgYW4gZXh0cmFRdWVyeVBhcmFtYXRlclxyXG4gICAgICAgIGlmICghYWNjb3VudE9iamVjdCAmJiBVdGlscy5jaGVja1NTTyhleHRyYVF1ZXJ5UGFyYW1ldGVycykgJiYgVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2luIGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgICAgcmVqZWN0KEVycm9yQ29kZXMudXNlckxvZ2luRXJyb3IgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBFcnJvckRlc2NyaXB0aW9uLnVzZXJMb2dpbkVycm9yKTtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2lmIHVzZXIgZGlkbid0IHBhc3NlcyB0aGUgbG9naW5faGludCBhbmQgYWRhbCdzIGlkdG9rZW4gaXMgcHJlc2VudCBhbmQgbm8gdXNlcm9iamVjdCwgdXNlIHRoZSBsb2dpbl9oaW50IGZyb20gYWRhbCdzIGlkVG9rZW5cclxuICAgICAgICBlbHNlIGlmICghYWNjb3VudE9iamVjdCAmJiAhVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgICAgIGNvbnN0IGlkVG9rZW5PYmplY3QgPSBVdGlscy5leHRyYWN0SWRUb2tlbihhZGFsSWRUb2tlbik7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFEQUwncyBpZFRva2VuIGV4aXN0cy4gRXh0cmFjdGluZyBsb2dpbiBpbmZvcm1hdGlvbiBmcm9tIEFEQUwncyBpZFRva2VuIFwiKTtcclxuICAgICAgICAgIGV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gVXRpbHMuY29uc3RydWN0VW5pZmllZENhY2hlRXh0cmFRdWVyeVBhcmFtZXRlcihpZFRva2VuT2JqZWN0LCBleHRyYVF1ZXJ5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzO1xyXG4gICAgICAgIGlmIChVdGlscy5jb21wYXJlT2JqZWN0cyhhY2NvdW50T2JqZWN0LCB0aGlzLmdldEFjY291bnQoKSkpIHtcclxuICAgICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLmlkX3Rva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QgPSBuZXcgQXV0aGVudGljYXRpb25SZXF1ZXN0UGFyYW1ldGVycyhBdXRob3JpdHlGYWN0b3J5LkNyZWF0ZUluc3RhbmNlKGF1dGhvcml0eSwgdGhpcy5wQ29uZmlnLmF1dGgudmFsaWRhdGVBdXRob3JpdHkpLCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGVzLCBSZXNwb25zZVR5cGVzLnRva2VuLCB0aGlzLmdldFJlZGlyZWN0VXJpKCksIHRoaXMucENvbmZpZy5hdXRoLnN0YXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IG5ldyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKEF1dGhvcml0eUZhY3RvcnkuQ3JlYXRlSW5zdGFuY2UoYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC52YWxpZGF0ZUF1dGhvcml0eSksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZXMsIFJlc3BvbnNlVHlwZXMuaWRfdG9rZW5fdG9rZW4sIHRoaXMuZ2V0UmVkaXJlY3RVcmkoKSwgdGhpcy5wQ29uZmlnLmF1dGguc3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2FjaGVSZXN1bHQgPSB0aGlzLmdldENhY2hlZFRva2VuKGF1dGhlbnRpY2F0aW9uUmVxdWVzdCwgYWNjb3VudE9iamVjdCk7XHJcbiAgICAgICAgaWYgKGNhY2hlUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZiAoY2FjaGVSZXN1bHQudG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIlRva2VuIGlzIGFscmVhZHkgaW4gY2FjaGUgZm9yIHNjb3BlOlwiICsgc2NvcGUpO1xyXG4gICAgICAgICAgICByZXNvbHZlKGNhY2hlUmVzdWx0LnRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChjYWNoZVJlc3VsdC5lcnJvckRlc2MgfHwgY2FjaGVSZXN1bHQuZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShjYWNoZVJlc3VsdC5lcnJvckRlc2MgKyBcIjpcIiArIGNhY2hlUmVzdWx0LmVycm9yKTtcclxuICAgICAgICAgICAgcmVqZWN0KGNhY2hlUmVzdWx0LmVycm9yRGVzYyArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGNhY2hlUmVzdWx0LmVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcIlRva2VuIGlzIG5vdCBpbiBjYWNoZSBmb3Igc2NvcGU6XCIgKyBzY29wZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHlJbnN0YW5jZSkgey8vQ2FjaGUgcmVzdWx0IGNhbiByZXR1cm4gbnVsbCBpZiBjYWNoZSBpcyBlbXB0eS4gSW4gdGhhdCBjYXNlLCBzZXQgYXV0aG9yaXR5IHRvIGRlZmF1bHQgdmFsdWUgaWYgbm8gYXV0aG9yaXR5IGlzIHBhc3NlZCB0byB0aGUgYXBpLlxyXG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlID0gYXV0aG9yaXR5ID8gQXV0aG9yaXR5RmFjdG9yeS5DcmVhdGVJbnN0YW5jZShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLnZhbGlkYXRlQXV0aG9yaXR5KSA6IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNhY2hlIG1pc3NcclxuICAgICAgICByZXR1cm4gYXV0aGVudGljYXRpb25SZXF1ZXN0LmF1dGhvcml0eUluc3RhbmNlLlJlc29sdmVFbmRwb2ludHNBc3luYygpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggYXR0ZXB0IHdpdGggaWZyYW1lXHJcbiAgICAgICAgICAgIC8vQWxyZWFkeSByZW5ld2luZyBmb3IgdGhpcyBzY29wZSwgY2FsbGJhY2sgd2hlbiB3ZSBnZXQgdGhlIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAod2luZG93LmFjdGl2ZVJlbmV3YWxzW3Njb3BlXSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJSZW5ldyB0b2tlbiBmb3Igc2NvcGU6IFwiICsgc2NvcGUgKyBcIiBpcyBpbiBwcm9ncmVzcy4gUmVnaXN0ZXJpbmcgY2FsbGJhY2tcIik7XHJcbiAgICAgICAgICAgICAgLy9BY3RpdmUgcmVuZXdhbHMgY29udGFpbnMgdGhlIHN0YXRlIGZvciBlYWNoIHJlbmV3YWwuXHJcbiAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV0sIHNjb3BlLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChzY29wZXMgJiYgc2NvcGVzLmluZGV4T2YodGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQpID4gLTEgJiYgc2NvcGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwIHVzZXMgaWRUb2tlbiB0byBzZW5kIHRvIGFwaSBlbmRwb2ludHNcclxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgc2NvcGUgaXMgdHJhY2tlZCBhcyBjbGllbnRJZCB0byBzdG9yZSB0aGlzIHRva2VuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwicmVuZXdpbmcgaWRUb2tlblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZXdJZFRva2VuKHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0LCBhY2NvdW50T2JqZWN0LCBhdXRoZW50aWNhdGlvblJlcXVlc3QsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIudmVyYm9zZShcInJlbmV3aW5nIGFjY2Vzc3Rva2VuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5ld1Rva2VuKHNjb3BlcywgcmVzb2x2ZSwgcmVqZWN0LCBhY2NvdW50T2JqZWN0LCBhdXRoZW50aWNhdGlvblJlcXVlc3QsIGV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIud2FybmluZyhcImNvdWxkIG5vdCByZXNvbHZlIGVuZHBvaW50c1wiKTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHRyYWN0QURBTElkVG9rZW4oKTogYW55IHtcclxuICAgIGNvbnN0IGFkYWxJZFRva2VuID0gdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmFkYWxJZFRva2VuKTtcclxuICAgIGlmICghVXRpbHMuaXNFbXB0eShhZGFsSWRUb2tlbikpIHtcclxuICAgICAgcmV0dXJuIFV0aWxzLmV4dHJhY3RJZFRva2VuKGFkYWxJZFRva2VuKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBDYWxsaW5nIF9sb2FkRnJhbWUgYnV0IHdpdGggYSB0aW1lb3V0IHRvIHNpZ25hbCBmYWlsdXJlIGluIGxvYWRmcmFtZVN0YXR1cy4gQ2FsbGJhY2tzIGFyZSBsZWZ0LlxyXG4gICAqIHJlZ2lzdGVyZWQgd2hlbiBuZXR3b3JrIGVycm9ycyBvY2N1ciBhbmQgc3Vic2VxdWVudCB0b2tlbiByZXF1ZXN0cyBmb3Igc2FtZSByZXNvdXJjZSBhcmUgcmVnaXN0ZXJlZCB0byB0aGUgcGVuZGluZyByZXF1ZXN0LlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2FkSWZyYW1lVGltZW91dCh1cmxOYXZpZ2F0ZTogc3RyaW5nLCBmcmFtZU5hbWU6IHN0cmluZywgc2NvcGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgLy9zZXQgaWZyYW1lIHNlc3Npb24gdG8gcGVuZGluZ1xyXG4gICAgY29uc3QgZXhwZWN0ZWRTdGF0ZSA9IHdpbmRvdy5hY3RpdmVSZW5ld2Fsc1tzY29wZV07XHJcbiAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci52ZXJib3NlKFwiU2V0IGxvYWRpbmcgc3RhdGUgdG8gcGVuZGluZyBmb3I6IFwiICsgc2NvcGUgKyBcIjpcIiArIGV4cGVjdGVkU3RhdGUpO1xyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnJlbmV3U3RhdHVzICsgZXhwZWN0ZWRTdGF0ZSwgQ29uc3RhbnRzLnRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzKTtcclxuICAgIHRoaXMubG9hZEZyYW1lKHVybE5hdmlnYXRlLCBmcmFtZU5hbWUpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMucmVuZXdTdGF0dXMgKyBleHBlY3RlZFN0YXRlKSA9PT0gQ29uc3RhbnRzLnRva2VuUmVuZXdTdGF0dXNJblByb2dyZXNzKSB7XHJcbiAgICAgICAgLy8gZmFpbCB0aGUgaWZyYW1lIHNlc3Npb24gaWYgaXRcInMgaW4gcGVuZGluZyBzdGF0ZVxyXG4gICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJMb2FkaW5nIGZyYW1lIGhhcyB0aW1lZCBvdXQgYWZ0ZXI6IFwiICsgKHRoaXMucENvbmZpZy5zeXN0ZW0ubG9hZEZyYW1lVGltZW91dCAvIDEwMDApICsgXCIgc2Vjb25kcyBmb3Igc2NvcGUgXCIgKyBzY29wZSArIFwiOlwiICsgZXhwZWN0ZWRTdGF0ZSk7XHJcbiAgICAgICAgaWYgKGV4cGVjdGVkU3RhdGUgJiYgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXSkge1xyXG4gICAgICAgICAgd2luZG93LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tleHBlY3RlZFN0YXRlXShcIlRva2VuIHJlbmV3YWwgb3BlcmF0aW9uIGZhaWxlZCBkdWUgdG8gdGltZW91dFwiLCBudWxsLCBcIlRva2VuIFJlbmV3YWwgRmFpbGVkXCIsIENvbnN0YW50cy5hY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMucmVuZXdTdGF0dXMgKyBleHBlY3RlZFN0YXRlLCBDb25zdGFudHMudG9rZW5SZW5ld1N0YXR1c0NhbmNlbGxlZCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9hZEZyYW1lVGltZW91dCk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIExvYWRzIGlmcmFtZSB3aXRoIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgVVJMXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRGcmFtZSh1cmxOYXZpZ2F0ZTogc3RyaW5nLCBmcmFtZU5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgLy8gVGhpcyB0cmljayBvdmVyY29tZXMgaWZyYW1lIG5hdmlnYXRpb24gaW4gSUVcclxuICAgIC8vIElFIGRvZXMgbm90IGxvYWQgdGhlIHBhZ2UgY29uc2lzdGVudGx5IGluIGlmcmFtZVxyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIkxvYWRGcmFtZTogXCIgKyBmcmFtZU5hbWUpO1xyXG4gICAgdmFyIGZyYW1lQ2hlY2sgPSBmcmFtZU5hbWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdmFyIGZyYW1lSGFuZGxlID0gdGhpcy5hZGRBZGFsRnJhbWUoZnJhbWVDaGVjayk7XHJcbiAgICAgIGlmIChmcmFtZUhhbmRsZS5zcmMgPT09IFwiXCIgfHwgZnJhbWVIYW5kbGUuc3JjID09PSBcImFib3V0OmJsYW5rXCIpIHtcclxuICAgICAgICBmcmFtZUhhbmRsZS5zcmMgPSB1cmxOYXZpZ2F0ZTtcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvUGlpKFwiRnJhbWUgTmFtZSA6IFwiICsgZnJhbWVOYW1lICsgXCIgTmF2aWdhdGVkIHRvOiBcIiArIHVybE5hdmlnYXRlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgICAgNTAwKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogQWRkcyB0aGUgaGlkZGVuIGlmcmFtZSBmb3Igc2lsZW50IHRva2VuIHJlbmV3YWwuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGFkZEFkYWxGcmFtZShpZnJhbWVJZDogc3RyaW5nKTogSFRNTElGcmFtZUVsZW1lbnQge1xyXG4gICAgaWYgKHR5cGVvZiBpZnJhbWVJZCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiQWRkIG1zYWwgZnJhbWUgdG8gZG9jdW1lbnQ6XCIgKyBpZnJhbWVJZCk7XHJcbiAgICBsZXQgYWRhbEZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWZyYW1lSWQpIGFzIEhUTUxJRnJhbWVFbGVtZW50O1xyXG4gICAgaWYgKCFhZGFsRnJhbWUpIHtcclxuICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJiZcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiZcclxuICAgICAgICAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgNS4wXCIpID09PSAtMSkpIHtcclxuICAgICAgICBjb25zdCBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4gICAgICAgIGlmci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZnJhbWVJZCk7XHJcbiAgICAgICAgaWZyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIGlmci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICBpZnIuc3R5bGUud2lkdGggPSBpZnIuc3R5bGUuaGVpZ2h0ID0gXCIwXCI7XHJcbiAgICAgICAgaWZyLnN0eWxlLmJvcmRlciA9IFwiMFwiO1xyXG4gICAgICAgIGFkYWxGcmFtZSA9IChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoaWZyKSBhcyBIVE1MSUZyYW1lRWxlbWVudCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPGlmcmFtZSBuYW1lPSdcIiArIGlmcmFtZUlkICsgXCInIGlkPSdcIiArIGlmcmFtZUlkICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnPjwvaWZyYW1lPlwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHdpbmRvdy5mcmFtZXMgJiYgd2luZG93LmZyYW1lc1tpZnJhbWVJZF0pIHtcclxuICAgICAgICBhZGFsRnJhbWUgPSB3aW5kb3cuZnJhbWVzW2lmcmFtZUlkXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhZGFsRnJhbWU7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIEFjcXVpcmVzIGFjY2VzcyB0b2tlbiB1c2luZyBhIGhpZGRlbiBpZnJhbWUuXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIHJlbmV3VG9rZW4oc2NvcGVzOiBBcnJheTxzdHJpbmc+LCByZXNvbHZlOiBGdW5jdGlvbiwgcmVqZWN0OiBGdW5jdGlvbiwgYWNjb3VudDogQWNjb3VudCwgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJyZW5ld1Rva2VuIGlzIGNhbGxlZCBmb3Igc2NvcGU6XCIgKyBzY29wZSk7XHJcbiAgICBjb25zdCBmcmFtZUhhbmRsZSA9IHRoaXMuYWRkQWRhbEZyYW1lKFwibXNhbFJlbmV3RnJhbWVcIiArIHNjb3BlKTtcclxuICAgIGlmIChleHRyYVF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICBhdXRoZW50aWNhdGlvblJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgPSBleHRyYVF1ZXJ5UGFyYW1ldGVycztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleTtcclxuICAgIGlmIChhY2NvdW50KSB7XHJcbiAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGFjY291bnQuaG9tZUFjY291bnRJZGVudGlmaWVyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYXV0aGVudGljYXRpb25SZXF1ZXN0LnN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGFjcXVpcmVUb2tlblVzZXJLZXksIEpTT04uc3RyaW5naWZ5KGFjY291bnQpKTtcclxuICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpO1xyXG4gICAgLy8gcmVuZXcgaGFwcGVucyBpbiBpZnJhbWUsIHNvIGl0IGtlZXBzIGphdmFzY3JpcHQgY29udGV4dFxyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlKTtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJSZW5ldyB0b2tlbiBFeHBlY3RlZCBzdGF0ZTogXCIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgbGV0IHVybE5hdmlnYXRlID0gVXRpbHMudXJsUmVtb3ZlUXVlcnlTdHJpbmdQYXJhbWV0ZXIoYXV0aGVudGljYXRpb25SZXF1ZXN0LmNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlcyksIENvbnN0YW50cy5wcm9tcHQpICsgQ29uc3RhbnRzLnByb21wdF9ub25lO1xyXG4gICAgdXJsTmF2aWdhdGUgPSB0aGlzLmFkZEhpbnRQYXJhbWV0ZXJzKHVybE5hdmlnYXRlLCBhY2NvdW50KTtcclxuICAgIHdpbmRvdy5yZW5ld1N0YXRlcy5wdXNoKGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICB3aW5kb3cucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcclxuICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayhhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHNjb3BlLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgZnJhbWVIYW5kbGUuc3JjID0gXCJhYm91dDpibGFua1wiO1xyXG4gICAgdGhpcy5sb2FkSWZyYW1lVGltZW91dCh1cmxOYXZpZ2F0ZSwgXCJtc2FsUmVuZXdGcmFtZVwiICsgc2NvcGUsIHNjb3BlKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogUmVuZXdzIGlkdG9rZW4gZm9yIGFwcFwicyBvd24gYmFja2VuZCB3aGVuIGNsaWVudElkIGlzIHBhc3NlZCBhcyBhIHNpbmdsZSBzY29wZSBpbiB0aGUgc2NvcGVzIGFycmF5LlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZW5ld0lkVG9rZW4oc2NvcGVzOiBBcnJheTxzdHJpbmc+LCByZXNvbHZlOiBGdW5jdGlvbiwgcmVqZWN0OiBGdW5jdGlvbiwgYWNjb3VudDogQWNjb3VudCwgYXV0aGVudGljYXRpb25SZXF1ZXN0OiBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzLCBleHRyYVF1ZXJ5UGFyYW1ldGVycz86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2NvcGUgPSBzY29wZXMuam9pbihcIiBcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJyZW5ld2lkVG9rZW4gaXMgY2FsbGVkXCIpO1xyXG4gICAgY29uc3QgZnJhbWVIYW5kbGUgPSB0aGlzLmFkZEFkYWxGcmFtZShcIm1zYWxJZFRva2VuRnJhbWVcIik7XHJcbiAgICBpZiAoZXh0cmFRdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgYXV0aGVudGljYXRpb25SZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzID0gZXh0cmFRdWVyeVBhcmFtZXRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFjcXVpcmVUb2tlblVzZXJLZXk7XHJcbiAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBDb25zdGFudHMubm9fYWNjb3VudCArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgIH1cclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKGFjcXVpcmVUb2tlblVzZXJLZXksIEpTT04uc3RyaW5naWZ5KGFjY291bnQpKTtcclxuICAgIGNvbnN0IGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyBhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGU7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShhdXRob3JpdHlLZXksIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5hdXRob3JpdHkpO1xyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgYXV0aGVudGljYXRpb25SZXF1ZXN0Lm5vbmNlKTtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLnZlcmJvc2UoXCJSZW5ldyBJZHRva2VuIEV4cGVjdGVkIHN0YXRlOiBcIiArIGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZSk7XHJcbiAgICBsZXQgdXJsTmF2aWdhdGUgPSBVdGlscy51cmxSZW1vdmVRdWVyeVN0cmluZ1BhcmFtZXRlcihhdXRoZW50aWNhdGlvblJlcXVlc3QuY3JlYXRlTmF2aWdhdGVVcmwoc2NvcGVzKSwgQ29uc3RhbnRzLnByb21wdCkgKyBDb25zdGFudHMucHJvbXB0X25vbmU7XHJcbiAgICB1cmxOYXZpZ2F0ZSA9IHRoaXMuYWRkSGludFBhcmFtZXRlcnModXJsTmF2aWdhdGUsIGFjY291bnQpO1xyXG4gICAgaWYgKHRoaXMucFNpbGVudExvZ2luKSB7XHJcbiAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5sb2dpbjtcclxuICAgICAgdGhpcy5wU2lsZW50QXV0aGVudGljYXRpb25TdGF0ZSA9IGF1dGhlbnRpY2F0aW9uUmVxdWVzdC5zdGF0ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvdy5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5yZW5ld1Rva2VuO1xyXG4gICAgICB3aW5kb3cucmVuZXdTdGF0ZXMucHVzaChhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayhhdXRoZW50aWNhdGlvblJlcXVlc3Quc3RhdGUsIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mb1BpaShcIk5hdmlnYXRlIHRvOlwiICsgdXJsTmF2aWdhdGUpO1xyXG4gICAgZnJhbWVIYW5kbGUuc3JjID0gXCJhYm91dDpibGFua1wiO1xyXG4gICAgdGhpcy5sb2FkSWZyYW1lVGltZW91dCh1cmxOYXZpZ2F0ZSwgXCJtc2FsSWRUb2tlbkZyYW1lXCIsIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICAqIFJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIChyZWNlaXZlZCBmcm9tIGEgdXNlciBvYmplY3QgY3JlYXRlZCBhdCB0aGUgdGltZSBvZiBsb2dpbikgb3IgbnVsbC5cclxuICAgICovXHJcbiAgZ2V0QWNjb3VudCgpOiBBY2NvdW50IHtcclxuICAgIC8vIGlkVG9rZW4gaXMgZmlyc3QgY2FsbFxyXG4gICAgaWYgKHRoaXMucEFjY291bnQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucEFjY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnJhbWUgaXMgdXNlZCB0byBnZXQgaWRUb2tlblxyXG4gICAgY29uc3QgcmF3SWRUb2tlbiA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5pZFRva2VuS2V5KTtcclxuICAgIGNvbnN0IHJhd0NsaWVudEluZm8gPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubXNhbENsaWVudEluZm8pO1xyXG4gICAgaWYgKCFVdGlscy5pc0VtcHR5KHJhd0lkVG9rZW4pICYmICFVdGlscy5pc0VtcHR5KHJhd0NsaWVudEluZm8pKSB7XHJcbiAgICAgIGNvbnN0IGlkVG9rZW4gPSBuZXcgSWRUb2tlbihyYXdJZFRva2VuKTtcclxuICAgICAgY29uc3QgY2xpZW50SW5mbyA9IG5ldyBIb21lQWNjb3VudElkZW50aWZpZXIocmF3Q2xpZW50SW5mbyk7XHJcbiAgICAgIHRoaXMucEFjY291bnQgPSBBY2NvdW50LmNyZWF0ZUFjY291bnQoaWRUb2tlbiwgY2xpZW50SW5mbyk7XHJcbiAgICAgIHJldHVybiB0aGlzLnBBY2NvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBmb3IgcHJvY2Vzc2luZyB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSB0aGUgU1RTLiBJdCBleHRyYWN0cyB0aGUgaGFzaCwgcHJvY2Vzc2VzIHRoZSB0b2tlbiBvciBlcnJvciBpbmZvcm1hdGlvbiBhbmQgc2F2ZXMgaXQgaW4gdGhlIGNhY2hlLiBJdCB0aGVuXHJcbiAgICogY2FsbHMgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIGNhc2Ugb2YgcmVkaXJlY3Qgb3IgcmVzb2x2ZXMgdGhlIHByb21pc2VzIHdpdGggdGhlIHJlc3VsdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2hhc2g9d2luZG93LmxvY2F0aW9uLmhhc2hdIC0gSGFzaCBmcmFnbWVudCBvZiBVcmwuXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZShoYXNoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGlmIChoYXNoID09IG51bGwpIHtcclxuICAgICAgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZWxmID0gbnVsbDtcclxuICAgIHZhciBpc1BvcHVwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICB2YXIgaXNXaW5kb3dPcGVuZXJNc2FsID0gZmFsc2U7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaXNXaW5kb3dPcGVuZXJNc2FsID0gd2luZG93Lm9wZW5lciAmJiB3aW5kb3cub3BlbmVyLm1zYWwgJiYgd2luZG93Lm9wZW5lci5tc2FsICE9PSB3aW5kb3cubXNhbDtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAvLyBlcnIgPSBTZWN1cml0eUVycm9yOiBCbG9ja2VkIGEgZnJhbWUgd2l0aCBvcmlnaW4gXCJbdXJsXVwiIGZyb20gYWNjZXNzaW5nIGEgY3Jvc3Mtb3JpZ2luIGZyYW1lLlxyXG4gICAgICBpc1dpbmRvd09wZW5lck1zYWwgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNXaW5kb3dPcGVuZXJNc2FsKSB7XHJcbiAgICAgIHNlbGYgPSB3aW5kb3cub3BlbmVyLm1zYWw7XHJcbiAgICAgIGlzUG9wdXAgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAod2luZG93LnBhcmVudCAmJiB3aW5kb3cucGFyZW50Lm1zYWwpIHtcclxuICAgICAgc2VsZiA9IHdpbmRvdy5wYXJlbnQubXNhbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXF1ZXN0SW5mbyA9IHNlbGYuZ2V0UmVxdWVzdEluZm8oaGFzaCk7IC8vaWYod2luZG93LnBhcmVudCE9PXdpbmRvdyksIGJ5IHVzaW5nIHNlbGYsIHdpbmRvdy5wYXJlbnQgYmVjb21lcyBlcXVhbCB0byB3aW5kb3cgaW4gZ2V0UmVxdWVzdEluZm8gbWV0aG9kIHNwZWNpZmljYWxseVxyXG4gICAgbGV0IHRva2VuOiBzdHJpbmcgPSBudWxsLCB0b2tlblJlY2VpdmVkQ2FsbGJhY2s6IChlcnJvckRlc2M6IHN0cmluZywgdG9rZW46IHN0cmluZywgZXJyb3I6IHN0cmluZywgdG9rZW5UeXBlOiBzdHJpbmcpID0+IHZvaWQgPSBudWxsLCB0b2tlblR5cGU6IHN0cmluZywgc2F2ZVRva2VuOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHNlbGYucExvZ2dlci5pbmZvKFwiUmV0dXJuZWQgZnJvbSByZWRpcmVjdCB1cmxcIik7XHJcbiAgICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93ICYmIHdpbmRvdy5wYXJlbnQubXNhbCkge1xyXG4gICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB3aW5kb3cucGFyZW50LmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tyZXF1ZXN0SW5mby5zdGF0ZVJlc3BvbnNlXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzV2luZG93T3BlbmVyTXNhbCkge1xyXG4gICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2sgPSB3aW5kb3cub3BlbmVyLmNhbGxCYWNrTWFwcGVkVG9SZW5ld1N0YXRlc1tyZXF1ZXN0SW5mby5zdGF0ZVJlc3BvbnNlXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZiAoc2VsZi5fbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCkge1xyXG4gICAgICAgIHRva2VuUmVjZWl2ZWRDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgc2VsZi5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLnVybEhhc2gsIGhhc2gpO1xyXG4gICAgICAgIHNhdmVUb2tlbiA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh3aW5kb3cucGFyZW50ID09PSB3aW5kb3cgJiYgIWlzUG9wdXApIHtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gc2VsZi5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLmxvZ2luUmVxdWVzdCwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdG9rZW5SZWNlaXZlZENhbGxiYWNrID0gc2VsZi5wVG9rZW5SZWNlaXZlZENhbGxiYWNrO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gXCJcIjtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZWxmLnNhdmVUb2tlbkZyb21IYXNoKHJlcXVlc3RJbmZvKTtcclxuXHJcbiAgICBpZiAoKHJlcXVlc3RJbmZvLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMucmVuZXdUb2tlbikgJiYgd2luZG93LnBhcmVudCkge1xyXG4gICAgICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XHJcbiAgICAgICAgc2VsZi5wTG9nZ2VyLnZlcmJvc2UoXCJXaW5kb3cgaXMgaW4gaWZyYW1lLCBhY3F1aXJpbmcgdG9rZW4gc2lsZW50bHlcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5wTG9nZ2VyLnZlcmJvc2UoXCJhY3F1aXJpbmcgdG9rZW4gaW50ZXJhY3RpdmUgaW4gcHJvZ3Jlc3NcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRva2VuID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuYWNjZXNzVG9rZW5dIHx8IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xyXG4gICAgICB0b2tlblR5cGUgPSBDb25zdGFudHMuYWNjZXNzVG9rZW47XHJcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3RJbmZvLnJlcXVlc3RUeXBlID09PSBDb25zdGFudHMubG9naW4pIHtcclxuICAgICAgdG9rZW4gPSByZXF1ZXN0SW5mby5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXTtcclxuICAgICAgdG9rZW5UeXBlID0gQ29uc3RhbnRzLmlkVG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGVycm9yRGVzYyA9IHJlcXVlc3RJbmZvLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dO1xyXG4gICAgdmFyIGVycm9yID0gcmVxdWVzdEluZm8ucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRva2VuUmVjZWl2ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIC8vV2Ugc2hvdWxkIG9ubHkgc2VuZCB0aGUgc3RhZSBiYWNrIHRvIHRoZSBkZXZlbG9wZXIgaWYgaXQgbWF0Y2hlcyB3aXRoIHdoYXQgd2UgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgaWYgKHJlcXVlc3RJbmZvLnN0YXRlTWF0Y2gpIHtcclxuICAgICAgICAgIHRva2VuUmVjZWl2ZWRDYWxsYmFjay5jYWxsKHNlbGYsIGVycm9yRGVzYywgdG9rZW4sIGVycm9yLCB0b2tlblR5cGUsIHRoaXMuZ2V0QWNjb3VudFN0YXRlKHJlcXVlc3RJbmZvLnN0YXRlUmVzcG9uc2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0b2tlblJlY2VpdmVkQ2FsbGJhY2suY2FsbChzZWxmLCBlcnJvckRlc2MsIHRva2VuLCBlcnJvciwgdG9rZW5UeXBlLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgc2VsZi5wTG9nZ2VyLmVycm9yKFwiRXJyb3Igb2NjdXJyZWQgaW4gdG9rZW4gcmVjZWl2ZWQgY2FsbGJhY2sgZnVuY3Rpb246IFwiICsgZXJyKTtcclxuICAgIH1cclxuICAgIGlmIChpc1dpbmRvd09wZW5lck1zYWwpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5kb3cub3BlbmVyLm9wZW5lZFdpbmRvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB3aW5kb3cub3BlbmVyLm9wZW5lZFdpbmRvd3NbaV0uY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBmb3IgcHJvY2Vzc2luZyB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSBBQUQuIEl0IGV4dHJhY3RzIHRoZSBoYXNoLCBwcm9jZXNzZXMgdGhlIHRva2VuIG9yIGVycm9yLCBzYXZlcyBpdCBpbiB0aGUgY2FjaGUgYW5kIGNhbGxzIHRoZSByZWdpc3RlcmVkIGNhbGxiYWNrcyB3aXRoIHRoZSByZXN1bHQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml0eSBhdXRob3JpdHkgcmVjZWl2ZWQgaW4gdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGZyb20gQUFELlxyXG4gICAqIEBwYXJhbSB7VG9rZW5SZXNwb25zZX0gcmVxdWVzdEluZm8gYW4gb2JqZWN0IGNyZWF0ZWQgZnJvbSB0aGUgcmVkaXJlY3QgcmVzcG9uc2UgZnJvbSBBQUQgY29tcHJpc2luZyBvZiB0aGUga2V5cyAtIHBhcmFtZXRlcnMsIHJlcXVlc3RUeXBlLCBzdGF0ZU1hdGNoLCBzdGF0ZVJlc3BvbnNlIGFuZCB2YWxpZC5cclxuICAgKiBAcGFyYW0ge1VzZXJ9IHVzZXIgdXNlciBvYmplY3QgZm9yIHdoaWNoIHNjb3BlcyBhcmUgY29uc2VudGVkIGZvci4gVGhlIGRlZmF1bHQgdXNlciBpcyB0aGUgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogQHBhcmFtIHtDbGllbnRJbmZvfSBjbGllbnRJbmZvIGNsaWVudEluZm8gcmVjZWl2ZWQgYXMgcGFydCBvZiB0aGUgcmVzcG9uc2UgY29tcHJpc2luZyBvZiBmaWVsZHMgdWlkIGFuZCB1dGlkLlxyXG4gICAqIEBwYXJhbSB7SWRUb2tlbn0gaWRUb2tlbiBpZFRva2VuIHJlY2VpdmVkIGFzIHBhcnQgb2YgdGhlIHJlc3BvbnNlLlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG4gIHByaXZhdGUgc2F2ZUFjY2Vzc1Rva2VuKGF1dGhvcml0eTogc3RyaW5nLCB0b2tlblJlc3BvbnNlOiBUb2tlblJlc3BvbnNlLCBhY2NvdW50OiBBY2NvdW50LCBjbGllbnRJbmZvOiBzdHJpbmcsIGlkVG9rZW46IElkVG9rZW4pOiB2b2lkIHtcclxuICAgIGxldCBzY29wZTogc3RyaW5nO1xyXG4gICAgbGV0IGNsaWVudE9iajogSG9tZUFjY291bnRJZGVudGlmaWVyID0gbmV3IEhvbWVBY2NvdW50SWRlbnRpZmllcihjbGllbnRJbmZvKTtcclxuICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoXCJzY29wZVwiKSkge1xyXG4gICAgICBzY29wZSA9IHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcInNjb3BlXCJdO1xyXG4gICAgICBjb25zdCBjb25zZW50ZWRTY29wZXMgPSBzY29wZS5zcGxpdChcIiBcIik7XHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtcyA9XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEFsbEFjY2Vzc1Rva2Vucyh0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgYXV0aG9yaXR5KTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY2Nlc3NUb2tlbkNhY2hlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkNhY2hlSXRlbSA9IGFjY2Vzc1Rva2VuQ2FjaGVJdGVtc1tpXTtcclxuICAgICAgICAvLyBUT0RPXCIgQ2hlY2sgd2hlcmUgdG8gY2hhbmdlIHRoaXNcclxuICAgICAgICBpZiAoYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5LnVzZXJJZGVudGlmaWVyID09PSBhY2NvdW50LmhvbWVBY2NvdW50SWRlbnRpZmllcikge1xyXG4gICAgICAgICAgY29uc3QgY2FjaGVkU2NvcGVzID0gYWNjZXNzVG9rZW5DYWNoZUl0ZW0ua2V5LnNjb3Blcy5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICBpZiAoVXRpbHMuaXNJbnRlcnNlY3RpbmdTY29wZXMoY2FjaGVkU2NvcGVzLCBjb25zZW50ZWRTY29wZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5yZW1vdmVJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuQ2FjaGVJdGVtLmtleSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbktleSA9IG5ldyBBY2Nlc3NUb2tlbktleShhdXRob3JpdHksIHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkLCBzY29wZSwgY2xpZW50T2JqLnVpZCwgY2xpZW50T2JqLnV0aWQpO1xyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlblZhbHVlID0gbmV3IEFjY2Vzc1Rva2VuVmFsdWUodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5hY2Nlc3NUb2tlbl0sIGlkVG9rZW4ucmF3SWRUb2tlbiwgVXRpbHMuZXhwaXJlc0luKHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXhwaXJlc0luXSkudG9TdHJpbmcoKSwgY2xpZW50SW5mbyk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuS2V5KSwgSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5WYWx1ZSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2NvcGUgPSB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZDtcclxuICAgICAgY29uc3QgYWNjZXNzVG9rZW5LZXkgPSBuZXcgQWNjZXNzVG9rZW5LZXkoYXV0aG9yaXR5LCB0aGlzLnBDb25maWcuYXV0aC5jbGllbnRJZCwgc2NvcGUsIGNsaWVudE9iai51aWQsIGNsaWVudE9iai51dGlkKTtcclxuICAgICAgY29uc3QgYWNjZXNzVG9rZW5WYWx1ZSA9IG5ldyBBY2Nlc3NUb2tlblZhbHVlKHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0sIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0sIGlkVG9rZW4uZXhwaXJhdGlvbiwgY2xpZW50SW5mbyk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKEpTT04uc3RyaW5naWZ5KGFjY2Vzc1Rva2VuS2V5KSwgSlNPTi5zdHJpbmdpZnkoYWNjZXNzVG9rZW5WYWx1ZSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBTYXZlcyB0b2tlbiBvciBlcnJvciByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQUQgaW4gdGhlIGNhY2hlLiBJbiBjYXNlIG9mIGlkX3Rva2VuLCBpdCBhbHNvIGNyZWF0ZXMgdGhlIHVzZXIgb2JqZWN0LlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHNhdmVUb2tlbkZyb21IYXNoKHRva2VuUmVzcG9uc2U6IFRva2VuUmVzcG9uc2UpOiB2b2lkIHtcclxuICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXCJTdGF0ZSBzdGF0dXM6XCIgKyB0b2tlblJlc3BvbnNlLnN0YXRlTWF0Y2ggKyBcIjsgUmVxdWVzdCB0eXBlOlwiICsgdG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSk7XHJcbiAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBcIlwiKTtcclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsRXJyb3JEZXNjcmlwdGlvbiwgXCJcIik7XHJcbiAgICB2YXIgc2NvcGU6IHN0cmluZyA9IFwiXCI7XHJcbiAgICB2YXIgYXV0aG9yaXR5S2V5OiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgdmFyIGFjcXVpcmVUb2tlblVzZXJLZXk6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic2NvcGVcIikpIHtcclxuICAgICAgc2NvcGUgPSB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbXCJzY29wZVwiXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNjb3BlID0gdGhpcy5wQ29uZmlnLmF1dGguY2xpZW50SWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVjb3JkIGVycm9yXHJcbiAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvckRlc2NyaXB0aW9uKSB8fCB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yKSkge1xyXG4gICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvUGlpKFwiRXJyb3IgOlwiICsgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5lcnJvcl0gKyBcIjsgRXJyb3IgZGVzY3JpcHRpb246XCIgKyB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb25dKTtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvciwgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wiZXJyb3JcIl0pO1xyXG4gICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yRGVzY3JpcHRpb24sIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl0pO1xyXG4gICAgICBpZiAodG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gQ29uc3RhbnRzLmxvZ2luKSB7XHJcbiAgICAgICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmxvZ2luRXJyb3IsIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbl0gKyBcIjpcIiArIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuZXJyb3JdKTtcclxuICAgICAgICBhdXRob3JpdHlLZXkgPSBDb25zdGFudHMuYXV0aG9yaXR5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gQ29uc3RhbnRzLnJlbmV3VG9rZW4pIHtcclxuICAgICAgICB0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICB2YXIgdXNlcktleSA9IHRoaXMuZ2V0QWNjb3VudCgpICE9PSBudWxsID8gdGhpcy5nZXRBY2NvdW50KCkuaG9tZUFjY291bnRJZGVudGlmaWVyIDogXCJcIjtcclxuICAgICAgICBhY3F1aXJlVG9rZW5Vc2VyS2V5ID0gQ29uc3RhbnRzLmFjcXVpcmVUb2tlblVzZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB1c2VyS2V5ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSXQgbXVzdCB2ZXJpZnkgdGhlIHN0YXRlIGZyb20gcmVkaXJlY3RcclxuICAgICAgaWYgKHRva2VuUmVzcG9uc2Uuc3RhdGVNYXRjaCkge1xyXG4gICAgICAgIC8vIHJlY29yZCB0b2tlbnMgdG8gc3RvcmFnZSBpZiBleGlzdHNcclxuICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiU3RhdGUgaXMgcmlnaHRcIik7XHJcbiAgICAgICAgaWYgKHRva2VuUmVzcG9uc2UucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuc2Vzc2lvblN0YXRlKSkge1xyXG4gICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxTZXNzaW9uU3RhdGUsIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuc2Vzc2lvblN0YXRlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpZFRva2VuOiBJZFRva2VuO1xyXG4gICAgICAgIHZhciBjbGllbnRJbmZvOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmFjY2Vzc1Rva2VuKSkge1xyXG4gICAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuaW5mbyhcIkZyYWdtZW50IGhhcyBhY2Nlc3MgdG9rZW5cIik7XHJcbiAgICAgICAgICB0aGlzLnBBY3F1aXJlVG9rZW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICBsZXQgYWNjb3VudDogQWNjb3VudDtcclxuICAgICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4gPSBuZXcgSWRUb2tlbih0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4gPSBuZXcgSWRUb2tlbih0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuaWRUb2tlbktleSkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGF1dGhvcml0eUtleSA9IENvbnN0YW50cy5hdXRob3JpdHkgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgICBsZXQgYXV0aG9yaXR5OiBzdHJpbmcgPSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShhdXRob3JpdHlLZXksIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKTtcclxuICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eShhdXRob3JpdHkpKSB7XHJcbiAgICAgICAgICAgIGF1dGhvcml0eSA9IFV0aWxzLnJlcGxhY2VGaXJzdFBhdGgoYXV0aG9yaXR5LCBpZFRva2VuLnRlbmFudElkKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5jbGllbnRJbmZvKSkge1xyXG4gICAgICAgICAgICBjbGllbnRJbmZvID0gdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5jbGllbnRJbmZvXTtcclxuICAgICAgICAgICAgYWNjb3VudCA9IEFjY291bnQuY3JlYXRlQWNjb3VudChpZFRva2VuLCBuZXcgSG9tZUFjY291bnRJZGVudGlmaWVyKGNsaWVudEluZm8pKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXCJDbGllbnRJbmZvIG5vdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQURcIik7XHJcbiAgICAgICAgICAgIGFjY291bnQgPSBBY2NvdW50LmNyZWF0ZUFjY291bnQoaWRUb2tlbiwgbmV3IEhvbWVBY2NvdW50SWRlbnRpZmllcihjbGllbnRJbmZvKSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYWNxdWlyZVRva2VuVXNlcktleSA9IENvbnN0YW50cy5hY3F1aXJlVG9rZW5Vc2VyICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgYWNjb3VudC5ob21lQWNjb3VudElkZW50aWZpZXIgKyBDb25zdGFudHMucmVzb3VyY2VEZWxpbWV0ZXIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgICB2YXIgYWNxdWlyZVRva2VuVXNlcktleV9ub3VzZXIgPSBDb25zdGFudHMuYWNxdWlyZVRva2VuVXNlciArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIENvbnN0YW50cy5ub19hY2NvdW50ICsgQ29uc3RhbnRzLnJlc291cmNlRGVsaW1ldGVyICsgdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgICAgbGV0IGNhY2hlZFVzZXI6IHN0cmluZyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKGFjcXVpcmVUb2tlblVzZXJLZXkpO1xyXG4gICAgICAgICAgbGV0IGFjcXVpcmVUb2tlblVzZXI6IEFjY291bnQ7XHJcbiAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHkoY2FjaGVkVXNlcikpIHtcclxuICAgICAgICAgICAgYWNxdWlyZVRva2VuVXNlciA9IEpTT04ucGFyc2UoY2FjaGVkVXNlcik7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50ICYmIGFjcXVpcmVUb2tlblVzZXIgJiYgVXRpbHMuY29tcGFyZU9iamVjdHMoYWNjb3VudCwgYWNxdWlyZVRva2VuVXNlcikpIHtcclxuICAgICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihhdXRob3JpdHksIHRva2VuUmVzcG9uc2UsIGFjY291bnQsIGNsaWVudEluZm8sIGlkVG9rZW4pO1xyXG4gICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmluZm8oXHJcbiAgICAgICAgICAgICAgICBcIlRoZSB1c2VyIG9iamVjdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgaXMgdGhlIHNhbWUgYXMgdGhlIG9uZSBwYXNzZWQgaW4gdGhlIGFjcXVpcmVUb2tlbiByZXF1ZXN0XCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXHJcbiAgICAgICAgICAgICAgICBcIlRoZSB1c2VyIG9iamVjdCBjcmVhdGVkIGZyb20gdGhlIHJlc3BvbnNlIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYWNxdWlyZVRva2VuIHJlcXVlc3RcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKCFVdGlscy5pc0VtcHR5KHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKGFjcXVpcmVUb2tlblVzZXJLZXlfbm91c2VyKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlQWNjZXNzVG9rZW4oYXV0aG9yaXR5LCB0b2tlblJlc3BvbnNlLCBhY2NvdW50LCBjbGllbnRJbmZvLCBpZFRva2VuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5pbmZvKFwiRnJhZ21lbnQgaGFzIGlkIHRva2VuXCIpO1xyXG4gICAgICAgICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICBpZFRva2VuID0gbmV3IElkVG9rZW4odG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5pZFRva2VuXSk7XHJcbiAgICAgICAgICBpZiAodG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5jbGllbnRJbmZvKSkge1xyXG4gICAgICAgICAgICBjbGllbnRJbmZvID0gdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW0NvbnN0YW50cy5jbGllbnRJbmZvXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLndhcm5pbmcoXCJDbGllbnRJbmZvIG5vdCByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2UgZnJvbSBBQURcIik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYXV0aG9yaXR5S2V5ID0gQ29uc3RhbnRzLmF1dGhvcml0eSArIENvbnN0YW50cy5yZXNvdXJjZURlbGltZXRlciArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICAgIGxldCBhdXRob3JpdHk6IHN0cmluZyA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKGF1dGhvcml0eUtleSwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpO1xyXG4gICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5KGF1dGhvcml0eSkpIHtcclxuICAgICAgICAgICAgYXV0aG9yaXR5ID0gVXRpbHMucmVwbGFjZUZpcnN0UGF0aChhdXRob3JpdHksIGlkVG9rZW4udGVuYW50SWQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMucEFjY291bnQgPSBBY2NvdW50LmNyZWF0ZUFjY291bnQoaWRUb2tlbiwgbmV3IEhvbWVBY2NvdW50SWRlbnRpZmllcihjbGllbnRJbmZvKSk7XHJcbiAgICAgICAgICBpZiAoaWRUb2tlbiAmJiBpZFRva2VuLm5vbmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChpZFRva2VuLm5vbmNlICE9PSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMubm9uY2VJZFRva2VuLCB0aGlzLnBDb25maWcuY2FjaGUuc3RvcmVBdXRoU3RhdGVJbkNvb2tpZSkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBBY2NvdW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubG9naW5FcnJvciwgXCJOb25jZSBNaXNtYXRjaC4gRXhwZWN0ZWQgTm9uY2U6IFwiICsgdGhpcy5wQ2FjaGVTdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpICsgXCIsXCIgKyBcIkFjdHVhbCBOb25jZTogXCIgKyBpZFRva2VuLm5vbmNlKTtcclxuICAgICAgICAgICAgICB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlci5lcnJvcihcIk5vbmNlIE1pc21hdGNoLkV4cGVjdGVkIE5vbmNlOiBcIiArIHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5ub25jZUlkVG9rZW4sIHRoaXMucENvbmZpZy5jYWNoZS5zdG9yZUF1dGhTdGF0ZUluQ29va2llKSArIFwiLFwiICsgXCJBY3R1YWwgTm9uY2U6IFwiICsgaWRUb2tlbi5ub25jZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLmlkVG9rZW5LZXksIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tDb25zdGFudHMuaWRUb2tlbl0pO1xyXG4gICAgICAgICAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5tc2FsQ2xpZW50SW5mbywgY2xpZW50SW5mbyk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIFNhdmUgaWRUb2tlbiBhcyBhY2Nlc3MgdG9rZW4gZm9yIGFwcCBpdHNlbGZcclxuICAgICAgICAgICAgICB0aGlzLnNhdmVBY2Nlc3NUb2tlbihhdXRob3JpdHksIHRva2VuUmVzcG9uc2UsIHRoaXMucEFjY291bnQsIGNsaWVudEluZm8sIGlkVG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRob3JpdHlLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIHRoaXMucENvbmZpZy5zeXN0ZW0ubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZF90b2tlbiByZWNlaXZlZCBpbiB0aGUgcmVzcG9uc2VcIik7XHJcbiAgICAgICAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yXCJdID0gXCJpbnZhbGlkIGlkVG9rZW5cIjtcclxuICAgICAgICAgICAgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wiZXJyb3JfZGVzY3JpcHRpb25cIl0gPSBcIkludmFsaWQgaWRUb2tlbi4gaWRUb2tlbjogXCIgKyB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dO1xyXG4gICAgICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBcImludmFsaWQgaWRUb2tlblwiKTtcclxuICAgICAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIkludmFsaWQgaWRUb2tlbi4gaWRUb2tlbjogXCIgKyB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnNbQ29uc3RhbnRzLmlkVG9rZW5dKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXV0aG9yaXR5S2V5ID0gdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlO1xyXG4gICAgICAgIGFjcXVpcmVUb2tlblVzZXJLZXkgPSB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5wQ29uZmlnLnN5c3RlbS5sb2dnZXIuZXJyb3IoXCJTdGF0ZSBNaXNtYXRjaC5FeHBlY3RlZCBTdGF0ZTogXCIgKyB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpICsgXCIsXCIgKyBcIkFjdHVhbCBTdGF0ZTogXCIgKyB0b2tlblJlc3BvbnNlLnN0YXRlUmVzcG9uc2UpO1xyXG4gICAgICAgIHRva2VuUmVzcG9uc2UucGFyYW1ldGVyc1tcImVycm9yXCJdID0gXCJJbnZhbGlkX3N0YXRlXCI7XHJcbiAgICAgICAgdG9rZW5SZXNwb25zZS5wYXJhbWV0ZXJzW1wiZXJyb3JfZGVzY3JpcHRpb25cIl0gPSBcIkludmFsaWRfc3RhdGUuIHN0YXRlOiBcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZTtcclxuICAgICAgICB0aGlzLnBDYWNoZVN0b3JhZ2Uuc2V0SXRlbShDb25zdGFudHMubXNhbEVycm9yLCBcIkludmFsaWRfc3RhdGVcIik7XHJcbiAgICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW0oQ29uc3RhbnRzLm1zYWxFcnJvckRlc2NyaXB0aW9uLCBcIkludmFsaWRfc3RhdGUuIHN0YXRlOiBcIiArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucENhY2hlU3RvcmFnZS5zZXRJdGVtKENvbnN0YW50cy5yZW5ld1N0YXR1cyArIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSwgQ29uc3RhbnRzLnRva2VuUmVuZXdTdGF0dXNDb21wbGV0ZWQpO1xyXG4gICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnJlbW92ZUFjcXVpcmVUb2tlbkVudHJpZXMoYXV0aG9yaXR5S2V5LCBhY3F1aXJlVG9rZW5Vc2VyS2V5KTtcclxuICAgIC8vdGhpcyBpcyByZXF1aXJlZCBpZiBuYXZpZ2F0ZVRvTG9naW5SZXF1ZXN0VXJsPWZhbHNlXHJcbiAgICBpZiAodGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpIHtcclxuICAgICAgdGhpcy5wQ2FjaGVTdG9yYWdlLnNldEl0ZW1Db29raWUoYXV0aG9yaXR5S2V5LCBcIlwiLCAtMSk7XHJcbiAgICAgIHRoaXMucENhY2hlU3RvcmFnZS5jbGVhckNvb2tpZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXN0cmluZy1saXRlcmFsICovXHJcblxyXG4gIC8qXHJcbiAgICogQ2hlY2tzIGlmIHRoZSByZWRpcmVjdCByZXNwb25zZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBTVFMuIEluIGNhc2Ugb2YgcmVkaXJlY3QsIHRoZSB1cmwgZnJhZ21lbnQgaGFzIGVpdGhlciBpZF90b2tlbiwgYWNjZXNzX3Rva2VuIG9yIGVycm9yLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIC0gSGFzaCBwYXNzZWQgZnJvbSByZWRpcmVjdCBwYWdlLlxyXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSAtIHRydWUgaWYgcmVzcG9uc2UgY29udGFpbnMgaWRfdG9rZW4sIGFjY2Vzc190b2tlbiBvciBlcnJvciwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBpc0NhbGxiYWNrKGhhc2g6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaGFzaCA9IHRoaXMuZ2V0SGFzaChoYXNoKTtcclxuICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBVdGlscy5kZXNlcmlhbGl6ZShoYXNoKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yRGVzY3JpcHRpb24pIHx8XHJcbiAgICAgIHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoQ29uc3RhbnRzLmVycm9yKSB8fFxyXG4gICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5hY2Nlc3NUb2tlbikgfHxcclxuICAgICAgcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuaWRUb2tlbilcclxuXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm5zIHRoZSBhbmNob3IgcGFydCgjKSBvZiB0aGUgVVJMXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEBoaWRkZW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldEhhc2goaGFzaDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChoYXNoLmluZGV4T2YoXCIjL1wiKSA+IC0xKSB7XHJcbiAgICAgIGhhc2ggPSBoYXNoLnN1YnN0cmluZyhoYXNoLmluZGV4T2YoXCIjL1wiKSArIDIpO1xyXG4gICAgfSBlbHNlIGlmIChoYXNoLmluZGV4T2YoXCIjXCIpID4gLTEpIHtcclxuICAgICAgaGFzaCA9IGhhc2guc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYXNoO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgICogQ3JlYXRlcyBhIHJlcXVlc3RJbmZvIG9iamVjdCBmcm9tIHRoZSBVUkwgZnJhZ21lbnQgYW5kIHJldHVybnMgaXQuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoICAtICBIYXNoIHBhc3NlZCBmcm9tIHJlZGlyZWN0IHBhZ2VcclxuICAgICogQHJldHVybnMge1Rva2VuUmVzcG9uc2V9IGFuIG9iamVjdCBjcmVhdGVkIGZyb20gdGhlIHJlZGlyZWN0IHJlc3BvbnNlIGZyb20gQUFEIGNvbXByaXNpbmcgb2YgdGhlIGtleXMgLSBwYXJhbWV0ZXJzLCByZXF1ZXN0VHlwZSwgc3RhdGVNYXRjaCwgc3RhdGVSZXNwb25zZSBhbmQgdmFsaWQuXHJcbiAgICAqIEBpZ25vcmVcclxuICAgICogQGhpZGRlblxyXG4gICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdEluZm8oaGFzaDogc3RyaW5nKTogVG9rZW5SZXNwb25zZSB7XHJcbiAgICBoYXNoID0gdGhpcy5nZXRIYXNoKGhhc2gpO1xyXG4gICAgY29uc3QgcGFyYW1ldGVycyA9IFV0aWxzLmRlc2VyaWFsaXplKGhhc2gpO1xyXG4gICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IG5ldyBUb2tlblJlc3BvbnNlKCk7XHJcbiAgICBpZiAocGFyYW1ldGVycykge1xyXG4gICAgICB0b2tlblJlc3BvbnNlLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICBpZiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShDb25zdGFudHMuZXJyb3JEZXNjcmlwdGlvbikgfHxcclxuICAgICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5lcnJvcikgfHxcclxuICAgICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5hY2Nlc3NUb2tlbikgfHxcclxuICAgICAgICBwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KENvbnN0YW50cy5pZFRva2VuKSkge1xyXG4gICAgICAgIHRva2VuUmVzcG9uc2UudmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIHdoaWNoIGNhbGxcclxuICAgICAgICBsZXQgc3RhdGVSZXNwb25zZTogc3RyaW5nO1xyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KFwic3RhdGVcIikpIHtcclxuICAgICAgICAgIHN0YXRlUmVzcG9uc2UgPSBwYXJhbWV0ZXJzLnN0YXRlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRva2VuUmVzcG9uc2Uuc3RhdGVSZXNwb25zZSA9IHN0YXRlUmVzcG9uc2U7XHJcbiAgICAgICAgLy8gYXN5bmMgY2FsbHMgY2FuIGZpcmUgaWZyYW1lIGFuZCBsb2dpbiByZXF1ZXN0IGF0IHRoZSBzYW1lIHRpbWUgaWYgZGV2ZWxvcGVyIGRvZXMgbm90IHVzZSB0aGUgQVBJIGFzIGV4cGVjdGVkXHJcbiAgICAgICAgLy8gaW5jb21pbmcgY2FsbGJhY2sgbmVlZHMgdG8gYmUgbG9va2VkIHVwIHRvIGZpbmQgdGhlIHJlcXVlc3QgdHlwZVxyXG4gICAgICAgIGlmIChzdGF0ZVJlc3BvbnNlID09PSB0aGlzLnBDYWNoZVN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuc3RhdGVMb2dpbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpIHx8IHN0YXRlUmVzcG9uc2UgPT09IHRoaXMucFNpbGVudEF1dGhlbnRpY2F0aW9uU3RhdGUpIHsgLy8gbG9naW5SZWRpcmVjdFxyXG4gICAgICAgICAgdG9rZW5SZXNwb25zZS5yZXF1ZXN0VHlwZSA9IENvbnN0YW50cy5sb2dpbjtcclxuICAgICAgICAgIHRva2VuUmVzcG9uc2Uuc3RhdGVNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlUmVzcG9uc2UgPT09IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbiwgdGhpcy5wQ29uZmlnLmNhY2hlLnN0b3JlQXV0aFN0YXRlSW5Db29raWUpKSB7IC8vYWNxdWlyZVRva2VuUmVkaXJlY3RcclxuICAgICAgICAgIHRva2VuUmVzcG9uc2UucmVxdWVzdFR5cGUgPSBDb25zdGFudHMucmVuZXdUb2tlbjtcclxuICAgICAgICAgIHRva2VuUmVzcG9uc2Uuc3RhdGVNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGV4dGVybmFsIGFwaSByZXF1ZXN0cyBtYXkgaGF2ZSBtYW55IHJlbmV3dG9rZW4gcmVxdWVzdHMgZm9yIGRpZmZlcmVudCByZXNvdXJjZVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICB0b2tlblJlc3BvbnNlLnJlcXVlc3RUeXBlID0gd2luZG93LnJlcXVlc3RUeXBlO1xyXG4gICAgICAgICAgY29uc3Qgc3RhdGVzSW5QYXJlbnRDb250ZXh0ID0gd2luZG93LnJlbmV3U3RhdGVzO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZXNJblBhcmVudENvbnRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlc0luUGFyZW50Q29udGV4dFtpXSA9PT0gdG9rZW5SZXNwb25zZS5zdGF0ZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgdG9rZW5SZXNwb25zZS5zdGF0ZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAgKiBFeHRyYWN0cyBzY29wZSB2YWx1ZSBmcm9tIHRoZSBzdGF0ZSBzZW50IHdpdGggdGhlIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3QuXHJcbiAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHNjb3BlLlxyXG4gICAgKiBAaWdub3JlXHJcbiAgICAqIEBoaWRkZW5cclxuICAgICovXHJcbiAgcHJpdmF0ZSBnZXRTY29wZUZyb21TdGF0ZShzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICBjb25zdCBzcGxpdEluZGV4ID0gc3RhdGUuaW5kZXhPZihcInxcIik7XHJcbiAgICAgIGlmIChzcGxpdEluZGV4ID4gLTEgJiYgc3BsaXRJbmRleCArIDEgPCBzdGF0ZS5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gc3RhdGUuc3Vic3RyaW5nKHNwbGl0SW5kZXggKyAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICogRXh0cmFjdHMgc3RhdGUgdmFsdWUgZnJvbSB0aGUgdXNlclN0YXRlIHNlbnQgd2l0aCB0aGUgYXV0aGVudGljYXRpb24gcmVxdWVzdC5cclxuICAqIEByZXR1cm5zIHtzdHJpbmd9IHNjb3BlLlxyXG4gICogQGlnbm9yZVxyXG4gICogQGhpZGRlblxyXG4gICovXHJcbiAgZ2V0QWNjb3VudFN0YXRlKHN0YXRlOiBzdHJpbmcpIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICBjb25zdCBzcGxpdEluZGV4ID0gc3RhdGUuaW5kZXhPZihcInxcIik7XHJcbiAgICAgIGlmIChzcGxpdEluZGV4ID4gLTEgJiYgc3BsaXRJbmRleCArIDEgPCBzdGF0ZS5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gc3RhdGUuc3Vic3RyaW5nKHNwbGl0SW5kZXggKyAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG5cclxuXHJcbiAgLypcclxuICAgICogUmV0dXJucyB3aGV0aGVyIGN1cnJlbnQgd2luZG93IGlzIGluIGlmcmFtIGZvciB0b2tlbiByZW5ld2FsXHJcbiAgICAqIEBpZ25vcmVcclxuICAgICogQGhpZGRlblxyXG4gICAgKi9cclxuICBwcml2YXRlIGlzSW5JZnJhbWUoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LnBhcmVudCAhPT0gd2luZG93O1xyXG4gIH1cclxuXHJcbiAgbG9naW5JblByb2dyZXNzKCk6IGJvb2xlYW4ge1xyXG4gICAgdmFyIHBlbmRpbmdDYWxsYmFjayA9IHRoaXMucENhY2hlU3RvcmFnZS5nZXRJdGVtKENvbnN0YW50cy51cmxIYXNoKTtcclxuICAgIGlmIChwZW5kaW5nQ2FsbGJhY2spIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5wTG9naW5JblByb2dyZXNzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRIb3N0RnJvbVVyaSh1cmk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyByZW1vdmUgaHR0cDovLyBvciBodHRwczovLyBmcm9tIHVyaVxyXG4gICAgdmFyIGV4dHJhY3RlZFVyaSA9IFN0cmluZyh1cmkpLnJlcGxhY2UoL14oaHR0cHM/OilcXC9cXC8vLCBcIlwiKTtcclxuICAgIGV4dHJhY3RlZFVyaSA9IGV4dHJhY3RlZFVyaS5zcGxpdChcIi9cIilbMF07XHJcbiAgICByZXR1cm4gZXh0cmFjdGVkVXJpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldFNjb3Blc0ZvckVuZHBvaW50KGVuZHBvaW50OiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcclxuICAgIC8vIGlmIHVzZXIgc3BlY2lmaWVkIGxpc3Qgb2YgdW5wcm90ZWN0ZWRSZXNvdXJjZXMsIG5vIG5lZWQgdG8gc2VuZCB0b2tlbiB0byB0aGVzZSBlbmRwb2ludHMsIHJldHVybiBudWxsLlxyXG4gICAgaWYgKHRoaXMucENvbmZpZy5mcmFtZXdvcmsudW5wcm90ZWN0ZWRSZXNvdXJjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucENvbmZpZy5mcmFtZXdvcmsudW5wcm90ZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZW5kcG9pbnQuaW5kZXhPZih0aGlzLnBDb25maWcuZnJhbWV3b3JrLnVucHJvdGVjdGVkUmVzb3VyY2VzW2ldKSA+IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5wQ29uZmlnLmZyYW1ld29yay5wcm90ZWN0ZWRSZXNvdXJjZU1hcC5zaXplID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBrZXkgb2YgQXJyYXkuZnJvbSh0aGlzLnBDb25maWcuZnJhbWV3b3JrLnByb3RlY3RlZFJlc291cmNlTWFwLmtleXMoKSkpIHtcclxuICAgICAgICAvLyBjb25maWdFbmRwb2ludCBpcyBsaWtlIC9hcGkvVG9kbyByZXF1ZXN0ZWQgZW5kcG9pbnQgY2FuIGJlIC9hcGkvVG9kby8xXHJcbiAgICAgICAgaWYgKGVuZHBvaW50LmluZGV4T2Yoa2V5KSA+IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5wQ29uZmlnLmZyYW1ld29yay5wcm90ZWN0ZWRSZXNvdXJjZU1hcC5nZXQoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkZWZhdWx0IHJlc291cmNlIHdpbGwgYmUgY2xpZW50aWQgaWYgbm90aGluZyBzcGVjaWZpZWRcclxuICAgIC8vIEFwcCB3aWxsIHVzZSBpZHRva2VuIGZvciBjYWxscyB0byBpdHNlbGZcclxuICAgIC8vIGNoZWNrIGlmIGl0J3Mgc3RhcmluZyBmcm9tIGh0dHAgb3IgaHR0cHMsIG5lZWRzIHRvIG1hdGNoIHdpdGggYXBwIGhvc3RcclxuICAgIGlmIChlbmRwb2ludC5pbmRleE9mKFwiaHR0cDovL1wiKSA+IC0xIHx8IGVuZHBvaW50LmluZGV4T2YoXCJodHRwczovL1wiKSA+IC0xKSB7XHJcbiAgICAgIGlmICh0aGlzLmdldEhvc3RGcm9tVXJpKGVuZHBvaW50KSA9PT0gdGhpcy5nZXRIb3N0RnJvbVVyaSh0aGlzLmdldFJlZGlyZWN0VXJpKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheTxzdHJpbmc+KHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gaW4gYW5ndWxhciBsZXZlbCwgdGhlIHVybCBmb3IgJGh0dHAgaW50ZXJjZXB0b3IgY2FsbCBjb3VsZCBiZSByZWxhdGl2ZSB1cmwsXHJcbiAgICAgIC8vIGlmIGl0J3MgcmVsYXRpdmUgY2FsbCwgd2UnbGwgdHJlYXQgaXQgYXMgYXBwIGJhY2tlbmQgY2FsbC5cclxuICAgICAgcmV0dXJuIG5ldyBBcnJheTxzdHJpbmc+KHRoaXMucENvbmZpZy5hdXRoLmNsaWVudElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBub3QgdGhlIGFwcCdzIG93biBiYWNrZW5kIG9yIG5vdCBhIGRvbWFpbiBsaXN0ZWQgaW4gdGhlIGVuZHBvaW50cyBzdHJ1Y3R1cmVcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy9UaGVzZSBBUElTIGFyZSBleHBvc2VkIGZvciBtc2FsQW5ndWxhciB3cmFwcGVyIG9ubHlcclxuICBwcm90ZWN0ZWQgc2V0bG9naW5JblByb2dyZXNzKGxvZ2luSW5Qcm9ncmVzczogYm9vbGVhbikge1xyXG4gICAgdGhpcy5wTG9naW5JblByb2dyZXNzID0gbG9naW5JblByb2dyZXNzO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wQWNxdWlyZVRva2VuSW5Qcm9ncmVzcztcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRBY3F1aXJlVG9rZW5JblByb2dyZXNzKGFjcXVpcmVUb2tlbkluUHJvZ3Jlc3M6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMucEFjcXVpcmVUb2tlbkluUHJvZ3Jlc3MgPSBhY3F1aXJlVG9rZW5JblByb2dyZXNzO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldExvZ2dlcigpIHtcclxuICAgIHJldHVybiB0aGlzLnBDb25maWcuc3lzdGVtLmxvZ2dlcjtcclxuICB9XHJcbn1cclxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb2tlblJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIHBhcmFtZXRlcnM6IE9iamVjdDtcbiAgc3RhdGVNYXRjaDogYm9vbGVhbjtcbiAgc3RhdGVSZXNwb25zZTogc3RyaW5nO1xuICByZXF1ZXN0VHlwZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fTtcbiAgICB0aGlzLnN0YXRlTWF0Y2ggPSBmYWxzZTtcbiAgICB0aGlzLnN0YXRlUmVzcG9uc2UgPSBcIlwiO1xuICAgIHRoaXMucmVxdWVzdFR5cGUgPSBcInVua25vd25cIjtcbiAgfVxufVxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbiAqICBNSVQgTGljZW5zZVxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcclxuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxyXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXHJcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcclxuICogY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcclxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xyXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcclxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBIb21lQWNjb3VudElkZW50aWZpZXIgfSBmcm9tIFwiLi9Ib21lQWNjb3VudElkZW50aWZpZXJcIjtcclxuaW1wb3J0IHsgSWRUb2tlbiB9IGZyb20gXCIuL0lkVG9rZW5cIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5cclxuLypcclxuZXhwb3J0IHR5cGUgQWNjb3VudCB7XHJcbiAgICBhY2NvdW50SWRlbnRpZmllcjogc3RyaW5nOyBcclxuICAgIGhvbWVBY2NvdW50SWRlbnRpZmllcjogc3RyaW5nOyAgLy8gdXNlcklkZW50aWZpZXIgcmVuYW1lZFxyXG4gICAgdXNlck5hbWU6IHN0cmluZzsgLy8gZGlzcGxheWFibGVJRCByZW5hbWVkXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBpZFRva2VuOiBPYmplY3Q7XHJcbiAgICBzaWQ6IHN0cmluZzsgXHJcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nOyAgIC8vIGlkZW50aXR5UHJvdmlkZXIgcmVuYW1lZFxyXG59XHJcbiovXHJcblxyXG5leHBvcnQgY2xhc3MgQWNjb3VudCB7XHJcblxyXG4gICAgYWNjb3VudElkZW50aWZpZXI6IHN0cmluZzsgXHJcbiAgICBob21lQWNjb3VudElkZW50aWZpZXI6IHN0cmluZzsgIC8vIHVzZXJJZGVudGlmaWVyIHJlbmFtZWRcclxuICAgIHVzZXJOYW1lOiBzdHJpbmc7IC8vIGRpc3BsYXlhYmxlSUQgcmVuYW1lZFxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgaWRUb2tlbjogT2JqZWN0O1xyXG4gICAgc2lkOiBzdHJpbmc7IFxyXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZzsgICAvLyBpZGVudGl0eVByb3ZpZGVyIHJlbmFtZWRcclxuXHJcbiAgICAvKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhY2NvdW50SWRlbnRpZmllcjogc3RyaW5nLCBob21lQWNjb3VudElkZW50aWZpZXI6IHN0cmluZywgdXNlck5hbWU6IHN0cmluZywgbmFtZTogc3RyaW5nLCBpZFRva2VuOiBPYmplY3QsIHNpZDogc3RyaW5nLCBlbnZpcm9ubWVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hY2NvdW50SWRlbnRpZmllciA9IGFjY291bnRJZGVudGlmaWVyO1xyXG4gICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyID0gaG9tZUFjY291bnRJZGVudGlmaWVyO1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgdGhpcy5zaWQgPSBzaWQ7XHJcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBY2NvdW50KGlkVG9rZW46IElkVG9rZW4sIGNsaWVudEluZm86IEhvbWVBY2NvdW50SWRlbnRpZmllcik6IEFjY291bnQge1xyXG4gICAgICAgIC8vIENvbnN0cnVjdCBhY2NvdW50SWRlbnRpZmllclxyXG5cclxuICAgICAgICBsZXQgYWNjb3VudFVpZDogc3RyaW5nO1xyXG4gICAgICAgIGxldCBhY2NvdW50VXRpZDogc3RyaW5nO1xyXG5cclxuICAgICAgICBpZiAoIWlkVG9rZW4pIHtcclxuICAgICAgICAgICAgYWNjb3VudFVpZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGFjY291bnRVdGlkID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFjY291bnRVaWQgPSBpZFRva2VuLnVpZDtcclxuICAgICAgICAgICAgYWNjb3VudFV0aWQgPSBpZFRva2VuLnV0aWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb25zdHJ1Y3QgSG9tZUFjY291bnRJZGVudGlmaWVyXHJcbiAgICAgICAgbGV0IHVpZDogc3RyaW5nO1xyXG4gICAgICAgIGxldCB1dGlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGlmICghY2xpZW50SW5mbykge1xyXG4gICAgICAgICAgICB1aWQgPSBcIlwiO1xyXG4gICAgICAgICAgICB1dGlkID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHVpZCA9IGNsaWVudEluZm8udWlkO1xyXG4gICAgICAgICAgICB1dGlkID0gY2xpZW50SW5mby51dGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWNjb3VudElkZW50aWZpZXIgPSBVdGlscy5iYXNlNjRFbmNvZGVTdHJpbmdVcmxTYWZlKGFjY291bnRVaWQpICsgXCIuXCIgKyBVdGlscy5iYXNlNjRFbmNvZGVTdHJpbmdVcmxTYWZlKGFjY291bnRVdGlkKTtcclxuICAgICAgICBjb25zdCBob21lQWNjb3VudElkZW50aWZpZXIgPSBVdGlscy5iYXNlNjRFbmNvZGVTdHJpbmdVcmxTYWZlKHVpZCkgKyBcIi5cIiArIFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUodXRpZCk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQWNjb3VudChhY2NvdW50SWRlbnRpZmllciwgaG9tZUFjY291bnRJZGVudGlmaWVyLCBpZFRva2VuLnByZWZlcnJlZE5hbWUsIGlkVG9rZW4ubmFtZSwgaWRUb2tlbi5kZWNvZGVkSWRUb2tlbiwgaWRUb2tlbi5zaWQsIGlkVG9rZW4uaXNzdWVyKTtcclxuICAgIH1cclxufVxyXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQXV0aG9yaXR5LCBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4vQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBYaHJDbGllbnQgfSBmcm9tIFwiLi9YSFJDbGllbnRcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBYWRBdXRob3JpdHkgZXh0ZW5kcyBBdXRob3JpdHkge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBBYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50OiBzdHJpbmcgPSBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9jb21tb24vZGlzY292ZXJ5L2luc3RhbmNlXCI7XG5cbiAgcHJpdmF0ZSBnZXQgQWFkSW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludFVybCgpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIGAke0FhZEF1dGhvcml0eS5BYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50fT9hcGktdmVyc2lvbj0xLjAmYXV0aG9yaXphdGlvbl9lbmRwb2ludD0ke3RoaXMuQ2Fub25pY2FsQXV0aG9yaXR5fW9hdXRoMi92Mi4wL2F1dGhvcml6ZWA7XG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoYXV0aG9yaXR5OiBzdHJpbmcsIHZhbGlkYXRlQXV0aG9yaXR5OiBib29sZWFuKSB7XG4gICAgc3VwZXIoYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IEF1dGhvcml0eVR5cGUoKTogQXV0aG9yaXR5VHlwZSB7XG4gICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWFkO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVHJ1c3RlZEhvc3RMaXN0OiBhbnkgPSB7XG4gICAgXCJsb2dpbi53aW5kb3dzLm5ldFwiOiBcImxvZ2luLndpbmRvd3MubmV0XCIsXG4gICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCI6IFwibG9naW4uY2hpbmFjbG91ZGFwaS5jblwiLFxuICAgIFwibG9naW4uY2xvdWRnb3ZhcGkudXNcIjogXCJsb2dpbi5jbG91ZGdvdmFwaS51c1wiLFxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIixcbiAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCI6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCJcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIE9JREMgZW5kcG9pbnRcbiAgICogT25seSByZXNwb25kcyB3aXRoIHRoZSBlbmRwb2ludFxuICAgKi9cbiAgcHVibGljIEdldE9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludEFzeW5jKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICB2YXIgcmVzdWx0UHJvbWlzZTogUHJvbWlzZTxzdHJpbmc+ID0gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgcmVzb2x2ZSh0aGlzLkRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQpKTtcblxuICAgIGlmICghdGhpcy5Jc1ZhbGlkYXRpb25FbmFibGVkKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgaG9zdDogc3RyaW5nID0gdGhpcy5DYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydDtcbiAgICBpZiAodGhpcy5Jc0luVHJ1c3RlZEhvc3RMaXN0KGhvc3QpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgY2xpZW50OiBYaHJDbGllbnQgPSBuZXcgWGhyQ2xpZW50KCk7XG5cbiAgICByZXR1cm4gY2xpZW50LnNlbmRSZXF1ZXN0QXN5bmModGhpcy5BYWRJbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50VXJsLCBcIkdFVFwiLCB0cnVlKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS50ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50O1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgaG9zdCBpcyBpbiBhIGxpc3Qgb2YgdHJ1c3RlZCBob3N0c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gVGhlIGhvc3QgdG8gbG9vayB1cFxuICAgKi9cbiAgcHVibGljIElzSW5UcnVzdGVkSG9zdExpc3QoaG9zdDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEFhZEF1dGhvcml0eS5UcnVzdGVkSG9zdExpc3RbaG9zdC50b0xvd2VyQ2FzZSgpXTtcbiAgfVxufVxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbiAqICBNSVQgTGljZW5zZVxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcclxuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxyXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXHJcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcclxuICogY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcclxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xyXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcclxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cclxuICovXHJcblxyXG4vKlxyXG4gKiBYSFIgY2xpZW50IGZvciBKU09OIGVuZHBvaW50c1xyXG4gKiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9hc3luYy1wcm9taXNlXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBYaHJDbGllbnQge1xyXG4gICAgcHVibGljIHNlbmRSZXF1ZXN0QXN5bmModXJsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nLCBlbmFibGVDYWNoaW5nPzogYm9vbGVhbik6IFByb21pc2U8YW55PiB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIC8qYXN5bmM6ICovIHRydWUpO1xyXG4gICAgICAgIGlmIChlbmFibGVDYWNoaW5nKSB7XHJcbiAgICAgICAgICAvLyBUT0RPOiAoc2hpdmIpIGVuc3VyZSB0aGF0IHRoaXMgY2FuIGJlIGNhY2hlZFxyXG4gICAgICAgICAgLy8geGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwiUHVibGljXCIpO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICB4aHIub25sb2FkID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gMzAwKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcy5oYW5kbGVFcnJvcih4aHIucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uUmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcy5oYW5kbGVFcnJvcih4aHIucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgcmVzb2x2ZShqc29uUmVzcG9uc2UpO1xyXG4gICAgICAgIH07XHJcbiAgXHJcbiAgICAgICAgeGhyLm9uZXJyb3IgPSAoZXYpID0+IHtcclxuICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzKTtcclxuICAgICAgICB9O1xyXG4gIFxyXG4gICAgICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIpIHtcclxuICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgXCJub3QgaW1wbGVtZW50ZWRcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJvdGVjdGVkIGhhbmRsZUVycm9yKHJlc3BvbnNlVGV4dDogc3RyaW5nKTogYW55IHtcclxuICAgICAgdmFyIGpzb25SZXNwb25zZTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBqc29uUmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgaWYgKGpzb25SZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlLmVycm9yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlc3BvbnNlVGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VUZXh0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElMb2dnZXJDYWxsYmFjayB7XG4gIChsZXZlbDogTG9nTGV2ZWwsIG1lc3NhZ2U6IHN0cmluZywgY29udGFpbnNQaWk6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gIEVycm9yLFxuICBXYXJuaW5nLFxuICBJbmZvLFxuICBWZXJib3NlXG59XG5cbmV4cG9ydCBjbGFzcyBMb2dnZXIgey8vIFNpbmdsZXRvbiBDbGFzc1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIF9pbnN0YW5jZTogTG9nZ2VyO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2NvcnJlbGF0aW9uSWQ6IHN0cmluZztcblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIF9sZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JbmZvO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX3BpaUxvZ2dpbmdFbmFibGVkOiBib29sZWFuO1xuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2xvY2FsQ2FsbGJhY2s6IElMb2dnZXJDYWxsYmFjaztcblxuICBjb25zdHJ1Y3Rvcihsb2NhbENhbGxiYWNrOiBJTG9nZ2VyQ2FsbGJhY2ssXG4gICAgICBvcHRpb25zOlxuICAgICAge1xuICAgICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcsXG4gICAgICAgICAgbGV2ZWw/OiBMb2dMZXZlbCxcbiAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZD86IGJvb2xlYW4sXG4gICAgICB9ID0ge30pIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgICBjb3JyZWxhdGlvbklkID0gXCJcIixcbiAgICAgICAgICBsZXZlbCA9IExvZ0xldmVsLkluZm8sXG4gICAgICAgICAgcGlpTG9nZ2luZ0VuYWJsZWQgPSBmYWxzZVxuICAgICAgfSA9IG9wdGlvbnM7XG5cbiAgICAgIHRoaXMuX2xvY2FsQ2FsbGJhY2sgPSBsb2NhbENhbGxiYWNrO1xuICAgICAgdGhpcy5fY29ycmVsYXRpb25JZCA9IGNvcnJlbGF0aW9uSWQ7XG4gICAgICB0aGlzLl9sZXZlbCA9IGxldmVsO1xuICAgICAgdGhpcy5fcGlpTG9nZ2luZ0VuYWJsZWQgPSBwaWlMb2dnaW5nRW5hYmxlZDtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgbG9nTWVzc2FnZShsb2dMZXZlbDogTG9nTGV2ZWwsIGxvZ01lc3NhZ2U6IHN0cmluZywgY29udGFpbnNQaWk6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoKGxvZ0xldmVsID4gdGhpcy5fbGV2ZWwpIHx8ICghdGhpcy5fcGlpTG9nZ2luZ0VuYWJsZWQgJiYgY29udGFpbnNQaWkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCk7XG4gICAgdmFyIGxvZzogc3RyaW5nO1xuICAgIGlmICghVXRpbHMuaXNFbXB0eSh0aGlzLl9jb3JyZWxhdGlvbklkKSkge1xuICAgICAgbG9nID0gdGltZXN0YW1wICsgXCI6XCIgKyB0aGlzLl9jb3JyZWxhdGlvbklkICsgXCItXCIgKyBVdGlscy5nZXRMaWJyYXJ5VmVyc2lvbigpICsgXCItXCIgKyBMb2dMZXZlbFtsb2dMZXZlbF0gKyBcIiBcIiArIGxvZ01lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbG9nID0gdGltZXN0YW1wICsgXCI6XCIgKyBVdGlscy5nZXRMaWJyYXJ5VmVyc2lvbigpICsgXCItXCIgKyBMb2dMZXZlbFtsb2dMZXZlbF0gKyBcIiBcIiArIGxvZ01lc3NhZ2U7XG4gICAgfVxuICAgIHRoaXMuZXhlY3V0ZUNhbGxiYWNrKGxvZ0xldmVsLCBsb2csIGNvbnRhaW5zUGlpKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIGV4ZWN1dGVDYWxsYmFjayhsZXZlbDogTG9nTGV2ZWwsIG1lc3NhZ2U6IHN0cmluZywgY29udGFpbnNQaWk6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5fbG9jYWxDYWxsYmFjaykge1xuICAgICAgdGhpcy5fbG9jYWxDYWxsYmFjayhsZXZlbCwgbWVzc2FnZSwgY29udGFpbnNQaWkpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIGVycm9yKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5FcnJvciwgbWVzc2FnZSwgZmFsc2UpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgZXJyb3JQaWkobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLkVycm9yLCBtZXNzYWdlLCB0cnVlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHdhcm5pbmcobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLldhcm5pbmcsIG1lc3NhZ2UsIGZhbHNlKTtcbiAgfVxuXG4gIC8qXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHdhcm5pbmdQaWkobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dNZXNzYWdlKExvZ0xldmVsLldhcm5pbmcsIG1lc3NhZ2UsIHRydWUpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuSW5mbywgbWVzc2FnZSwgZmFsc2UpO1xuICB9XG5cbiAgLypcbiAgICogQGhpZGRlblxuICAgKi9cbiAgaW5mb1BpaShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ01lc3NhZ2UoTG9nTGV2ZWwuSW5mbywgbWVzc2FnZSwgdHJ1ZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICB2ZXJib3NlKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5WZXJib3NlLCBtZXNzYWdlLCBmYWxzZSk7XG4gIH1cblxuICAvKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICB2ZXJib3NlUGlpKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9nTWVzc2FnZShMb2dMZXZlbC5WZXJib3NlLCBtZXNzYWdlLCB0cnVlKTtcbiAgfVxufVxuIiwiZXhwb3J0IHsgVXNlckFnZW50QXBwbGljYXRpb24gfSBmcm9tIFwiLi9Vc2VyQWdlbnRBcHBsaWNhdGlvblwiO1xyXG5leHBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi9Mb2dnZXJcIjtcclxuZXhwb3J0IHsgTG9nTGV2ZWwgfSBmcm9tIFwiLi9Mb2dnZXJcIjtcclxuZXhwb3J0IHsgQWNjb3VudCB9IGZyb20gXCIuL0FjY291bnRcIjtcclxuZXhwb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XHJcbmV4cG9ydCB7IFRva2VuUmVzcG9uc2V9IGZyb20gXCIuL1JlcXVlc3RJbmZvXCI7XHJcbmV4cG9ydCB7QXV0aG9yaXR5fSBmcm9tIFwiLi9BdXRob3JpdHlcIjtcclxuZXhwb3J0IHtDYWNoZVJlc3VsdH0gZnJvbSBcIi4vVXNlckFnZW50QXBwbGljYXRpb25cIjtcclxuZXhwb3J0IHtUQ29uZmlndXJhdGlvbn0gZnJvbSBcIi4vQ29uZmlndXJhdGlvblwiO1xyXG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVG9rZW5LZXkge1xuXG4gIGF1dGhvcml0eTogc3RyaW5nO1xuICBjbGllbnRJZDogc3RyaW5nO1xuICB1c2VySWRlbnRpZmllcjogc3RyaW5nO1xuICBzY29wZXM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhdXRob3JpdHk6IHN0cmluZywgY2xpZW50SWQ6IHN0cmluZywgc2NvcGVzOiBzdHJpbmcsIHVpZDogc3RyaW5nLCB1dGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmF1dGhvcml0eSA9IGF1dGhvcml0eTtcbiAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgdGhpcy5zY29wZXMgPSBzY29wZXM7XG4gICAgdGhpcy51c2VySWRlbnRpZmllciA9IFV0aWxzLmJhc2U2NEVuY29kZVN0cmluZ1VybFNhZmUodWlkKSArIFwiLlwiICsgVXRpbHMuYmFzZTY0RW5jb2RlU3RyaW5nVXJsU2FmZSh1dGlkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlblZhbHVlIHtcblxuICBhY2Nlc3NUb2tlbjogc3RyaW5nO1xuICBpZFRva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNJbjogc3RyaW5nO1xuICBjbGllbnRJbmZvOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYWNjZXNzVG9rZW46IHN0cmluZywgaWRUb2tlbjogc3RyaW5nLCBleHBpcmVzSW46IHN0cmluZywgY2xpZW50SW5mbzogc3RyaW5nKSB7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIHRoaXMuaWRUb2tlbiA9IGlkVG9rZW47XG4gICAgdGhpcy5leHBpcmVzSW4gPSBleHBpcmVzSW47XG4gICAgdGhpcy5jbGllbnRJbmZvID0gY2xpZW50SW5mbztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XG5cbi8qXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvblJlcXVlc3RQYXJhbWV0ZXJzIHtcbiAgYXV0aG9yaXR5SW5zdGFuY2U6IEF1dGhvcml0eTtcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgbm9uY2U6IHN0cmluZztcbiAgc3RhdGU6IHN0cmluZztcbiAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuICB4Q2xpZW50VmVyOiBzdHJpbmc7XG4gIHhDbGllbnRTa3U6IHN0cmluZztcbiAgc2NvcGVzOiBBcnJheTxzdHJpbmc+O1xuICByZXNwb25zZVR5cGU6IHN0cmluZztcbiAgcHJvbXB0VmFsdWU6IHN0cmluZztcbiAgZXh0cmFRdWVyeVBhcmFtZXRlcnM6IHN0cmluZztcbiAgbG9naW5IaW50OiBzdHJpbmc7XG4gIGRvbWFpbkhpbnQ6IHN0cmluZztcbiAgcmVkaXJlY3RVcmk6IHN0cmluZztcbiAgICBwdWJsaWMgZ2V0IGF1dGhvcml0eSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA/IHRoaXMuYXV0aG9yaXR5SW5zdGFuY2UuQ2Fub25pY2FsQXV0aG9yaXR5IDogbnVsbDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGF1dGhvcml0eTogQXV0aG9yaXR5LCBjbGllbnRJZDogc3RyaW5nLCBzY29wZTogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlOiBzdHJpbmcsIHJlZGlyZWN0VXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgKSB7XG4gICAgdGhpcy5hdXRob3JpdHlJbnN0YW5jZSA9IGF1dGhvcml0eTtcbiAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgdGhpcy5zY29wZXMgPSBzY29wZTtcbiAgICB0aGlzLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB0aGlzLnJlZGlyZWN0VXJpID0gcmVkaXJlY3RVcmk7XG4gICAgLy8gcmFuZG9tbHkgZ2VuZXJhdGVkIHZhbHVlc1xuICAgIHRoaXMuY29ycmVsYXRpb25JZCA9IFV0aWxzLmNyZWF0ZU5ld0d1aWQoKTtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGUgJiYgIVV0aWxzLmlzRW1wdHkoc3RhdGUpID8gIFV0aWxzLmNyZWF0ZU5ld0d1aWQoKSArIFwifFwiICsgc3RhdGUgICA6IFV0aWxzLmNyZWF0ZU5ld0d1aWQoKTtcbiAgICB0aGlzLm5vbmNlID0gVXRpbHMuY3JlYXRlTmV3R3VpZCgpO1xuICAgIC8vIHRlbGVtZXRyeSBpbmZvcm1hdGlvblxuICAgIHRoaXMueENsaWVudFNrdSA9IFwiTVNBTC5KU1wiO1xuICAgIHRoaXMueENsaWVudFZlciA9IFV0aWxzLmdldExpYnJhcnlWZXJzaW9uKCk7XG4gIH1cblxuICAgIGNyZWF0ZU5hdmlnYXRlVXJsKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzLmNyZWF0ZU5hdmlnYXRpb25VcmxTdHJpbmcoc2NvcGVzKTtcbiAgICAgICAgbGV0IGF1dGhFbmRwb2ludDogc3RyaW5nID0gdGhpcy5hdXRob3JpdHlJbnN0YW5jZS5BdXRob3JpemF0aW9uRW5kcG9pbnQ7XG4gICAgICAgIC8vIGlmIHRoZSBlbmRwb2ludCBhbHJlYWR5IGhhcyBxdWVyeXBhcmFtcywgbGV0cyBhZGQgdG8gaXQsIG90aGVyd2lzZSBhZGQgdGhlIGZpcnN0IG9uZVxuICAgICAgICBpZiAoYXV0aEVuZHBvaW50LmluZGV4T2YoXCI/XCIpIDwgMCkge1xuICAgICAgICAgICAgYXV0aEVuZHBvaW50ICs9IFwiP1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXV0aEVuZHBvaW50ICs9IFwiJlwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXF1ZXN0VXJsOiBzdHJpbmcgPSBgJHthdXRoRW5kcG9pbnR9JHtzdHIuam9pbihcIiZcIil9YDtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RVcmw7XG4gICAgfVxuXG4gICAgY3JlYXRlTmF2aWdhdGlvblVybFN0cmluZyhzY29wZXM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKCFzY29wZXMpIHtcbiAgICAgICAgICAgIHNjb3BlcyA9IFt0aGlzLmNsaWVudElkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzY29wZXMuaW5kZXhPZih0aGlzLmNsaWVudElkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNjb3Blcy5wdXNoKHRoaXMuY2xpZW50SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RyOiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgICAgIHN0ci5wdXNoKFwicmVzcG9uc2VfdHlwZT1cIiArIHRoaXMucmVzcG9uc2VUeXBlKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVjbGllbnRJZFVzZWRJblNjb3BlKHNjb3Blcyk7XG4gICAgICAgIHN0ci5wdXNoKFwic2NvcGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5wYXJzZVNjb3BlKHNjb3BlcykpKTtcbiAgICAgICAgc3RyLnB1c2goXCJjbGllbnRfaWQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jbGllbnRJZCkpO1xuICAgICAgICBzdHIucHVzaChcInJlZGlyZWN0X3VyaT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnJlZGlyZWN0VXJpKSk7XG4gICAgICAgIHN0ci5wdXNoKFwic3RhdGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5zdGF0ZSkpO1xuICAgICAgICBzdHIucHVzaChcIm5vbmNlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMubm9uY2UpKTtcbiAgICAgICAgc3RyLnB1c2goXCJjbGllbnRfaW5mbz0xXCIpO1xuICAgICAgICBzdHIucHVzaChgeC1jbGllbnQtU0tVPSR7dGhpcy54Q2xpZW50U2t1fWApO1xuICAgICAgICBzdHIucHVzaChgeC1jbGllbnQtVmVyPSR7dGhpcy54Q2xpZW50VmVyfWApO1xuXG4gICAgICAgIGlmICh0aGlzLmV4dHJhUXVlcnlQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBzdHIucHVzaCh0aGlzLmV4dHJhUXVlcnlQYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0ci5wdXNoKFwiY2xpZW50LXJlcXVlc3QtaWQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb3JyZWxhdGlvbklkKSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgdHJhbnNsYXRlY2xpZW50SWRVc2VkSW5TY29wZShzY29wZXM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcbiAgICBjb25zdCBjbGllbnRJZEluZGV4OiBudW1iZXIgPSBzY29wZXMuaW5kZXhPZih0aGlzLmNsaWVudElkKTtcbiAgICBpZiAoY2xpZW50SWRJbmRleCA+PSAwKSB7XG4gICAgICBzY29wZXMuc3BsaWNlKGNsaWVudElkSW5kZXgsIDEpO1xuICAgICAgaWYgKHNjb3Blcy5pbmRleE9mKFwib3BlbmlkXCIpID09PSAtMSkge1xuICAgICAgICBzY29wZXMucHVzaChcIm9wZW5pZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChzY29wZXMuaW5kZXhPZihcInByb2ZpbGVcIikgPT09IC0xKSB7XG4gICAgICAgIHNjb3Blcy5wdXNoKFwicHJvZmlsZVwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwYXJzZVNjb3BlKHNjb3BlczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgbGV0IHNjb3BlTGlzdDogc3RyaW5nID0gXCJcIjtcbiAgICBpZiAoc2NvcGVzKSB7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBzY29wZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgc2NvcGVMaXN0ICs9IChpICE9PSBzY29wZXMubGVuZ3RoIC0gMSkgPyBzY29wZXNbaV0gKyBcIiBcIiA6IHNjb3Blc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcGVMaXN0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgSG9tZUFjY291bnRJZGVudGlmaWVyIHtcblxuICBwcml2YXRlIF91aWQ6IHN0cmluZztcbiAgZ2V0IHVpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl91aWQgPyB0aGlzLl91aWQgOiBcIlwiO1xuICB9XG5cbiAgc2V0IHVpZCh1aWQ6IHN0cmluZykge1xuICAgIHRoaXMuX3VpZCA9IHVpZDtcbiAgfVxuXG4gIHByaXZhdGUgX3V0aWQ6IHN0cmluZztcbiAgZ2V0IHV0aWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fdXRpZCA/IHRoaXMuX3V0aWQgOiBcIlwiO1xuICB9XG5cbiAgc2V0IHV0aWQodXRpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5fdXRpZCA9IHV0aWQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihyYXdBY2NvdW50SWRlbnRpZmllcjogc3RyaW5nKSB7XG4gICAgaWYgKCFyYXdBY2NvdW50SWRlbnRpZmllciB8fCBVdGlscy5pc0VtcHR5KHJhd0FjY291bnRJZGVudGlmaWVyKSkge1xuICAgICAgdGhpcy51aWQgPSBcIlwiO1xuICAgICAgdGhpcy51dGlkID0gXCJcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVjb2RlZEFjY291bnRJZGVudGlmaWVyOiBzdHJpbmcgPSBVdGlscy5iYXNlNjREZWNvZGVTdHJpbmdVcmxTYWZlKHJhd0FjY291bnRJZGVudGlmaWVyKTtcbiAgICAgIGNvbnN0IGhvbWVBY2NvdW50SWRlbnRpZmllcjogSG9tZUFjY291bnRJZGVudGlmaWVyID0gPEhvbWVBY2NvdW50SWRlbnRpZmllcj5KU09OLnBhcnNlKGRlY29kZWRBY2NvdW50SWRlbnRpZmllcik7XG4gICAgICBpZiAoaG9tZUFjY291bnRJZGVudGlmaWVyKSB7XG4gICAgICAgIGlmIChob21lQWNjb3VudElkZW50aWZpZXIuaGFzT3duUHJvcGVydHkoXCJ1aWRcIikpIHtcbiAgICAgICAgICB0aGlzLnVpZCA9IGhvbWVBY2NvdW50SWRlbnRpZmllci51aWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaG9tZUFjY291bnRJZGVudGlmaWVyLmhhc093blByb3BlcnR5KFwidXRpZFwiKSkge1xuICAgICAgICAgIHRoaXMudXRpZCA9IGhvbWVBY2NvdW50SWRlbnRpZmllci51dGlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGUpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcclxuICAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXHJcbiAgKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gICogIE1JVCBMaWNlbnNlXHJcbiAgKlxyXG4gICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAgKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcclxuICAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cclxuICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAgKiBjb25kaXRpb25zOlxyXG4gICpcclxuICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICAqXHJcbiAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXHJcbiAgKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAgKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAgKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gICovXHJcblxyXG4gaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5cclxuIC8qXHJcbiAgKiBAaGlkZGVuXHJcbiAgKi9cclxuIGV4cG9ydCBjbGFzcyBJZFRva2VuIHtcclxuIFxyXG4gICBpc3N1ZXI6IHN0cmluZztcclxuICAgb2JqZWN0SWQ6IHN0cmluZztcclxuICAgc3ViamVjdDogc3RyaW5nO1xyXG4gICB0ZW5hbnRJZDogc3RyaW5nO1xyXG4gICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgIHByZWZlcnJlZE5hbWU6IHN0cmluZztcclxuICAgbmFtZTogc3RyaW5nO1xyXG4gICBob21lT2JqZWN0SWQ6IHN0cmluZztcclxuICAgbm9uY2U6IHN0cmluZztcclxuICAgZXhwaXJhdGlvbjogc3RyaW5nO1xyXG4gICByYXdJZFRva2VuOiBzdHJpbmc7XHJcbiAgIGRlY29kZWRJZFRva2VuOiBPYmplY3Q7XHJcbiAgIHNpZDogc3RyaW5nO1xyXG4gICB1aWQ6IHN0cmluZztcclxuICAgdXRpZDogc3RyaW5nO1xyXG4gICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG4gICBjb25zdHJ1Y3RvcihyYXdJZFRva2VuOiBzdHJpbmcpIHtcclxuICAgICBpZiAoVXRpbHMuaXNFbXB0eShyYXdJZFRva2VuKSkge1xyXG4gICAgICAgdGhyb3cgbmV3IEVycm9yKFwibnVsbCBvciBlbXB0eSByYXcgaWR0b2tlblwiKTtcclxuICAgICB9XHJcbiAgICAgdHJ5IHtcclxuICAgICAgIHRoaXMucmF3SWRUb2tlbiA9IHJhd0lkVG9rZW47XHJcbiAgICAgICB0aGlzLmRlY29kZWRJZFRva2VuID0gVXRpbHMuZXh0cmFjdElkVG9rZW4ocmF3SWRUb2tlbik7XHJcbiAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbikge1xyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcImlzc1wiKSkge1xyXG4gICAgICAgICAgIHRoaXMuaXNzdWVyID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcImlzc1wiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwib2lkXCIpKSB7XHJcbiAgICAgICAgICAgICB0aGlzLm9iamVjdElkID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcIm9pZFwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwic3ViXCIpKSB7XHJcbiAgICAgICAgICAgdGhpcy5zdWJqZWN0ID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcInN1YlwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwidGlkXCIpKSB7XHJcbiAgICAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ0aWRcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInZlclwiKSkge1xyXG4gICAgICAgICAgIHRoaXMudmVyc2lvbiA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ2ZXJcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInByZWZlcnJlZF91c2VybmFtZVwiKSkge1xyXG4gICAgICAgICAgIHRoaXMucHJlZmVycmVkTmFtZSA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJwcmVmZXJyZWRfdXNlcm5hbWVcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcclxuICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wibmFtZVwiXTtcclxuICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgIGlmICh0aGlzLmRlY29kZWRJZFRva2VuLmhhc093blByb3BlcnR5KFwibm9uY2VcIikpIHtcclxuICAgICAgICAgICB0aGlzLm5vbmNlID0gdGhpcy5kZWNvZGVkSWRUb2tlbltcIm5vbmNlXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJleHBcIikpIHtcclxuICAgICAgICAgICB0aGlzLmV4cGlyYXRpb24gPSB0aGlzLmRlY29kZWRJZFRva2VuW1wiZXhwXCJdO1xyXG4gICAgICAgICB9XHJcbiBcclxuICAgICAgICAgaWYgKHRoaXMuZGVjb2RlZElkVG9rZW4uaGFzT3duUHJvcGVydHkoXCJob21lX29pZFwiKSkge1xyXG4gICAgICAgICAgICAgdGhpcy5ob21lT2JqZWN0SWQgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wiaG9tZV9vaWRcIl07XHJcbiAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInNpZFwiKSkge1xyXG4gICAgICAgICAgICAgdGhpcy5zaWQgPSB0aGlzLmRlY29kZWRJZFRva2VuW1wic2lkXCJdO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInVpZFwiKSkge1xyXG4gICAgICAgICAgdGhpcy51aWQgPSB0aGlzLmRlY29kZWRJZFRva2VuW1widWlkXCJdO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAodGhpcy5kZWNvZGVkSWRUb2tlbi5oYXNPd25Qcm9wZXJ0eShcInV0aWRcIikpIHtcclxuICAgICAgICAgIHRoaXMudXRpZCA9IHRoaXMuZGVjb2RlZElkVG9rZW5bXCJ1dGlkXCJdO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgLyogdHNsaW50OmVuYWJsZTpuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG4gICAgICAgfVxyXG4gICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSB0aGUgcmV0dXJuZWQgaWQgdG9rZW5cIik7XHJcbiAgICAgfVxyXG4gICB9XHJcbiBcclxuIH1cclxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxuICogIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqICBNSVQgTGljZW5zZVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICogc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAqIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTXG4gKiBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xuaW1wb3J0IHsgQWNjZXNzVG9rZW5DYWNoZUl0ZW0gfSBmcm9tIFwiLi9BY2Nlc3NUb2tlbkNhY2hlSXRlbVwiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU3RvcmFnZSB7Ly8gU2luZ2xldG9uXG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBTdG9yYWdlO1xuICBwcml2YXRlIF9sb2NhbFN0b3JhZ2VTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX3Nlc3Npb25TdG9yYWdlU3VwcG9ydGVkOiBib29sZWFuO1xuICBwcml2YXRlIF9jYWNoZUxvY2F0aW9uOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY2FjaGVMb2NhdGlvbjogc3RyaW5nKSB7XG4gICAgaWYgKFN0b3JhZ2UuX2luc3RhbmNlKSB7XG4gICAgICByZXR1cm4gU3RvcmFnZS5faW5zdGFuY2U7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVMb2NhdGlvbiA9IGNhY2hlTG9jYXRpb247XG4gICAgdGhpcy5fbG9jYWxTdG9yYWdlU3VwcG9ydGVkID0gdHlwZW9mIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0gIT0gbnVsbDtcbiAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCA9IHR5cGVvZiB3aW5kb3dbY2FjaGVMb2NhdGlvbl0gIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93W2NhY2hlTG9jYXRpb25dICE9IG51bGw7XG4gICAgU3RvcmFnZS5faW5zdGFuY2UgPSB0aGlzO1xuICAgIGlmICghdGhpcy5fbG9jYWxTdG9yYWdlU3VwcG9ydGVkICYmICF0aGlzLl9zZXNzaW9uU3RvcmFnZVN1cHBvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibG9jYWxTdG9yYWdlIGFuZCBzZXNzaW9uU3RvcmFnZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBTdG9yYWdlLl9pbnN0YW5jZTtcbiAgfVxuXG4gICAgLy8gYWRkIHZhbHVlIHRvIHN0b3JhZ2VcbiAgICBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBlbmFibGVDb29raWVTdG9yYWdlPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAod2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dKSB7XG4gICAgICAgICAgICB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0uc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5hYmxlQ29va2llU3RvcmFnZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2V0IG9uZSBpdGVtIGJ5IGtleSBmcm9tIHN0b3JhZ2VcbiAgICBnZXRJdGVtKGtleTogc3RyaW5nLCBlbmFibGVDb29raWVTdG9yYWdlPzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGlmIChlbmFibGVDb29raWVTdG9yYWdlICYmIHRoaXMuZ2V0SXRlbUNvb2tpZShrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJdGVtQ29va2llKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5nZXRJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHZhbHVlIGZyb20gc3RvcmFnZVxuICAgIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhciBzdG9yYWdlIChyZW1vdmUgYWxsIGl0ZW1zIGZyb20gaXQpXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIGlmICh3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0pIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFsbEFjY2Vzc1Rva2VucyhjbGllbnRJZDogc3RyaW5nLCB1c2VySWRlbnRpZmllcjogc3RyaW5nKTogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogQXJyYXk8QWNjZXNzVG9rZW5DYWNoZUl0ZW0+ID0gW107XG4gICAgICAgIGxldCBhY2Nlc3NUb2tlbkNhY2hlSXRlbTogQWNjZXNzVG9rZW5DYWNoZUl0ZW07XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB3aW5kb3dbdGhpcy5fY2FjaGVMb2NhdGlvbl07XG4gICAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICAgICBsZXQga2V5OiBzdHJpbmc7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBzdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKGNsaWVudElkKSAmJiBrZXkubWF0Y2godXNlcklkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuQ2FjaGVJdGVtID0gbmV3IEFjY2Vzc1Rva2VuQ2FjaGVJdGVtKEpTT04ucGFyc2Uoa2V5KSwgSlNPTi5wYXJzZSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChhY2Nlc3NUb2tlbkNhY2hlSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICByZW1vdmVBY3F1aXJlVG9rZW5FbnRyaWVzKGF1dGhvcml0eUtleTogc3RyaW5nLCBhY3F1aXJlVG9rZW5Vc2VyS2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHdpbmRvd1t0aGlzLl9jYWNoZUxvY2F0aW9uXTtcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGxldCBrZXk6IHN0cmluZztcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoYXV0aG9yaXR5S2V5ICE9PSBcIlwiICYmIGtleS5pbmRleE9mKGF1dGhvcml0eUtleSkgPiAtMSkgfHwgKGFjcXVpcmVUb2tlblVzZXJLZXkgIT09IFwiXCIgJiYga2V5LmluZGV4T2YoYWNxdWlyZVRva2VuVXNlcktleSkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRDYWNoZUl0ZW1zKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gd2luZG93W3RoaXMuX2NhY2hlTG9jYXRpb25dO1xuICAgICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgICAgbGV0IGtleTogc3RyaW5nO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKENvbnN0YW50cy5tc2FsKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXRlbShrZXksIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihDb25zdGFudHMucmVuZXdTdGF0dXMpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJdGVtQ29va2llKGNOYW1lOiBzdHJpbmcsIGNWYWx1ZTogc3RyaW5nLCBleHBpcmVzPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHZhciBjb29raWVTdHIgPSBjTmFtZSArIFwiPVwiICsgY1ZhbHVlICsgXCI7XCI7XG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICB2YXIgZXhwaXJlVGltZSA9IHRoaXMuc2V0RXhwaXJhdGlvbkNvb2tpZShleHBpcmVzKTtcbiAgICAgICAgICAgIGNvb2tpZVN0ciArPSBcImV4cGlyZXM9XCIgKyBleHBpcmVUaW1lICsgXCI7XCI7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVTdHI7XG4gICAgfVxuXG4gICAgZ2V0SXRlbUNvb2tpZShjTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjTmFtZSArIFwiPVwiO1xuICAgICAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09PSBcIiBcIikge1xuICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBzZXRFeHBpcmF0aW9uQ29va2llKGNvb2tpZUxpZmU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBleHByID0gbmV3IERhdGUodG9kYXkuZ2V0VGltZSgpICsgY29va2llTGlmZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICByZXR1cm4gZXhwci50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIGNsZWFyQ29va2llKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLm5vbmNlSWRUb2tlbiwgXCJcIiwgLTEpO1xuICAgICAgICB0aGlzLnNldEl0ZW1Db29raWUoQ29uc3RhbnRzLnN0YXRlTG9naW4sIFwiXCIsIC0xKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5sb2dpblJlcXVlc3QsIFwiXCIsIC0xKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtQ29va2llKENvbnN0YW50cy5zdGF0ZUFjcXVpcmVUb2tlbiwgXCJcIiwgLTEpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb25cbiAqICBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiAgTUlUIExpY2Vuc2VcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SU1xuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVFxuICogT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyBBY2Nlc3NUb2tlbktleSB9IGZyb20gXCIuL0FjY2Vzc1Rva2VuS2V5XCI7XG5pbXBvcnQgeyBBY2Nlc3NUb2tlblZhbHVlIH0gZnJvbSBcIi4vQWNjZXNzVG9rZW5WYWx1ZVwiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVG9rZW5DYWNoZUl0ZW0ge1xuXG4gIGtleTogQWNjZXNzVG9rZW5LZXk7XG4gIHZhbHVlOiBBY2Nlc3NUb2tlblZhbHVlO1xuXG4gIGNvbnN0cnVjdG9yKGtleTogQWNjZXNzVG9rZW5LZXksIHZhbHVlOiBBY2Nlc3NUb2tlblZhbHVlKSB7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuLypcbiAqIEBoaWRkZW5cbiAqL1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IHsgQWFkQXV0aG9yaXR5IH0gZnJvbSBcIi4vQWFkQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBCMmNBdXRob3JpdHkgfSBmcm9tIFwiLi9CMmNBdXRob3JpdHlcIjtcbmltcG9ydCB7IEF1dGhvcml0eSwgQXV0aG9yaXR5VHlwZSB9IGZyb20gXCIuL0F1dGhvcml0eVwiO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4vRXJyb3JNZXNzYWdlXCI7XG5cbmV4cG9ydCBjbGFzcyBBdXRob3JpdHlGYWN0b3J5IHtcbiAgICAvKlxuICAgICogUGFyc2UgdGhlIHVybCBhbmQgZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGF1dGhvcml0eVxuICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgRGV0ZWN0QXV0aG9yaXR5RnJvbVVybChhdXRob3JpdHlVcmw6IHN0cmluZyk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICBhdXRob3JpdHlVcmwgPSBVdGlscy5DYW5vbmljYWxpemVVcmkoYXV0aG9yaXR5VXJsKTtcbiAgICAgICAgbGV0IGNvbXBvbmVudHMgPSBVdGlscy5HZXRVcmxDb21wb25lbnRzKGF1dGhvcml0eVVybCk7XG4gICAgICAgIGxldCBwYXRoU2VnbWVudHMgPSBjb21wb25lbnRzLlBhdGhTZWdtZW50cztcbiAgICAgICAgc3dpdGNoIChwYXRoU2VnbWVudHNbMF0pIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZnBcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5CMkM7XG4gICAgICAgICAgICBjYXNlIFwiYWRmc1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkFkZnM7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkFhZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgKiBDcmVhdGUgYW4gYXV0aG9yaXR5IG9iamVjdCBvZiB0aGUgY29ycmVjdCB0eXBlIGJhc2VkIG9uIHRoZSB1cmxcbiAgICAqIFBlcmZvcm1zIGJhc2ljIGF1dGhvcml0eSB2YWxpZGF0aW9uIC0gY2hlY2tzIHRvIHNlZSBpZiB0aGUgYXV0aG9yaXR5IGlzIG9mIGEgdmFsaWQgdHlwZSAoZWcgYWFkLCBiMmMpXG4gICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIENyZWF0ZUluc3RhbmNlKGF1dGhvcml0eVVybDogc3RyaW5nLCB2YWxpZGF0ZUF1dGhvcml0eTogYm9vbGVhbik6IEF1dGhvcml0eSB7XG4gICAgICAgIGlmIChVdGlscy5pc0VtcHR5KGF1dGhvcml0eVVybCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0eXBlID0gQXV0aG9yaXR5RmFjdG9yeS5EZXRlY3RBdXRob3JpdHlGcm9tVXJsKGF1dGhvcml0eVVybCk7XG4gICAgICAgIC8vIERlcGVuZGluZyBvbiBhYm92ZSBkZXRlY3Rpb24sIGNyZWF0ZSB0aGUgcmlnaHQgdHlwZS5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEF1dGhvcml0eVR5cGUuQjJDOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQjJjQXV0aG9yaXR5KGF1dGhvcml0eVVybCwgdmFsaWRhdGVBdXRob3JpdHkpO1xuICAgICAgICAgICAgY2FzZSBBdXRob3JpdHlUeXBlLkFhZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFhZEF1dGhvcml0eShhdXRob3JpdHlVcmwsIHZhbGlkYXRlQXV0aG9yaXR5KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3JNZXNzYWdlLmludmFsaWRBdXRob3JpdHlUeXBlO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogIE1JVCBMaWNlbnNlXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlXG4gKiB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICogY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcbiAqIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQWFkQXV0aG9yaXR5IH0gZnJvbSBcIi4vQWFkQXV0aG9yaXR5XCI7XG5pbXBvcnQgeyBBdXRob3JpdHksIEF1dGhvcml0eVR5cGUgfSBmcm9tIFwiLi9BdXRob3JpdHlcIjtcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gXCIuL0Vycm9yTWVzc2FnZVwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xuXG4vKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQjJjQXV0aG9yaXR5IGV4dGVuZHMgQWFkQXV0aG9yaXR5IHtcbiAgcHVibGljIGNvbnN0cnVjdG9yKGF1dGhvcml0eTogc3RyaW5nLCB2YWxpZGF0ZUF1dGhvcml0eTogYm9vbGVhbikge1xuICAgIHN1cGVyKGF1dGhvcml0eSwgdmFsaWRhdGVBdXRob3JpdHkpO1xuICAgIGxldCB1cmxDb21wb25lbnRzID0gVXRpbHMuR2V0VXJsQ29tcG9uZW50cyhhdXRob3JpdHkpO1xuXG4gICAgbGV0IHBhdGhTZWdtZW50cyA9IHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xuICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoIDwgMykge1xuICAgICAgICB0aHJvdyBFcnJvck1lc3NhZ2UuYjJjQXV0aG9yaXR5VXJpSW52YWxpZFBhdGg7XG4gICAgfVxuXG4gICAgdGhpcy5DYW5vbmljYWxBdXRob3JpdHkgPSBgaHR0cHM6Ly8ke3VybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0fS8ke3BhdGhTZWdtZW50c1swXX0vJHtwYXRoU2VnbWVudHNbMV19LyR7cGF0aFNlZ21lbnRzWzJdfS9gO1xuICB9XG5cbiAgcHVibGljIGdldCBBdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGUge1xuICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkIyQztcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIFRlbmFudERpc2NvdmVyeUVuZHBvaW50XG4gICAqL1xuICBwdWJsaWMgR2V0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50QXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgIHJlc29sdmUodGhpcy5EZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KSk7XG5cbiAgICBpZiAoIXRoaXMuSXNWYWxpZGF0aW9uRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuSXNJblRydXN0ZWRIb3N0TGlzdCh0aGlzLkNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgIHJlamVjdChFcnJvck1lc3NhZ2UudW5zdXBwb3J0ZWRBdXRob3JpdHlWYWxpZGF0aW9uKSk7XG4gIH1cbn1cbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvblxyXG4gKiAgQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4gKiAgTUlUIExpY2Vuc2VcclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXHJcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcclxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxyXG4gKiBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXHJcbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAqIGNvbmRpdGlvbnM6XHJcbiAqXHJcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4gKlxyXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlNcclxuICogT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxyXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUXHJcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vTG9nZ2VyXCI7XHJcblxyXG4vLyBtYWtlIENhY2hlU3RvcmFnZSBhIGZpeGVkIHR5cGUgdG8gbGltaXQgaXQgdG8gc3BlY2lmaWMgaW5wdXRzXHJcbnR5cGUgc3RvcmFnZSA9IFwibG9jYWxTdG9yYWdlXCIgfCBcInNlc3Npb25TdG9yYWdlXCI7XHJcblxyXG4vKipcclxuICogQXV0aGVudGljYXRpb24gT3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgVEF1dGhPcHRpb25zID0ge1xyXG5cclxuICAvKipcclxuICAgKiBDbGllbnQgSUQgYXNzaWduZWQgdG8geW91ciBhcHAgYnkgQXp1cmUgQWN0aXZlIERpcmVjdG9yeS5cclxuICAgKi9cclxuICBjbGllbnRJZDogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBGb2xsb3cgdXAgd2l0aCB0aGUgYXV0aG9yaXR5IGRpc2N1c3Npb24gd2l0aCB0aGUgUE1zXHJcbiAgICogVW50aWwgdGhlbiB0aGlzIGlzIGEgcGxhY2Vob2xkZXJcclxuICAgKi9cclxuICBhdXRob3JpdHk/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gdHVybiBhdXRob3JpdHkgdmFsaWRhdGlvbiBvbi9vZmYuXHJcbiAgICogV2hlbiBzZXQgdG8gdHJ1ZSAoZGVmYXVsdCksIE1TQUwgd2lsbCBjb21wYXJlIHRoZSBhcHBsaWNhdGlvblwicyBhdXRob3JpdHkgYWdhaW5zdCB3ZWxsLWtub3duIFVSTHMgdGVtcGxhdGVzIHJlcHJlc2VudGluZyB3ZWxsLWZvcm1lZCBhdXRob3JpdGllcy4gSXQgaXMgdXNlZnVsIHdoZW4gdGhlIGF1dGhvcml0eSBpcyBvYnRhaW5lZCBhdCBydW4gdGltZSB0byBwcmV2ZW50IE1TQUwgZnJvbSBkaXNwbGF5aW5nIGF1dGhlbnRpY2F0aW9uIHByb21wdHMgZnJvbSBtYWxpY2lvdXMgcGFnZXMuXHJcbiAgICovXHJcbiAgdmFsaWRhdGVBdXRob3JpdHk/OiBib29sZWFuO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgcmVkaXJlY3QgVVJJIG9mIHRoZSBhcHBsaWNhdGlvbiwgdGhpcyBzaG91bGQgYmUgc2FtZSBhcyB0aGUgdmFsdWUgaW4gdGhlIGFwcGxpY2F0aW9uIHJlZ2lzdHJhdGlvbiBwb3J0YWwuXHJcbiAgICogRGVmYXVsdHMgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cclxuICAgKi9cclxuICByZWRpcmVjdFVyaT86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xyXG5cclxuICAvKipcclxuICAgKiBVc2VkIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoaXMgbG9jYXRpb24gYWZ0ZXIgbG9nb3V0LlxyXG4gICAqIERlZmF1bHRzIHRvIGB3aW5kb3cubG9jYXRpb24uaHJlZmAuXHJcbiAgICovXHJcbiAgcG9zdExvZ291dFJlZGlyZWN0VXJpPzogc3RyaW5nIHwgKCgpID0+IHN0cmluZyk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZSB0byBzZW5kIHRoZSBzdGF0ZSBwYXJhbWV0ZXIgd2l0aCBhdXRoZW50aWNhdGlvbiByZXF1ZXN0XHJcbiAgICovXHJcbiAgc3RhdGU/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gdHVybiBvZmYgZGVmYXVsdCBuYXZpZ2F0aW9uIHRvIHN0YXJ0IHBhZ2UgYWZ0ZXIgbG9naW4uIERlZmF1bHQgaXMgdHJ1ZS4gVGhpcyBpcyB1c2VkIG9ubHkgZm9yIHJlZGlyZWN0IGZsb3dzLlxyXG4gICAqL1xyXG4gIG5hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmw/OiBib29sZWFuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhY2hlIE9wdGlvbnNcclxuICovXHJcbmV4cG9ydCB0eXBlIFRDYWNoZU9wdGlvbnMgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIHNwZWNpZnkgdGhlIGNhY2hlTG9jYXRpb24gdXNlciB3YW50cyB0byBzZXQ6IFZhbGlkIHZhbHVlcyBhcmUgXCJsb2NhbFN0b3JhZ2VcIiBhbmQgXCJzZXNzaW9uU3RvcmFnZVwiXHJcbiAgICAgKi9cclxuICAgIGNhY2hlTG9jYXRpb24/OiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiBzZXQsIHRoZSBsaWJyYXJ5IHdpbGwgc3RvcmUgdGhlIGF1dGggcmVxdWVzdCBzdGF0ZSByZXF1aXJlZCBmb3IgdmFsaWRhdGlvbiBvZiB0aGUgYXV0aCBmbG93cyBpbiB0aGUgYnJvd3NlciBjb29raWVzLiBCeSBkZWZhdWx0IHRoaXMgZmxhZyBpcyBzZXQgdG8gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIHN0b3JlQXV0aFN0YXRlSW5Db29raWU/OiBib29sZWFuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIExpYnJhcnkgU3BlY2lmaWMgT3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgVFN5c3RlbU9wdGlvbnMgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGluaXRpYWxpemUgdGhlIExvZ2dlciBvYmplY3Q7XHJcbiAgICAgKiBUT0RPOiBFeHBhbmQgb24gbG9nZ2VyIGRldGFpbHNcclxuICAgICAqL1xyXG4gICAgbG9nZ2VyPzogTG9nZ2VyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWF4aW11bSB0aW1lIHRoZSBsaWJyYXJ5IHNob3VsZCB3YWl0IGZvciBhIGZyYW1lIHRvIGxvYWRcclxuICAgICAqL1xyXG4gICAgbG9hZEZyYW1lVGltZW91dD86IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHNldHMgdGhlIHdpbmRvdyBvZiBvZmZzZXQgbmVlZGVkIHRvIHJlbmV3IHRoZSB0b2tlbiBiZWZvcmUgZXhwaXJ5P1xyXG4gICAgICogVE9ETzogR2V0IHRoZSBleGFjdCBkZXNjcmlwdGlvbiBmb3IgdGhpcyB2YXJpYWJsZVxyXG4gICAgICogVE9ETzogQ2xhcmlmeSBjbG9ja1NrZXcsIHdlIG1heSBuZWVkIGNsb2NrU2tldyB0b28gd2hpY2ggc2VydmVzIGEgZGlmZmVyZW50IHB1cnBvc2UgKHJlZjogQWFzaGltYSdzIGRpc2N1c3Npb24pXHJcbiAgICAgKi9cclxuICAgIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHM/OiBudW1iZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogQXBwL0ZyYW1ld29yayBzcGVjaWZpYyBlbnZpcm9ubWVudCBTdXBwb3J0XHJcbiAqL1xyXG5leHBvcnQgdHlwZSBURnJhbWV3b3JrT3B0aW9ucyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGZsYWcgc2V0IHRvIGRldGVybWluZSBpZiBpdCBpcyBBbmd1bGFyIEZyYW1ld29ya1xyXG4gICAgICovXHJcbiAgICBpc0FuZ3VsYXI/OiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2YgVVJJJ3Mgd2hpY2ggYXJlIHVucHJvdGVjdGVkIHJlc291cmNlcy4gTVNBTCB3aWxsIG5vdCBhdHRhY2ggYSB0b2tlbiB0byBvdXRnb2luZyByZXF1ZXN0cyB0aGF0IGhhdmUgdGhlc2UgVVJJLiBEZWZhdWx0cyB0byAnbnVsbCcuXHJcbiAgICAgKi9cclxuICAgIHVucHJvdGVjdGVkUmVzb3VyY2VzPzogQXJyYXk8c3RyaW5nPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgbWFwcGluZyBvZiByZXNvdXJjZXMgdG8gc2NvcGVzIHVzZWQgYnkgTVNBTCBmb3IgYXV0b21hdGljYWxseSBhdHRhY2hpbmcgYWNjZXNzIHRva2VucyBpbiB3ZWIgQVBJIGNhbGxzLlxyXG4gICAgICogQSBzaW5nbGUgYWNjZXNzIHRva2VuIGlzIG9idGFpbmVkIGZvciB0aGUgcmVzb3VyY2UuIFNvIHlvdSBjYW4gbWFwIGEgc3BlY2lmaWMgcmVzb3VyY2UgcGF0aCBhcyBmb2xsb3dzOlxyXG4gICAgICoge1wiaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWVcIiwgW1widXNlci5yZWFkXCJdfSwgb3IgdGhlIGFwcCBVUkwgb2YgdGhlIHJlc291cmNlIGFzOiB7XCJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vXCIsIFtcInVzZXIucmVhZFwiLCBcIm1haWwuc2VuZFwiXX0uXHJcbiAgICAgKiBUaGlzIGlzIHJlcXVpcmVkIGZvciBDT1JTIGNhbGxzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWRSZXNvdXJjZU1hcD86IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyYXRpb24gT2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUQ29uZmlndXJhdGlvbiA9IHtcclxuICAgIGF1dGg6IFRBdXRoT3B0aW9ucyxcclxuICAgIGNhY2hlPzogVENhY2hlT3B0aW9ucyxcclxuICAgIHN5c3RlbT86IFRTeXN0ZW1PcHRpb25zLFxyXG4gICAgZnJhbWV3b3JrPzogVEZyYW1ld29ya09wdGlvbnNcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5jdGlvbiB0byBzZXQgdGhlIGRlZmF1bHQgb3B0aW9ucyB3aGVuIG5vdCBleHBsaWNpdGx5IHNldFxyXG4gKlxyXG4gKiBAcGFyYW0gVEF1dGhPcHRpb25zXHJcbiAqIEBwYXJhbSBUQ2FjaGVPcHRpb25zXHJcbiAqIEBwYXJhbSBUU3lzdGVtT3B0aW9uc1xyXG4gKiBAcGFyYW0gVEZyYW1ld29ya09wdGlvbnNcclxuICpcclxuICogQHJldHVybnMgVENvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gQ29uZmlndXJhdGlvbihcclxuICAgIC8vIGRlc3RydWN0dXJlIHdpdGggZGVmYXVsdCBzZXR0aW5nXHJcbiAgICB7IGNsaWVudElkID0gXCJcIiwgYXV0aG9yaXR5ID0gbnVsbCwgdmFsaWRhdGVBdXRob3JpdHkgPSB0cnVlLCByZWRpcmVjdFVyaSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIiNcIilbMF0sIHBvc3RMb2dvdXRSZWRpcmVjdFVyaSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIiNcIilbMF0sIHN0YXRlID0gXCJcIiwgbmF2aWdhdGVUb0xvZ2luUmVxdWVzdFVybCA9IHRydWUgfTogVEF1dGhPcHRpb25zID0ge2NsaWVudElkfSxcclxuICAgIHsgY2FjaGVMb2NhdGlvbiA9IFwibG9jYWxTdG9yYWdlXCIsIHN0b3JlQXV0aFN0YXRlSW5Db29raWUgPSBmYWxzZSB9OiBUQ2FjaGVPcHRpb25zID0ge30sXHJcbiAgICB7IGxvYWRGcmFtZVRpbWVvdXQgPSA2MDAwLCB0b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzID0gMzAwIH06IFRTeXN0ZW1PcHRpb25zPSB7fSxcclxuICAgIHsgaXNBbmd1bGFyID0gZmFsc2UsIHVucHJvdGVjdGVkUmVzb3VyY2VzID0gbmV3IEFycmF5PHN0cmluZz4oKSwgcHJvdGVjdGVkUmVzb3VyY2VNYXAgPSBuZXcgTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj4oKSB9OiBURnJhbWV3b3JrT3B0aW9ucyA9IHt9XHJcbikge1xyXG4gICAgLy8gcmVzdHJ1Y3R1cmVcclxuICAgIGxldCBjb25maWcgPSB7XHJcbiAgICAgICAgYXV0aDogeyBjbGllbnRJZCwgYXV0aG9yaXR5LCB2YWxpZGF0ZUF1dGhvcml0eSwgcmVkaXJlY3RVcmksIHBvc3RMb2dvdXRSZWRpcmVjdFVyaSwgc3RhdGUsIG5hdmlnYXRlVG9Mb2dpblJlcXVlc3RVcmwgfSxcclxuICAgICAgICBjYWNoZTogeyBjYWNoZUxvY2F0aW9uLCBzdG9yZUF1dGhTdGF0ZUluQ29va2llIH0sXHJcbiAgICAgICAgc3lzdGVtOiB7IGxvYWRGcmFtZVRpbWVvdXQsIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMgfSxcclxuICAgICAgICBmcmFtZXdvcms6IHsgaXNBbmd1bGFyLCB1bnByb3RlY3RlZFJlc291cmNlcywgcHJvdGVjdGVkUmVzb3VyY2VNYXAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG59XHJcblxyXG4vKipcclxuICogVGVzdCBDb2RlXHJcbiAqIHZhciBjOlRDb25maWd1cmF0aW9uID0gQ29uZmlndXJhdGlvbih7Y2xpZW50SWQ6IFwiVGVzdENsaWVudCBcIn0sIHt9LCB7fSwge2lzQW5ndWxhcjogdHJ1ZX0pO1xyXG4gKiBjb25zb2xlLmxvZyhjKTtcclxuKi9cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==